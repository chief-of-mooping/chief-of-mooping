<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏à‡∏±‡∏¢‡πÄ‡∏ä‡∏¥‡∏á‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');
        
        body { 
            font-family: 'Inter', sans-serif; 
        }

        .card-3d {
            transition: all 0.3s ease;
            transform-style: preserve-3d;
        }

        .card-3d:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
        }

        .animated-bg {
            background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
            background-size: 400% 400%;
            animation: gradient 15s ease infinite;
        }

        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .glass {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .tab-active {
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            color: white;
        }

        .tab-inactive {
            background: rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.7);
        }

        .tab-inactive:hover {
            background: rgba(255, 255, 255, 0.2);
            color: white;
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="animated-bg">
    <div id="app"></div>
    <script>
// State Management
let currentState = {
    page: 'landing',
    topic: '',
    level: null,
    theory: null,
    activeTab: 'theory',
    activeSPSSGuide: 'descriptive',
    selectedDomain: null
};

// ‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏§‡∏©‡∏é‡∏µ (‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô)
const researchDatabase = {
    theories: {
        'tam': {
            id: 'tam',
            name: 'Technology Acceptance Model (TAM)',
            author: 'Davis (1989)',
            domain: 'digital_marketing',
            factors: ['Perceived Usefulness (PU)', 'Perceived Ease of Use (PEOU)', 'Attitude Toward Using', 'Behavioral Intention'],
            relationships: 'PU + PEOU ‚Üí Attitude ‚Üí Behavioral Intention ‚Üí Actual Use',
            prediction: '‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏£‡∏π‡πâ‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏á‡πà‡∏≤‡∏¢‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏à‡∏∞‡∏™‡πà‡∏á‡∏ú‡∏•‡∏ï‡πà‡∏≠‡∏ó‡∏±‡∏®‡∏ô‡∏Ñ‡∏ï‡∏¥‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏à‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ',
            keywords: ['technology', 'acceptance', 'digital', 'adoption', 'system', 'user', '‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ', '‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö', '‡∏£‡∏∞‡∏ö‡∏ö', '‡∏î‡∏¥‡∏à‡∏¥‡∏ó‡∏±‡∏•'],
            level: 2,
            statistics: ['Descriptive Statistics', 'Reliability Analysis', 'EFA', 'Multiple Regression'],
            description: '‡∏ó‡∏§‡∏©‡∏é‡∏µ‡∏ó‡∏µ‡πà‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏û‡∏§‡∏ï‡∏¥‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ ‡πÇ‡∏î‡∏¢‡πÄ‡∏ô‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏£‡∏π‡πâ‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏á‡πà‡∏≤‡∏¢‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô'
        },
        'tpb': {
            id: 'tpb',
            name: 'Theory of Planned Behavior (TPB)',
            author: 'Ajzen (1991)',
            domain: 'digital_marketing',
            factors: ['Attitude Toward Behavior', 'Subjective Norm', 'Perceived Behavioral Control', 'Behavioral Intention'],
            relationships: 'Attitude + Subjective Norm + PBC ‚Üí Behavioral Intention ‚Üí Behavior',
            prediction: '‡∏ó‡∏±‡∏®‡∏ô‡∏Ñ‡∏ï‡∏¥ ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ê‡∏≤‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡∏±‡∏á‡∏Ñ‡∏° ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏û‡∏§‡∏ï‡∏¥‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏£‡∏π‡πâ‡∏à‡∏∞‡∏™‡πà‡∏á‡∏ú‡∏•‡∏ï‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏à‡πÅ‡∏•‡∏∞‡∏û‡∏§‡∏ï‡∏¥‡∏Å‡∏£‡∏£‡∏°',
            keywords: ['behavior', 'intention', 'attitude', 'norm', 'control', '‡∏û‡∏§‡∏ï‡∏¥‡∏Å‡∏£‡∏£‡∏°', '‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏à', '‡∏ó‡∏±‡∏®‡∏ô‡∏Ñ‡∏ï‡∏¥'],
            level: 2,
            statistics: ['Descriptive Statistics', 'Reliability Analysis', 'EFA', 'SEM'],
            description: '‡∏ó‡∏§‡∏©‡∏é‡∏µ‡∏ó‡∏µ‡πà‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏à‡πÅ‡∏•‡∏∞‡∏û‡∏§‡∏ï‡∏¥‡∏Å‡∏£‡∏£‡∏°‡∏Ç‡∏≠‡∏á‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡∏ú‡πà‡∏≤‡∏ô‡∏ó‡∏±‡∏®‡∏ô‡∏Ñ‡∏ï‡∏¥‡∏ï‡πà‡∏≠‡∏û‡∏§‡∏ï‡∏¥‡∏Å‡∏£‡∏£‡∏° ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ê‡∏≤‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡∏±‡∏á‡∏Ñ‡∏° ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏û‡∏§‡∏ï‡∏¥‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏£‡∏π‡πâ'
        },
        'social_capital': {
            id: 'social_capital',
            name: 'Social Capital Theory',
            author: 'Coleman (1988), Bourdieu (1986)',
            domain: 'social_capital',
            factors: ['Structural Capital', 'Relational Capital', 'Cognitive Capital', 'Social Networks'],
            relationships: 'Structural + Relational + Cognitive ‚Üí Social Capital ‚Üí Performance Outcomes',
            prediction: '‡∏ó‡∏∏‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡∏±‡∏á‡∏Ñ‡∏°‡πÉ‡∏ô‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡∏à‡∏∞‡∏™‡πà‡∏á‡∏ú‡∏•‡∏ï‡πà‡∏≠‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡πÅ‡∏•‡∏∞‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏Ç‡∏≠‡∏á‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏£‡πÅ‡∏•‡∏∞‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•',
            keywords: ['social', 'capital', 'network', 'relationship', 'trust', '‡∏™‡∏±‡∏á‡∏Ñ‡∏°', '‡∏ó‡∏∏‡∏ô', '‡πÄ‡∏Ñ‡∏£‡∏∑‡∏≠‡∏Ç‡πà‡∏≤‡∏¢', '‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå'],
            level: 2,
            statistics: ['Descriptive Statistics', 'Reliability Analysis', 'EFA', 'Multiple Regression'],
            description: '‡∏ó‡∏§‡∏©‡∏é‡∏µ‡∏ó‡∏µ‡πà‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡πà‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏ó‡∏≤‡∏á‡∏™‡∏±‡∏á‡∏Ñ‡∏°‡πÅ‡∏•‡∏∞‡πÄ‡∏Ñ‡∏£‡∏∑‡∏≠‡∏Ç‡πà‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡∏ú‡∏•‡∏ï‡πà‡∏≠‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏ï‡πà‡∏≤‡∏á‡πÜ'
        }
    },
    
    levels: {
        1: {
            name: '‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô',
            steps: '3-5 ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô',
            description: '‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡πÉ‡∏´‡∏°‡πà‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏à‡∏±‡∏¢‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô',
            methods: ['Descriptive Statistics', 'Reliability Analysis', 'T-test/ANOVA', 'Correlation']
        },
        2: {
            name: '‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏•‡∏≤‡∏á',
            steps: '6-8 ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô',
            description: '‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏à‡∏±‡∏¢‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏õ‡∏£‡∏¥‡∏ç‡∏ç‡∏≤‡πÇ‡∏ó‡∏´‡∏£‡∏∑‡∏≠‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏ö‡πâ‡∏≤‡∏á',
            methods: ['Data Preparation', 'Descriptive', 'Reliability', 'EFA', 'Multiple Regression']
        },
        3: {
            name: '‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á',
            steps: '10-15 ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô',
            description: '‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏à‡∏±‡∏¢‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏õ‡∏£‡∏¥‡∏ç‡∏ç‡∏≤‡πÄ‡∏≠‡∏Å‡∏´‡∏£‡∏∑‡∏≠‡∏°‡∏∑‡∏≠‡∏≠‡∏≤‡∏ä‡∏µ‡∏û',
            methods: ['Data Screening', 'CMB Testing', 'EFA', 'CFA', 'SEM', 'Mediation/Moderation']
        }
    }
};
      // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏´‡∏•‡∏±‡∏Å
function selectDomain(domain) {
    currentState.selectedDomain = domain;
    
    // Update UI
    document.querySelectorAll('.domain-btn').forEach(btn => {
        btn.classList.remove('bg-white/30', 'border-yellow-400');
        btn.classList.add('bg-white/10', 'border-white/30');
    });
    
    event.target.closest('.domain-btn').classList.remove('bg-white/10', 'border-white/30');
    event.target.closest('.domain-btn').classList.add('bg-white/30', 'border-yellow-400');
    
    // Show selected domain
    const domainNames = {
        'digital_marketing': '‡∏Å‡∏≤‡∏£‡∏ï‡∏•‡∏≤‡∏î‡∏î‡∏¥‡∏à‡∏¥‡∏ó‡∏±‡∏•',
        'social_capital': '‡∏ó‡∏∏‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡∏±‡∏á‡∏Ñ‡∏°',
        'management': '‡∏Å‡∏≤‡∏£‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£',
        'finance': '‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô',
        'hr': '‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏°‡∏ô‡∏∏‡∏©‡∏¢‡πå'
    };
    
    document.getElementById('selected-domain').classList.remove('hidden');
    document.getElementById('domain-name').textContent = domainNames[domain];
}

function clearDomain() {
    currentState.selectedDomain = null;
    document.getElementById('selected-domain').classList.add('hidden');
    
    document.querySelectorAll('.domain-btn').forEach(btn => {
        btn.classList.remove('bg-white/30', 'border-yellow-400');
        btn.classList.add('bg-white/10', 'border-white/30');
    });
}

function setExample(text, domain = null) {
    document.getElementById('researchTopic').value = text;
    if (domain) {
        selectDomain(domain);
    }
}

function findRelevantTheories(topic) {
    const topicLower = topic.toLowerCase();
    const relevantTheories = [];

    Object.values(researchDatabase.theories).forEach(theory => {
        let score = 0;
        
        // ‡∏ñ‡πâ‡∏≤‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏Ç‡∏≤ ‡πÉ‡∏´‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©
        if (currentState.selectedDomain && theory.domain === currentState.selectedDomain) {
            score += 5;
        }
        
        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö keywords
        theory.keywords.forEach(keyword => {
            if (topicLower.includes(keyword.toLowerCase())) {
                score += 2;
            }
        });

        if (score > 0) {
            relevantTheories.push({ ...theory, score });
        }
    });

    // ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ó‡∏§‡∏©‡∏é‡∏µ‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô ‡πÉ‡∏´‡πâ‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏§‡∏©‡∏é‡∏µ‡∏¢‡∏≠‡∏î‡∏ô‡∏¥‡∏¢‡∏°
    if (relevantTheories.length === 0) {
        return [
            researchDatabase.theories.tam,
            researchDatabase.theories.tpb,
            researchDatabase.theories.social_capital
        ].map(theory => ({ ...theory, score: 1 }));
    }

    // ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏ï‡∏≤‡∏° score
    return relevantTheories
        .sort((a, b) => b.score - a.score)
        .slice(0, 3);
}

function analyzeTopic() {
    const topic = document.getElementById('researchTopic').value;
    if (topic.trim()) {
        currentState.topic = topic;
        currentState.page = 'level';
        render();
    } else {
        alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏ß‡∏¥‡∏à‡∏±‡∏¢ üìù');
    }
}

function selectLevel(level) {
    currentState.level = level;
    currentState.page = 'theory';
    render();
}

function selectTheory(theoryId) {
    currentState.theory = researchDatabase.theories[theoryId];
    currentState.page = 'results';
    render();
}

function restart() {
    currentState = {
        page: 'landing',
        topic: '',
        level: null,
        theory: null,
        activeTab: 'theory',
        activeSPSSGuide: 'descriptive',
        selectedDomain: null
    };
    render();
}
      // Landing Page
function renderLanding() {
    return `
        <div class="min-h-screen relative overflow-hidden fade-in">
            <div class="container mx-auto px-4 py-16 relative z-10">
                <div class="text-center mb-16">
                    <div class="text-8xl mb-6">üéì</div>
                    <h1 class="text-6xl font-extrabold text-white mb-6 drop-shadow-lg">
                        <span class="bg-gradient-to-r from-yellow-300 to-orange-300 bg-clip-text text-transparent">
                            ‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏à‡∏±‡∏¢
                        </span>
                        <br>
                        <span class="text-4xl font-bold text-white">‡πÄ‡∏ä‡∏¥‡∏á‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì</span>
                    </h1>
                    <p class="text-2xl text-white/90 font-medium drop-shadow-md">
                        Research Methodology Advisor - AI Powered
                    </p>
                    <p class="text-lg text-white/80 mt-2">
                        ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏ä‡πà‡∏ß‡∏¢‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏à‡∏±‡∏¢‡πÅ‡∏ö‡∏ö‡∏Ñ‡∏£‡∏ö‡∏ß‡∏á‡∏à‡∏£ 25+ ‡∏ó‡∏§‡∏©‡∏é‡∏µ 12 ‡∏™‡∏≤‡∏Ç‡∏≤‡∏ß‡∏¥‡∏ä‡∏≤
                    </p>
                </div>

                <div class="max-w-6xl mx-auto">
                    <div class="glass rounded-3xl shadow-2xl p-10 card-3d">
                        <h2 class="text-3xl font-bold text-white mb-8 text-center">
                            üîç ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏ß‡∏¥‡∏à‡∏±‡∏¢‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
                        </h2>

                        <!-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏Ç‡∏≤‡∏ß‡∏¥‡∏ä‡∏≤ -->
                        <div class="mb-8">
                            <label class="block text-white font-semibold mb-4 text-lg">
                                üéØ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏Ç‡∏≤‡∏ß‡∏¥‡∏ä‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì (‡∏ó‡∏≤‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å):
                            </label>
                            <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 mb-6">
                                <button onclick="selectDomain('digital_marketing')" 
                                        class="domain-btn bg-white/10 hover:bg-white/20 border border-white/30 rounded-xl p-3 text-center transition-all group">
                                    <div class="text-2xl mb-2 group-hover:scale-110 transition-transform">üì±</div>
                                    <div class="text-white font-medium text-sm">‡∏Å‡∏≤‡∏£‡∏ï‡∏•‡∏≤‡∏î‡∏î‡∏¥‡∏à‡∏¥‡∏ó‡∏±‡∏•</div>
                                </button>
                                <button onclick="selectDomain('social_capital')" 
                                        class="domain-btn bg-white/10 hover:bg-white/20 border border-white/30 rounded-xl p-3 text-center transition-all group">
                                    <div class="text-2xl mb-2 group-hover:scale-110 transition-transform">ü§ù</div>
                                    <div class="text-white font-medium text-sm">‡∏ó‡∏∏‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡∏±‡∏á‡∏Ñ‡∏°</div>
                                </button>
                                <button onclick="selectDomain('management')" 
                                        class="domain-btn bg-white/10 hover:bg-white/20 border border-white/30 rounded-xl p-3 text-center transition-all group">
                                    <div class="text-2xl mb-2 group-hover:scale-110 transition-transform">üè¢</div>
                                    <div class="text-white font-medium text-sm">‡∏Å‡∏≤‡∏£‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£</div>
                                </button>
                                <button onclick="selectDomain('finance')" 
                                        class="domain-btn bg-white/10 hover:bg-white/20 border border-white/30 rounded-xl p-3 text-center transition-all group">
                                    <div class="text-2xl mb-2 group-hover:scale-110 transition-transform">üí∞</div>
                                    <div class="text-white font-medium text-sm">‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô</div>
                                </button>
                                <button onclick="selectDomain('hr')" 
                                        class="domain-btn bg-white/10 hover:bg-white/20 border border-white/30 rounded-xl p-3 text-center transition-all group">
                                    <div class="text-2xl mb-2 group-hover:scale-110 transition-transform">üë•</div>
                                    <div class="text-white font-medium text-sm">‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏°‡∏ô‡∏∏‡∏©‡∏¢‡πå</div>
                                </button>
                            </div>
                            <div id="selected-domain" class="hidden">
                                <div class="bg-white/20 rounded-lg p-3 mb-4">
                                    <span class="text-white font-medium">‡∏™‡∏≤‡∏Ç‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å: </span>
                                    <span id="domain-name" class="text-yellow-200 font-bold"></span>
                                    <button onclick="clearDomain()" class="ml-2 text-red-300 hover:text-red-100">‚úï</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-8">
                            <label class="block text-white font-semibold mb-4 text-lg">
                                üí≠ ‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏ß‡∏¥‡∏à‡∏±‡∏¢‡∏´‡∏£‡∏∑‡∏≠‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏™‡∏ô‡πÉ‡∏à‡∏®‡∏∂‡∏Å‡∏©‡∏≤:
                            </label>
                            <textarea
                                id="researchTopic"
                                placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏±‡∏¢‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏ú‡∏•‡∏ï‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå‡∏Ç‡∏≠‡∏á‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤..."
                                class="w-full h-40 p-6 border-0 rounded-2xl focus:outline-none resize-none text-gray-800 text-lg"
                                style="background: rgba(255,255,255,0.9);"
                            ></textarea>
                        </div>

                        <button
                            onclick="analyzeTopic()"
                            class="w-full bg-gradient-to-r from-orange-500 to-pink-500 hover:from-orange-600 hover:to-pink-600 text-white font-bold py-4 px-8 rounded-2xl transition-all text-xl"
                        >
                            ‚ú® ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏ß‡∏¥‡∏à‡∏±‡∏¢‡∏î‡πâ‡∏ß‡∏¢ AI
                        </button>

                        <div class="mt-10">
                            <h3 class="text-xl font-bold text-white mb-6 text-center">
                                üéØ ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏ß‡∏¥‡∏à‡∏±‡∏¢‡∏¢‡∏≠‡∏î‡∏ô‡∏¥‡∏¢‡∏°
                            </h3>
                            <div class="grid gap-4">
                                <button onclick="setExample('‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏±‡∏¢‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏ú‡∏•‡∏ï‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå‡∏Ç‡∏≠‡∏á‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤', 'digital_marketing')" 
                                        class="text-left p-4 glass rounded-xl hover:bg-white/20 transition-all group">
                                    <div class="flex items-center gap-4">
                                        <span class="text-3xl group-hover:scale-110 transition-transform">üì±</span>
                                        <div>
                                            <span class="text-white font-medium">‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏±‡∏¢‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏ú‡∏•‡∏ï‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå‡∏Ç‡∏≠‡∏á‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤</span>
                                            <div class="text-yellow-200 text-sm mt-1">‡∏Å‡∏≤‡∏£‡∏ï‡∏•‡∏≤‡∏î‡∏î‡∏¥‡∏à‡∏¥‡∏ó‡∏±‡∏•</div>
                                        </div>
                                    </div>
                                </button>
                                <button onclick="setExample('‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏ó‡∏∏‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡∏±‡∏á‡∏Ñ‡∏°‡∏Å‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô', 'social_capital')" 
                                        class="text-left p-4 glass rounded-xl hover:bg-white/20 transition-all group">
                                    <div class="flex items-center gap-4">
                                        <span class="text-3xl group-hover:scale-110 transition-transform">ü§ù</span>
                                        <div>
                                            <span class="text-white font-medium">‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏ó‡∏∏‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡∏±‡∏á‡∏Ñ‡∏°‡∏Å‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô</span>
                                            <div class="text-yellow-200 text-sm mt-1">‡∏ó‡∏∏‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡∏±‡∏á‡∏Ñ‡∏°</div>
                                        </div>
                                    </div>
                                </button>
                                <button onclick="setExample('‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏•‡∏≤‡∏î‡∏î‡∏¥‡∏à‡∏¥‡∏ó‡∏±‡∏•‡∏ï‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏à‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡∏ö‡∏£‡∏¥‡πÇ‡∏†‡∏Ñ', 'digital_marketing')" 
                                        class="text-left p-4 glass rounded-xl hover:bg-white/20 transition-all group">
                                    <div class="flex items-center gap-4">
                                        <span class="text-3xl group-hover:scale-110 transition-transform">üõí</span>
                                        <div>
                                            <span class="text-white font-medium">‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏•‡∏≤‡∏î‡∏î‡∏¥‡∏à‡∏¥‡∏ó‡∏±‡∏•‡∏ï‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏à‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡∏ö‡∏£‡∏¥‡πÇ‡∏†‡∏Ñ</span>
                                            <div class="text-yellow-200 text-sm mt-1">‡∏Å‡∏≤‡∏£‡∏ï‡∏•‡∏≤‡∏î‡∏î‡∏¥‡∏à‡∏¥‡∏ó‡∏±‡∏•</div>
                                        </div>
                                    </div>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    `;
}
      // Level Selection
function renderLevelSelection() {
    return `
        <div class="min-h-screen relative overflow-hidden fade-in">
            <div class="container mx-auto px-4 py-12 relative z-10">
                <div class="text-center mb-12">
                    <h1 class="text-5xl font-extrabold text-white mb-6 drop-shadow-lg">
                        üéØ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô
                    </h1>
                    <div class="glass rounded-2xl p-6 max-w-4xl mx-auto">
                        <p class="text-white/90 mb-3 text-lg">üìù ‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏ß‡∏¥‡∏à‡∏±‡∏¢‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì:</p>
                        <p class="text-white font-bold text-xl">${currentState.topic}</p>
                    </div>
                </div>

                <div class="max-w-7xl mx-auto">
                    <div class="grid md:grid-cols-3 gap-8">
                        <!-- Level 1 -->
                        <div class="bg-gradient-to-br from-green-400 to-blue-500 rounded-3xl p-8 card-3d">
                            <div class="text-center mb-6">
                                <div class="text-6xl mb-4">üìä</div>
                                <h3 class="text-3xl font-bold text-white mb-2">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô</h3>
                                <div class="bg-white/30 rounded-full px-4 py-2 inline-block">
                                    <span class="font-bold text-white">BEGINNER</span>
                                </div>
                            </div>
                            
                            <div class="space-y-4 mb-8">
                                <div class="bg-white/20 rounded-xl p-4">
                                    <span class="text-white font-semibold">‚è±Ô∏è ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô: 3-5 ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô</span>
                                </div>
                                <div class="bg-white/20 rounded-xl p-4">
                                    <span class="text-white font-semibold">üìÖ ‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤: 2-3 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</span>
                                </div>
                                <div class="bg-white/20 rounded-xl p-4">
                                    <span class="text-white font-semibold">üéì ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö: ‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏õ‡∏£‡∏¥‡∏ç‡∏ç‡∏≤‡∏ï‡∏£‡∏µ</span>
                                </div>
                                <div class="bg-white/20 rounded-xl p-4">
                                    <span class="text-white font-semibold">üìä ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£: ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô</span>
                                </div>
                            </div>
                            
                            <button onclick="selectLevel(1)" 
                                    class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-4 px-6 rounded-2xl transition-all text-lg">
                                ‚úÖ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ô‡∏µ‡πâ
                            </button>
                        </div>

                        <!-- Level 2 -->
                        <div class="bg-gradient-to-br from-blue-400 to-purple-500 rounded-3xl p-8 card-3d">
                            <div class="text-center mb-6">
                                <div class="text-6xl mb-4">üìà</div>
                                <h3 class="text-3xl font-bold text-white mb-2">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏•‡∏≤‡∏á</h3>
                                <div class="bg-white/30 rounded-full px-4 py-2 inline-block">
                                    <span class="font-bold text-white">INTERMEDIATE</span>
                                </div>
                            </div>
                            
                            <div class="space-y-4 mb-8">
                                <div class="bg-white/20 rounded-xl p-4">
                                    <span class="text-white font-semibold">‚è±Ô∏è ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô: 6-8 ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô</span>
                                </div>
                                <div class="bg-white/20 rounded-xl p-4">
                                    <span class="text-white font-semibold">üìÖ ‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤: 4-6 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</span>
                                </div>
                                <div class="bg-white/20 rounded-xl p-4">
                                    <span class="text-white font-semibold">üéì ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö: ‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏õ‡∏£‡∏¥‡∏ç‡∏ç‡∏≤‡πÇ‡∏ó</span>
                                </div>
                                <div class="bg-white/20 rounded-xl p-4">
                                    <span class="text-white font-semibold">üìä ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£: EFA + Regression</span>
                                </div>
                            </div>
                            
                            <button onclick="selectLevel(2)" 
                                    class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 px-6 rounded-2xl transition-all text-lg">
                                ‚úÖ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ô‡∏µ‡πâ
                            </button>
                        </div>

                        <!-- Level 3 -->
                        <div class="bg-gradient-to-br from-purple-400 to-pink-500 rounded-3xl p-8 card-3d">
                            <div class="text-center mb-6">
                                <div class="text-6xl mb-4">üéØ</div>
                                <h3 class="text-3xl font-bold text-white mb-2">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á</h3>
                                <div class="bg-white/30 rounded-full px-4 py-2 inline-block">
                                    <span class="font-bold text-white">ADVANCED</span>
                                </div>
                            </div>
                            
                            <div class="space-y-4 mb-8">
                                <div class="bg-white/20 rounded-xl p-4">
                                    <span class="text-white font-semibold">‚è±Ô∏è ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô: 10-15 ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô</span>
                                </div>
                                <div class="bg-white/20 rounded-xl p-4">
                                    <span class="text-white font-semibold">üìÖ ‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤: 8-12 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</span>
                                </div>
                                <div class="bg-white/20 rounded-xl p-4">
                                    <span class="text-white font-semibold">üéì ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö: ‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏õ‡∏£‡∏¥‡∏ç‡∏ç‡∏≤‡πÄ‡∏≠‡∏Å</span>
                                </div>
                                <div class="bg-white/20 rounded-xl p-4">
                                    <span class="text-white font-semibold">üìä ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£: CFA + SEM</span>
                                </div>
                            </div>
                            
                            <button onclick="selectLevel(3)" 
                                    class="w-full bg-purple-600 hover:bg-purple-700 text-white font-bold py-4 px-6 rounded-2xl transition-all text-lg">
                                ‚úÖ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ô‡∏µ‡πâ
                            </button>
                        </div>
                    </div>
                </div>

                <div class="text-center mt-12">
                    <button onclick="restart()" 
                            class="glass text-white font-semibold py-3 px-8 rounded-2xl transition-all">
                        ‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÇ‡∏à‡∏ó‡∏¢‡πå
                    </button>
                </div>
            </div>
        </div>
    `;
}
      // Theory Selection
function renderTheorySelection() {
    const relevantTheories = findRelevantTheories(currentState.topic);
    
    return `
        <div class="min-h-screen relative overflow-hidden fade-in">
            <div class="container mx-auto px-4 py-8 relative z-10">
                <div class="max-w-6xl mx-auto">
                    <div class="text-center mb-8">
                        <h1 class="text-3xl font-bold text-white mb-4 drop-shadow-lg">
                            üß† ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏§‡∏©‡∏é‡∏µ‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏à‡∏±‡∏¢
                        </h1>
                        <div class="glass rounded-lg p-4 shadow-sm">
                            <p class="text-white/90 mb-2">‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏ß‡∏¥‡∏à‡∏±‡∏¢: <span class="font-medium text-white">${currentState.topic}</span></p>
                            <p class="text-white/90">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å: <span class="font-medium text-white">‡∏£‡∏∞‡∏î‡∏±‡∏ö ${currentState.level}</span></p>
                        </div>
                    </div>

                    <div class="grid gap-6">
                        ${relevantTheories.map((theory) => `
                            <div class="bg-white rounded-2xl border-2 border-gray-200 p-6 transition-all duration-200 hover:shadow-lg card-3d theory-card">
                                <div class="flex justify-between items-start mb-4">
                                    <div>
                                        <h3 class="text-xl font-bold text-gray-800 mb-2">${theory.name}</h3>
                                        <p class="text-gray-600">‡∏ú‡∏π‡πâ‡∏û‡∏±‡∏í‡∏ô‡∏≤: ${theory.author}</p>
                                    </div>
                                    <div class="flex gap-2">
                                        <span class="px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800">
                                            ‡∏£‡∏∞‡∏î‡∏±‡∏ö ${theory.level === 1 ? '‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô' : theory.level === 2 ? '‡∏Å‡∏•‡∏≤‡∏á' : '‡∏™‡∏π‡∏á'}
                                        </span>
                                        <span class="px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800">
                                            ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: ${theory.score}
                                        </span>
                                    </div>
                                </div>

                                <p class="text-gray-700 mb-4">${theory.description}</p>

                                <div class="grid md:grid-cols-2 gap-4 mb-6">
                                    <div>
                                        <h4 class="font-semibold text-gray-800 mb-2">üéØ ‡∏õ‡∏±‡∏à‡∏à‡∏±‡∏¢‡∏´‡∏•‡∏±‡∏Å:</h4>
                                        <ul class="text-sm text-gray-600 space-y-1">
                                            ${theory.factors.map(factor => `
                                                <li class="flex items-center">
                                                    <span class="w-2 h-2 bg-amber-400 rounded-full mr-2"></span>
                                                    ${factor}
                                                </li>
                                            `).join('')}
                                        </ul>
                                    </div>
                                    <div>
                                        <h4 class="font-semibold text-gray-800 mb-2">üìä ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå:</h4>
                                        <ul class="text-sm text-gray-600 space-y-1">
                                            ${theory.statistics.map(stat => `
                                                <li class="flex items-center">
                                                    <span class="w-2 h-2 bg-blue-400 rounded-full mr-2"></span>
                                                    ${stat}
                                                </li>
                                            `).join('')}
                                        </ul>
                                    </div>
                                </div>

                                <div class="bg-gray-50 rounded-lg p-4 mb-4">
                                    <h4 class="font-semibold text-gray-800 mb-2">üîó ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£:</h4>
                                    <p class="text-sm text-gray-700 font-mono bg-white p-2 rounded border">
                                        ${theory.relationships}
                                    </p>
                                </div>

                                <div class="bg-amber-50 rounded-lg p-4 mb-4">
                                    <h4 class="font-semibold text-amber-800 mb-2">üí° ‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≤‡∏î‡∏Å‡∏≤‡∏£‡∏ì‡πå:</h4>
                                    <p class="text-sm text-amber-700">${theory.prediction}</p>
                                </div>

                                <button onclick="selectTheory('${theory.id}')" 
                                        class="w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-all">
                                    ‚úÖ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏§‡∏©‡∏é‡∏µ‡∏ô‡∏µ‡πâ
                                </button>
                            </div>
                        `).join('')}
                    </div>

                    <div class="text-center mt-8">
                        <button onclick="goToLevel()" 
                                class="glass text-white font-semibold py-3 px-8 rounded-2xl transition-all">
                            ‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö
                        </button>
                    </div>
                </div>
            </div>
        </div>
    `;
}

function goToLevel() {
    currentState.page = 'level';
    render();
}
      // Results Page with Tab System
function renderResults() {
    return `
        <div class="min-h-screen relative overflow-hidden fade-in">
            <div class="container mx-auto px-4 py-8 relative z-10">
                <div class="max-w-7xl mx-auto">
                    <!-- Header -->
                    <div class="glass rounded-lg p-6 shadow-sm mb-6">
                        <h1 class="text-3xl font-bold text-white mb-4">
                            üéâ ‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏à‡∏±‡∏¢‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
                        </h1>
                        <div class="grid md:grid-cols-3 gap-4 text-sm">
                            <div>
                                <span class="text-white/90">‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏ß‡∏¥‡∏à‡∏±‡∏¢:</span>
                                <p class="font-medium text-white">${currentState.topic}</p>
                            </div>
                            <div>
                                <span class="text-white/90">‡∏£‡∏∞‡∏î‡∏±‡∏ö:</span>
                                <p class="font-medium text-white">‡∏£‡∏∞‡∏î‡∏±‡∏ö ${currentState.level}</p>
                            </div>
                            <div>
                                <span class="text-white/90">‡∏ó‡∏§‡∏©‡∏é‡∏µ:</span>
                                <p class="font-medium text-white">${currentState.theory.name}</p>
                            </div>
                        </div>
                        <div class="mt-4 flex gap-3">
                            <button onclick="exportPDF()" 
                                    class="bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors flex items-center gap-2">
                                üìÑ Export PDF
                            </button>
                            <button onclick="restart()" 
                                    class="bg-gray-600 hover:bg-gray-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors">
                                üîÑ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà
                            </button>
                        </div>
                    </div>

                    <!-- Tab Navigation -->
                    <div class="glass rounded-lg shadow-sm mb-6">
                        <div class="flex border-b border-white/20">
                            <button onclick="switchTab('theory')" 
                                    class="flex-1 py-4 px-6 text-center font-medium transition-colors tab-active" 
                                    data-tab="theory">
                                <div class="flex items-center justify-center gap-2">
                                    <span class="text-lg">üìö</span>
                                    <span>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏§‡∏©‡∏é‡∏µ</span>
                                </div>
                            </button>
                            <button onclick="switchTab('research')" 
                                    class="flex-1 py-4 px-6 text-center font-medium transition-colors tab-inactive" 
                                    data-tab="research">
                                <div class="flex items-center justify-center gap-2">
                                    <span class="text-lg">üìã</span>
                                    <span>‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏à‡∏±‡∏¢</span>
                                </div>
                            </button>
                            <button onclick="switchTab('statistics')" 
                                    class="flex-1 py-4 px-6 text-center font-medium transition-colors tab-inactive" 
                                    data-tab="statistics">
                                <div class="flex items-center justify-center gap-2">
                                    <span class="text-lg">üìä</span>
                                    <span>‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥</span>
                                </div>
                            </button>
                        </div>
                    </div>

                    <!-- Tab Content -->
                    <div id="export-content" class="glass rounded-lg shadow-sm">
                        <div id="tab-content">
                            ${renderTheoryTab()}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    `;
}

// Tab switching function
function switchTab(tabName) {
    currentState.activeTab = tabName;
    
    // Update tab appearance
    document.querySelectorAll('[data-tab]').forEach(btn => {
        btn.classList.remove('tab-active');
        btn.classList.add('tab-inactive');
    });
    
    document.querySelector(`[data-tab="${tabName}"]`).classList.remove('tab-inactive');
    document.querySelector(`[data-tab="${tabName}"]`).classList.add('tab-active');

    // Update content
    let content = '';
    switch(tabName) {
        case 'theory':
            content = renderTheoryTab();
            break;
        case 'research':
            content = renderResearchPlanTab();
            break;
        case 'statistics':
            content = renderStatisticsTab();
            break;
    }
    
    document.getElementById('tab-content').innerHTML = content;
}
      // Theory Tab
function renderTheoryTab() {
    const theory = currentState.theory;
    return `
        <div class="p-8">
            <h2 class="text-2xl font-bold text-white mb-6 flex items-center gap-3">
                üìö ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏§‡∏©‡∏é‡∏µ: ${theory.name}
            </h2>
            
            <div class="grid lg:grid-cols-2 gap-8">
                <div class="space-y-6">
                    <div class="bg-blue-500/20 rounded-lg p-6 border border-blue-500/30">
                        <h3 class="text-lg font-semibold text-blue-200 mb-3">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô</h3>
                        <div class="space-y-3">
                            <div>
                                <span class="font-medium text-blue-100">‡∏ú‡∏π‡πâ‡∏û‡∏±‡∏í‡∏ô‡∏≤:</span>
                                <p class="text-blue-50">${theory.author}</p>
                            </div>
                            <div>
                                <span class="font-medium text-blue-100">‡∏™‡∏≤‡∏Ç‡∏≤:</span>
                                <p class="text-blue-50 capitalize">${theory.domain.replace('_', ' ')}</p>
                            </div>
                            <div>
                                <span class="font-medium text-blue-100">‡∏£‡∏∞‡∏î‡∏±‡∏ö:</span>
                                <p class="text-blue-50">‡∏£‡∏∞‡∏î‡∏±‡∏ö ${theory.level}</p>
                            </div>
                        </div>
                    </div>

                    <div class="bg-green-500/20 rounded-lg p-6 border border-green-500/30">
                        <h3 class="text-lg font-semibold text-green-200 mb-3">‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢</h3>
                        <p class="text-green-50">${theory.description}</p>
                    </div>

                    <div class="bg-purple-500/20 rounded-lg p-6 border border-purple-500/30">
                        <h3 class="text-lg font-semibold text-purple-200 mb-3">‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≤‡∏î‡∏Å‡∏≤‡∏£‡∏ì‡πå</h3>
                        <p class="text-purple-50">${theory.prediction}</p>
                    </div>
                </div>

                <div class="space-y-6">
                    <div class="bg-amber-500/20 rounded-lg p-6 border border-amber-500/30">
                        <h3 class="text-lg font-semibold text-amber-200 mb-4">‡∏õ‡∏±‡∏à‡∏à‡∏±‡∏¢‡∏´‡∏•‡∏±‡∏Å</h3>
                        <div class="space-y-3">
                            ${theory.factors.map((factor, index) => `
                                <div class="flex items-start gap-3">
                                    <span class="bg-amber-400 text-amber-900 px-2 py-1 rounded text-sm font-medium min-w-[24px] text-center">
                                        ${index + 1}
                                    </span>
                                    <span class="text-amber-50">${factor}</span>
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    <div class="bg-gray-500/20 rounded-lg p-6 border border-gray-500/30">
                        <h3 class="text-lg font-semibold text-gray-200 mb-3">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå</h3>
                        <div class="bg-white/10 p-4 rounded border">
                            <code class="text-gray-100 font-mono text-sm break-all">${theory.relationships}</code>
                        </div>
                        <p class="text-sm text-gray-300 mt-3">
                            üí° <strong>‡∏™‡∏±‡∏ç‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå:</strong> ‚Üí ‡∏´‡∏°‡∏≤‡∏¢‡∏ñ‡∏∂‡∏á "‡∏™‡πà‡∏á‡∏ú‡∏•‡∏ï‡πà‡∏≠", + ‡∏´‡∏°‡∏≤‡∏¢‡∏ñ‡∏∂‡∏á "‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ö"
                        </p>
                    </div>

                    <div class="bg-rose-500/20 rounded-lg p-6 border border-rose-500/30">
                        <h3 class="text-lg font-semibold text-rose-200 mb-3">‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå</h3>
                        <div class="flex flex-wrap gap-2">
                            ${theory.statistics.map(stat => `
                                <span class="bg-rose-400/30 text-rose-100 px-3 py-1 rounded-full text-sm border border-rose-400/50">
                                    ${stat}
                                </span>
                            `).join('')}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    `;
}

// Research Plan Tab
function renderResearchPlanTab() {
    const level = currentState.level;
    
    return `
        <div class="p-8">
            <h2 class="text-2xl font-bold text-white mb-6 flex items-center gap-3">
                üìã ‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏à‡∏±‡∏¢‡∏ó‡∏µ‡πà‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥
            </h2>
            
            <div class="grid lg:grid-cols-2 gap-8 mb-8">
                <div class="bg-blue-500/20 rounded-lg p-6 border border-blue-500/30">
                    <h3 class="text-lg font-semibold text-blue-200 mb-4">üî¨ ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÅ‡∏•‡∏∞‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏à‡∏±‡∏¢</h3>
                    <div class="space-y-4">
                        <div>
                            <h4 class="font-medium text-blue-100 mb-2">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏à‡∏±‡∏¢:</h4>
                            <p class="text-blue-50 text-sm">${level >= 2 ? '‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏à‡∏±‡∏¢‡πÄ‡∏ä‡∏¥‡∏á‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì‡πÅ‡∏ö‡∏ö‡∏™‡∏≥‡∏£‡∏ß‡∏à (Quantitative Survey)' : '‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏à‡∏±‡∏¢‡πÄ‡∏ä‡∏¥‡∏á‡∏û‡∏£‡∏£‡∏ì‡∏ô‡∏≤ (Descriptive Research)'}</p>
                        </div>
                        <div>
                            <h4 class="font-medium text-blue-100 mb-2">‡∏õ‡∏£‡∏±‡∏ä‡∏ç‡∏≤‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏à‡∏±‡∏¢:</h4>
                            <p class="text-blue-50 text-sm">‡∏õ‡∏£‡∏±‡∏ä‡∏ç‡∏≤‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏à‡∏±‡∏¢‡πÄ‡∏ä‡∏¥‡∏á‡∏ö‡∏ß‡∏Å‡∏ô‡∏¥‡∏¢‡∏° (Positivism)</p>
                        </div>
                        <div>
                            <h4 class="font-medium text-blue-100 mb-2">‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏à‡∏±‡∏¢:</h4>
                            <p class="text-blue-50 text-sm">‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏à‡∏±‡∏¢‡πÄ‡∏ä‡∏¥‡∏á‡∏ô‡∏¥‡∏£‡∏ô‡∏±‡∏¢ (Deductive Research)</p>
                        </div>
                        <div>
                            <h4 class="font-medium text-blue-100 mb-2">‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏à‡∏±‡∏¢:</h4>
                            <p class="text-blue-50 text-sm">‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡∏£‡∏ß‡∏à‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ‡πÅ‡∏ö‡∏ö‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏° (Survey Strategy)</p>
                        </div>
                    </div>
                </div>

                <div class="bg-green-500/20 rounded-lg p-6 border border-green-500/30">
                    <h3 class="text-lg font-semibold text-green-200 mb-4">üë• ‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡∏Ç‡∏≠‡∏ö‡πÄ‡∏Ç‡∏ï</h3>
                    <div class="space-y-4">
                        <div>
                            <h4 class="font-medium text-green-100 mb-2">‡∏Ç‡∏ô‡∏≤‡∏î‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:</h4>
                            <p class="text-green-50 text-sm">${level === 1 ? '200-300 ‡∏Ñ‡∏ô' : level === 2 ? '300-500 ‡∏Ñ‡∏ô' : '500+ ‡∏Ñ‡∏ô'}</p>
                        </div>
                        <div>
                            <h4 class="font-medium text-green-100 mb-2">‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏™‡∏∏‡πà‡∏°‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:</h4>
                            <p class="text-green-50 text-sm">${level >= 2 ? '‡∏Å‡∏≤‡∏£‡∏™‡∏∏‡πà‡∏°‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÅ‡∏ö‡∏ö‡∏´‡∏•‡∏≤‡∏¢‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô (Multi-stage Sampling)' : '‡∏Å‡∏≤‡∏£‡∏™‡∏∏‡πà‡∏°‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÅ‡∏ö‡∏ö‡∏á‡πà‡∏≤‡∏¢ (Simple Random Sampling)'}</p>
                        </div>
                        <div>
                            <h4 class="font-medium text-green-100 mb-2">‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤:</h4>
                            <p class="text-green-50 text-sm">${level >= 3 ? '‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏Ç‡πâ‡∏≤‡∏°‡πÄ‡∏ß‡∏•‡∏≤ (Cross-sectional with Longitudinal elements)' : '‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏Ç‡πâ‡∏≤‡∏°‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡∏±‡∏î (Cross-sectional Study)'}</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Timeline -->
            <div class="bg-amber-500/20 rounded-lg p-6 border border-amber-500/30">
                <h3 class="text-lg font-semibold text-amber-200 mb-4">‚è∞ ‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏á‡∏≤‡∏ô‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</h3>
                <div class="space-y-4">
                    <div class="flex gap-4 items-start">
                        <div class="bg-amber-400 text-amber-900 px-3 py-1 rounded-full text-sm font-medium min-w-[100px] text-center">
                            2-3 ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå
                        </div>
                        <div class="flex-1">
                            <h4 class="font-medium text-amber-100 mb-1">‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Å‡∏≤‡∏£</h4>
                            <p class="text-amber-50 text-sm">‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏ó‡∏§‡∏©‡∏é‡∏µ ‚Ä¢ ‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡πÅ‡∏ö‡∏ö‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏° ‚Ä¢ ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠</p>
                        </div>
                    </div>
                    <div class="flex gap-4 items-start">
                        <div class="bg-amber-400 text-amber-900 px-3 py-1 rounded-full text-sm font-medium min-w-[100px] text-center">
                            4-6 ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå
                        </div>
                        <div class="flex-1">
                            <h4 class="font-medium text-amber-100 mb-1">‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</h4>
                            <p class="text-amber-50 text-sm">‡πÅ‡∏à‡∏Å‡πÅ‡∏ö‡∏ö‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏° ‚Ä¢ ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö ‚Ä¢ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå</p>
                        </div>
                    </div>
                    <div class="flex gap-4 items-start">
                        <div class="bg-amber-400 text-amber-900 px-3 py-1 rounded-full text-sm font-medium min-w-[100px] text-center">
                            ${level >= 3 ? '6-8 ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå' : '3-4 ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå'}
                        </div>
                        <div class="flex-1">
                            <h4 class="font-medium text-amber-100 mb-1">‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</h4>
                            <p class="text-amber-50 text-sm">‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‚Ä¢ ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ó‡∏≤‡∏á‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥ ‚Ä¢ ‡∏ï‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå</p>
                        </div>
                    </div>
                    <div class="flex gap-4 items-start">
                        <div class="bg-amber-400 text-amber-900 px-3 py-1 rounded-full text-sm font-medium min-w-[100px] text-center">
                            3-4 ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå
                        </div>
                        <div class="flex-1">
                            <h4 class="font-medium text-amber-100 mb-1">‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</h4>
                            <p class="text-amber-50 text-sm">‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏£‡πà‡∏≤‡∏á ‚Ä¢ ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤ ‚Ä¢ ‡∏à‡∏±‡∏î‡∏ó‡∏≥‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    `;
}

// Statistics Tab
function renderStatisticsTab() {
    const level = currentState.level;
    const levelInfo = researchDatabase.levels[level];
    
    return `
        <div class="p-8">
            <h2 class="text-2xl font-bold text-white mb-6 flex items-center gap-3">
                üìä ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ó‡∏≤‡∏á‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥ (‡∏£‡∏∞‡∏î‡∏±‡∏ö ${level})
            </h2>
            
            <div class="mb-8 bg-white/5 rounded-lg p-6 border border-white/10">
                <h3 class="text-lg font-semibold text-white mb-4">üìã ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô</h3>
                <p class="text-white/80 mb-4">${levelInfo.description}</p>
                <div class="flex flex-wrap gap-2">
                    ${levelInfo.methods.map((method, index) => `
                        <div class="flex items-center">
                            <div class="bg-blue-600 text-white px-3 py-2 rounded-lg text-sm font-medium">
                                ${index + 1}. ${method}
                            </div>
                            ${index < levelInfo.methods.length - 1 ? '<div class="text-white/40 mx-2">‚Üí</div>' : ''}
                        </div>
                    `).join('')}
                </div>
            </div>

            <div class="grid gap-6">
                ${levelInfo.methods.map((method, index) => `
                    <div class="bg-white/5 rounded-lg p-6 border border-white/10">
                        <div class="flex items-start gap-4 mb-4">
                            <div class="w-10 h-10 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold text-lg">
                                ${index + 1}
                            </div>
                            <div class="flex-1">
                                <h3 class="text-xl font-bold text-white mb-2">${method}</h3>
                                <p class="text-white/80">‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏î‡πâ‡∏ß‡∏¢‡∏ß‡∏¥‡∏ò‡∏µ ${method}</p>
                            </div>
                        </div>
                    </div>
                `).join('')}
            </div>
        </div>
    `;
}
      // Export PDF Function
function exportPDF() {
    try {
        const element = document.getElementById('export-content');
        if (!element) {
            alert('‡πÑ‡∏°‡πà‡∏û‡∏ö‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏à‡∏∞ Export');
            return;
        }

        // Show loading overlay
        const loadingOverlay = document.createElement('div');
        loadingOverlay.innerHTML = `
            <div style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); display: flex; align-items: center; justify-content: center; z-index: 9999;">
                <div style="color: white; text-align: center;">
                    <div style="font-size: 3rem; margin-bottom: 1rem;">üìÑ</div>
                    <div style="font-size: 1.5rem; font-weight: bold;">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á PDF...</div>
                    <div style="margin-top: 0.5rem;">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà</div>
                </div>
            </div>
        `;
        document.body.appendChild(loadingOverlay);

        setTimeout(async () => {
            try {
                const canvas = await html2canvas(element, {
                    scale: 1.5,
                    useCORS: true,
                    allowTaint: true,
                    backgroundColor: '#ffffff',
                    width: element.scrollWidth,
                    height: element.scrollHeight
                });

                const imgData = canvas.toDataURL('image/png');
                const { jsPDF } = window.jspdf;
                const pdf = new jsPDF('p', 'mm', 'a4');
                
                const imgWidth = 210;
                const pageHeight = 295;
                const imgHeight = (canvas.height * imgWidth) / canvas.width;
                let heightLeft = imgHeight;
                let position = 0;

                pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);
                heightLeft -= pageHeight;

                while (heightLeft >= 0) {
                    position = heightLeft - imgHeight;
                    pdf.addPage();
                    pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);
                    heightLeft -= pageHeight;
                }

                const fileName = `Research_Plan_${currentState.theory.name.replace(/\s+/g, '_')}_${new Date().toISOString().split('T')[0]}.pdf`;
                pdf.save(fileName);

                document.body.removeChild(loadingOverlay);
                
                // Show success message
                const successOverlay = document.createElement('div');
                successOverlay.innerHTML = `
                    <div style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(34, 197, 94, 0.95); color: white; padding: 2rem; border-radius: 1rem; text-align: center; z-index: 9999;">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">‚úÖ</div>
                        <div style="font-size: 1.2rem; font-weight: bold;">PDF ‡∏ñ‡∏π‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß!</div>
                        <div style="margin-top: 0.5rem;">‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÅ‡∏•‡πâ‡∏ß</div>
                    </div>
                `;
                document.body.appendChild(successOverlay);
                
                setTimeout(() => {
                    document.body.removeChild(successOverlay);
                }, 3000);

            } catch (error) {
                document.body.removeChild(loadingOverlay);
                console.error('Error generating PDF:', error);
                alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á PDF ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á');
            }
        }, 500);

    } catch (error) {
        console.error('Error in exportPDF:', error);
        alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á PDF ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á');
    }
}
      // Main Render Function
function render() {
    const app = document.getElementById('app');
    
    try {
        switch(currentState.page) {
            case 'landing':
                app.innerHTML = renderLanding();
                break;
            case 'level':
                app.innerHTML = renderLevelSelection();
                break;
            case 'theory':
                app.innerHTML = renderTheorySelection();
                break;
            case 'results':
                app.innerHTML = renderResults();
                break;
            default:
                app.innerHTML = renderLanding();
        }
    } catch (error) {
        console.error('Render error:', error);
        app.innerHTML = `
            <div class="min-h-screen flex items-center justify-center">
                <div class="text-center text-white">
                    <div class="text-6xl mb-4">‚ö†Ô∏è</div>
                    <h1 class="text-2xl font-bold mb-2">‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î</h1>
                    <p class="mb-4">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡πÅ‡∏•‡∏∞‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</p>
                    <button onclick="window.location.reload()" 
                            class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
                        ‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö
                    </button>
                </div>
            </div>
        `;
    }
}

// Initialize app when DOM is loaded
document.addEventListener('DOMContentLoaded', function() {
    console.log('DOM loaded, initializing app...');
    render();
});

// Fallback initialization
window.addEventListener('load', function() {
    console.log('Window loaded, checking app...');
    if (!document.getElementById('app').innerHTML.trim()) {
        render();
    }
});

// Error handling
window.addEventListener('error', function(event) {
    console.error('Global error:', event.error);
});

// Initial render call (immediate)
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', render);
} else {
    render();
}
      // End of script tag
</script>

</body>
</html>
