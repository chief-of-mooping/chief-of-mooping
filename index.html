// Load settings (default values only)
        function loadSettings() {
            // Just set default values to form fields
            document.getElementById('businessName').value = businessSettings.name;
            document.getElementById('targetProfit').value = businessSettings.targetProfit;
            document.getElementById('businessLocation').value = businessSettings.location;
            document.getElementById('workingHours').value = businessSettings.workingHours;
        }

        // Save settings (in memory only)
        function saveSettings() {
            businessSettings = {
                name: document.getElementById('businessName').value,
                targetProfit: parseFloat(document.getElementById('targetProfit').value),
                location: document.getElementById('businessLocation').value,
                workingHours: parseFloat(document.getElementById('workingHours').value)
            };
            alert('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß! (‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ‡πÉ‡∏ô‡πÄ‡∏ã‡∏™‡∏ä‡∏±‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô)');
            closeSettings();
        }

        // Modal functions
        function openSettings() {
            document.getElementById('settingsPanel').style.display = 'block';
        }

        function closeSettings() {
            document.getElementById('settingsPanel').style.display = 'none';
        }

        // History functions
        function toggleHistory() {
            const panel = document.getElementById('historyPanel');
            panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
            if (panel.style.display === 'block') {
                displayHistory();
            }
        }

        function displayHistory() {
            const content = document.getElementById('historyContent');
            if (calculationHistory.length === 0) {
                content.innerHTML = '<p style="text-align: center; color: #666;">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì</p>';
                return;
            }

            content.innerHTML = calculationHistory.map((item, index) => `
                <div class="history-item">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                        <strong>‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà ${calculationHistory.length - index}</strong>
                        <span style="color: #666; font-size: 0.9rem;">${item.timestamp}</span>
                    </div>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 10px;">
                        <div><strong>‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô:</strong> ${item.cost} ‡∏ö‡∏≤‡∏ó</div>
                        <div><strong>‡∏£‡∏≤‡∏Ñ‡∏≤‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥:</strong> ${item.price} ‡∏ö‡∏≤‡∏ó</div>
                        <div><strong>‡∏Å‡∏≥‡πÑ‡∏£:</strong> ${item.profit} ‡∏ö‡∏≤‡∏ó</div>
                        <div><strong>‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á:</strong> ${item.risk}</div>
                    </div>
                </div>
            `).reverse().join('');
        }

        // ========== ORIGINAL AI ANALYSIS FUNCTIONS ========== //

        // Analyze 6 key factors
        function analyzeFactors(inputs) {
            const factors = {};

            // 1. Pork Price Analysis (‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏°‡∏π)
            if (inputs.porkPrice < 150) {
                factors.porkPrice = { score: 0.8, impact: 'positive', description: '‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏°‡∏π‡∏ï‡πà‡∏≥ ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≥‡πÑ‡∏£' };
            } else if (inputs.porkPrice > 200) {
                factors.porkPrice = { score: 0.3, impact: 'negative', description: '‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏°‡∏π‡∏™‡∏π‡∏á ‡∏Ñ‡∏ß‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡∏≤‡∏¢‡∏´‡∏£‡∏∑‡∏≠‡∏´‡∏≤‡∏ã‡∏±‡∏û‡∏û‡∏•‡∏≤‡∏¢‡πÄ‡∏≠‡∏≠‡∏£‡πå‡πÉ‡∏´‡∏°‡πà' };
            } else {
                factors.porkPrice = { score: 0.6, impact: 'neutral', description: '‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏°‡∏π‡πÉ‡∏ô‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏õ‡∏Å‡∏ï‡∏¥' };
            }

            // 2. Fuel Cost Analysis (‡∏Ñ‡πà‡∏≤‡πÅ‡∏Å‡πä‡∏™/‡∏ñ‡πà‡∏≤‡∏ô)
            if (inputs.fuelCost < 100) {
                factors.fuelCost = { score: 0.7, impact: 'positive', description: '‡∏Ñ‡πà‡∏≤‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡πÄ‡∏û‡∏•‡∏¥‡∏á‡∏ï‡πà‡∏≥ ‡∏ä‡πà‡∏ß‡∏¢‡∏•‡∏î‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô' };
            } else if (inputs.fuelCost > 200) {
                factors.fuelCost = { score: 0.4, impact: 'negative', description: '‡∏Ñ‡πà‡∏≤‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡πÄ‡∏û‡∏•‡∏¥‡∏á‡∏™‡∏π‡∏á ‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡πÄ‡∏û‡∏•‡∏¥‡∏á' };
            } else {
                factors.fuelCost = { score: 0.6, impact: 'neutral', description: '‡∏Ñ‡πà‡∏≤‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡πÄ‡∏û‡∏•‡∏¥‡∏á‡πÉ‡∏ô‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏õ‡∏Å‡∏ï‡∏¥' };
            }

            // 3. Weather Analysis (‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®)
            switch (inputs.weather) {
                case 'sunny':
                    factors.weather = { score: 0.8, impact: 'positive', description: '‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡πÅ‡∏î‡∏î‡∏à‡∏±‡∏î ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á' };
                    break;
                case 'rainy':
                    factors.weather = { score: 0.3, impact: 'negative', description: '‡∏ù‡∏ô‡∏ï‡∏Å ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏•‡∏î‡∏•‡∏á ‡∏Ñ‡∏ß‡∏£‡∏°‡∏µ‡πÅ‡∏ú‡∏ô‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô' };
                    break;
                case 'cold':
                    factors.weather = { score: 0.7, impact: 'positive', description: '‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏´‡∏ô‡∏≤‡∏ß ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏£‡πâ‡∏≠‡∏ô' };
                    break;
                default:
                    factors.weather = { score: 0.5, impact: 'neutral', description: '‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏õ‡∏Å‡∏ï‡∏¥' };
            }

            // 4. Economic Analysis (‡∏™‡∏†‡∏≤‡∏û‡πÄ‡∏®‡∏£‡∏©‡∏ê‡∏Å‡∏¥‡∏à)
            switch (inputs.economic) {
                case 'good':
                    factors.economic = { score: 0.8, impact: 'positive', description: '‡πÄ‡∏®‡∏£‡∏©‡∏ê‡∏Å‡∏¥‡∏à‡∏î‡∏µ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏π‡∏á ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ç‡∏≤‡∏¢‡∏£‡∏≤‡∏Ñ‡∏≤‡∏î‡∏µ' };
                    break;
                case 'poor':
                    factors.economic = { score: 0.3, impact: 'negative', description: '‡πÄ‡∏®‡∏£‡∏©‡∏ê‡∏Å‡∏¥‡∏à‡πÑ‡∏°‡πà‡∏î‡∏µ ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ã‡∏∑‡πâ‡∏≠‡∏ô‡πâ‡∏≠‡∏¢‡∏•‡∏á ‡∏Ñ‡∏ß‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏Ñ‡∏≤‡πÉ‡∏´‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡πÑ‡∏î‡πâ' };
                    break;
                default:
                    factors.economic = { score: 0.6, impact: 'neutral', description: '‡∏™‡∏†‡∏≤‡∏û‡πÄ‡∏®‡∏£‡∏©‡∏ê‡∏Å‡∏¥‡∏à‡∏õ‡∏Å‡∏ï‡∏¥' };
            }

            // 5. Season Analysis (‡∏§‡∏î‡∏π‡∏Å‡∏≤‡∏•)
            switch (inputs.season) {
                case 'hot':
                    factors.season = { score: 0.4, impact: 'negative', description: '‡∏´‡∏ô‡πâ‡∏≤‡∏£‡πâ‡∏≠‡∏ô ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏î‡∏•‡∏á ‡∏Ñ‡∏ß‡∏£‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ó' };
                    break;
                case 'cool':
                    factors.season = { score: 0.8, impact: 'positive', description: '‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏ô‡∏≤‡∏ß ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏™‡∏π‡∏á ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏Ñ‡∏≤‡πÑ‡∏î‡πâ' };
                    break;
                default:
                    factors.season = { score: 0.6, impact: 'neutral', description: '‡∏§‡∏î‡∏π‡∏Å‡∏≤‡∏•‡∏õ‡∏Å‡∏ï‡∏¥' };
            }

            // 6. Political Analysis (‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏∑‡∏≠‡∏á)
            switch (inputs.political) {
                case 'stable':
                    factors.political = { score: 0.7, impact: 'positive', description: '‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏°‡∏±‡πà‡∏ô‡∏Ñ‡∏á ‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡πÄ‡∏ï‡∏¥‡∏ö‡πÇ‡∏ï‡πÑ‡∏î‡πâ' };
                    break;
                case 'crisis':
                    factors.political = { score: 0.3, impact: 'negative', description: '‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏°‡∏±‡πà‡∏ô‡∏Ñ‡∏á ‡∏Ñ‡∏ß‡∏£‡∏£‡∏∞‡∏ß‡∏±‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∏‡∏ô' };
                    break;
                default:
                    factors.political = { score: 0.5, impact: 'neutral', description: '‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡πÑ‡∏°‡πà‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô' };
            }

            return factors;
        }

        // Calculate risk assessment
        function calculateRisk(inputs, factors) {
            const scores = Object.values(factors).map(f => f.score);
            const averageScore = scores.reduce((a, b) => a + b, 0) / scores.length;
            
            // Additional risk factors
            let riskScore = averageScore;
            
            // High cost risks
            if (inputs.porkPrice > 220) riskScore -= 0.1;
            if (inputs.fuelCost > 250) riskScore -= 0.1;
            
            // Market risks
            if (inputs.dailySticks < 100) riskScore -= 0.1; // Low volume risk
            if (businessSettings.location === 'street') riskScore -= 0.05; // Street vendor risk
            
            // Determine risk level
            let level, color;
            if (riskScore >= 0.7) {
                level = '‡∏ï‡πà‡∏≥';
                color = '#228B22';
            } else if (riskScore >= 0.5) {
                level = '‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á';
                color = '#FFD700';
            } else {
                level = '‡∏™‡∏π‡∏á';
                color = '#FF6347';
            }

            return { score: riskScore, level: level, color: color };
        }

        // Calculate demand multiplier based on factors
        function calculateDemandMultiplier(inputs, factors) {
            let multiplier = 1.0;

            // Weather impact
            if (inputs.weather === 'sunny' || inputs.weather === 'cold') multiplier += 0.1;
            if (inputs.weather === 'rainy') multiplier -= 0.2;

            // Economic impact
            if (inputs.economic === 'good') multiplier += 0.15;
            if (inputs.economic === 'poor') multiplier -= 0.15;

            // Season impact
            if (inputs.season === 'cool') multiplier += 0.1;
            if (inputs.season === 'hot') multiplier -= 0.1;

            // Location impact
            switch (businessSettings.location) {
                case 'university':
                    multiplier += 0.05;
                    break;
                case 'mall':
                    multiplier += 0.1;
                    break;
                case 'street':
                    multiplier -= 0.05;
                    break;
            }

            return Math.max(0.7, Math.min(1.3, multiplier));
        }

        // Calculate price adjustment factors
        function calculatePriceAdjustment(inputs, factors) {
            let costMultiplier = 1.0;
            let volumeMultiplier = 1.0;

            // High input costs require adjustment
            if (inputs.porkPrice > 200) costMultiplier += 0.05;
            if (inputs.fuelCost > 200) costMultiplier += 0.03;

            // Political instability increases costs
            if (inputs.political === 'crisis') costMultiplier += 0.02;

            // Weather affects volume
            if (inputs.weather === 'rainy') volumeMultiplier -= 0.15;
            if (inputs.weather === 'sunny') volumeMultiplier += 0.05;

            return { costMultiplier, volumeMultiplier };
        }

        // Round price to appropriate point
        function roundToAppropriatePrice(price) {
            if (price <= 10) return Math.round(price * 2) / 2; // Round to 0.5
            if (price <= 50) return Math.round(price); // Round to 1
            return Math.round(price / 5) * 5; // Round to 5
        }

        // Generate marketing strategies based on customer journey
        function generateMarketingStrategies(inputs, factors) {
            const strategies = [];

            // Awareness Stage
            strategies.push({
                stage: 'Awareness (‡∏£‡∏±‡∏ö‡∏£‡∏π‡πâ)',
                strategy: 'Social Media Marketing',
                description: '‡πÇ‡∏û‡∏™‡∏ï‡πå‡∏£‡∏π‡∏õ‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á‡∏™‡∏ß‡∏¢‡πÜ ‡∏ö‡∏ô Facebook/Instagram ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÅ‡∏Æ‡∏ä‡πÅ‡∏ó‡πá‡∏Å‡∏ó‡πâ‡∏≠‡∏á‡∏ñ‡∏¥‡πà‡∏ô',
                recommendation: inputs.weather === 'sunny' ? '‡πÄ‡∏ô‡πâ‡∏ô‡πÇ‡∏û‡∏™‡∏ï‡πå‡πÄ‡∏ß‡∏•‡∏≤ 16:00-19:00' : '‡πÇ‡∏û‡∏™‡∏ï‡πå‡∏Ñ‡∏•‡∏¥‡∏õ Live ‡∏Å‡∏≤‡∏£‡∏õ‡∏¥‡πâ‡∏á'
            });

            // Interest Stage
            if (factors.economic.score >= 0.6) {
                strategies.push({
                    stage: 'Interest (‡∏™‡∏ô‡πÉ‡∏à)',
                    strategy: 'Content Marketing',
                    description: '‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏ó‡∏ô‡∏ï‡πå‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡∏£‡πà‡∏≠‡∏¢ ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û',
                    recommendation: '‡∏ó‡∏≥‡∏Ñ‡∏•‡∏¥‡∏õ Behind the scenes ‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏°‡∏π ‡πÅ‡∏•‡∏∞‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏õ‡∏¥‡πâ‡∏á'
                });
            }

            // Consideration Stage
            strategies.push({
                stage: 'Consideration (‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤)',
                strategy: 'Promotional Offers',
                description: inputs.season === 'hot' ? '‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô‡∏ã‡∏∑‡πâ‡∏≠ 10 ‡πÅ‡∏ñ‡∏° 1' : '‡πÄ‡∏ã‡πá‡∏ï‡∏Ñ‡∏π‡πà‡∏Å‡∏±‡∏ö‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°‡∏£‡πâ‡∏≠‡∏ô',
                recommendation: inputs.economic.score < 0.5 ? '‡πÄ‡∏ô‡πâ‡∏ô‡∏£‡∏≤‡∏Ñ‡∏≤‡∏™‡∏∏‡∏î‡∏Ñ‡∏∏‡πâ‡∏°' : '‡πÄ‡∏ô‡πâ‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏û‡∏£‡∏µ‡πÄ‡∏°‡∏µ‡∏¢‡∏°'
            });

            // Purchase Stage
            strategies.push({
                stage: 'Purchase (‡∏ã‡∏∑‡πâ‡∏≠)',
                strategy: 'Point of Sale',
                description: '‡∏ï‡∏Å‡πÅ‡∏ï‡πà‡∏á‡∏£‡πâ‡∏≤‡∏ô‡πÉ‡∏´‡πâ‡∏ô‡πà‡∏≤‡∏™‡∏ô‡πÉ‡∏à ‡∏°‡∏µ‡∏õ‡πâ‡∏≤‡∏¢‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô',
                recommendation: inputs.weather === 'rainy' ? '‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ó‡∏µ‡πà‡∏ô‡∏±‡πà‡∏á‡∏°‡∏µ‡∏´‡∏•‡∏±‡∏á‡∏Ñ‡∏≤' : '‡∏à‡∏±‡∏î‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô Take away'
            });

            // Retention Stage
            strategies.push({
                stage: 'Retention (‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤)',
                strategy: 'Loyalty Program',
                description: '‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏∞‡∏™‡∏°‡πÅ‡∏™‡∏ï‡∏°‡∏õ‡πå ‡∏´‡∏£‡∏∑‡∏≠ Line Official Account',
                recommendation: '‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏à‡πâ‡∏á‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©‡πÅ‡∏Å‡πà‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏õ‡∏£‡∏∞‡∏à‡∏≥'
            });

            // Advocacy Stage
            if (factors.economic.score >= 0.7) {
                strategies.push({
                    stage: 'Advocacy (‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÄ‡∏ã‡∏•‡∏™‡πå)',
                    strategy: 'Referral Program',
                    description: '‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏°‡∏≤‡∏ã‡∏∑‡πâ‡∏≠ ‡πÑ‡∏î‡πâ‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î',
                    recommendation: '‡πÉ‡∏´‡πâ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ Review ‡∏ö‡∏ô Social Media ‡∏£‡∏±‡∏ö‡∏ü‡∏£‡∏µ 1 ‡πÑ‡∏°‡πâ'
                });
            }

            return strategies;
        }

        // Generate AI reasoning
        function generateAIReasoning(inputs, factors, riskAssessment) {
            let reasoning = `<strong>AI ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÅ‡∏•‡πâ‡∏ß‡∏û‡∏ö‡∏ß‡πà‡∏≤:</strong><br><br>`;

            // Risk assessment summary
            reasoning += `üìä <strong>‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡πÇ‡∏î‡∏¢‡∏£‡∏ß‡∏°: ${riskAssessment.level}</strong><br>`;

            // Key insights
            const positiveFactors = Object.entries(factors).filter(([key, factor]) => factor.impact === 'positive');
            const negativeFactors = Object.entries(factors).filter(([key, factor]) => factor.impact === 'negative');

            if (positiveFactors.length > 0) {
                reasoning += `<br>‚úÖ <strong>‡∏õ‡∏±‡∏à‡∏à‡∏±‡∏¢‡∏ö‡∏ß‡∏Å:</strong><br>`;
                positiveFactors.forEach(([key, factor]) => {
                    reasoning += `‚Ä¢ ${factor.description}<br>`;
                });
            }

            if (negativeFactors.length > 0) {
                reasoning += `<br>‚ö†Ô∏è <strong>‡∏õ‡∏±‡∏à‡∏à‡∏±‡∏¢‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏∞‡∏ß‡∏±‡∏á:</strong><br>`;
                negativeFactors.forEach(([key, factor]) => {
                    reasoning += `‚Ä¢ ${factor.description}<br>`;
                });
            }

            // Strategic recommendations
            reasoning += `<br>üí° <strong>‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÄ‡∏ä‡∏¥‡∏á‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå:</strong><br>`;
            
            if (inputs.porkPrice > 200) {
                reasoning += `‚Ä¢ ‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡∏´‡∏≤‡∏ã‡∏±‡∏û‡∏û‡∏•‡∏≤‡∏¢‡πÄ‡∏≠‡∏≠‡∏£‡πå‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏°‡∏π‡∏£‡∏≤‡∏Ñ‡∏≤‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤<br>`;
            }
            
            if (inputs.weather === 'rainy') {
                reasoning += `‚Ä¢ ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ô‡∏£‡πà‡∏°‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏ï‡πá‡∏ô‡∏ó‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤<br>`;
            }
            
            if (factors.economic.score < 0.5) {
                reasoning += `‚Ä¢ ‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏°‡∏ô‡∏π‡πÉ‡∏´‡πâ‡∏°‡∏µ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏Ñ‡∏≤‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î<br>`;
            }
            
            if (inputs.dailySticks < 150) {
                reasoning += `‚Ä¢ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏•‡∏≤‡∏î‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢<br>`;
            }

            reasoning += `<br>üéØ <strong>‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏£‡∏∞‡∏¢‡∏∞‡∏™‡∏±‡πâ‡∏ô:</strong> ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡πÉ‡∏´‡πâ‡πÑ‡∏î‡πâ ${Math.ceil(inputs.dailySticks * 1.2)} ‡πÑ‡∏°‡πâ/‡∏ß‡∏±‡∏ô<br>`;
            reasoning += `üöÄ <strong>‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏£‡∏∞‡∏¢‡∏∞‡∏¢‡∏≤‡∏ß:</strong> ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ê‡∏≤‡∏ô‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÑ‡∏î‡πâ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô`;

            return reasoning;
        }

        // AI Analysis Engine (Original)
        function performAIAnalysis(inputs) {
            // Calculate basic costs
            const meatCostPerStick = (inputs.porkPrice * inputs.meatWeight) / 1000;
            const stickCostPerStick = inputs.stickCost / 100;
            const overheadCostPerStick = inputs.overheadCost / inputs.dailySticks;
            const laborCostPerStick = (inputs.laborCost * businessSettings.workingHours) / inputs.dailySticks;
            
            const baseCostPerStick = meatCostPerStick + stickCostPerStick + 
                                   inputs.seasoningCost + overheadCostPerStick + 
                                   laborCostPerStick + (inputs.fuelCost / inputs.dailySticks);

            // AI Factor Analysis
            const factors = analyzeFactors(inputs);
            const riskAssessment = calculateRisk(inputs, factors);
            const demandMultiplier = calculateDemandMultiplier(inputs, factors);
            const priceAdjustment = calculatePriceAdjustment(inputs, factors);

            // Calculate suggested price with AI adjustments
            const targetProfitMultiplier = 1 + (businessSettings.targetProfit / 100);
            const adjustedCost = baseCostPerStick * priceAdjustment.costMultiplier;
            const suggestedPrice = adjustedCost * targetProfitMultiplier * demandMultiplier;

            // Round to appropriate price point
            const finalPrice = roundToAppropriatePrice(suggestedPrice);
            const actualProfit = finalPrice - adjustedCost;
            const dailyProfit = actualProfit * inputs.dailySticks * priceAdjustment.volumeMultiplier;

            return {
                costPerStick: adjustedCost,
                suggestedPrice: finalPrice,
                profitMargin: actualProfit,
                dailyProfit: dailyProfit,
                factors: factors,
                riskLevel: riskAssessment.level,
                riskScore: riskAssessment.score,
                marketingStrategies: generateMarketingStrategies(inputs, factors),
                aiReasoning: generateAIReasoning(inputs, factors, riskAssessment)
            };
        }

        // Display results (Original)
        function displayResults(result) {
            document.getElementById('costPerStick').textContent = result.costPerStick.toFixed(2);
            document.getElementById('suggestedPrice').textContent = result.suggestedPrice.toFixed(2);
            document.getElementById('profitMargin').textContent = result.profitMargin.toFixed(2);
            document.getElementById('dailyProfit').textContent = result.dailyProfit.toFixed(0);

            // Update risk indicator
            const riskIndicator = document.getElementById('riskIndicator');
            const riskLevel = document.getElementById('riskLevel');
            const riskPosition = result.riskScore * 100;
            
            riskIndicator.style.left = `${riskPosition}%`;
            riskIndicator.style.backgroundColor = result.riskLevel === '‡∏ï‡πà‡∏≥' ? '#228B22' : 
                                                 result.riskLevel === '‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á' ? '#FFD700' : '#FF6347';
            riskLevel.textContent = `‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á: ${result.riskLevel} (${(result.riskScore * 100).toFixed(0)}%)`;

            // Display factor analysis
            const factorAnalysis = document.getElementById('factorAnalysis');
            factorAnalysis.innerHTML = Object.entries(result.factors).map(([key, factor]) => `
                <div class="factor-item">
                    <strong>${getFactorName(key)}:</strong><br>
                    <span style="color: ${factor.impact === 'positive' ? '#228B22' : factor.impact === 'negative' ? '#DC143C' : '#666'}">
                        ${factor.description}
                    </span>
                </div>
            `).join('');

            // Display AI reasoning
            document.getElementById('aiReasoning').innerHTML = result.aiReasoning;

            // Display marketing strategies
            const marketingStrategies = document.getElementById('marketingStrategies');
            marketingStrategies.innerHTML = result.marketingStrategies.map(strategy => `
                <div class="strategy-item">
                    <strong>${strategy.stage}: ${strategy.strategy}</strong><br>
                    <span style="color: #666; font-size: 0.9rem;">${strategy.description}</span><br>
                    <span style="color: #8B4513; font-weight: 500;">üí° ${strategy.recommendation}</span>
                </div>
            `).join('');
        }

        // Helper function to get factor display names
        function getFactorName(key) {
            const names = {
                porkPrice: '‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏°‡∏π',
                fuelCost: '‡∏Ñ‡πà‡∏≤‡πÅ‡∏Å‡πä‡∏™/‡∏ñ‡πà‡∏≤‡∏ô',
                weather: '‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®',
                economic: '‡∏™‡∏†‡∏≤‡∏û‡πÄ‡∏®‡∏£‡∏©‡∏ê‡∏Å‡∏¥‡∏à',
                season: '‡∏§‡∏î‡∏π‡∏Å‡∏≤‡∏•',
                political: '‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏∑‡∏≠‡∏á'
            };
            return names[key] || key;
        }

        // ========== REALTIME FEATURES (Original) ========== //
        
        // ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö realtime
        let realtimeInterval;
        let isRealtimeActive = false;
        
        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏à‡∏£‡∏¥‡∏á
        function generateRealisticPrice(currentPrice, type) {
            const variation = (Math.random() - 0.5) * 10; // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á ¬±5
            let newPrice;
            
            if (type === 'pork') {
                newPrice = Math.max(120, Math.min(280, currentPrice + variation));
            } else if (type === 'fuel') {
                newPrice = Math.max(80, Math.min(350, currentPrice + variation));
            }
            
            return Math.round(newPrice * 100) / 100; // ‡∏õ‡∏±‡∏î‡πÄ‡∏®‡∏© 2 ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á
        }
        
        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏£‡∏≤‡∏Ñ‡∏≤‡πÅ‡∏ö‡∏ö realtime
        function updateRealtimePrices() {
            const porkInput = document.getElementById('porkPrice');
            const fuelInput = document.getElementById('fuelCost');
            
            // ‡πÄ‡∏Å‡πá‡∏ö‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏Å‡πà‡∏≤
            const oldPorkPrice = parseFloat(porkInput.value);
            const oldFuelPrice = parseFloat(fuelInput.value);
            
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡πÉ‡∏´‡∏°‡πà
            const newPorkPrice = generateRealisticPrice(oldPorkPrice, 'pork');
            const newFuelPrice = generateRealisticPrice(oldFuelPrice, 'fuel');
            
            // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 0.5 ‡∏ö‡∏≤‡∏ó
            if (Math.abs(newPorkPrice - oldPorkPrice) > 0.5) {
                animatePriceChange(porkInput, oldPorkPrice, newPorkPrice, '‡∏´‡∏°‡∏π');
            }
            
            if (Math.abs(newFuelPrice - oldFuelPrice) > 0.5) {
                animatePriceChange(fuelInput, oldFuelPrice, newFuelPrice, '‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡πÄ‡∏û‡∏•‡∏¥‡∏á');
            }
        }
        
        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ó‡∏≥‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Ñ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô
        function animatePriceChange(input, oldPrice, newPrice, itemName) {
            // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ‡∏ï‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡∏Ç‡∏∂‡πâ‡∏ô/‡∏•‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤
            if (newPrice > oldPrice) {
                input.style.borderColor = '#ff6b6b';
                input.style.backgroundColor = '#ffebee';
                showPriceAlert(itemName, '‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏∂‡πâ‡∏ô', newPrice - oldPrice, 'up');
            } else {
                input.style.borderColor = '#4caf50';
                input.style.backgroundColor = '#e8f5e9';
                showPriceAlert(itemName, '‡∏•‡∏î‡∏•‡∏á', oldPrice - newPrice, 'down');
            }
            
            // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏£‡∏≤‡∏Ñ‡∏≤
            input.value = newPrice;
            
            // ‡∏•‡πâ‡∏≤‡∏á‡∏™‡∏µ‡∏´‡∏•‡∏±‡∏á 3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
            setTimeout(() => {
                input.style.borderColor = '';
                input.style.backgroundColor = '';
            }, 3000);
            
            // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
            calculatePricing();
        }
        
        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
        function showPriceAlert(itemName, direction, amount, type) {
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á div ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
            const alertDiv = document.createElement('div');
            alertDiv.className = 'price-alert';
            alertDiv.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                z-index: 1000;
                padding: 15px 20px;
                border-radius: 8px;
                box-shadow: 0 4px 15px rgba(0,0,0,0.2);
                animation: slideIn 0.3s ease;
                max-width: 300px;
                ${type === 'up' ? 
                    'background: #ffebee; border-left: 4px solid #ff6b6b; color: #c62828;' : 
                    'background: #e8f5e9; border-left: 4px solid #4caf50; color: #2e7d32;'}
            `;
            
            alertDiv.innerHTML = `
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <strong>‡∏£‡∏≤‡∏Ñ‡∏≤${itemName}${direction}</strong><br>
                        <small>${amount.toFixed(1)} ‡∏ö‡∏≤‡∏ó</small>
                    </div>
                    <button onclick="this.parentElement.parentElement.remove()" 
                            style="background: none; border: none; font-size: 18px; cursor: pointer;">√ó</button>
                </div>
            `;
            
            document.body.appendChild(alertDiv);
            
            // ‡∏•‡∏ö‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏´‡∏•‡∏±‡∏á 5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
            setTimeout(() => {
                if (alertDiv.parentNode) {
                    alertDiv.remove();
                }
            }, 5000);
        }
        
        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏° realtime
        function startRealtime() {
            if (!isRealtimeActive) {
                isRealtimeActive = true;
                realtimeInterval = setInterval(updateRealtimePrices, 15000); // ‡∏ó‡∏∏‡∏Å 15 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
                
                // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏õ‡∏∏‡πà‡∏°
                const button = document.getElementById('realtimeToggle');
                if (button) {
                    button.innerHTML = '‚è∏Ô∏è ‡∏´‡∏¢‡∏∏‡∏î Realtime';
                    button.style.background = '#f44336';
                }
                
                console.log('üîÑ Realtime started!');
            }
        }
        
        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î realtime
        function stopRealtime() {
            if (isRealtimeActive) {
                isRealtimeActive = false;
                clearInterval(realtimeInterval);
                
                // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏õ‡∏∏‡πà‡∏°
                const button = document.getElementById('realtimeToggle');
                if (button) {
                    button.innerHTML = 'üîÑ ‡πÄ‡∏£‡∏¥‡πà‡∏° Realtime';
                    button.style.background = '#4CAF50';
                }
                
                console.log('‚è∏Ô∏è Realtime stopped!');
            }
        }
        
        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏•‡∏±‡∏ö realtime
        function toggleRealtime() {
            if (isRealtimeActive) {
                stopRealtime();
            } else {
                startRealtime();
            }
        }
        
        // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏õ‡∏∏‡πà‡∏° realtime
        function createRealtimeButton() {
            const button = document.createElement('button');
            button.id = 'realtimeToggle';
            button.innerHTML = 'üîÑ ‡πÄ‡∏£‡∏¥‡πà‡∏° Realtime';
            button.onclick = toggleRealtime;
            button.style.cssText = `
                position: fixed;
                top: 20px;
                left: 20px;
                z-index: 1000;
                padding: 12px 18px;
                background: #4CAF50;
                color: white;
                border: none;
                border-radius: 8px;
                cursor: pointer;
                font-weight: 500;
                box-shadow: 0 2px 8px rgba(0,0,0,0.2);
                transition: all 0.3s ease;
            `;
            
            // ‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Ñ hover
            button.addEventListener('mouseenter', () => {
                button.style.transform = 'scale(1.05)';
            });
            
            button.addEventListener('mouseleave', () => {
                button.style.transform = 'scale(1)';
            });
            
            document.body.appendChild(button);
        }
        
        // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡πÑ‡∏ï‡∏•‡πå CSS ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö animation
        function addRealtimeStyles() {
            const style = document.createElement('style');
            style.textContent = `
                @keyframes slideIn {
                    from { 
                        transform: translateX(100%); 
                        opacity: 0; 
                    }
                    to { 
                        transform: translateX(0); 
                        opacity: 1; 
                    }
                }
                
                @keyframes bounceIn {
                    from { 
                        transform: translateX(-50%) scale(0.3); 
                        opacity: 0; 
                    }
                    50% { 
                        transform: translateX(-50%) scale(1.05); 
                    }
                    to { 
                        transform: translateX(-50%) scale(1); 
                        opacity: 1; 
                    }
                }
                
                @keyframes fadeOut {
                    from { 
                        opacity: 1; 
                        transform: translateX(-50%) scale(1); 
                    }
                    to { 
                        opacity: 0; 
                        transform: translateX(-50%) scale(0.8); 
                    }
                }
                
                @keyframes bounce {
                    0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
                    40% { transform: translateY(-10px); }
                    60% { transform: translateY(-5px); }
                }
                
                .price-alert {
                    animation: slideIn 0.3s ease;
                }
                
                input[type="number"] {
                    transition: all 0.3s ease;
                }
            `;
            document.head.appendChild(style);
        }

        // ========== INITIALIZATION ========== //

        // Initialize application
        document.addEventListener('DOMContentLoaded', function() {
            // Load default settings
            loadSettings();
            
            // Initialize profile and AI display
            loadProfileForm();
            updateAIDisplay();
            updateChatTitle();
            
            // Initialize chat system
            initializeChat();

            // Add realtime styles and button
            addRealtimeStyles();
            createRealtimeButton();

            // Add smooth scrolling to results
            window.addEventListener('scroll', function() {
                const cards = document.querySelectorAll('.card, .result-section');
                cards.forEach(card => {
                    const cardTop = card.getBoundingClientRect().top;
                    const cardBottom = card.getBoundingClientRect().bottom;
                    const isVisible = cardTop < window.innerHeight && cardBottom > 0;
                    
                    if (isVisible && !card.classList.contains('animate-slide-up')) {
                        card.classList.add('animate-slide-up');
                    }
                });
            });

            // Close modal when clicking outside
            const settingsPanel = document.getElementById('settingsPanel');
            if (settingsPanel) {
                settingsPanel.addEventListener('click', function(e) {
                    if (e.target === this) {
                        closeSettings();
                    }
                });
            }

            // Real-time input validation and formatting
            const numberInputs = document.querySelectorAll('input[type="number"]');
            numberInputs.forEach(input => {
                input.addEventListener('input', function() {
                    if (this.value < 0) this.value = 0;
                    if (this.hasAttribute('max') && parseFloat(this.value) > parseFloat(this.getAttribute('max'))) {
                        this.value = this.getAttribute('max');
                    }
                });
            });

            console.log('üçñ AI ‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏£‡∏∞‡∏ö‡∏ö Chat ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÅ‡∏•‡πâ‡∏ß!');
        });

        // ‡∏õ‡∏¥‡∏î realtime ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡πâ‡∏≤
        window.addEventListener('beforeunload', () => {
            stopRealtime();
        });

        // Performance optimization
        let resizeTimeout;
        window.addEventListener('resize', function() {
            clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(function() {
                // Layout recalculation happens silently
            }, 250);
        });

        // Export/Import functionality (optional)
        function exportData() {
            try {
                const data = {
                    settings: businessSettings,
                    history: calculationHistory,
                    aiMemory: {
                        profile: aiMemory.profile,
                        usage: aiMemory.usage,
                        patterns: aiMemory.patterns,
                        learning: aiMemory.learning,
                        chatHistory: aiMemory.chatHistory
                    },
                    exportDate: new Date().toISOString()
                };
                
                const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `moo-ping-ai-data-${new Date().toISOString().split('T')[0]}.json`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                showFeedback('‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• AI ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢!', 'success');
            } catch (error) {
                console.error('Export failed:', error);
                showFeedback('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•', 'error');
            }
        }

        function importData(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    
                    // Import business settings
                    if (data.settings) businessSettings = data.settings;
                    
                    // Import calculation history
                    if (data.history) calculationHistory = data.history;
                    
                    // Import AI Memory
                    if (data.aiMemory) {
                        if (data.aiMemory.profile) {
                            localStorage.setItem(MEMORY_KEYS.profile, JSON.stringify(data.aiMemory.profile));
                        }
                        if (data.aiMemory.usage) {
                            localStorage.setItem(MEMORY_KEYS.usage, JSON.stringify(data.aiMemory.usage));
                        }
                        if (data.aiMemory.patterns) {
                            localStorage.setItem(MEMORY_KEYS.patterns, JSON.stringify(data.aiMemory.patterns));
                        }
                        if (data.aiMemory.learning) {
                            localStorage.setItem(MEMORY_KEYS.learning, JSON.stringify(data.aiMemory.learning));
                        }
                        if (data.aiMemory.chatHistory) {
                            localStorage.setItem(MEMORY_KEYS.chatHistory, JSON.stringify(data.aiMemory.chatHistory));
                        }
                    }
                    
                    // Reload AI Memory
                    aiMemory = new AIMemory();
                    conversationalAI = new ConversationalAI(aiMemory);
                    
                    // Update UI
                    loadSettings();
                    loadProfileForm();
                    updateAIDisplay();
                    loadChatHistory();
                    
                    showFeedback('‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• AI ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!', 'success');
                } catch (error) {
                    console.error('Import failed:', error);
                    showFeedback('‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà', 'error');
                }
            };
            reader.readAsText(file);
        }
    </script>
</body>
</html>        function showTypingIndicator() {
            const chatMessages = document.getElementById('chatMessages');
            const typingDiv = document.createElement('div');
            typingDiv.className = 'chat-message ai';
            typingDiv.id = 'typingIndicator';
            
            typingDiv.innerHTML = `
                <div class="typing-indicator">
                    <i class="fas fa-robot" style="margin-right: 8px;"></i>
                    AI ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡∏¥‡∏î...
                    <div class="typing-dots">
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                    </div>
                </div>
            `;

            chatMessages.appendChild(typingDiv);
            scrollToBottom();
        }

        function hideTypingIndicator() {
            const typingIndicator = document.getElementById('typingIndicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
        }

        function scrollToBottom() {
            const chatMessages = document.getElementById('chatMessages');
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function handleChatKeyPress(event) {
            if (event.key === 'Enter') {
                sendChatMessage();
            }
        }

        function handleSuggestion(suggestion) {
            // Handle different types of suggestions
            switch (suggestion.action) {
                case 'scrollToCalculator':
                    setTimeout(() => {
                        document.querySelector('.button').scrollIntoView({ 
                            behavior: 'smooth', 
                            block: 'center' 
                        });
                    }, 2000);
                    break;
                case 'scrollToProfile':
                    setTimeout(() => {
                        document.getElementById('userName').scrollIntoView({ 
                            behavior: 'smooth', 
                            block: 'center' 
                        });
                    }, 2000);
                    break;
            }
        }

        function showChatNotification() {
            const notification = document.getElementById('chatNotification');
            if (notification) {
                notification.style.display = 'flex';
            }
        }

        function hideChatNotification() {
            const notification = document.getElementById('chatNotification');
            if (notification) {
                notification.style.display = 'none';
            }
        }

        // ========== PROFILE FUNCTIONS ========== //

        function saveProfile() {
            const profileData = {
                userName: document.getElementById('userName').value.trim(),
                businessGoal: document.getElementById('businessGoal').value,
                experienceLevel: document.getElementById('experienceLevel').value,
                riskTolerance: document.getElementById('riskTolerance').value
            };

            // Validation
            if (!profileData.userName) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ AI ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å');
                return;
            }

            if (aiMemory.saveProfile(profileData)) {
                updateAIDisplay();
                showFeedback('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡πâ‡∏ß! AI ‡∏à‡∏∞‡∏à‡∏≥‡∏Ñ‡∏∏‡∏ì‡∏ï‡πà‡∏≠‡∏à‡∏≤‡∏Å‡∏ô‡∏µ‡πâ ‚ú®', 'success');
                
                // Update chat title
                updateChatTitle();
            } else {
                showFeedback('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà', 'error');
            }
        }

        function resetAIMemory() {
            if (confirm('‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏£‡∏á‡∏à‡∏≥‡∏Ç‡∏≠‡∏á AI ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?\n(‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏î‡πâ)')) {
                aiMemory.resetMemory();
                updateAIDisplay();
                clearProfileForm();
                
                // Clear chat
                document.getElementById('chatMessages').innerHTML = '';
                updateChatTitle();
                
                showFeedback('‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï AI Memory ‡πÅ‡∏•‡πâ‡∏ß ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÉ‡∏´‡∏°‡πà!', 'info');
                
                // Add new welcome message
                setTimeout(() => {
                    addWelcomeMessage();
                }, 1000);
            }
        }

        function clearProfileForm() {
            document.getElementById('userName').value = '';
            document.getElementById('businessGoal').value = '';
            document.getElementById('experienceLevel').value = '';
            document.getElementById('riskTolerance').value = '';
        }

        function loadProfileForm() {
            const profile = aiMemory.profile;
            document.getElementById('userName').value = profile.userName || '';
            document.getElementById('businessGoal').value = profile.businessGoal || '';
            document.getElementById('experienceLevel').value = profile.experienceLevel || '';
            document.getElementById('riskTolerance').value = profile.riskTolerance || '';
        }

        function updateAIDisplay() {
            // Update greeting
            document.getElementById('aiGreeting').innerHTML = 
                `<i class="fas fa-robot"></i> ${aiMemory.getPersonalizedGreeting()}`;
            
            // Update insight
            document.getElementById('aiInsight').textContent = aiMemory.getPersonalizedInsight();
            
            // Update statistics
            document.getElementById('usageCount').textContent = aiMemory.usage.totalCalculations || 0;
            document.getElementById('dataPoints').textContent = 
                (aiMemory.patterns.pricePatterns.length + Object.keys(aiMemory.profile).filter(k => aiMemory.profile[k]).length + aiMemory.usage.chatInteractions);
            
            // Update learning progress
            aiMemory.updateLearning();
            const progress = aiMemory.learning.learningProgress;
            document.getElementById('learningPercent').textContent = `${progress}%`;
            document.getElementById('learningBar').style.width = `${progress}%`;
            
            // Update accuracy (simulated based on usage)
            const accuracy = Math.min(95, 60 + (aiMemory.usage.totalCalculations * 2) + (aiMemory.usage.chatInteractions));
            document.getElementById('aiAccuracy').textContent = `${accuracy}%`;
            
            // Update personality
            if (aiMemory.learning.personalityType) {
                document.getElementById('personalityText').textContent = 
                    `‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó: ${aiMemory.learning.personalityType}`;
                    
                if (aiMemory.learning.chatPersonality) {
                    document.getElementById('personalityText').textContent += 
                        ` ‚Ä¢ ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏Ñ‡∏∏‡∏¢: ${aiMemory.learning.chatPersonality}`;
                }
            }
        }

        function updateChatTitle() {
            const chatTitle = document.getElementById('chatTitle');
            const userName = aiMemory.profile.userName;
            
            if (userName) {
                chatTitle.textContent = `AI ‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤${userName}`;
            } else {
                chatTitle.textContent = 'AI ‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á';
            }
        }

        function showFeedback(message, type = 'info') {
            // Create feedback element
            const feedback = document.createElement('div');
            feedback.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                z-index: 2000;
                padding: 20px 30px;
                border-radius: 10px;
                box-shadow: 0 8px 32px rgba(0,0,0,0.3);
                animation: feedbackShow 0.3s ease;
                font-weight: 500;
                text-align: center;
                max-width: 400px;
            `;

            // Set colors based on type
            const colors = {
                success: 'background: #e8f5e9; color: #2e7d32; border: 2px solid #4caf50;',
                error: 'background: #ffebee; color: #c62828; border: 2px solid #f44336;',
                info: 'background: #e3f2fd; color: #1565c0; border: 2px solid #2196f3;'
            };

            feedback.style.cssText += colors[type] || colors.info;
            feedback.textContent = message;

            document.body.appendChild(feedback);

            // Auto remove after 3 seconds
            setTimeout(() => {
                feedback.style.animation = 'feedbackHide 0.3s ease';
                setTimeout(() => feedback.remove(), 300);
            }, 3000);
        }

        // Add CSS for feedback animation
        const feedbackStyle = document.createElement('style');
        feedbackStyle.textContent = `
            @keyframes feedbackShow {
                from { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
                to { opacity: 1; transform: translate(-50%, -50%) scale(1); }
            }
            @keyframes feedbackHide {
                from { opacity: 1; transform: translate(-50%, -50%) scale(1); }
                to { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
            }
        `;
        document.head.appendChild(feedbackStyle);

        // ========== ENHANCED CALCULATION FUNCTIONS ========== //

        // Main calculation function (‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà function ‡πÄ‡∏î‡∏¥‡∏°)
        function calculatePricing() {
            // Show loading state
            const resultsSection = document.getElementById('results');
            resultsSection.style.display = 'block';
            resultsSection.classList.add('animate-slide-up');

            // Get input values
            const inputs = {
                porkPrice: parseFloat(document.getElementById('porkPrice').value),
                fuelCost: parseFloat(document.getElementById('fuelCost').value),
                weather: document.getElementById('weather').value,
                economic: document.getElementById('economic').value,
                season: document.getElementById('season').value,
                political: document.getElementById('political').value,
                meatWeight: parseFloat(document.getElementById('meatWeight').value),
                stickCost: parseFloat(document.getElementById('stickCost').value),
                seasoningCost: parseFloat(document.getElementById('seasoningCost').value),
                laborCost: parseFloat(document.getElementById('laborCost').value),
                overheadCost: parseFloat(document.getElementById('overheadCost').value),
                dailySticks: parseFloat(document.getElementById('dailySticks').value)
            };

            // Record usage in AI Memory
            aiMemory.recordUsage(inputs);

            // Use AI Memory for personalized analysis
            const personalizedFactors = getPersonalizedFactors(inputs);
            
            // Simulate AI processing delay with personalized message
            const userName = aiMemory.profile.userName || '‡∏Ñ‡∏∏‡∏ì';
            showAIThinking(userName);

            setTimeout(() => {
                // Perform analysis with memory-enhanced AI
                const result = performEnhancedAIAnalysis(inputs, personalizedFactors);
                
                // Record pattern for learning
                aiMemory.recordPattern(inputs, result);
                
                // Display results with personalization
                displayPersonalizedResults(result);
                
                // Update AI display
                updateAIDisplay();
                
                // Save to history (existing functionality)
                calculationHistory.push({
                    timestamp: new Date().toLocaleString('th-TH'),
                    cost: result.costPerStick.toFixed(2),
                    price: result.suggestedPrice.toFixed(2),
                    profit: result.profitMargin.toFixed(2),
                    risk: result.riskLevel,
                    inputs: inputs,
                    aiPersonalization: result.personalizedInsights // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡∏°‡πà
                });

                // Show completion feedback
                showFeedback(`${userName} ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß! AI ‡πÑ‡∏î‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏µ‡πâ`, 'success');
                
                // Auto-suggest chat if user never used it
                if (aiMemory.usage.chatInteractions === 0) {
                    setTimeout(() => {
                        showChatNotification();
                        const suggestion = document.createElement('div');
                        suggestion.style.cssText = `
                            position: fixed;
                            top: 20px;
                            left: 50%;
                            transform: translateX(-50%);
                            z-index: 1500;
                            padding: 15px 20px;
                            background: rgba(255, 215, 0, 0.95);
                            color: #1a1a1a;
                            border-radius: 25px;
                            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
                            animation: bounceIn 0.5s ease;
                            backdrop-filter: blur(10px);
                            text-align: center;
                            font-weight: 500;
                        `;
                        suggestion.innerHTML = `
                            <i class="fas fa-robot" style="margin-right: 8px;"></i>
                            ‡∏•‡∏≠‡∏á‡∏Ñ‡∏∏‡∏¢‡∏Å‡∏±‡∏ö AI ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ñ‡∏≤‡∏°‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡πÑ‡∏î‡πâ‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö! 
                            <i class="fas fa-arrow-down" style="margin-left: 8px;"></i>
                        `;
                        document.body.appendChild(suggestion);
                        
                        setTimeout(() => {
                            suggestion.style.animation = 'fadeOut 0.5s ease';
                            setTimeout(() => suggestion.remove(), 500);
                        }, 4000);
                    }, 3000);
                }
            }, 1500);
        }

        // Enhanced AI Analysis with Memory
        function performEnhancedAIAnalysis(inputs, personalizedFactors) {
            // Get base analysis (existing function - ‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏à‡∏≤‡∏Å code ‡πÄ‡∏î‡∏¥‡∏°)
            const baseResult = performAIAnalysis(inputs);
            
            // Add personalized enhancements
            const personalizedResult = {
                ...baseResult,
                personalizedInsights: generatePersonalizedInsights(inputs, baseResult),
                memoryBasedRecommendations: getMemoryBasedRecommendations(inputs),
                riskAdjustment: calculatePersonalizedRisk(inputs, baseResult),
                experienceModifier: getExperienceModifier()
            };

            // Adjust pricing based on user's profile
            const profileAdjustment = getProfileBasedAdjustment();
            personalizedResult.suggestedPrice *= profileAdjustment.priceMultiplier;
            personalizedResult.marketingStrategies = enhanceMarketingStrategies(
                personalizedResult.marketingStrategies, 
                aiMemory.profile
            );

            return personalizedResult;
        }

        // Get personalized factors based on memory
        function getPersonalizedFactors(inputs) {
            const factors = {};
            
            // Use historical preferences
            const favorites = aiMemory.usage.favoriteSettings;
            
            // Adjust factors based on user patterns
            if (favorites.weather && favorites.weather[inputs.weather] > 2) {
                factors.weatherComfort = 0.1; // User familiar with this weather
            }
            
            if (favorites.economic && favorites.economic[inputs.economic] > 2) {
                factors.economicFamiliarity = 0.1; // User experienced with this situation
            }
            
            return factors;
        }

        // Generate personalized insights
        function generatePersonalizedInsights(inputs, result) {
            const insights = [];
            const profile = aiMemory.profile;
            const patterns = aiMemory.patterns.pricePatterns;
            
            // Experience-based insights
            if (profile.experienceLevel === 'newbie') {
                insights.push('üéì ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏°‡∏∑‡∏≠‡πÉ‡∏´‡∏°‡πà: ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏µ‡πà‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢ ‡πÄ‡∏ô‡πâ‡∏ô‡πÄ‡∏™‡∏ñ‡∏µ‡∏¢‡∏£‡∏†‡∏≤‡∏û‡∏Å‡πà‡∏≠‡∏ô');
                if (result.riskScore > 0.7) {
                    insights.push('‚ö†Ô∏è ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏•‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏•‡∏á ‡πÄ‡∏ô‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ê‡∏≤‡∏ô‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏Å‡πà‡∏≠‡∏ô');
                }
            } else if (profile.experienceLevel === 'expert') {
                insights.push('üèÜ ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏ã‡∏µ‡∏¢‡∏ô: ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≥‡πÑ‡∏£‡πÑ‡∏î‡πâ‡∏≠‡∏µ‡∏Å 5-10% ‡∏à‡∏≤‡∏Å‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏µ‡πà‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥');
                if (result.profitMargin > result.costPerStick * 0.5) {
                    insights.push('üí∞ ‡∏Å‡∏≥‡πÑ‡∏£‡∏î‡∏µ! ‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡∏Ç‡∏¢‡∏≤‡∏¢‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏´‡∏£‡∏∑‡∏≠‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û');
                }
            }
            
            // Risk tolerance insights
            if (profile.riskTolerance === 'conservative') {
                insights.push('üõ°Ô∏è ‡∏ï‡∏≤‡∏°‡∏ö‡∏∏‡∏Ñ‡∏•‡∏¥‡∏Å‡∏Ñ‡∏∏‡∏ì: ‡πÄ‡∏ô‡πâ‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏±‡πà‡∏ô‡∏Ñ‡∏á ‡∏•‡∏î‡∏£‡∏≤‡∏Ñ‡∏≤‡∏•‡∏á 5% ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢');
            } else if (profile.riskTolerance === 'aggressive') {
                insights.push('üöÄ ‡∏ï‡∏≤‡∏°‡∏ö‡∏∏‡∏Ñ‡∏•‡∏¥‡∏Å‡∏Ñ‡∏∏‡∏ì: ‡∏•‡∏≠‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏Ñ‡∏≤ 8-12% ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ï‡∏•‡∏≤‡∏î');
            }
            
            // Pattern-based insights
            if (patterns.length >= 3) {
                const recentPatterns = patterns.slice(-3);
                const avgProfit = recentPatterns.reduce((sum, p) => sum + p.outputs.profitMargin, 0) / 3;
                
                if (result.profitMargin > avgProfit * 1.2) {
                    insights.push('üìà ‡∏Å‡∏≥‡πÑ‡∏£‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ô‡∏µ‡πâ‡∏™‡∏π‡∏á‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢ 20%! ‡∏™‡∏†‡∏≤‡∏û‡∏ï‡∏•‡∏≤‡∏î‡∏î‡∏µ');
                } else if (result.profitMargin < avgProfit * 0.8) {
                    insights.push('üìâ ‡∏Å‡∏≥‡πÑ‡∏£‡∏ï‡πà‡∏≥‡∏Å‡∏ß‡πà‡∏≤‡∏õ‡∏Å‡∏ï‡∏¥ ‡∏•‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå‡∏ï‡∏•‡∏≤‡∏î');
                }
            }
            
            // Goal-based insights
            if (profile.businessGoal === 'survival') {
                insights.push('üéØ ‡∏ï‡∏≤‡∏°‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: ‡∏•‡∏≠‡∏á‡∏´‡∏≤‡∏ß‡∏¥‡∏ò‡∏µ‡∏•‡∏î‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡πÅ‡∏ó‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏Ñ‡∏≤');
            } else if (profile.businessGoal === 'growth') {
                insights.push('üéØ ‡∏ï‡∏≤‡∏°‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: ‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏´‡∏£‡∏∑‡∏≠‡∏à‡∏±‡∏î‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô');
            } else if (profile.businessGoal === 'franchise') {
                insights.push('üéØ ‡∏ï‡∏≤‡∏°‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ô‡∏µ‡πâ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö standardization ‡∏Ç‡πâ‡∏≤‡∏°‡∏™‡∏≤‡∏Ç‡∏≤');
            }
            
            return insights;
        }

        // Memory-based recommendations
        function getMemoryBasedRecommendations(inputs) {
            const recommendations = [];
            const favorites = aiMemory.usage.favoriteSettings;
            
            // Weather pattern recommendations
            if (favorites.weather) {
                const mostUsedWeather = Object.keys(favorites.weather).reduce((a, b) => 
                    favorites.weather[a] > favorites.weather[b] ? a : b);
                
                if (inputs.weather !== mostUsedWeather) {
                    const weatherTexts = {
                        sunny: '‡πÅ‡∏î‡∏î‡∏à‡∏±‡∏î',
                        rainy: '‡∏ù‡∏ô‡∏ï‡∏Å', 
                        cloudy: '‡∏Ñ‡∏£‡∏∂‡πâ‡∏°',
                        cold: '‡∏´‡∏ô‡∏≤‡∏ß'
                    };
                    recommendations.push(
                        `üå§Ô∏è ‡∏Ñ‡∏∏‡∏ì‡∏°‡∏±‡∏Å‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÉ‡∏ô‡∏™‡∏†‡∏≤‡∏û${weatherTexts[mostUsedWeather]} ‡∏•‡∏≠‡∏á‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏ú‡∏•‡∏ï‡πà‡∏≤‡∏á`
                    );
                }
            }
            
            // Price pattern recommendations
            const patterns = aiMemory.patterns.pricePatterns;
            if (patterns.length >= 5) {
                const successfulPatterns = patterns.filter(p => p.success);
                const successRate = (successfulPatterns.length / patterns.length) * 100;
                
                if (successRate < 60) {
                    recommendations.push(
                        `üìä ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ${successRate.toFixed(0)}% ‡∏•‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå‡πÉ‡∏´‡∏°‡πà`
                    );
                } else if (successRate > 80) {
                    recommendations.push(
                        `‚ú® ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ${successRate.toFixed(0)}% ‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏≥‡πÑ‡∏î‡πâ‡∏î‡∏µ‡∏°‡∏≤‡∏Å!`
                    );
                }
            }
            
            return recommendations;
        }

        // Calculate personalized risk
        function calculatePersonalizedRisk(inputs, result) {
            let riskAdjustment = 0;
            const profile = aiMemory.profile;
            
            // Experience level adjustment
            if (profile.experienceLevel === 'expert') {
                riskAdjustment += 0.1; // Experts can handle more risk
            } else if (profile.experienceLevel === 'newbie') {
                riskAdjustment -= 0.1; // Newbies need lower risk
            }
            
            // Risk tolerance adjustment
            if (profile.riskTolerance === 'aggressive') {
                riskAdjustment += 0.15;
            } else if (profile.riskTolerance === 'conservative') {
                riskAdjustment -= 0.15;
            }
            
            return Math.max(0.1, Math.min(0.9, result.riskScore + riskAdjustment));
        }

        // Experience modifier for pricing
        function getExperienceModifier() {
            const profile = aiMemory.profile;
            const modifiers = {
                newbie: 0.95,    // 5% discount for safety
                learning: 0.98,  // 2% discount
                experienced: 1.02, // 2% premium
                expert: 1.05     // 5% premium
            };
            
            return modifiers[profile.experienceLevel] || 1.0;
        }

        // Profile-based pricing adjustment
        function getProfileBasedAdjustment() {
            const profile = aiMemory.profile;
            let priceMultiplier = 1.0;
            
            // Risk tolerance impact
            if (profile.riskTolerance === 'conservative') {
                priceMultiplier *= 0.95; // Lower prices for safety
            } else if (profile.riskTolerance === 'aggressive') {
                priceMultiplier *= 1.08; // Higher prices for more profit
            }
            
            // Experience impact
            priceMultiplier *= getExperienceModifier();
            
            // Goal impact
            if (profile.businessGoal === 'survival') {
                priceMultiplier *= 0.92; // Competitive pricing
            } else if (profile.businessGoal === 'growth') {
                priceMultiplier *= 1.05; // Growth-oriented pricing
            }
            
            return { priceMultiplier };
        }

        // Enhance marketing strategies with personality
        function enhanceMarketingStrategies(strategies, profile) {
            const enhanced = strategies.map(strategy => {
                let enhancement = '';
                
                // Add personality-specific tactics
                if (profile.experienceLevel === 'newbie') {
                    enhancement = ' (‡πÄ‡∏ô‡πâ‡∏ô‡∏á‡πà‡∏≤‡∏¢‡πÜ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÑ‡∏î‡πâ)';
                } else if (profile.experienceLevel === 'expert') {
                    enhancement = ' (‡∏Ç‡∏±‡πâ‡∏ô‡∏™‡∏π‡∏á ‡πÉ‡∏ä‡πâ‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå‡πÄ‡∏ï‡πá‡∏°‡∏ó‡∏µ‡πà)';
                }
                
                // Add goal-specific modifications
                if (profile.businessGoal === 'franchise') {
                    enhancement += ' [‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö franchise]';
                }
                
                return {
                    ...strategy,
                    description: strategy.description + enhancement,
                    personalizedTip: getPersonalizedMarketingTip(strategy.stage, profile)
                };
            });
            
            return enhanced;
        }

        // Get personalized marketing tip
        function getPersonalizedMarketingTip(stage, profile) {
            const tips = {
                newbie: {
                    'Awareness': '‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å Facebook ‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß/‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏Å‡πà‡∏≠‡∏ô',
                    'Interest': '‡πÇ‡∏û‡∏™‡∏ï‡πå‡∏†‡∏≤‡∏û‡∏á‡πà‡∏≤‡∏¢‡πÜ ‡πÑ‡∏°‡πà‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô',
                    'Consideration': '‡πÉ‡∏´‡πâ‡∏•‡∏≠‡∏á‡∏ä‡∏¥‡∏°‡∏ü‡∏£‡∏µ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏à',
                    'Purchase': '‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏Ñ‡∏£‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡∏™‡πà‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤',
                    'Retention': '‡∏à‡∏≥‡πÉ‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ ‡∏ó‡∏±‡∏Å‡∏ó‡∏≤‡∏¢‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏±‡∏ô‡πÄ‡∏≠‡∏á'
                },
                expert: {
                    'Awareness': '‡πÉ‡∏ä‡πâ Influencer ‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ô‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏ï‡∏•‡∏≤‡∏î',
                    'Interest': '‡∏™‡∏£‡πâ‡∏≤‡∏á brand story ‡∏ó‡∏µ‡πà‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏Å‡∏£‡πà‡∏á',
                    'Consideration': '‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Ñ‡∏π‡πà‡πÅ‡∏Ç‡πà‡∏á ‡πÅ‡∏™‡∏î‡∏á‡∏à‡∏∏‡∏î‡πÄ‡∏î‡πà‡∏ô',
                    'Purchase': '‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå‡πÅ‡∏ö‡∏ö seamless',
                    'Retention': 'CRM system ‡∏î‡∏π‡πÅ‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÅ‡∏ö‡∏ö VIP'
                }
            };
            
            const userTips = tips[profile.experienceLevel] || tips.newbie;
            return userTips[stage.split(' ')[0]] || '‡∏õ‡∏£‡∏±‡∏ö‡πÉ‡∏´‡πâ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏Ñ‡∏∏‡∏ì';
        }

        // Show AI thinking animation
        function showAIThinking(userName) {
            const thinkingMessages = [
                `${userName} ‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà‡∏ô‡∏∞ AI ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡∏¥‡∏î...`,
                '‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏•‡∏≤‡∏î...',
                '‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á...',
                '‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏á‡∏ï‡∏≤‡∏°‡∏ö‡∏∏‡∏Ñ‡∏•‡∏¥‡∏Å‡∏Ñ‡∏∏‡∏ì...',
                '‡πÄ‡∏Å‡∏∑‡∏≠‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß!'
            ];
            
            let messageIndex = 0;
            const thinkingElement = document.createElement('div');
            thinkingElement.id = 'aiThinking';
            thinkingElement.style.cssText = `
                position: fixed;
                bottom: 20px;
                right: 20px;
                z-index: 1500;
                padding: 15px 20px;
                background: rgba(74, 144, 226, 0.95);
                color: white;
                border-radius: 25px;
                box-shadow: 0 4px 15px rgba(0,0,0,0.3);
                animation: bounce 1s infinite;
                backdrop-filter: blur(10px);
            `;
            
            function updateMessage() {
                if (messageIndex < thinkingMessages.length) {
                    thinkingElement.innerHTML = `
                        <i class="fas fa-robot" style="margin-right: 8px;"></i>
                        ${thinkingMessages[messageIndex]}
                        <span class="loading" style="margin-left: 8px;"></span>
                    `;
                    messageIndex++;
                    setTimeout(updateMessage, 300);
                } else {
                    setTimeout(() => {
                        thinkingElement.remove();
                    }, 200);
                }
            }
            
            document.body.appendChild(thinkingElement);
            updateMessage();
        }

        // Display personalized results
        function displayPersonalizedResults(result) {
            // Display base results (existing function - ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ function ‡πÄ‡∏î‡∏¥‡∏°)
            displayResults(result);
            
            // Add personalized insights section
            const aiAnalysis = document.querySelector('.ai-analysis');
            if (aiAnalysis && result.personalizedInsights) {
                const personalizedSection = document.createElement('div');
                personalizedSection.className = 'ai-analysis';
                personalizedSection.style.background = 'linear-gradient(135deg, #FFF8E1, #FFFDE7)';
                personalizedSection.style.borderLeft = '5px solid #FF8F00';
                
                personalizedSection.innerHTML = `
                    <h3 style="color: #E65100;">
                        <i class="fas fa-user-cog"></i> ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Ñ‡∏∏‡∏ì
                    </h3>
                    <div style="color: #2c1810;">
                        ${result.personalizedInsights.map(insight => 
                            `<div style="margin: 8px 0; padding: 8px; background: rgba(255,255,255,0.7); border-radius: 6px;">
                                ${insight}
                            </div>`
                        ).join('')}
                    </div>
                `;
                
                // Insert after AI analysis
                aiAnalysis.parentNode.insertBefore(personalizedSection, aiAnalysis.nextSibling);
            }
            
            // Add memory-based recommendations
            if (result.memoryBasedRecommendations && result.memoryBasedRecommendations.length > 0) {
                const recommendationSection = document.createElement('div');
                recommendationSection.className = 'ai-analysis';
                recommendationSection.style.background = 'linear-gradient(135deg, #F3E5F5, #FCE4EC)';
                recommendationSection.style.borderLeft = '5px solid #9C27B0';
                
                recommendationSection.innerHTML = `
                    <h3 style="color: #7B1FA2;">
                        <i class="fas fa-lightbulb"></i> AI ‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï‡πÄ‡∏´‡πá‡∏ô‡∏ß‡πà‡∏≤...
                    </h3>
                    <div style="color: #2c1810;">
                        ${result.memoryBasedRecommendations.map(rec => 
                            `<div style="margin: 8px 0; padding: 8px; background: rgba(255,255,255,0.7); border-radius: 6px;">
                                ${rec}
                            </div>`
                        ).join('')}
                    </div>
                `;
                
                document.querySelector('.result-section').appendChild(recommendationSection);
            }
        }

        // ========== ORIGINAL FUNCTIONS (‡∏ï‡πâ‡∏≠‡∏á‡∏Ñ‡∏á‡πÑ‡∏ß‡πâ) ========== //

        // Global variables
        let calculationHistory = [];
        let businessSettings = {
            name: '‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á‡∏à‡∏±‡∏°‡πÇ‡∏ö‡πâ',
            targetProfit: 40,
            location: 'market',
            workingHours: 10
        };

        // Load settings        </div>

        <div class="main-grid">
            <!-- Input Factors Section -->
            <div class="card animate-slide-up">
                <h2><i class="fas fa-chart-line"></i> ‡∏õ‡∏±‡∏à‡∏à‡∏±‡∏¢‡∏ï‡∏•‡∏≤‡∏î</h2>
                
                <div class="input-group">
                    <label for="porkPrice">‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏°‡∏π‡∏†‡∏≤‡∏Ñ‡πÄ‡∏´‡∏ô‡∏∑‡∏≠ (‡∏ö‡∏≤‡∏ó/‡∏Å‡∏Å.) 
                        <span class="tooltip" data-tooltip="‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏°‡∏π‡∏™‡∏î‡πÉ‡∏ô‡∏ï‡∏•‡∏≤‡∏î‡∏ó‡πâ‡∏≠‡∏á‡∏ñ‡∏¥‡πà‡∏ô">
                            <i class="fas fa-info-circle"></i>
                        </span>
                    </label>
                    <input type="number" id="porkPrice" value="180" min="100" max="500">
                </div>

                <div class="input-group">
                    <label for="fuelCost">‡∏Ñ‡πà‡∏≤‡πÅ‡∏Å‡πä‡∏™/‡∏ñ‡πà‡∏≤‡∏ô (‡∏ö‡∏≤‡∏ó/‡∏ß‡∏±‡∏ô)</label>
                    <input type="number" id="fuelCost" value="150" min="50" max="500">
                </div>

                <div class="input-group">
                    <label for="weather">‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®</label>
                    <select id="weather">
                        <option value="sunny">‡πÅ‡∏î‡∏î‡∏à‡∏±‡∏î</option>
                        <option value="rainy">‡∏ù‡∏ô‡∏ï‡∏Å</option>
                        <option value="cloudy">‡∏Ñ‡∏£‡∏∂‡πâ‡∏°</option>
                        <option value="cold">‡∏´‡∏ô‡∏≤‡∏ß</option>
                    </select>
                </div>

                <div class="input-group">
                    <label for="economic">‡∏™‡∏†‡∏≤‡∏û‡πÄ‡∏®‡∏£‡∏©‡∏ê‡∏Å‡∏¥‡∏à</label>
                    <select id="economic">
                        <option value="good">‡∏î‡∏µ</option>
                        <option value="normal">‡∏õ‡∏Å‡∏ï‡∏¥</option>
                        <option value="poor">‡πÑ‡∏°‡πà‡∏î‡∏µ</option>
                    </select>
                </div>

                <div class="input-group">
                    <label for="season">‡∏§‡∏î‡∏π‡∏Å‡∏≤‡∏•</label>
                    <select id="season">
                        <option value="hot">‡∏£‡πâ‡∏≠‡∏ô</option>
                        <option value="rainy">‡∏ù‡∏ô</option>
                        <option value="cool">‡∏´‡∏ô‡∏≤‡∏ß</option>
                    </select>
                </div>

                <div class="input-group">
                    <label for="political">‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏∑‡∏≠‡∏á</label>
                    <select id="political">
                        <option value="stable">‡∏°‡∏±‡πà‡∏ô‡∏Ñ‡∏á</option>
                        <option value="uncertain">‡πÑ‡∏°‡πà‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô</option>
                        <option value="crisis">‡∏ß‡∏¥‡∏Å‡∏§‡∏ï‡∏¥</option>
                    </select>
                </div>
            </div>

            <!-- Cost Calculation Section -->
            <div class="card animate-slide-up">
                <h2><i class="fas fa-calculator"></i> ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô</h2>
                
                <div class="input-group">
                    <label for="meatWeight">‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏°‡∏π (‡∏Å‡∏£‡∏±‡∏°/‡πÑ‡∏°‡πâ)</label>
                    <input type="number" id="meatWeight" value="80" min="50" max="150">
                </div>

                <div class="input-group">
                    <label for="stickCost">‡∏Ñ‡πà‡∏≤‡πÑ‡∏°‡πâ‡πÑ‡∏ú‡πà (‡∏ö‡∏≤‡∏ó/100 ‡πÑ‡∏°‡πâ)</label>
                    <input type="number" id="stickCost" value="50" min="20" max="100">
                </div>

                <div class="input-group">
                    <label for="seasoningCost">‡∏Ñ‡πà‡∏≤‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏õ‡∏£‡∏∏‡∏á (‡∏ö‡∏≤‡∏ó/‡πÑ‡∏°‡πâ)</label>
                    <input type="number" id="seasoningCost" value="5" min="2" max="15">
                </div>

                <div class="input-group">
                    <label for="laborCost">‡∏Ñ‡πà‡∏≤‡πÅ‡∏£‡∏á‡∏á‡∏≤‡∏ô (‡∏ö‡∏≤‡∏ó/‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á)</label>
                    <input type="number" id="laborCost" value="80" min="50" max="200">
                </div>

                <div class="input-group">
                    <label for="overheadCost">‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏Ñ‡∏á‡∏ó‡∏µ‡πà (‡∏ö‡∏≤‡∏ó/‡∏ß‡∏±‡∏ô)</label>
                    <input type="number" id="overheadCost" value="500" min="200" max="2000">
                </div>

                <div class="input-group">
                    <label for="dailySticks">‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô (‡πÑ‡∏°‡πâ)</label>
                    <input type="number" id="dailySticks" value="200" min="50" max="1000">
                </div>

                <button class="button" onclick="calculatePricing()">
                    <i class="fas fa-brain"></i> ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏î‡πâ‡∏ß‡∏¢‡∏ú‡∏π‡πâ‡∏ä‡πà‡∏ß‡∏¢‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞
                </button>
            </div>
        </div>

        <!-- Profile Grid -->
        <div class="main-grid">
            <!-- AI Profile & Memory Section -->
            <div class="card animate-slide-up">
                <h2><i class="fas fa-user-robot"></i> ‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ AI</h2>
                
                <div class="input-group">
                    <label for="userName">‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏µ‡∏¢‡∏Å (‡πÉ‡∏´‡πâ AI ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å)</label>
                    <input type="text" id="userName" placeholder="‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏¢‡∏≤‡∏Å‡πÉ‡∏´‡πâ AI ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏¢‡∏±‡∏á‡πÑ‡∏á?">
                </div>

                <div class="input-group">
                    <label for="businessGoal">‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à</label>
                    <select id="businessGoal">
                        <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢...</option>
                        <option value="survival">‡∏£‡∏≠‡∏î‡∏û‡∏≠‡∏°‡∏µ‡∏Å‡∏¥‡∏ô</option>
                        <option value="stable">‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏°‡∏±‡πà‡∏ô‡∏Ñ‡∏á</option>
                        <option value="growth">‡∏Ç‡∏¢‡∏≤‡∏¢‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à</option>
                        <option value="franchise">‡πÄ‡∏õ‡∏¥‡∏î‡∏™‡∏≤‡∏Ç‡∏≤</option>
                    </select>
                </div>

                <div class="input-group">
                    <label for="experienceLevel">‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏≤</label>
                    <select id="experienceLevel">
                        <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö...</option>
                        <option value="newbie">‡∏°‡∏∑‡∏≠‡πÉ‡∏´‡∏°‡πà (< 6 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô)</option>
                        <option value="learning">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ (6‡πÄ‡∏î‡∏∑‡∏≠‡∏ô-2‡∏õ‡∏µ)</option>
                        <option value="experienced">‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå (2-5‡∏õ‡∏µ)</option>
                        <option value="expert">‡πÄ‡∏ã‡∏µ‡∏¢‡∏ô (5+ ‡∏õ‡∏µ)</option>
                    </select>
                </div>

                <div class="input-group">
                    <label for="riskTolerance">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡πÑ‡∏î‡πâ</label>
                    <select id="riskTolerance">
                        <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö...</option>
                        <option value="conservative">‡∏≠‡∏ô‡∏∏‡∏£‡∏±‡∏Å‡∏©‡πå‡∏ô‡∏¥‡∏¢‡∏° (‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏ô‡πâ‡∏≠‡∏¢)</option>
                        <option value="moderate">‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á</option>
                        <option value="aggressive">‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡πÑ‡∏î‡πâ (‡∏Å‡∏≥‡πÑ‡∏£‡∏™‡∏π‡∏á)</option>
                    </select>
                </div>

                <button class="button" onclick="saveProfile()">
                    <i class="fas fa-save"></i> ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• AI ‡∏à‡∏∞‡∏à‡∏≥
                </button>

                <!-- AI Status -->
                <div id="aiStatus" style="margin-top: 15px; padding: 10px; border-radius: 8px; background: rgba(74, 144, 226, 0.1); border-left: 4px solid #4a90e2;">
                    <div id="aiGreeting" style="font-weight: 500; color: #4a90e2;">
                        <i class="fas fa-robot"></i> AI ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏à‡∏±‡∏Å‡∏Å‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì...
                    </div>
                    <div id="aiInsight" style="margin-top: 8px; font-size: 0.9rem; color: #666;">
                        ‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ AI ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡πÅ‡∏•‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô
                    </div>
                </div>
            </div>

            <!-- AI Statistics & Learning -->
            <div class="card animate-slide-up">
                <h2><i class="fas fa-chart-area"></i> AI ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏Ñ‡∏∏‡∏ì</h2>
                
                <!-- ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô -->
                <div class="stat-item">
                    <div class="stat-label">‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>
                    <div class="stat-value" id="usageCount">-</div>
                </div>

                <div class="stat-item">
                    <div class="stat-label">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô AI Accuracy</div>
                    <div class="stat-value" id="aiAccuracy">-</div>
                </div>

                <div class="stat-item">
                    <div class="stat-label">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà AI ‡∏à‡∏≥‡πÑ‡∏î‡πâ</div>
                    <div class="stat-value" id="dataPoints">-</div>
                </div>

                <!-- AI Learning Progress -->
                <div class="learning-progress" style="margin-top: 15px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                        <span style="font-size: 0.9rem; color: #666;">AI Learning Progress</span>
                        <span id="learningPercent" style="font-size: 0.9rem; color: #4a90e2;">0%</span>
                    </div>
                    <div style="width: 100%; height: 8px; background: #e0e0e0; border-radius: 4px; overflow: hidden;">
                        <div id="learningBar" style="height: 100%; background: linear-gradient(90deg, #4a90e2, #6ab7ff); width: 0%; transition: width 0.5s ease;"></div>
                    </div>
                </div>

                <!-- Personality Insights -->
                <div id="personalityInsights" style="margin-top: 15px; padding: 10px; border-radius: 8px; background: rgba(0, 200, 83, 0.1); border-left: 4px solid #00c853;">
                    <div style="font-weight: 500; color: #00c853; margin-bottom: 5px;">
                        <i class="fas fa-lightbulb"></i> AI Personality Match
                    </div>
                    <div id="personalityText" style="font-size: 0.9rem; color: #666;">
                        ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ AI ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ö‡∏∏‡∏Ñ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
                    </div>
                </div>

                <button class="button secondary" onclick="resetAIMemory()">
                    <i class="fas fa-brain"></i> ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï AI Memory
                </button>
            </div>
        </div>

        <!-- Control Buttons -->
        <div class="main-grid">
            <button class="button secondary" onclick="openSettings()">
                <i class="fas fa-cog"></i> ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à
            </button>
            <button class="button secondary" onclick="toggleHistory()">
                <i class="fas fa-history"></i> ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏î‡πâ‡∏ß‡∏¢‡∏ú‡∏π‡πâ‡∏ä‡πà‡∏ß‡∏¢‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞
            </button>
        </div>

        <!-- Results Section -->
        <div class="result-section" id="results" style="display: none;">
            <h2><i class="fas fa-chart-pie"></i> ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏î‡πâ‡∏ß‡∏¢‡∏ú‡∏π‡πâ‡∏ä‡πà‡∏ß‡∏¢‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞</h2>
            
            <div class="result-grid">
                <div class="result-card">
                    <div class="result-value" id="costPerStick">-</div>
                    <div class="result-label">‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏ï‡πà‡∏≠‡πÑ‡∏°‡πâ (‡∏ö‡∏≤‡∏ó)</div>
                </div>
                <div class="result-card">
                    <div class="result-value" id="suggestedPrice">-</div>
                    <div class="result-label">‡∏£‡∏≤‡∏Ñ‡∏≤‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ (‡∏ö‡∏≤‡∏ó)</div>
                </div>
                <div class="result-card">
                    <div class="result-value" id="profitMargin">-</div>
                    <div class="result-label">‡∏Å‡∏≥‡πÑ‡∏£‡∏ï‡πà‡∏≠‡πÑ‡∏°‡πâ (‡∏ö‡∏≤‡∏ó)</div>
                </div>
                <div class="result-card">
                    <div class="result-value" id="dailyProfit">-</div>
                    <div class="result-label">‡∏Å‡∏≥‡πÑ‡∏£‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô (‡∏ö‡∏≤‡∏ó)</div>
                </div>
            </div>

            <!-- Risk Assessment -->
            <div class="ai-analysis">
                <h3><i class="fas fa-shield-alt"></i> ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á</h3>
                <div class="risk-meter">
                    <div class="risk-bar">
                        <div class="risk-indicator" id="riskIndicator"></div>
                    </div>
                    <p id="riskLevel">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô...</p>
                </div>
            </div>

            <!-- AI Analysis -->
            <div class="ai-analysis">
                <h3><i class="fas fa-robot"></i> ‡∏õ‡∏±‡∏à‡∏à‡∏±‡∏¢‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå 6 ‡∏î‡πâ‡∏≤‡∏ô</h3>
                <div class="factor-analysis" id="factorAnalysis">
                    <!-- ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÉ‡∏™‡πà‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏î‡∏¢ JavaScript -->
                </div>
                <div id="aiReasoning" style="margin-top: 15px;">
                    <!-- ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏à‡∏≤‡∏Å AGENT AI -->
                </div>
            </div>

            <!-- Marketing Strategies -->
            <div class="ai-analysis">
                <h3><i class="fas fa-bullhorn"></i> ‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå‡∏Å‡∏≤‡∏£‡∏ï‡∏•‡∏≤‡∏î‡∏î‡∏¥‡∏à‡∏¥‡∏ó‡∏±‡∏• </h3>
                <div class="marketing-strategies" id="marketingStrategies">
                    <!-- ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÉ‡∏™‡πà‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏î‡∏¢ JavaScript -->
                </div>
            </div>
        </div>

        <!-- History Panel -->
        <div class="history-panel" id="historyPanel" style="display: none;">
            <h2><i class="fas fa-history"></i> ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏Å‡∏±‡∏ö‡∏ú‡∏π‡πâ‡∏ä‡πà‡∏ß‡∏¢‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞</h2>
            <div id="historyContent">
                <p style="text-align: center; color: #666;">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì</p>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div class="settings-panel" id="settingsPanel">
        <div class="settings-content">
            <h2><i class="fas fa-cog"></i> ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à</h2>
            
            <div class="input-group">
                <label for="businessName">‡∏ä‡∏∑‡πà‡∏≠‡∏£‡πâ‡∏≤‡∏ô</label>
                <input type="text" id="businessName" value="‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á‡∏à‡∏±‡∏°‡πÇ‡∏ö‡πâ">
            </div>

            <div class="input-group">
                <label for="targetProfit">‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏Å‡∏≥‡πÑ‡∏£ (%)</label>
                <input type="number" id="targetProfit" value="40" min="10" max="100">
            </div>

            <div class="input-group">
                <label for="businessLocation">‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡∏£‡πâ‡∏≤‡∏ô</label>
                <select id="businessLocation">
                    <option value="market">‡∏ï‡∏•‡∏≤‡∏î</option>
                    <option value="street">‡∏£‡∏¥‡∏°‡∏ñ‡∏ô‡∏ô</option>
                    <option value="mall">‡∏´‡πâ‡∏≤‡∏á‡∏™‡∏£‡∏£‡∏û‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</option>
                    <option value="university">‡∏°‡∏´‡∏≤‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢</option>
                </select>
            </div>

            <div class="input-group">
                <label for="workingHours">‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏ó‡∏≥‡∏á‡∏≤‡∏ô/‡∏ß‡∏±‡∏ô</label>
                <input type="number" id="workingHours" value="10" min="6" max="16">
            </div>

            <button class="button" onclick="saveSettings()">
                <i class="fas fa-save"></i> ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤
            </button>
            <button class="button danger" onclick="closeSettings()">
                <i class="fas fa-times"></i> ‡∏õ‡∏¥‡∏î
            </button>
        </div>
    </div>

    <!-- Chat Interface -->
    <div class="chat-container" id="chatContainer">
        <div class="chat-header">
            <div style="display: flex; align-items: center; gap: 10px;">
                <i class="fas fa-robot"></i>
                <span id="chatTitle">AI ‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á</span>
            </div>
            <button class="chat-close" onclick="toggleChat()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="chat-messages" id="chatMessages">
            <!-- Messages will be inserted here -->
        </div>
        
        <div class="chat-input-container">
            <div class="chat-input-wrapper">
                <input type="text" class="chat-input" id="chatInput" 
                       placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á..." 
                       onkeypress="handleChatKeyPress(event)">
                <button class="chat-send" id="chatSend" onclick="sendChatMessage()">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Chat Toggle Button -->
    <button class="chat-toggle" id="chatToggle" onclick="toggleChat()">
        <i class="fas fa-comments"></i>
        <div class="chat-notification" id="chatNotification" style="display: none;">!</div>
    </button>

    <script>
        // ========== AI MEMORY & PROFILE SYSTEM ========== //

        // Memory storage keys
        const MEMORY_KEYS = {
            profile: 'aiMooPing_profile',
            usage: 'aiMooPing_usage',
            history: 'aiMooPing_memory_history',
            patterns: 'aiMooPing_patterns',
            learning: 'aiMooPing_learning',
            chatHistory: 'aiMooPing_chat_history'
        };

        // AI Memory Class
        class AIMemory {
            constructor() {
                this.profile = this.loadProfile();
                this.usage = this.loadUsage();
                this.patterns = this.loadPatterns();
                this.learning = this.loadLearning();
                this.chatHistory = this.loadChatHistory();
            }

            // Profile Management
            loadProfile() {
                try {
                    const saved = localStorage.getItem(MEMORY_KEYS.profile);
                    return saved ? JSON.parse(saved) : {
                        userName: '',
                        businessGoal: '',
                        experienceLevel: '',
                        riskTolerance: '',
                        createdAt: null,
                        lastActive: null
                    };
                } catch (e) {
                    console.warn('Profile loading failed:', e);
                    return {};
                }
            }

            saveProfile(profileData) {
                try {
                    const profile = {
                        ...this.profile,
                        ...profileData,
                        lastActive: new Date().toISOString()
                    };
                    
                    if (!profile.createdAt) {
                        profile.createdAt = new Date().toISOString();
                    }

                    localStorage.setItem(MEMORY_KEYS.profile, JSON.stringify(profile));
                    this.profile = profile;
                    return true;
                } catch (e) {
                    console.error('Profile saving failed:', e);
                    return false;
                }
            }

            // Usage Tracking
            loadUsage() {
                try {
                    const saved = localStorage.getItem(MEMORY_KEYS.usage);
                    return saved ? JSON.parse(saved) : {
                        totalCalculations: 0,
                        totalSessions: 0,
                        accuratePredictions: 0,
                        lastCalculation: null,
                        favoriteSettings: {},
                        chatInteractions: 0
                    };
                } catch (e) {
                    return {};
                }
            }

            recordUsage(calculationData) {
                this.usage.totalCalculations++;
                this.usage.lastCalculation = new Date().toISOString();
                
                // Track favorite settings
                const settings = {
                    porkPrice: calculationData.porkPrice,
                    weather: calculationData.weather,
                    economic: calculationData.economic
                };

                Object.keys(settings).forEach(key => {
                    if (!this.usage.favoriteSettings[key]) {
                        this.usage.favoriteSettings[key] = {};
                    }
                    const value = settings[key];
                    this.usage.favoriteSettings[key][value] = 
                        (this.usage.favoriteSettings[key][value] || 0) + 1;
                });

                localStorage.setItem(MEMORY_KEYS.usage, JSON.stringify(this.usage));
            }

            // Chat History Management
            loadChatHistory() {
                try {
                    const saved = localStorage.getItem(MEMORY_KEYS.chatHistory);
                    return saved ? JSON.parse(saved) : [];
                } catch (e) {
                    return [];
                }
            }

            saveChatMessage(message) {
                this.chatHistory.push({
                    ...message,
                    timestamp: new Date().toISOString()
                });

                // Keep only last 100 messages
                if (this.chatHistory.length > 100) {
                    this.chatHistory = this.chatHistory.slice(-100);
                }

                localStorage.setItem(MEMORY_KEYS.chatHistory, JSON.stringify(this.chatHistory));

                // Update usage
                if (message.sender === 'user') {
                    this.usage.chatInteractions++;
                    localStorage.setItem(MEMORY_KEYS.usage, JSON.stringify(this.usage));
                }
            }

            // Pattern Recognition
            loadPatterns() {
                try {
                    const saved = localStorage.getItem(MEMORY_KEYS.patterns);
                    return saved ? JSON.parse(saved) : {
                        pricePatterns: [],
                        behaviorPatterns: {},
                        successfulStrategies: [],
                        chatPatterns: {}
                    };
                } catch (e) {
                    return {};
                }
            }

            recordPattern(calculationData, result) {
                // Record price pattern
                this.patterns.pricePatterns.push({
                    timestamp: new Date().toISOString(),
                    inputs: calculationData,
                    outputs: result,
                    success: result.profitMargin > (result.costPerStick * 0.3) // 30% profit threshold
                });

                // Keep only last 50 patterns
                if (this.patterns.pricePatterns.length > 50) {
                    this.patterns.pricePatterns.shift();
                }

                localStorage.setItem(MEMORY_KEYS.patterns, JSON.stringify(this.patterns));
            }

            recordChatPattern(userMessage, aiResponse) {
                const category = this.categorizeChatMessage(userMessage);
                
                if (!this.patterns.chatPatterns[category]) {
                    this.patterns.chatPatterns[category] = [];
                }

                this.patterns.chatPatterns[category].push({
                    userMessage,
                    aiResponse: aiResponse.text,
                    timestamp: new Date().toISOString()
                });

                // Keep only last 20 per category
                if (this.patterns.chatPatterns[category].length > 20) {
                    this.patterns.chatPatterns[category].shift();
                }

                localStorage.setItem(MEMORY_KEYS.patterns, JSON.stringify(this.patterns));
            }

            categorizeChatMessage(message) {
                const lowerMessage = message.toLowerCase();
                
                if (lowerMessage.includes('‡∏£‡∏≤‡∏Ñ‡∏≤') || lowerMessage.includes('price')) return 'pricing';
                if (lowerMessage.includes('‡∏ï‡∏•‡∏≤‡∏î') || lowerMessage.includes('market')) return 'market';
                if (lowerMessage.includes('‡∏Å‡∏≥‡πÑ‡∏£') || lowerMessage.includes('profit')) return 'profit';
                if (lowerMessage.includes('‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á') || lowerMessage.includes('risk')) return 'risk';
                if (lowerMessage.includes('‡∏Å‡∏≤‡∏£‡∏ï‡∏•‡∏≤‡∏î') || lowerMessage.includes('marketing')) return 'marketing';
                if (lowerMessage.includes('‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô') || lowerMessage.includes('cost')) return 'cost';
                
                return 'general';
            }

            // Learning Simulation
            loadLearning() {
                try {
                    const saved = localStorage.getItem(MEMORY_KEYS.learning);
                    return saved ? JSON.parse(saved) : {
                        learningProgress: 0,
                        personalityType: '',
                        insights: [],
                        recommendations: [],
                        chatPersonality: ''
                    };
                } catch (e) {
                    return {};
                }
            }

            updateLearning() {
                // Simulate learning based on usage
                const dataPoints = [
                    this.profile.userName ? 10 : 0,
                    this.profile.businessGoal ? 15 : 0,
                    this.profile.experienceLevel ? 15 : 0,
                    this.profile.riskTolerance ? 10 : 0,
                    Math.min(this.usage.totalCalculations * 2, 30),
                    Math.min(this.patterns.pricePatterns.length, 20),
                    Math.min(this.usage.chatInteractions, 20)
                ];

                this.learning.learningProgress = Math.min(100, dataPoints.reduce((a, b) => a + b, 0));

                // Personality analysis
                if (this.usage.totalCalculations >= 3) {
                    this.learning.personalityType = this.analyzePersonality();
                }

                // Chat personality analysis
                if (this.usage.chatInteractions >= 5) {
                    this.learning.chatPersonality = this.analyzeChatPersonality();
                }

                localStorage.setItem(MEMORY_KEYS.learning, JSON.stringify(this.learning));
            }

            analyzePersonality() {
                const favorites = this.usage.favoriteSettings;
                let personality = '';

                // Risk analysis
                if (favorites.economic && favorites.economic.poor > (favorites.economic.good || 0)) {
                    personality += '‡∏£‡∏∞‡∏°‡∏±‡∏î‡∏£‡∏∞‡∏ß‡∏±‡∏á ';
                } else if (favorites.economic && favorites.economic.good > (favorites.economic.poor || 0)) {
                    personality += '‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏à ';
                }

                // Weather preference analysis  
                if (favorites.weather && favorites.weather.sunny > (favorites.weather.rainy || 0)) {
                    personality += '‡πÄ‡∏ä‡∏¥‡∏á‡∏£‡∏∏‡∏Å ';
                }

                // Experience level impact
                if (this.profile.experienceLevel === 'newbie') {
                    personality += '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ';
                } else if (this.profile.experienceLevel === 'expert') {
                    personality += '‡πÄ‡∏ã‡∏µ‡∏¢‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏≤';
                }

                return personality || '‡∏¢‡∏±‡∏á‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ';
            }

            analyzeChatPersonality() {
                const chatPatterns = this.patterns.chatPatterns;
                const totalInteractions = Object.values(chatPatterns).reduce((sum, arr) => sum + arr.length, 0);
                
                if (totalInteractions < 5) return '';

                let traits = [];

                // Analyze question types
                if (chatPatterns.pricing && chatPatterns.pricing.length > totalInteractions * 0.3) {
                    traits.push('‡∏°‡∏∏‡πà‡∏á‡πÄ‡∏ô‡πâ‡∏ô‡∏£‡∏≤‡∏Ñ‡∏≤');
                }
                if (chatPatterns.marketing && chatPatterns.marketing.length > totalInteractions * 0.3) {
                    traits.push('‡∏™‡∏ô‡πÉ‡∏à‡∏Å‡∏≤‡∏£‡∏ï‡∏•‡∏≤‡∏î');
                }
                if (chatPatterns.risk && chatPatterns.risk.length > totalInteractions * 0.2) {
                    traits.push('‡∏£‡∏∞‡∏°‡∏±‡∏î‡∏£‡∏∞‡∏ß‡∏±‡∏á');
                }

                return traits.join(', ') || '‡∏™‡∏ô‡πÉ‡∏à‡πÉ‡∏ô‡∏´‡∏•‡∏≤‡∏¢‡∏î‡πâ‡∏≤‡∏ô';
            }

            // Get personalized greeting
            getPersonalizedGreeting() {
                const name = this.profile.userName || '‡∏Ñ‡∏∏‡∏ì‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤';
                const hour = new Date().getHours();
                let timeGreeting = '';

                if (hour < 12) timeGreeting = '‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏ï‡∏≠‡∏ô‡πÄ‡∏ä‡πâ‡∏≤';
                else if (hour < 18) timeGreeting = '‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏ï‡∏≠‡∏ô‡∏ö‡πà‡∏≤‡∏¢';
                else timeGreeting = '‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏ï‡∏≠‡∏ô‡πÄ‡∏¢‡πá‡∏ô';

                if (this.usage.totalCalculations === 0) {
                    return `${timeGreeting} ${name}! ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö AI ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å üéâ`;
                } else if (this.usage.totalCalculations < 5) {
                    return `${timeGreeting} ${name}! AI ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏Ñ‡∏∏‡∏ì... (${this.usage.totalCalculations}/5)`;
                } else {
                    return `${timeGreeting} ${name}! AI ‡∏à‡∏≥‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡πÅ‡∏•‡πâ‡∏ß ‚ú® (‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô ${this.usage.totalCalculations} ‡∏Ñ‡∏£‡∏±‡πâ‡∏á)`;
                }
            }

            // Get personalized insights
            getPersonalizedInsight() {
                if (this.usage.totalCalculations === 0) {
                    return '‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ AI ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏Ñ‡∏∏‡∏ì';
                }

                const insights = [];

                // Pattern-based insights
                if (this.patterns.pricePatterns.length >= 3) {
                    const recentPatterns = this.patterns.pricePatterns.slice(-3);
                    const avgProfit = recentPatterns.reduce((sum, p) => sum + p.outputs.profitMargin, 0) / 3;
                    insights.push(`‡∏Å‡∏≥‡πÑ‡∏£‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢ 3 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î: ${avgProfit.toFixed(2)} ‡∏ö‡∏≤‡∏ó`);
                }

                // Personality insights
                if (this.learning.personalityType) {
                    insights.push(`‡∏ö‡∏∏‡∏Ñ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏≤: ${this.learning.personalityType}`);
                }

                // Chat insights
                if (this.learning.chatPersonality) {
                    insights.push(`‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡∏ô‡∏ó‡∏ô‡∏≤: ${this.learning.chatPersonality}`);
                }

                // Goal-based insights
                if (this.profile.businessGoal) {
                    const goalTexts = {
                        'survival': '‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: ‡πÄ‡∏ô‡πâ‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏±‡πà‡∏ô‡∏Ñ‡∏á‡πÅ‡∏•‡∏∞‡∏•‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á',
                        'stable': '‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏™‡∏°‡πà‡∏≥‡πÄ‡∏™‡∏°‡∏≠',
                        'growth': '‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: ‡∏Ç‡∏¢‡∏≤‡∏¢‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≥‡πÑ‡∏£',
                        'franchise': '‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏õ‡∏¥‡∏î‡∏™‡∏≤‡∏Ç‡∏≤'
                    };
                    insights.push(goalTexts[this.profile.businessGoal]);
                }

                return insights.length > 0 ? insights.join(' ‚Ä¢ ') : 'AI ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì...';
            }

            // Reset all memory
            resetMemory() {
                Object.values(MEMORY_KEYS).forEach(key => {
                    localStorage.removeItem(key);
                });
                
                // Reinitialize
                this.profile = this.loadProfile();
                this.usage = this.loadUsage();
                this.patterns = this.loadPatterns();
                this.learning = this.loadLearning();
                this.chatHistory = this.loadChatHistory();
                
                return true;
            }
        }

        // Global AI Memory instance
        let aiMemory = new AIMemory();

        // ========== CONVERSATIONAL AI SYSTEM ========== //

        class ConversationalAI {
            constructor(memory) {
                this.memory = memory;
                this.responses = this.initializeResponses();
                this.contextKeywords = this.initializeContextKeywords();
                this.isTyping = false;
            }

            initializeResponses() {
                return {
                    greeting: [
                        "‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö! ‡∏ú‡∏°‡πÄ‡∏õ‡πá‡∏ô AI ‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì üê∑",
                        "‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏Ñ‡∏∏‡∏ì‡πÉ‡∏ô‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á‡∏Ñ‡∏£‡∏±‡∏ö!",
                        "‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö! ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ä‡πà‡∏ß‡∏¢‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏£‡∏≤‡∏Ñ‡∏≤‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏•‡πâ‡∏ß üç¢"
                    ],
                    pricing: [
                        "‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏°‡∏≤‡∏Å‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á‡∏Ñ‡∏£‡∏±‡∏ö! ‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏¢‡∏≤‡∏Å‡πÉ‡∏´‡πâ‡∏ú‡∏°‡∏ä‡πà‡∏ß‡∏¢‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤‡πÉ‡∏´‡πâ‡πÑ‡∏´‡∏°?",
                        "‡∏£‡∏≤‡∏Ñ‡∏≤‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏±‡∏ö‡∏õ‡∏±‡∏à‡∏à‡∏±‡∏¢‡∏´‡∏•‡∏≤‡∏¢‡∏≠‡∏¢‡πà‡∏≤‡∏á ‡πÄ‡∏ä‡πà‡∏ô ‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏°‡∏π, ‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏Å‡∏≤‡∏£‡∏ú‡∏•‡∏¥‡∏ï, ‡πÅ‡∏•‡∏∞‡∏™‡∏†‡∏≤‡∏û‡∏ï‡∏•‡∏≤‡∏î ‡∏•‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡∏î‡∏π‡∏Ñ‡∏£‡∏±‡∏ö",
                        "‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏∏‡∏ç‡πÅ‡∏à‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡∏ú‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏Ñ‡∏£‡∏±‡∏ö"
                    ],
                    market: [
                        "‡∏ï‡∏•‡∏≤‡∏î‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á‡πÉ‡∏ô‡πÑ‡∏ó‡∏¢‡∏Ñ‡πà‡∏≠‡∏ô‡∏Ç‡πâ‡∏≤‡∏á‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô‡∏™‡∏π‡∏á‡∏Ñ‡∏£‡∏±‡∏ö ‡πÅ‡∏ï‡πà‡∏¢‡∏±‡∏á‡∏°‡∏µ‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤",
                        "‡∏™‡∏†‡∏≤‡∏û‡∏ï‡∏•‡∏≤‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏±‡∏ö‡∏´‡∏•‡∏≤‡∏¢‡∏õ‡∏±‡∏à‡∏à‡∏±‡∏¢ ‡πÄ‡∏ä‡πà‡∏ô ‡∏§‡∏î‡∏π‡∏Å‡∏≤‡∏•, ‡∏™‡∏†‡∏≤‡∏û‡πÄ‡∏®‡∏£‡∏©‡∏ê‡∏Å‡∏¥‡∏à, ‡πÅ‡∏•‡∏∞‡∏û‡∏§‡∏ï‡∏¥‡∏Å‡∏£‡∏£‡∏°‡∏ú‡∏π‡πâ‡∏ö‡∏£‡∏¥‡πÇ‡∏†‡∏Ñ",
                        "‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏ï‡∏•‡∏≤‡∏î‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏¥‡πà‡∏á‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç ‡∏ú‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ä‡πà‡∏ß‡∏¢‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏õ‡∏±‡∏à‡∏à‡∏±‡∏¢‡∏ï‡∏•‡∏≤‡∏î‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ"
                    ],
                    cost: [
                        "‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á‡πÑ‡∏î‡πâ‡πÅ‡∏Å‡πà ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏°‡∏π, ‡πÑ‡∏°‡πâ‡πÑ‡∏ú‡πà, ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏õ‡∏£‡∏∏‡∏á, ‡∏Ñ‡πà‡∏≤‡πÅ‡∏£‡∏á‡∏á‡∏≤‡∏ô ‡πÅ‡∏•‡∏∞‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏Ñ‡∏á‡∏ó‡∏µ‡πà",
                        "‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏¥‡πà‡∏á‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç ‡∏•‡∏≠‡∏á‡∏î‡∏π‡∏ß‡πà‡∏≤‡∏™‡πà‡∏ß‡∏ô‡πÑ‡∏´‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏•‡∏î‡πÑ‡∏î‡πâ‡∏Ñ‡∏£‡∏±‡∏ö",
                        "‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏ï‡πà‡∏≠‡πÑ‡∏°‡πâ‡∏à‡∏∞‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡∏≤‡∏¢‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì ‡∏ú‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ä‡πà‡∏ß‡∏¢‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÉ‡∏´‡πâ‡πÑ‡∏î‡πâ‡∏Ñ‡∏£‡∏±‡∏ö"
                    ],
                    profit: [
                        "‡∏Å‡∏≥‡πÑ‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 30-50% ‡∏Ç‡∏∂‡πâ‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏±‡∏ö‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÅ‡∏•‡∏∞‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û",
                        "‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≥‡πÑ‡∏£‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ó‡∏≥‡πÑ‡∏î‡πâ‡∏´‡∏•‡∏≤‡∏¢‡∏ß‡∏¥‡∏ò‡∏µ ‡πÄ‡∏ä‡πà‡∏ô ‡∏•‡∏î‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô, ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤, ‡∏´‡∏£‡∏∑‡∏≠‡∏õ‡∏£‡∏±‡∏ö‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå‡∏Å‡∏≤‡∏£‡∏ï‡∏•‡∏≤‡∏î",
                        "‡∏Å‡∏≥‡πÑ‡∏£‡∏ó‡∏µ‡πà‡∏¢‡∏±‡πà‡∏á‡∏¢‡∏∑‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏Ñ‡∏≥‡∏ô‡∏∂‡∏á‡∏ñ‡∏∂‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏û‡∏≠‡πÉ‡∏à‡∏Ç‡∏≠‡∏á‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö"
                    ],
                    risk: [
                        "‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡πÉ‡∏ô‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á‡∏°‡∏µ‡∏´‡∏•‡∏≤‡∏¢‡∏î‡πâ‡∏≤‡∏ô ‡πÄ‡∏ä‡πà‡∏ô ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö‡∏ú‡∏±‡∏ô‡∏ú‡∏ß‡∏ô, ‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô, ‡πÅ‡∏•‡∏∞‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®",
                        "‡∏Å‡∏≤‡∏£‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏à‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏≠‡∏î‡πÑ‡∏î‡πâ‡πÉ‡∏ô‡∏£‡∏∞‡∏¢‡∏∞‡∏¢‡∏≤‡∏ß",
                        "‡∏ú‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ä‡πà‡∏ß‡∏¢‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡πÅ‡∏•‡∏∞‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ß‡∏¥‡∏ò‡∏µ‡∏•‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏Ñ‡∏£‡∏±‡∏ö"
                    ],
                    marketing: [
                        "‡∏Å‡∏≤‡∏£‡∏ï‡∏•‡∏≤‡∏î‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå‡πÄ‡∏õ‡πá‡∏ô‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡πÉ‡∏ô‡∏¢‡∏∏‡∏Ñ‡∏î‡∏¥‡∏à‡∏¥‡∏ó‡∏±‡∏• ‡∏•‡∏≠‡∏á‡πÉ‡∏ä‡πâ Facebook, Instagram ‡∏´‡∏£‡∏∑‡∏≠ TikTok ‡∏î‡∏π‡∏Ñ‡∏£‡∏±‡∏ö",
                        "‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ê‡∏≤‡∏ô‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏¥‡πà‡∏á‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç ‡∏•‡∏≠‡∏á‡∏ó‡∏≥‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏∞‡∏™‡∏°‡πÅ‡∏ï‡πâ‡∏°‡∏î‡∏π",
                        "‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡πÅ‡∏•‡∏∞‡∏£‡∏™‡∏ä‡∏≤‡∏ï‡∏¥‡∏¢‡∏±‡∏á‡∏Ñ‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏±‡∏¢‡∏´‡∏•‡∏±‡∏Å‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏î‡∏∂‡∏á‡∏î‡∏π‡∏î‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ ‡∏≠‡∏¢‡πà‡∏≤‡∏•‡∏∑‡∏°‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏ú‡∏•‡∏¥‡∏ï‡∏†‡∏±‡∏ì‡∏ë‡πå‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö"
                    ],
                    weather: [
                        "‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏°‡∏µ‡∏ú‡∏•‡∏Å‡∏±‡∏ö‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á‡∏°‡∏≤‡∏Å‡∏Ñ‡∏£‡∏±‡∏ö ‡∏ß‡∏±‡∏ô‡∏ù‡∏ô‡∏à‡∏∞‡∏Ç‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡∏ß‡∏±‡∏ô‡πÅ‡∏î‡∏î",
                        "‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏ô‡∏≤‡∏ß‡∏à‡∏∞‡∏Ç‡∏≤‡∏¢‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏£‡πâ‡∏≠‡∏ô ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏Ñ‡∏ô‡∏ä‡∏≠‡∏ö‡∏Å‡∏¥‡∏ô‡∏Ç‡∏≠‡∏á‡∏£‡πâ‡∏≠‡∏ô‡πÜ",
                        "‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡∏°‡∏µ‡πÅ‡∏ú‡∏ô‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡πÄ‡∏ä‡πà‡∏ô ‡πÄ‡∏ï‡πá‡∏ô‡∏ó‡πå‡πÉ‡∏ô‡∏ß‡∏±‡∏ô‡∏ù‡∏ô ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°‡πÄ‡∏¢‡πá‡∏ô‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏£‡πâ‡∏≠‡∏ô"
                    ],
                    experience: [
                        "‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏£‡∏π‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏Ñ‡∏£‡∏±‡∏ö ‡πÅ‡∏ï‡πà‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏à‡∏≤‡∏Å‡∏Ñ‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡∏à‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡∏•‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡∏•‡∏≠‡∏á‡∏ú‡∏¥‡∏î‡∏•‡∏≠‡∏á‡∏ñ‡∏π‡∏Å",
                        "‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏°‡∏∑‡∏≠‡πÉ‡∏´‡∏°‡πà ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å‡πÄ‡∏•‡πá‡∏Å‡πÜ ‡πÅ‡∏•‡∏∞‡∏Ñ‡πà‡∏≠‡∏¢‡πÜ ‡∏Ç‡∏¢‡∏≤‡∏¢‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô",
                        "‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏Å‡πá‡∏¢‡∏±‡∏á‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏±‡∏ß‡∏ï‡∏≤‡∏°‡∏™‡∏†‡∏≤‡∏û‡∏ï‡∏•‡∏≤‡∏î‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏™‡∏°‡∏≠"
                    ],
                    compliment: [
                        "‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏£‡∏±‡∏ö! ‡∏ú‡∏°‡∏î‡∏µ‡πÉ‡∏à‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏Ñ‡∏∏‡∏ì üòä",
                        "‡πÑ‡∏°‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏£‡∏Ñ‡∏£‡∏±‡∏ö ‡∏ô‡∏±‡πà‡∏ô‡∏Ñ‡∏∑‡∏≠‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏Ç‡∏≠‡∏á‡∏ú‡∏°!",
                        "‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö! ‡∏´‡∏ß‡∏±‡∏á‡∏ß‡πà‡∏≤‡∏à‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à"
                    ],
                    unclear: [
                        "‡∏Ç‡∏≠‡πÇ‡∏ó‡∏©‡∏Ñ‡∏£‡∏±‡∏ö ‡∏ú‡∏°‡πÑ‡∏°‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô ‡∏Ñ‡∏∏‡∏ì‡∏ä‡πà‡∏ß‡∏¢‡∏ñ‡∏≤‡∏°‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏î‡πâ‡πÑ‡∏´‡∏°?",
                        "‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ñ‡∏≤‡∏°‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤, ‡∏ï‡∏•‡∏≤‡∏î, ‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô, ‡∏Å‡∏≥‡πÑ‡∏£, ‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏ï‡∏•‡∏≤‡∏î‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á‡πÑ‡∏î‡πâ‡∏Ñ‡∏£‡∏±‡∏ö",
                        "‡∏•‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏Ñ‡∏≥‡∏á‡πà‡∏≤‡∏¢‡πÜ ‡∏´‡∏£‡∏∑‡∏≠‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡∏•‡∏∞‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏π‡∏Ñ‡∏£‡∏±‡∏ö ‡∏ú‡∏°‡∏à‡∏∞‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏ï‡∏≠‡∏ö‡πÉ‡∏´‡πâ‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î"
                    ],
                    goodbye: [
                        "‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏°‡∏≤‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡∏Ñ‡∏£‡∏±‡∏ö! ‡∏´‡∏ß‡∏±‡∏á‡∏ß‡πà‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÉ‡∏´‡πâ‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå",
                        "‡πÇ‡∏ä‡∏Ñ‡∏î‡∏µ‡∏Å‡∏±‡∏ö‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏£‡∏±‡∏ö! ‡∏°‡∏µ‡∏≠‡∏∞‡πÑ‡∏£‡∏ñ‡∏≤‡∏°‡∏≠‡∏µ‡∏Å‡∏Å‡πá‡πÅ‡∏ß‡∏∞‡∏°‡∏≤‡πÄ‡∏à‡∏≠‡∏Å‡∏±‡∏ô‡πÑ‡∏î‡πâ",
                        "‡∏•‡∏≤‡∏Å‡πà‡∏≠‡∏ô‡∏Ñ‡∏£‡∏±‡∏ö! ‡∏´‡∏ß‡∏±‡∏á‡∏ß‡πà‡∏≤‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡∏Ç‡∏≤‡∏¢‡∏î‡∏µ üç¢"
                    ],
                    help: [
                        "‡∏ú‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ä‡πà‡∏ß‡∏¢‡∏Ñ‡∏∏‡∏ì‡πÉ‡∏ô‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏µ‡πâ‡πÑ‡∏î‡πâ:\n‚Ä¢ ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡∏≤‡∏¢\n‚Ä¢ ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô\n‚Ä¢ ‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á\n‚Ä¢ ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå‡∏Å‡∏≤‡∏£‡∏ï‡∏•‡∏≤‡∏î\n‚Ä¢ ‡πÉ‡∏´‡πâ‡∏Ñ‡∏≥‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ",
                        "‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ñ‡∏≤‡∏°‡∏ú‡∏°‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÑ‡∏´‡∏ô‡∏Å‡πá‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á ‡πÄ‡∏ä‡πà‡∏ô:\n- ‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏°‡∏π‡πÅ‡∏û‡∏á‡∏°‡∏≤‡∏Å‡∏à‡∏∞‡∏ó‡∏≥‡∏¢‡∏±‡∏á‡πÑ‡∏á?\n- ‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏•‡∏î‡∏•‡∏á‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ù‡∏ô‡∏à‡∏∞‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£?\n- ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≥‡πÑ‡∏£‡∏°‡∏µ‡∏ß‡∏¥‡∏ò‡∏µ‡πÑ‡∏´‡∏ô‡∏ö‡πâ‡∏≤‡∏á?",
                        "‡∏•‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö ‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ó‡∏µ‡πà‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô!"
                    ]
                };
            }

            initializeContextKeywords() {
                return {
                    greeting: ['‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ', '‡∏´‡∏ß‡∏±‡∏î‡∏î‡∏µ', 'hello', 'hi', 'hey'],
                    pricing: ['‡∏£‡∏≤‡∏Ñ‡∏≤', 'price', '‡∏Ç‡∏≤‡∏¢', '‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà', '‡∏ö‡∏≤‡∏ó', '‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤', '‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏£‡∏≤‡∏Ñ‡∏≤'],
                    market: ['‡∏ï‡∏•‡∏≤‡∏î', 'market', '‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô', 'competitor', '‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤', 'customer', '‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢', 'sale'],
                    cost: ['‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô', 'cost', '‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢', 'expense', '‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏°‡∏π', '‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö', 'ingredient'],
                    profit: ['‡∏Å‡∏≥‡πÑ‡∏£', 'profit', '‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ', 'income', '‡πÄ‡∏á‡∏¥‡∏ô', 'money', '‡∏£‡∏ß‡∏¢', '‡πÑ‡∏î‡πâ‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà'],
                    risk: ['‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á', 'risk', '‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢', 'danger', '‡∏õ‡∏±‡∏ç‡∏´‡∏≤', 'problem', '‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á'],
                    marketing: ['‡∏Å‡∏≤‡∏£‡∏ï‡∏•‡∏≤‡∏î', 'marketing', '‡πÇ‡∏Ü‡∏©‡∏ì‡∏≤', 'advertisement', '‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô', 'promotion', '‡∏Ç‡∏≤‡∏¢', 'facebook', 'instagram'],
                    weather: ['‡∏≠‡∏≤‡∏Å‡∏≤‡∏®', 'weather', '‡∏ù‡∏ô', 'rain', '‡πÅ‡∏î‡∏î', 'sun', '‡∏´‡∏ô‡∏≤‡∏ß', 'cold', '‡∏£‡πâ‡∏≠‡∏ô', 'hot'],
                    experience: ['‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå', 'experience', '‡∏°‡∏∑‡∏≠‡πÉ‡∏´‡∏°‡πà', 'beginner', '‡πÄ‡∏ã‡∏µ‡∏¢‡∏ô', 'expert', '‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô', 'start'],
                    compliment: ['‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì', 'thank', '‡∏î‡∏µ', 'good', '‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°', 'excellent', '‡πÄ‡∏Å‡πà‡∏á', 'smart'],
                    goodbye: ['‡∏ö‡∏≤‡∏¢', 'bye', '‡∏•‡∏≤‡∏Å‡πà‡∏≠‡∏ô', 'goodbye', '‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏à‡∏≠‡∏Å‡∏±‡∏ô', 'see you'],
                    help: ['‡∏ä‡πà‡∏ß‡∏¢', 'help', '‡πÑ‡∏°‡πà‡∏£‡∏π‡πâ', '‡πÑ‡∏°‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à', '‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢', 'explain', '‡∏ö‡∏≠‡∏Å', 'tell']
                };
            }

            analyzeMessage(message) {
                const lowerMessage = message.toLowerCase();
                const scores = {};

                // Calculate relevance scores for each category
                Object.keys(this.contextKeywords).forEach(category => {
                    scores[category] = 0;
                    this.contextKeywords[category].forEach(keyword => {
                        if (lowerMessage.includes(keyword)) {
                            scores[category] += 1;
                        }
                    });
                });

                // Find the category with highest score
                const maxScore = Math.max(...Object.values(scores));
                if (maxScore === 0) return 'unclear';

                const bestCategory = Object.keys(scores).find(key => scores[key] === maxScore);
                return bestCategory;
            }

            generateResponse(message, category) {
                let response = {
                    text: '',
                    quickActions: [],
                    suggestion: null
                };

                // Get base response
                const responses = this.responses[category] || this.responses.unclear;
                response.text = responses[Math.floor(Math.random() * responses.length)];

                // Add personalization based on memory
                if (this.memory.profile.userName) {
                    response.text = response.text.replace('‡∏Ñ‡∏∏‡∏ì', this.memory.profile.userName);
                }

                // Add experience-based personalization
                if (category === 'pricing' && this.memory.profile.experienceLevel) {
                    if (this.memory.profile.experienceLevel === 'newbie') {
                        response.text += " ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏°‡∏∑‡∏≠‡πÉ‡∏´‡∏°‡πà ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏µ‡πà‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏Å‡πà‡∏≠‡∏ô‡∏Ñ‡∏£‡∏±‡∏ö";
                    } else if (this.memory.profile.experienceLevel === 'expert') {
                        response.text += " ‡∏î‡πâ‡∏ß‡∏¢‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì ‡∏ô‡πà‡∏≤‡∏à‡∏∞‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ó‡∏î‡∏•‡∏≠‡∏á‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏µ‡πà‡∏´‡∏•‡∏≤‡∏Å‡∏´‡∏•‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏Ñ‡∏£‡∏±‡∏ö";
                    }
                }

                // Add quick actions based on category
                this.addQuickActions(response, category);

                // Add contextual suggestions
                this.addSuggestions(response, category, message);

                return response;
            }

            addQuickActions(response, category) {
                switch (category) {
                    case 'pricing':
                        response.quickActions = [
                            '‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤‡πÉ‡∏´‡πâ‡∏´‡∏ô‡πà‡∏≠‡∏¢',
                            '‡∏£‡∏≤‡∏Ñ‡∏≤‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà?',
                            '‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏™‡∏π‡∏á‡∏à‡∏∞‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏¢‡∏±‡∏á‡πÑ‡∏á?'
                        ];
                        break;
                    case 'market':
                        response.quickActions = [
                            '‡∏ï‡∏•‡∏≤‡∏î‡πÄ‡∏õ‡πá‡∏ô‡∏¢‡∏±‡∏á‡πÑ‡∏á‡∏ö‡πâ‡∏≤‡∏á?',
                            '‡∏Ñ‡∏π‡πà‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô‡πÄ‡∏¢‡∏≠‡∏∞‡πÑ‡∏´‡∏°?',
                            '‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏•‡∏î‡∏•‡∏á‡∏à‡∏∞‡∏ó‡∏≥‡∏¢‡∏±‡∏á‡πÑ‡∏á?'
                        ];
                        break;
                    case 'profit':
                        response.quickActions = [
                            '‡∏à‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≥‡πÑ‡∏£‡πÑ‡∏î‡πâ‡∏¢‡∏±‡∏á‡πÑ‡∏á?',
                            '‡∏Å‡∏≥‡πÑ‡∏£‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà‡∏ñ‡∏∂‡∏á‡∏à‡∏∞‡∏î‡∏µ?',
                            '‡∏•‡∏î‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡πÑ‡∏î‡πâ‡∏ï‡∏£‡∏á‡πÑ‡∏´‡∏ô‡∏ö‡πâ‡∏≤‡∏á?'
                        ];
                        break;
                    case 'help':
                        response.quickActions = [
                            '‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤‡πÉ‡∏´‡πâ‡∏´‡∏ô‡πà‡∏≠‡∏¢',
                            '‡∏î‡∏π‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì',
                            '‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå'
                        ];
                        break;
                    default:
                        response.quickActions = [
                            '‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á',
                            '‡∏ñ‡∏≤‡∏°‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏≠‡∏∑‡πà‡∏ô',
                            '‡∏î‡∏π‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥'
                        ];
                }
            }

            addSuggestions(response, category, message) {
                // Check if user hasn't used calculator yet
                if (this.memory.usage.totalCalculations === 0 && category !== 'greeting') {
                    response.suggestion = {
                        type: 'calculation',
                        text: '‡∏•‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏î‡∏π‡πÑ‡∏´‡∏°‡∏Ñ‡∏£‡∏±‡∏ö? ‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ó‡∏µ‡πà‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô',
                        action: 'scrollToCalculator'
                    };
                }

                // Check if profile is incomplete
                if (!this.memory.profile.userName && category !== 'greeting') {
                    response.suggestion = {
                        type: 'profile',
                        text: '‡∏´‡∏≤‡∏Å‡∏ö‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏ú‡∏°‡∏ü‡∏±‡∏á ‡∏à‡∏∞‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏´‡πâ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡∏Å‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô‡∏Ñ‡∏£‡∏±‡∏ö',
                        action: 'scrollToProfile'
                    };
                }

                // Add memory-based insights
                if (this.memory.patterns.pricePatterns.length > 0) {
                    const lastPattern = this.memory.patterns.pricePatterns[this.memory.patterns.pricePatterns.length - 1];
                    if (category === 'profit' && lastPattern.outputs) {
                        response.text += ` \n\n‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì ‡∏Å‡∏≥‡πÑ‡∏£‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà ${lastPattern.outputs.profitMargin.toFixed(2)} ‡∏ö‡∏≤‡∏ó‡∏ï‡πà‡∏≠‡πÑ‡∏°‡πâ‡∏Ñ‡∏£‡∏±‡∏ö`;
                    }
                }
            }

            async processMessage(message) {
                // Record user message
                this.memory.saveChatMessage({
                    sender: 'user',
                    message: message,
                    timestamp: new Date().toISOString()
                });

                // Analyze message and generate response
                const category = this.analyzeMessage(message);
                const response = this.generateResponse(message, category);

                // Record AI response and pattern
                this.memory.saveChatMessage({
                    sender: 'ai',
                    message: response.text,
                    category: category,
                    timestamp: new Date().toISOString()
                });

                this.memory.recordChatPattern(message, response);

                return response;
            }
        }

        // Global Conversational AI instance
        let conversationalAI = new ConversationalAI(aiMemory);

        // ========== CHAT INTERFACE FUNCTIONS ========== //

        function initializeChat() {
            const chatContainer = document.getElementById('chatContainer');
            const chatMessages = document.getElementById('chatMessages');

            // Load chat history
            loadChatHistory();

            // Add welcome message if no history
            if (aiMemory.chatHistory.length === 0) {
                setTimeout(() => {
                    addWelcomeMessage();
                }, 1000);
            }
        }

        function loadChatHistory() {
            const chatMessages = document.getElementById('chatMessages');
            chatMessages.innerHTML = '';

            // Load last 20 messages
            const recentHistory = aiMemory.chatHistory.slice(-20);
            
            recentHistory.forEach(msg => {
                addMessageToChat(msg.message, msg.sender, msg.timestamp, false);
            });

            scrollToBottom();
        }

        function addWelcomeMessage() {
            const userName = aiMemory.profile.userName || '';
            const welcomeText = userName 
                ? `‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ ${userName}! ‡∏ú‡∏°‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏£‡∏±‡∏ö üê∑`
                : '‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö! ‡∏ú‡∏°‡πÄ‡∏õ‡πá‡∏ô AI ‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏Ñ‡∏∏‡∏ì üç¢';

            const response = {
                text: welcomeText,
                quickActions: ['‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á', '‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏î‡πâ‡∏≤‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡πÜ', '‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå']
            };

            addMessageToChat(response.text, 'ai', new Date().toISOString(), true);
            addQuickActionsToChat(response.quickActions);

            // Show notification
            showChatNotification();
        }

        function toggleChat() {
            const chatContainer = document.getElementById('chatContainer');
            const chatToggle = document.getElementById('chatToggle');
            const isOpen = chatContainer.classList.contains('active');

            if (isOpen) {
                chatContainer.classList.remove('active');
                chatToggle.classList.remove('active');
                chatToggle.innerHTML = '<i class="fas fa-comments"></i>';
            } else {
                chatContainer.classList.add('active');
                chatToggle.classList.add('active');
                chatToggle.innerHTML = '<i class="fas fa-times"></i>';
                document.getElementById('chatInput').focus();
                hideChatNotification();
            }
        }

        function sendChatMessage() {
            const chatInput = document.getElementById('chatInput');
            const message = chatInput.value.trim();

            if (message === '') return;

            // Add user message to chat
            addMessageToChat(message, 'user', new Date().toISOString(), true);
            chatInput.value = '';

            // Show typing indicator
            showTypingIndicator();

            // Process message with AI
            setTimeout(async () => {
                try {
                    const response = await conversationalAI.processMessage(message);
                    hideTypingIndicator();
                    
                    // Add AI response
                    addMessageToChat(response.text, 'ai', new Date().toISOString(), true);
                    
                    // Add quick actions if any
                    if (response.quickActions && response.quickActions.length > 0) {
                        addQuickActionsToChat(response.quickActions);
                    }
                    
                    // Handle suggestions
                    if (response.suggestion) {
                        handleSuggestion(response.suggestion);
                    }
                    
                } catch (error) {
                    hideTypingIndicator();
                    addMessageToChat('‡∏Ç‡∏≠‡πÇ‡∏ó‡∏©‡∏Ñ‡∏£‡∏±‡∏ö ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á', 'ai', new Date().toISOString(), true);
                }
            }, 1000 + Math.random() * 2000); // Random delay for natural feel
        }

        function addMessageToChat(message, sender, timestamp, animate = true) {
            const chatMessages = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `chat-message ${sender}`;
            if (animate) messageDiv.style.opacity = '0';

            const time = new Date(timestamp).toLocaleTimeString('th-TH', { 
                hour: '2-digit', 
                minute: '2-digit' 
            });

            messageDiv.innerHTML = `
                <div class="message-content">${message}</div>
                <div class="message-time">${time}</div>
            `;

            chatMessages.appendChild(messageDiv);

            if (animate) {
                setTimeout(() => {
                    messageDiv.style.opacity = '1';
                    messageDiv.classList.add('animate-slide-up');
                }, 100);
            }

            scrollToBottom();
        }

        function addQuickActionsToChat(actions) {
            const chatMessages = document.getElementById('chatMessages');
            const actionsDiv = document.createElement('div');
            actionsDiv.className = 'quick-actions';
            
            actions.forEach(action => {
                const button = document.createElement('button');
                button.className = 'quick-action';
                button.textContent = action;
                button.onclick = () => {
                    // Remove quick actions after click
                    actionsDiv.remove();
                    // Send as user message
                    document.getElementById('chatInput').value = action;
                    sendChatMessage();
                };
                actionsDiv.appendChild(button);
            });

            chatMessages.appendChild(actionsDiv);
            scrollToBottom();
        }

        function showTypingIndicator() {
            const chatMessages = document.getElementById('chatMessages');
            const typingDiv = document.createElement('div');
            typingDiv.className = 'chat-message ai';
            typingDiv.id = 'typingIndicator';
            
            typingDiv.innerHTML = `
                <div class="<!-- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏ô main-grid ‡∏´‡∏•‡∏±‡∏á card ‡∏ó‡∏µ‡πà 2 -->
</div>

<!-- ‡πÄ‡∏û‡∏¥‡πà‡∏° Profile Grid ‡πÉ‡∏´‡∏°‡πà -->
<div class="main-grid">
    <!-- AI Profile & Memory Section -->
    <div class="card animate-slide-up">
        <h2><i class="fas fa-user-robot"></i> ‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ AI</h2>
        
        <div class="input-group">
            <label for="userName">‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏µ‡∏¢‡∏Å (‡πÉ‡∏´‡πâ AI ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å)</label>
            <input type="text" id="userName" placeholder="‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏¢‡∏≤‡∏Å‡πÉ‡∏´‡πâ AI ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏¢‡∏±‡∏á‡πÑ‡∏á?">
        </div>

        <div class="input-group">
            <label for="businessGoal">‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à</label>
            <select id="businessGoal">
                <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢...</option>
                <option value="survival">‡∏£‡∏≠‡∏î‡∏û‡∏≠‡∏°‡∏µ‡∏Å‡∏¥‡∏ô</option>
                <option value="stable">‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏°‡∏±‡πà‡∏ô‡∏Ñ‡∏á</option>
                <option value="growth">‡∏Ç‡∏¢‡∏≤‡∏¢‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à</option>
                <option value="franchise">‡πÄ‡∏õ‡∏¥‡∏î‡∏™‡∏≤‡∏Ç‡∏≤</option>
            </select>
        </div>

        <div class="input-group">
            <label for="experienceLevel">‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏≤</label>
            <select id="experienceLevel">
                <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö...</option>
                <option value="newbie">‡∏°‡∏∑‡∏≠‡πÉ‡∏´‡∏°‡πà (< 6 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô)</option>
                <option value="learning">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ (6‡πÄ‡∏î‡∏∑‡∏≠‡∏ô-2‡∏õ‡∏µ)</option>
                <option value="experienced">‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå (2-5‡∏õ‡∏µ)</option>
                <option value="expert">‡πÄ‡∏ã‡∏µ‡∏¢‡∏ô (5+ ‡∏õ‡∏µ)</option>
            </select>
        </div>

        <div class="input-group">
            <label for="riskTolerance">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡πÑ‡∏î‡πâ</label>
            <select id="riskTolerance">
                <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö...</option>
                <option value="conservative">‡∏≠‡∏ô‡∏∏‡∏£‡∏±‡∏Å‡∏©‡πå‡∏ô‡∏¥‡∏¢‡∏° (‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏ô‡πâ‡∏≠‡∏¢)</option>
                <option value="moderate">‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á</option>
                <option value="aggressive">‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡πÑ‡∏î‡πâ (‡∏Å‡∏≥‡πÑ‡∏£‡∏™‡∏π‡∏á)</option>
            </select>
        </div>

        <button class="button" onclick="saveProfile()">
            <i class="fas fa-save"></i> ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• AI ‡∏à‡∏∞‡∏à‡∏≥
        </button>

        <!-- AI Status -->
        <div id="aiStatus" style="margin-top: 15px; padding: 10px; border-radius: 8px; background: rgba(74, 144, 226, 0.1); border-left: 4px solid #4a90e2;">
            <div id="aiGreeting" style="font-weight: 500; color: #4a90e2;">
                <i class="fas fa-robot"></i> AI ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏à‡∏±‡∏Å‡∏Å‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì...
            </div>
            <div id="aiInsight" style="margin-top: 8px; font-size: 0.9rem; color: #666;">
                ‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ AI ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡πÅ‡∏•‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô
            </div>
        </div>
    </div>

    <!-- AI Statistics & Learning -->
    <div class="card animate-slide-up">
        <h2><i class="fas fa-chart-area"></i> AI ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏Ñ‡∏∏‡∏ì</h2>
        
        <!-- ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô -->
        <div class="stat-item">
            <div class="stat-label">‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>
            <div class="stat-value" id="usageCount">-</div>
        </div>

        <div class="stat-item">
            <div class="stat-label">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô AI Accuracy</div>
            <div class="stat-value" id="aiAccuracy">-</div>
        </div>

        <div class="stat-item">
            <div class="stat-label">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà AI ‡∏à‡∏≥‡πÑ‡∏î‡πâ</div>
            <div class="stat-value" id="dataPoints">-</div>
        </div>

        <!-- AI Learning Progress -->
        <div class="learning-progress" style="margin-top: 15px;">
            <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                <span style="font-size: 0.9rem; color: #666;">AI Learning Progress</span>
                <span id="learningPercent" style="font-size: 0.9rem; color: #4a90e2;">0%</span>
            </div>
            <div style="width: 100%; height: 8px; background: #e0e0e0; border-radius: 4px; overflow: hidden;">
                <div id="learningBar" style="height: 100%; background: linear-gradient(90deg, #4a90e2, #6ab7ff); width: 0%; transition: width 0.5s ease;"></div>
            </div>
        </div>

        <!-- Personality Insights -->
        <div id="personalityInsights" style="margin-top: 15px; padding: 10px; border-radius: 8px; background: rgba(0, 200, 83, 0.1); border-left: 4px solid #00c853;">
            <div style="font-weight: 500; color: #00c853; margin-bottom: 5px;">
                <i class="fas fa-lightbulb"></i> AI Personality Match
            </div>
            <div id="personalityText" style="font-size: 0.9rem; color: #666;">
                ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ AI ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ö‡∏∏‡∏Ñ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
            </div>
        </div>

        <button class="button secondary" onclick="resetAIMemory()">
            <i class="fas fa-brain"></i> ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï AI Memory
        </button>
    </div>
</div>

<style>
/* ‡πÄ‡∏û‡∏¥‡πà‡∏° CSS ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Profile Section */
.stat-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 0;
    border-bottom: 1px solid rgba(139, 69, 19, 0.2);
}

.stat-item:last-child {
    border-bottom: none;
}

.stat-label {
    font-size: 0.9rem;
    color: #666;
    font-weight: 500;
}

.stat-value {
    font-size: 1.2rem;
    font-weight: 600;
    color: #8B4513;
}

#aiStatus, #personalityInsights {
    animation: fadeIn 0.5s ease;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

/* Robot icon animation */
.fa-user-robot, .fa-robot {
    animation: pulse 2s infinite;
}

@keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.1); }
}
</style>
