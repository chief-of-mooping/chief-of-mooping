<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡∏Å‡∏≤‡πÅ‡∏ü‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡∏£‡∏≤‡∏¢</title>
  <style>
    body { font-family: sans-serif; background: #f4f4f4; padding: 20px; max-width: 800px; margin: auto; }
    h1 { text-align: center; color: #2c3e50; }
    .block { background: white; border-left: 6px solid #3498db; padding: 12px; margin-bottom: 16px; box-shadow: 0 0 5px #ccc; }
    label { display: block; margin-top: 10px; }
    input, textarea { width: 100%; padding: 8px; margin-top: 4px; }
    button { margin-top: 12px; padding: 10px 16px; background: #3498db; color: white; border: none; cursor: pointer; }
    button:hover { background: #2980b9; }
    .hash { font-size: 0.85em; color: #666; word-wrap: break-word; }
  </style>
</head>
<body>

  <h1>‚òï ‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡∏Å‡∏≤‡πÅ‡∏ü‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡∏£‡∏≤‡∏¢</h1>

  <div>
    <label>‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°:</label>
    <input id="activity" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß, ‡∏ï‡∏≤‡∏Å‡πÅ‡∏´‡πâ‡∏á, ‡∏Ñ‡∏±‡πà‡∏ß‡∏Å‡∏≤‡πÅ‡∏ü...">

    <label>‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà / ‡∏ú‡∏π‡πâ‡∏ú‡∏•‡∏¥‡∏ï:</label>
    <input id="location" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ü‡∏≤‡∏£‡πå‡∏°‡∏´‡∏£‡∏∑‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á">

    <label>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:</label>
    <input id="date" type="date">

    <button onclick="addBlock()">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ö‡∏•‡πá‡∏≠‡∏Å</button>
  </div>

  <h2>‚õìÔ∏è ‡∏ö‡∏•‡πá‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î:</h2>
  <div id="chainContainer"></div>

<script>
  class Block {
    constructor(index, timestamp, activity, location, date, previousHash = '') {
      this.index = index;
      this.timestamp = timestamp;
      this.activity = activity;
      this.location = location;
      this.date = date;
      this.previousHash = previousHash;
      this.hash = this.calculateHash();
    }

    calculateHash() {
      const data = this.index + this.timestamp + this.activity + this.location + this.date + this.previousHash;
      return sha256(data);
    }
  }

  class Blockchain {
    constructor() {
      this.chain = [this.createGenesisBlock()];
    }

    createGenesisBlock() {
      return new Block(0, new Date().toISOString(), "‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ö‡∏•‡πá‡∏≠‡∏Å", "‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡∏£‡∏≤‡∏¢", "2025-01-01", "0");
    }

    getLatestBlock() {
      return this.chain[this.chain.length - 1];
    }

    addBlock(newBlock) {
      newBlock.previousHash = this.getLatestBlock().hash;
      newBlock.hash = newBlock.calculateHash();
      this.chain.push(newBlock);
    }
  }

  const coffeeChain = new Blockchain();

  function addBlock() {
    const activity = document.getElementById('activity').value;
    const location = document.getElementById('location').value;
    const date = document.getElementById('date').value;
    if (!activity || !location || !date) return alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô");

    const newBlock = new Block(coffeeChain.chain.length, new Date().toISOString(), activity, location, date);
    coffeeChain.addBlock(newBlock);
    renderChain();
  }

  function renderChain() {
    const container = document.getElementById('chainContainer');
    container.innerHTML = '';
    coffeeChain.chain.forEach(block => {
      const div = document.createElement('div');
      div.className = 'block';
      div.innerHTML = `
        <strong>üß± ‡∏ö‡∏•‡πá‡∏≠‡∏Å #${block.index}</strong><br>
        üìå ‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°: ${block.activity}<br>
        üó∫Ô∏è ‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà: ${block.location}<br>
        üìÖ ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: ${block.date}<br>
        <div class="hash">üîó Hash: ${block.hash}</div>
        <div class="hash">‚Ü©Ô∏è Previous: ${block.previousHash}</div>
      `;
      container.appendChild(div);
    });
  }

  // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏î‡∏π‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ß‡πá‡∏ö‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å
  renderChain();

  // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô sha256 ‡∏à‡∏≤‡∏Å crypto.subtle (async ‚Üí base64)
  function sha256(str) {
    const buffer = new TextEncoder().encode(str);
    return crypto.subtle.digest("SHA-256", buffer).then(hash => {
      return Array.from(new Uint8Array(hash)).map(b => b.toString(16).padStart(2, "0")).join("");
    });
  }
</script>

</body>
</html>
