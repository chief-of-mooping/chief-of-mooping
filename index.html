<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ü‡∏≤‡∏£‡πå‡∏°‡∏™‡∏∏‡∏Å‡∏£‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞</title>
    <link rel="manifest" href="data:application/json;base64,ewogICJuYW1lIjogIuC4o+C4sOC4muC4muC4iOC4seC4lOC4geC4suC4o+C4n+C4suC4o+C5jOC4oeC4quC4uOC4geC4o+C4reC4seC4iOC4ieC4o+C4tOC4jeC4sOIsCiAgInNob3J0X25hbWUiOiAi4LmA4Lit4LiXIOC4n+C4suC4o+C5jOC4oeC4quC4uOC4geC4oyIsCiAgImRlc2NyaXB0aW9uIjogIuC4o+C4sOC4muC4muC4iOC4seC4lOC4geC4suC4o+C4n+C4suC4o+C5jOC4oeC4quC4uOC4geC4o+C4reC4seC4iOC4ieC4o+C4tOC4jeC4sOC4quC4s+C4q+C4o+C4seC4muC4q+C4suC4o+C4suC4geC4suC4o+C4i+C4reC4meC5gOC4peC4suC4sOIsCiAgInN0YXJ0X3VybCI6ICIuLyIsCiAgImRpc3BsYXkiOiAic3RhbmRhbG9uZSIsCiAgImJhY2tncm91bmRfY29sb3IiOiAiIzA1OTY2OSIsCiAgInRoZW1lX2NvbG9yIjogIiMwNTk2NjkiLAogICJpY29ucyI6IFsKICAgIHsKICAgICAgInNyYyI6ICJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUI0Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TUM5emRtY2lJSGRwWkhSb1BTSXlOREFpSUdobGFXZG9kRDBpTWpRd0lqNDhjR0YwYUNCa1BTSk5NVEkwTGpjZ01UZzJMalExTXpnc01UZzJMalEwTlRjdVl6a2lJR1pwYkd3OUlpTXdOVGsyTmpraUx6NDhMM04yWno0PSIsCiAgICAgICJzaXplcyI6ICIyNDB4MjQwIiwKICAgICAgInR5cGUiOiAiaW1hZ2Uvc3ZnK3htbCIKICAgIH0KICBdCn0=">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Niramit:wght@300;400;500;600;700&display=swap');
        
        :root {
            --primary-green: #059669;
            --primary-blue: #2563eb;
            --neutral-gray: #64748b;
            --light-gray: #f1f5f9;
            --white: #ffffff;
            --success: #10b981;
            --warning: #f59e0b;
            --error: #ef4444;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --radius: 12px;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Niramit', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, var(--light-gray) 0%, #e2e8f0 100%);
            color: #334155;
            line-height: 1.6;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 1440px;
            margin: 0 auto;
            padding: 0 1rem;
        }
        
        /* Header */
        .header {
            background: linear-gradient(135deg, var(--primary-green) 0%, var(--primary-blue) 100%);
            color: white;
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: var(--shadow);
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .nav-desktop {
            display: none;
            gap: 2rem;
        }
        
        .nav-desktop button {
            background: transparent;
            border: none;
            color: white;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            padding: 0.5rem 1rem;
            border-radius: var(--radius);
            transition: all 0.3s ease;
        }
        
        .nav-desktop button:hover,
        .nav-desktop button.active {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
        }
        
        .hamburger {
            display: flex;
            flex-direction: column;
            cursor: pointer;
            gap: 4px;
        }
        
        .hamburger span {
            width: 25px;
            height: 3px;
            background: white;
            border-radius: 2px;
            transition: all 0.3s ease;
        }
        
        .hamburger.active span:nth-child(1) {
            transform: rotate(45deg) translate(6px, 6px);
        }
        
        .hamburger.active span:nth-child(2) {
            opacity: 0;
        }
        
        .hamburger.active span:nth-child(3) {
            transform: rotate(-45deg) translate(6px, -6px);
        }
        
        /* Mobile Menu */
        .mobile-menu {
            position: fixed;
            top: 0;
            left: -100%;
            width: 280px;
            height: 100vh;
            background: linear-gradient(135deg, var(--primary-green) 0%, var(--primary-blue) 100%);
            padding: 80px 2rem 2rem;
            transition: left 0.3s ease;
            z-index: 99;
            overflow-y: auto;
        }
        
        .mobile-menu.active {
            left: 0;
        }
        
        .mobile-menu-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 98;
        }
        
        .mobile-menu-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        .mobile-nav {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .mobile-nav button {
            background: transparent;
            border: none;
            color: white;
            font-size: 1.1rem;
            font-weight: 500;
            cursor: pointer;
            padding: 1rem;
            text-align: left;
            border-radius: var(--radius);
            transition: all 0.3s ease;
        }
        
        .mobile-nav button:hover,
        .mobile-nav button.active {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
        }
        
        /* Main Content */
        .main-content {
            padding: 2rem 0;
            min-height: calc(100vh - 100px);
        }
        
        .section {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        .section.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Dashboard */
        .dashboard-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1.5rem;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .stat-card {
            background: var(--white);
            border-radius: var(--radius);
            padding: 1.5rem;
            box-shadow: var(--shadow);
            border-left: 4px solid var(--primary-green);
            transition: all 0.3s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px -5px rgba(0, 0, 0, 0.1);
        }
        
        .stat-card h3 {
            font-size: 0.9rem;
            color: var(--neutral-gray);
            margin-bottom: 0.5rem;
            font-weight: 500;
        }
        
        .stat-card .value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary-green);
            margin-bottom: 0.5rem;
        }
        
        .stat-card .change {
            font-size: 0.8rem;
            color: var(--success);
            font-weight: 500;
        }
        
        .chart-container {
            background: var(--white);
            border-radius: var(--radius);
            padding: 1.5rem;
            box-shadow: var(--shadow);
            margin-bottom: 2rem;
        }
        
        .chart-container h3 {
            margin-bottom: 1rem;
            color: #1e293b;
            font-weight: 600;
        }
        
        .chart {
            height: 300px;
            display: flex;
            align-items: end;
            justify-content: space-between;
            gap: 1rem;
            padding: 1rem 0;
            border-bottom: 2px solid #e2e8f0;
        }
        
        .chart-bar {
            flex: 1;
            background: linear-gradient(to top, var(--primary-green), var(--primary-blue));
            border-radius: 4px 4px 0 0;
            min-height: 20px;
            position: relative;
            transition: all 0.3s ease;
        }
        
        .chart-bar:hover {
            transform: scale(1.05);
            filter: brightness(1.1);
        }
        
        .chart-label {
            text-align: center;
            margin-top: 0.5rem;
            font-size: 0.8rem;
            color: var(--neutral-gray);
        }
        
        /* Alerts */
        .alerts-container {
            background: var(--white);
            border-radius: var(--radius);
            padding: 1.5rem;
            box-shadow: var(--shadow);
        }
        
        .alert {
            padding: 1rem;
            border-radius: var(--radius);
            margin-bottom: 1rem;
            border-left: 4px solid;
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .alert.warning {
            background: #fef3c7;
            border-color: var(--warning);
            color: #92400e;
        }
        
        .alert.error {
            background: #fee2e2;
            border-color: var(--error);
            color: #991b1b;
        }
        
        .alert.success {
            background: #d1fae5;
            border-color: var(--success);
            color: #065f46;
        }
        
        /* Forms */
        .form-container {
            background: var(--white);
            border-radius: var(--radius);
            padding: 2rem;
            box-shadow: var(--shadow);
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1.5rem;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        
        .form-group label {
            font-weight: 600;
            color: #374151;
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            padding: 0.75rem;
            border: 2px solid #e5e7eb;
            border-radius: var(--radius);
            font-size: 1rem;
            font-family: inherit;
            transition: all 0.3s ease;
            min-height: 44px;
        }
        
        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary-green);
            box-shadow: 0 0 0 3px rgba(5, 150, 105, 0.1);
        }
        
        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: var(--radius);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-height: 44px;
            font-family: inherit;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--primary-green) 0%, var(--primary-blue) 100%);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px -5px rgba(5, 150, 105, 0.3);
        }
        
        .btn-secondary {
            background: #f1f5f9;
            color: #475569;
        }
        
        .btn-secondary:hover {
            background: #e2e8f0;
        }
        
        /* Tables */
        .table-container {
            background: var(--white);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            overflow: hidden;
        }
        
        .table-responsive {
            overflow-x: auto;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th, td {
            text-align: left;
            padding: 1rem;
            border-bottom: 1px solid #e5e7eb;
        }
        
        th {
            background: #f8fafc;
            font-weight: 600;
            color: #374151;
            font-size: 0.9rem;
        }
        
        tr:hover {
            background: #f8fafc;
        }
        
        /* Page Header */
        .page-header {
            margin-bottom: 2rem;
        }
        
        .page-header h1 {
            font-size: 2rem;
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 0.5rem;
        }
        
        .page-header p {
            color: var(--neutral-gray);
            font-size: 1.1rem;
        }
        
        /* Responsive Design */
        @media (min-width: 768px) {
            .hamburger {
                display: none;
            }
            
            .nav-desktop {
                display: flex;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .dashboard-grid {
                grid-template-columns: 2fr 1fr;
            }
            
            .form-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (min-width: 1024px) {
            .stats-grid {
                grid-template-columns: repeat(4, 1fr);
            }
            
            .form-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }
        
        @media (min-width: 1440px) {
            .form-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }
        
        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* PWA Styles */
        .install-prompt {
            position: fixed;
            bottom: 20px;
            left: 20px;
            right: 20px;
            background: var(--white);
            border-radius: var(--radius);
            padding: 1rem;
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
            display: none;
            z-index: 1000;
        }
        
        .install-prompt.show {
            display: block;
            animation: slideUp 0.3s ease;
        }
        
        @keyframes slideUp {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }
        
        /* Dark mode support */
        @media (prefers-color-scheme: dark) {
            :root {
                --white: #1e293b;
                --light-gray: #0f172a;
                --neutral-gray: #94a3b8;
            }
            
            body {
                background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
                color: #e2e8f0;
            }
        }

        /* Additional Modern Styling */
        .glass-effect {
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .gradient-text {
            background: linear-gradient(135deg, var(--primary-green) 0%, var(--primary-blue) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        /* Performance indicators */
        .performance-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 0.5rem;
        }
        
        .performance-indicator.good {
            background: var(--success);
        }
        
        .performance-indicator.warning {
            background: var(--warning);
        }
        
        .performance-indicator.poor {
            background: var(--error);
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <svg width="32" height="32" viewBox="0 0 240 240" fill="none">
                        <path d="M124.7 186.453c0,0 38.186.457.6z9" fill="#ffffff"/>
                    </svg>
                    ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ü‡∏≤‡∏£‡πå‡∏°‡∏™‡∏∏‡∏Å‡∏£
                </div>
                
                <nav class="nav-desktop">
                    <button onclick="showSection('dashboard')" class="active">‡πÅ‡∏ú‡∏á‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°</button>
                    <button onclick="showSection('pigs')">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏∏‡∏Å‡∏£</button>
                    <button onclick="showSection('feeding')">‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£</button>
                    <button onclick="showSection('health')">‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û</button>
                    <button onclick="showSection('reports')">‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</button>
                </nav>
                
                <div class="hamburger" onclick="toggleMobileMenu()">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
        </div>
    </header>

    <!-- Mobile Menu -->
    <div class="mobile-menu-overlay" onclick="toggleMobileMenu()"></div>
    <nav class="mobile-menu">
        <div class="mobile-nav">
            <button onclick="showSection('dashboard'); toggleMobileMenu()" class="active">üè† ‡πÅ‡∏ú‡∏á‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°</button>
            <button onclick="showSection('pigs'); toggleMobileMenu()">üê∑ ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏∏‡∏Å‡∏£</button>
            <button onclick="showSection('feeding'); toggleMobileMenu()">ü•ó ‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£</button>
            <button onclick="showSection('health'); toggleMobileMenu()">üíä ‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û</button>
            <button onclick="showSection('reports'); toggleMobileMenu()">üìä ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</button>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <!-- Dashboard Section -->
            <section id="dashboard" class="section active">
                <div class="page-header">
                    <h1>‡πÅ‡∏ú‡∏á‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏ü‡∏≤‡∏£‡πå‡∏°‡∏™‡∏∏‡∏Å‡∏£</h1>
                    <p>‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏ü‡∏≤‡∏£‡πå‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</p>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏∏‡∏Å‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h3>
                        <div class="value" id="totalPigs">0</div>
                        <div class="change">+5% ‡∏à‡∏≤‡∏Å‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß</div>
                    </div>
                    <div class="stat-card">
                        <h3>FCR ‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢</h3>
                        <div class="value" id="avgFCR">0.00</div>
                        <div class="change" id="fcrChange">‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: 2.35</div>
                    </div>
                    <div class="stat-card">
                        <h3>ADG ‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢ (‡∏Å‡∏£‡∏±‡∏°/‡∏ß‡∏±‡∏ô)</h3>
                        <div class="value" id="avgADG">0</div>
                        <div class="change" id="adgChange">‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: 700g</div>
                    </div>
                    <div class="stat-card">
                        <h3>‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏Å‡∏≤‡∏£‡∏ï‡∏≤‡∏¢ (%)</h3>
                        <div class="value" id="mortalityRate">0.0</div>
                        <div class="change">‡∏ï‡πà‡∏≥‡∏Å‡∏ß‡πà‡∏≤‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô</div>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <div class="chart-container">
                        <h3>‡πÅ‡∏ô‡∏ß‡πÇ‡∏ô‡πâ‡∏° FCR ‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</h3>
                        <div class="chart" id="fcrChart">
                            <div>
                                <div class="chart-bar" style="height: 80px;"></div>
                                <div class="chart-label">‡∏°.‡∏Ñ.</div>
                            </div>
                            <div>
                                <div class="chart-bar" style="height: 120px;"></div>
                                <div class="chart-label">‡∏Å.‡∏û.</div>
                            </div>
                            <div>
                                <div class="chart-bar" style="height: 100px;"></div>
                                <div class="chart-label">‡∏°‡∏µ.‡∏Ñ.</div>
                            </div>
                            <div>
                                <div class="chart-bar" style="height: 90px;"></div>
                                <div class="chart-label">‡πÄ‡∏°.‡∏¢.</div>
                            </div>
                            <div>
                                <div class="chart-bar" style="height: 85px;"></div>
                                <div class="chart-label">‡∏û.‡∏Ñ.</div>
                            </div>
                            <div>
                                <div class="chart-bar" style="height: 75px;"></div>
                                <div class="chart-label">‡∏°‡∏¥.‡∏¢.</div>
                            </div>
                        </div>
                    </div>

                    <div class="alerts-container">
                        <h3>‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞</h3>
                        <div id="alertsContainer">
                            <!-- Alerts will be dynamically generated -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Pigs Management Section -->
            <section id="pigs" class="section">
                <div class="page-header">
                    <h1>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏∏‡∏Å‡∏£</h1>
                    <p>‡πÄ‡∏û‡∏¥‡πà‡∏° ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç ‡πÅ‡∏•‡∏∞‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏∏‡∏Å‡∏£</p>
                </div>

                <div class="form-container">
                    <h3>‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏∏‡∏Å‡∏£‡πÉ‡∏´‡∏°‡πà</h3>
                    <form id="pigForm" class="form-grid">
                        <div class="form-group">
                            <label for="pigId">‡∏£‡∏´‡∏±‡∏™‡∏™‡∏∏‡∏Å‡∏£ *</label>
                            <input type="text" id="pigId" required>
                        </div>
                        <div class="form-group">
                            <label for="pigGroup">‡∏Å‡∏•‡∏∏‡πà‡∏°</label>
                            <select id="pigGroup">
                               <option value="‡∏≠‡∏ô‡∏∏‡∏ö‡∏≤‡∏•">‡∏≠‡∏ô‡∏∏‡∏ö‡∏≤‡∏•</option>
                               <option value="‡∏£‡∏∏‡πà‡∏ô">‡∏£‡∏∏‡πà‡∏ô</option>
                               <option value="‡∏Ç‡∏∏‡∏ô">‡∏Ç‡∏∏‡∏ô</option>
                               <option value="‡∏û‡πà‡∏≠‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡πå">‡∏û‡πà‡∏≠‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡πå</option>
                               <option value="‡πÅ‡∏°‡πà‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡πå">‡πÅ‡∏°‡πà‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡πå</option>
                           </select>
                       </div>
                       <div class="form-group">
                           <label for="pigWeight">‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å (‡∏Å‡∏Å.)</label>
                           <input type="number" id="pigWeight" step="0.1" min="0">
                       </div>
                       <div class="form-group">
                           <label for="pigAge">‡∏≠‡∏≤‡∏¢‡∏∏ (‡∏ß‡∏±‡∏ô)</label>
                           <input type="number" id="pigAge" min="0">
                       </div>
                       <div class="form-group">
                           <label for="pigGender">‡πÄ‡∏û‡∏®</label>
                           <select id="pigGender">
                               <option value="‡∏ú‡∏π‡πâ">‡∏ú‡∏π‡πâ</option>
                               <option value="‡πÄ‡∏°‡∏µ‡∏¢">‡πÄ‡∏°‡∏µ‡∏¢</option>
                           </select>
                       </div>
                       <div class="form-group">
                           <label for="pigBreed">‡∏™‡∏≤‡∏¢‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡πå</label>
                           <input type="text" id="pigBreed" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏•‡∏≤‡∏£‡πå‡∏à‡πÑ‡∏ß‡∏ó‡πå, ‡πÅ‡∏•‡∏ô‡∏î‡πå‡πÄ‡∏£‡∏ã">
                       </div>
                       <div class="form-group">
                           <label for="pigCost">‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏•‡∏π‡∏Å‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡πå (‡∏ö‡∏≤‡∏ó)</label>
                           <input type="number" id="pigCost" step="0.01" min="0" value="2700">
                       </div>
                       <div class="form-group">
                           <label for="pigTargetWeight">‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ (‡∏Å‡∏Å.)</label>
                           <input type="number" id="pigTargetWeight" step="0.1" min="0" value="110">
                       </div>
                       <div class="form-group" style="grid-column: 1 / -1;">
                           <button type="submit" class="btn btn-primary">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏∏‡∏Å‡∏£</button>
                       </div>
                   </form>
               </div>

               <div class="table-container" style="margin-top: 2rem;">
                   <h3 style="padding: 1rem; margin: 0;">‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏∏‡∏Å‡∏£‡πÉ‡∏ô‡∏ü‡∏≤‡∏£‡πå‡∏°</h3>
                   <div class="table-responsive">
                       <table id="pigsTable">
                           <thead>
                               <tr>
                                   <th>‡∏£‡∏´‡∏±‡∏™</th>
                                   <th>‡∏Å‡∏•‡∏∏‡πà‡∏°</th>
                                   <th>‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å (‡∏Å‡∏Å.)</th>
                                   <th>‡∏≠‡∏≤‡∏¢‡∏∏ (‡∏ß‡∏±‡∏ô)</th>
                                   <th>FCR</th>
                                   <th>ADG</th>
                                   <th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
                                   <th>‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                               </tr>
                           </thead>
                           <tbody id="pigsTableBody">
                               <!-- Pig data will be populated here -->
                           </tbody>
                       </table>
                   </div>
               </div>
           </section>

           <!-- Feeding Section -->
           <section id="feeding" class="section">
               <div class="page-header">
                   <h1>‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£</h1>
                   <p>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì FCR</p>
               </div>

               <div class="form-container">
                   <h3>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£</h3>
                   <form id="feedingForm" class="form-grid">
                       <div class="form-group">
                           <label for="feedPigId">‡∏£‡∏´‡∏±‡∏™‡∏™‡∏∏‡∏Å‡∏£ / ‡∏Å‡∏•‡∏∏‡πà‡∏° *</label>
                           <select id="feedPigId" required>
                               <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏∏‡∏Å‡∏£‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏•‡∏∏‡πà‡∏°</option>
                           </select>
                       </div>
                       <div class="form-group">
                           <label for="feedType">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏≠‡∏≤‡∏´‡∏≤‡∏£</label>
                           <select id="feedType">
                               <option value="‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏´‡∏°‡∏π‡πÄ‡∏•‡πá‡∏Å">‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏´‡∏°‡∏π‡πÄ‡∏•‡πá‡∏Å (20 ‡∏ö‡∏≤‡∏ó/‡∏Å‡∏Å.)</option>
                               <option value="‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏´‡∏°‡∏π‡∏£‡∏∏‡πà‡∏ô">‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏´‡∏°‡∏π‡∏£‡∏∏‡πà‡∏ô (18 ‡∏ö‡∏≤‡∏ó/‡∏Å‡∏Å.)</option>
                               <option value="‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏´‡∏°‡∏π‡∏Ç‡∏∏‡∏ô">‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏´‡∏°‡∏π‡∏Ç‡∏∏‡∏ô (16 ‡∏ö‡∏≤‡∏ó/‡∏Å‡∏Å.)</option>
                           </select>
                       </div>
                       <div class="form-group">
                           <label for="feedAmount">‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì‡∏≠‡∏≤‡∏´‡∏≤‡∏£ (‡∏Å‡∏Å.)</label>
                           <input type="number" id="feedAmount" step="0.1" min="0" required>
                       </div>
                       <div class="form-group">
                           <label for="feedDate">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏´‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£</label>
                           <input type="date" id="feedDate" required>
                       </div>
                       <div class="form-group">
                           <label for="feedNotes">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏</label>
                           <textarea id="feedNotes" rows="3" placeholder="‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°"></textarea>
                       </div>
                       <div class="form-group" style="grid-column: 1 / -1;">
                           <button type="submit" class="btn btn-primary">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£</button>
                       </div>
                   </form>
               </div>

               <div class="stats-grid" style="margin-top: 2rem;">
                   <div class="stat-card">
                       <h3>‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ (‡∏Å‡∏Å.)</h3>
                       <div class="value" id="todayFeed">0</div>
                       <div class="change">‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô: <span id="todayFeedCost">0</span> ‡∏ö‡∏≤‡∏ó</div>
                   </div>
                   <div class="stat-card">
                       <h3>‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÉ‡∏ô‡∏™‡∏ï‡πá‡∏≠‡∏Å (‡∏Å‡∏Å.)</h3>
                       <div class="value" id="feedStock">0</div>
                       <div class="change">‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠ <span id="daysRemaining">0</span> ‡∏ß‡∏±‡∏ô</div>
                   </div>
                   <div class="stat-card">
                       <h3>FCR ‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</h3>
                       <div class="value" id="latestFCR">0.00</div>
                       <div class="change" id="fcrStatus">-</div>
                   </div>
                   <div class="stat-card">
                       <h3>‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏£‡∏ß‡∏° (‡∏ö‡∏≤‡∏ó)</h3>
                       <div class="value" id="totalFeedCost">0</div>
                       <div class="change">‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏µ‡πâ</div>
                   </div>
               </div>

               <div class="table-container" style="margin-top: 2rem;">
                   <h3 style="padding: 1rem; margin: 0;">‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£</h3>
                   <div class="table-responsive">
                       <table id="feedingTable">
                           <thead>
                               <tr>
                                   <th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>
                                   <th>‡∏£‡∏´‡∏±‡∏™/‡∏Å‡∏•‡∏∏‡πà‡∏°</th>
                                   <th>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏≠‡∏≤‡∏´‡∏≤‡∏£</th>
                                   <th>‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì (‡∏Å‡∏Å.)</th>
                                   <th>‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô (‡∏ö‡∏≤‡∏ó)</th>
                                   <th>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏</th>
                               </tr>
                           </thead>
                           <tbody id="feedingTableBody">
                               <!-- Feeding records will be populated here -->
                           </tbody>
                       </table>
                   </div>
               </div>
           </section>

           <!-- Health Section -->
           <section id="health" class="section">
               <div class="page-header">
                   <h1>‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡πÅ‡∏•‡∏∞‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô</h1>
                   <p>‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏™‡∏∏‡∏Å‡∏£‡πÅ‡∏•‡∏∞‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô</p>
               </div>

               <div class="form-container">
                   <h3>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û</h3>
                   <form id="healthForm" class="form-grid">
                       <div class="form-group">
                           <label for="healthPigId">‡∏£‡∏´‡∏±‡∏™‡∏™‡∏∏‡∏Å‡∏£ *</label>
                           <select id="healthPigId" required>
                               <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏∏‡∏Å‡∏£</option>
                           </select>
                       </div>
                       <div class="form-group">
                           <label for="healthType">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</label>
                           <select id="healthType">
                               <option value="‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô">‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô</option>
                               <option value="‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û">‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û</option>
                               <option value="‡∏£‡∏±‡∏Å‡∏©‡∏≤‡πÇ‡∏£‡∏Ñ">‡∏£‡∏±‡∏Å‡∏©‡∏≤‡πÇ‡∏£‡∏Ñ</option>
                               <option value="‡∏Å‡∏≤‡∏£‡∏ï‡∏≤‡∏¢">‡∏Å‡∏≤‡∏£‡∏ï‡∏≤‡∏¢</option>
                           </select>
                       </div>
                       <div class="form-group">
                           <label for="vaccineType">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô/‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤</label>
                           <select id="vaccineType">
                               <option value="‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÇ‡∏£‡∏Ñ‡∏õ‡∏≤‡∏Å‡πÅ‡∏•‡∏∞‡πÄ‡∏ó‡πâ‡∏≤‡πÄ‡∏õ‡∏∑‡πà‡∏≠‡∏¢">‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÇ‡∏£‡∏Ñ‡∏õ‡∏≤‡∏Å‡πÅ‡∏•‡∏∞‡πÄ‡∏ó‡πâ‡∏≤‡πÄ‡∏õ‡∏∑‡πà‡∏≠‡∏¢</option>
                               <option value="‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÇ‡∏£‡∏Ñ‡∏´‡∏π‡∏ô‡πâ‡∏≥‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á">‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÇ‡∏£‡∏Ñ‡∏´‡∏π‡∏ô‡πâ‡∏≥‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á</option>
                               <option value="‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÇ‡∏£‡∏Ñ PRRS">‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÇ‡∏£‡∏Ñ PRRS</option>
                               <option value="‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÇ‡∏£‡∏Ñ‡∏û‡∏¥‡∏©‡∏™‡∏∏‡∏ô‡∏±‡∏Ç‡∏ö‡πâ‡∏≤">‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÇ‡∏£‡∏Ñ‡∏û‡∏¥‡∏©‡∏™‡∏∏‡∏ô‡∏±‡∏Ç‡∏ö‡πâ‡∏≤</option>
                               <option value="‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÇ‡∏£‡∏Ñ‡πÑ‡∏Ç‡πâ‡∏´‡∏ß‡∏±‡∏î‡πÉ‡∏´‡∏ç‡πà">‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÇ‡∏£‡∏Ñ‡πÑ‡∏Ç‡πâ‡∏´‡∏ß‡∏±‡∏î‡πÉ‡∏´‡∏ç‡πà</option>
                               <option value="‡∏¢‡∏≤‡∏õ‡∏è‡∏¥‡∏ä‡∏µ‡∏ß‡∏ô‡∏∞">‡∏¢‡∏≤‡∏õ‡∏è‡∏¥‡∏ä‡∏µ‡∏ß‡∏ô‡∏∞</option>
                               <option value="‡∏¢‡∏≤‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û">‡∏¢‡∏≤‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û</option>
                               <option value="‡∏≠‡∏∑‡πà‡∏ô‡πÜ">‡∏≠‡∏∑‡πà‡∏ô‡πÜ</option>
                           </select>
                       </div>
                       <div class="form-group">
                           <label for="healthDate">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</label>
                           <input type="date" id="healthDate" required>
                       </div>
                       <div class="form-group">
                           <label for="nextVaccineDate">‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô‡πÄ‡∏Ç‡πá‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏õ</label>
                           <input type="date" id="nextVaccineDate">
                       </div>
                       <div class="form-group">
                           <label for="healthCost">‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢ (‡∏ö‡∏≤‡∏ó)</label>
                           <input type="number" id="healthCost" step="0.01" min="0">
                       </div>
                       <div class="form-group">
                           <label for="healthNotes">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏</label>
                           <textarea id="healthNotes" rows="3" placeholder="‡∏≠‡∏≤‡∏Å‡∏≤‡∏£ ‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤ ‡∏ú‡∏•‡∏Ç‡πâ‡∏≤‡∏á‡πÄ‡∏Ñ‡∏µ‡∏¢‡∏á"></textarea>
                       </div>
                       <div class="form-group" style="grid-column: 1 / -1;">
                           <button type="submit" class="btn btn-primary">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û</button>
                       </div>
                   </form>
               </div>

               <div class="stats-grid" style="margin-top: 2rem;">
                   <div class="stat-card">
                       <h3>‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô‡∏Ñ‡∏£‡∏ö‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</h3>
                       <div class="value" id="vaccineDueToday">0</div>
                       <div class="change">‡∏ï‡∏±‡∏ß</div>
                   </div>
                   <div class="stat-card">
                       <h3>‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô‡∏Ñ‡∏£‡∏ö‡∏Å‡∏≥‡∏´‡∏ô‡∏î 7 ‡∏ß‡∏±‡∏ô</h3>
                       <div class="value" id="vaccineDueWeek">0</div>
                       <div class="change">‡∏ï‡∏±‡∏ß</div>
                   </div>
                   <div class="stat-card">
                       <h3>‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏Å‡∏≤‡∏£‡∏ï‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏µ‡πâ</h3>
                       <div class="value" id="monthlyMortality">0.0</div>
                       <div class="change">%</div>
                   </div>
                   <div class="stat-card">
                       <h3>‡∏Ñ‡πà‡∏≤‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏µ‡πâ</h3>
                       <div class="value" id="monthlyHealthCost">0</div>
                       <div class="change">‡∏ö‡∏≤‡∏ó</div>
                   </div>
               </div>

               <div class="table-container" style="margin-top: 2rem;">
                   <h3 style="padding: 1rem; margin: 0;">‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô‡πÅ‡∏•‡∏∞‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û</h3>
                   <div class="table-responsive">
                       <table id="healthTable">
                           <thead>
                               <tr>
                                   <th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>
                                   <th>‡∏£‡∏´‡∏±‡∏™‡∏™‡∏∏‡∏Å‡∏£</th>
                                   <th>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</th>
                                   <th>‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô/‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤</th>
                                   <th>‡πÄ‡∏Ç‡πá‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏õ</th>
                                   <th>‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢</th>
                                   <th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
                               </tr>
                           </thead>
                           <tbody id="healthTableBody">
                               <!-- Health records will be populated here -->
                           </tbody>
                       </table>
                   </div>
               </div>
           </section>

           <!-- Reports Section -->
           <section id="reports" class="section">
               <div class="page-header">
                   <h1>‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå</h1>
                   <p>‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡∏Ç‡∏≠‡∏á‡∏ü‡∏≤‡∏£‡πå‡∏°</p>
               </div>

               <div class="form-container">
                   <h3>‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</h3>
                   <div class="form-grid">
                       <div class="form-group">
                           <label for="reportType">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</label>
                           <select id="reportType">
                               <option value="performance">‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏Å‡∏≤‡∏£‡∏ú‡∏•‡∏¥‡∏ï</option>
                               <option value="financial">‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô</option>
                               <option value="health">‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û</option>
                               <option value="feeding">‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£</option>
                               <option value="growth">‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏à‡∏£‡∏¥‡∏ç‡πÄ‡∏ï‡∏¥‡∏ö‡πÇ‡∏ï</option>
                           </select>
                       </div>
                       <div class="form-group">
                           <label for="reportPeriod">‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤</label>
                           <select id="reportPeriod">
                               <option value="today">‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</option>
                               <option value="week">‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ô‡∏µ‡πâ</option>
                               <option value="month">‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏µ‡πâ</option>
                               <option value="quarter">‡πÑ‡∏ï‡∏£‡∏°‡∏≤‡∏™‡∏ô‡∏µ‡πâ</option>
                               <option value="year">‡∏õ‡∏µ‡∏ô‡∏µ‡πâ</option>
                               <option value="custom">‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏≠‡∏á</option>
                           </select>
                       </div>
                       <div class="form-group">
                           <label for="reportStartDate">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô</label>
                           <input type="date" id="reportStartDate">
                       </div>
                       <div class="form-group">
                           <label for="reportEndDate">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î</label>
                           <input type="date" id="reportEndDate">
                       </div>
                       <div class="form-group" style="grid-column: 1 / -1;">
                           <button type="button" onclick="generateReport()" class="btn btn-primary">‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</button>
                           <button type="button" onclick="exportReport()" class="btn btn-secondary" style="margin-left: 1rem;">‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å PDF</button>
                       </div>
                   </div>
               </div>

               <div id="reportResults" class="table-container" style="margin-top: 2rem; display: none;">
                   <h3 style="padding: 1rem; margin: 0;">‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</h3>
                   <div id="reportContent" style="padding: 2rem;">
                       <!-- Report content will be generated here -->
                   </div>
               </div>

               <!-- Financial Summary -->
               <div class="chart-container" style="margin-top: 2rem;">
                   <h3>‡∏™‡∏£‡∏∏‡∏õ‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô</h3>
                   <div class="stats-grid">
                       <div class="stat-card">
                           <h3>‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏£‡∏ß‡∏°</h3>
                           <div class="value" id="totalRevenue">0</div>
                           <div class="change">‡∏ö‡∏≤‡∏ó</div>
                       </div>
                       <div class="stat-card">
                           <h3>‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏£‡∏ß‡∏°</h3>
                           <div class="value" id="totalCosts">0</div>
                           <div class="change">‡∏ö‡∏≤‡∏ó</div>
                       </div>
                       <div class="stat-card">
                           <h3>‡∏Å‡∏≥‡πÑ‡∏£‡∏™‡∏∏‡∏ó‡∏ò‡∏¥</h3>
                           <div class="value" id="netProfit">0</div>
                           <div class="change">‡∏ö‡∏≤‡∏ó</div>
                       </div>
                       <div class="stat-card">
                           <h3>ROI (%)</h3>
                           <div class="value" id="roi">0.0</div>
                           <div class="change">%</div>
                       </div>
                   </div>
               </div>
           </section>
       </div>
   </main>

   <!-- PWA Install Prompt -->
   <div class="install-prompt" id="installPrompt">
       <div style="display: flex; justify-content: space-between; align-items: center;">
           <div>
               <strong>‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏≠‡∏õ‡∏ö‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠</strong>
               <p style="margin: 0; font-size: 0.9rem; color: var(--neutral-gray);">‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡πÅ‡∏°‡πâ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏≠‡∏¥‡∏ô‡πÄ‡∏ó‡∏≠‡∏£‡πå‡πÄ‡∏ô‡πá‡∏ï</p>
           </div>
           <div>
               <button onclick="installPWA()" class="btn btn-primary" style="margin-right: 0.5rem;">‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á</button>
               <button onclick="dismissInstall()" class="btn btn-secondary">‡∏õ‡∏¥‡∏î</button>
           </div>
       </div>
   </div>

   <script>
       // Application State
       let appData = {
           pigs: [],
           feeding: [],
           health: [],
           settings: {
               fcrTarget: 2.35,
               adgTarget: 700,
               mortalityTarget: 5.0
           }
       };

       // Load data from localStorage
       function loadData() {
           const savedData = localStorage.getItem('pigFarmData');
           if (savedData) {
               appData = { ...appData, ...JSON.parse(savedData) };
           }
           updateDashboard();
           populateDropdowns();
           populateTables();
       }

       // Save data to localStorage
       function saveData() {
           localStorage.setItem('pigFarmData', JSON.stringify(appData));
       }

       // Mobile menu functionality
       function toggleMobileMenu() {
           const mobileMenu = document.querySelector('.mobile-menu');
           const overlay = document.querySelector('.mobile-menu-overlay');
           const hamburger = document.querySelector('.hamburger');
           
           mobileMenu.classList.toggle('active');
           overlay.classList.toggle('active');
           hamburger.classList.toggle('active');
       }

       // Section navigation
       function showSection(sectionName) {
           // Hide all sections
           document.querySelectorAll('.section').forEach(section => {
               section.classList.remove('active');
           });
           
           // Show selected section
           document.getElementById(sectionName).classList.add('active');
           
           // Update navigation active state
           document.querySelectorAll('.nav-desktop button, .mobile-nav button').forEach(btn => {
               btn.classList.remove('active');
           });
           
           event.target.classList.add('active');
           
           // Update specific sections
           if (sectionName === 'dashboard') {
               updateDashboard();
           }
       }

       // Pig Management
       document.getElementById('pigForm').addEventListener('submit', function(e) {
           e.preventDefault();
           
           const pigData = {
               id: document.getElementById('pigId').value,
               group: document.getElementById('pigGroup').value,
               weight: parseFloat(document.getElementById('pigWeight').value) || 0,
               age: parseInt(document.getElementById('pigAge').value) || 0,
               gender: document.getElementById('pigGender').value,
               breed: document.getElementById('pigBreed').value,
               cost: parseFloat(document.getElementById('pigCost').value) || 2700,
               targetWeight: parseFloat(document.getElementById('pigTargetWeight').value) || 110,
               startWeight: parseFloat(document.getElementById('pigWeight').value) || 0,
               startDate: new Date().toISOString().split('T')[0],
               totalFeed: 0,
               status: 'active'
           };

           // Check if pig ID already exists
           if (appData.pigs.find(pig => pig.id === pigData.id)) {
               alert('‡∏£‡∏´‡∏±‡∏™‡∏™‡∏∏‡∏Å‡∏£‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏ä‡πâ‡∏£‡∏´‡∏±‡∏™‡∏≠‡∏∑‡πà‡∏ô');
               return;
           }

           appData.pigs.push(pigData);
           saveData();
           
           // Reset form
           this.reset();
           
           // Update displays
           updateDashboard();
           populateDropdowns();
           populateTables();
           
           alert('‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏∏‡∏Å‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß');
       });

       // Feeding Management
       document.getElementById('feedingForm').addEventListener('submit', function(e) {
           e.preventDefault();
           
           const feedingData = {
               pigId: document.getElementById('feedPigId').value,
               type: document.getElementById('feedType').value,
               amount: parseFloat(document.getElementById('feedAmount').value),
               date: document.getElementById('feedDate').value,
               notes: document.getElementById('feedNotes').value,
               cost: calculateFeedCost(document.getElementById('feedType').value, parseFloat(document.getElementById('feedAmount').value))
           };

           appData.feeding.push(feedingData);
           
           // Update pig's total feed consumption
           const pig = appData.pigs.find(p => p.id === feedingData.pigId);
           if (pig) {
               pig.totalFeed = (pig.totalFeed || 0) + feedingData.amount;
           }
           
           saveData();
           
           // Reset form
           this.reset();
           document.getElementById('feedDate').value = new Date().toISOString().split('T')[0];
           
           // Update displays
           updateDashboard();
           populateTables();
           
           alert('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß');
       });

       // Health Management
       document.getElementById('healthForm').addEventListener('submit', function(e) {
           e.preventDefault();
           
           const healthData = {
               pigId: document.getElementById('healthPigId').value,
               type: document.getElementById('healthType').value,
               vaccineType: document.getElementById('vaccineType').value,
               date: document.getElementById('healthDate').value,
               nextVaccineDate: document.getElementById('nextVaccineDate').value,
               cost: parseFloat(document.getElementById('healthCost').value) || 0,
               notes: document.getElementById('healthNotes').value
           };

           appData.health.push(healthData);
           
           // If it's a death record, update pig status
           if (healthData.type === '‡∏Å‡∏≤‡∏£‡∏ï‡∏≤‡∏¢') {
               const pig = appData.pigs.find(p => p.id === healthData.pigId);
               if (pig) {
                   pig.status = 'dead';
                   pig.deathDate = healthData.date;
               }
           }
           
           saveData();
           
           // Reset form
           this.reset();
           document.getElementById('healthDate').value = new Date().toISOString().split('T')[0];
           
           // Update displays
           updateDashboard();
           populateTables();
           
           alert('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß');
       });

       // Calculation functions
       function calculateFeedCost(feedType, amount) {
           const prices = {
               '‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏´‡∏°‡∏π‡πÄ‡∏•‡πá‡∏Å': 20,
               '‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏´‡∏°‡∏π‡∏£‡∏∏‡πà‡∏ô': 18,
               '‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏´‡∏°‡∏π‡∏Ç‡∏∏‡∏ô': 16
           };
           return (prices[feedType] || 18) * amount;
       }

       function calculateFCR(pig) {
           if (!pig.totalFeed || pig.weight <= pig.startWeight) return 0;
           return pig.totalFeed / (pig.weight - pig.startWeight);
       }

       function calculateADG(pig) {
           const today = new Date();
           const startDate = new Date(pig.startDate);
           const daysDiff = Math.ceil((today - startDate) / (1000 * 60 * 60 * 24));
           
           if (daysDiff <= 0 || pig.weight <= pig.startWeight) return 0;
           return ((pig.weight - pig.startWeight) * 1000) / daysDiff; // Convert to grams
       }

       function predictSaleDate(pig) {
           const adg = calculateADG(pig);
           if (adg <= 0) return null;
           
           const remainingWeight = pig.targetWeight - pig.weight;
           const daysToTarget = Math.ceil((remainingWeight * 1000) / adg);
           
           const saleDate = new Date();
           saleDate.setDate(saleDate.getDate() + daysToTarget);
           return saleDate;
       }

       // Update Dashboard
       function updateDashboard() {
           const activePigs = appData.pigs.filter(pig => pig.status === 'active');
           const deadPigs = appData.pigs.filter(pig => pig.status === 'dead');
           
           // Total pigs
           document.getElementById('totalPigs').textContent = activePigs.length;
           
           // Average FCR
           const fcrs = activePigs.map(pig => calculateFCR(pig)).filter(fcr => fcr > 0);
           const avgFCR = fcrs.length > 0 ? fcrs.reduce((a, b) => a + b, 0) / fcrs.length : 0;
           document.getElementById('avgFCR').textContent = avgFCR.toFixed(2);
           
           // FCR status
           const fcrStatus = document.getElementById('fcrChange');
           if (avgFCR > 0) {
               if (avgFCR <= appData.settings.fcrTarget) {
                   fcrStatus.textContent = '‚úÖ ‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢';
                   fcrStatus.style.color = 'var(--success)';
               } else {
                   fcrStatus.textContent = '‚ö†Ô∏è ‡∏™‡∏π‡∏á‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢';
                   fcrStatus.style.color = 'var(--warning)';
               }
           }
           
           // Average ADG
           const adgs = activePigs.map(pig => calculateADG(pig)).filter(adg => adg > 0);
           const avgADG = adgs.length > 0 ? adgs.reduce((a, b) => a + b, 0) / adgs.length : 0;
           document.getElementById('avgADG').textContent = Math.round(avgADG);
           
           // ADG status
           const adgStatus = document.getElementById('adgChange');
           if (avgADG > 0) {
               if (avgADG >= appData.settings.adgTarget) {
                   adgStatus.textContent = '‚úÖ ‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢';
                   adgStatus.style.color = 'var(--success)';
               } else {
                   adgStatus.textContent = '‚ö†Ô∏è ‡∏ï‡πà‡∏≥‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢';
                   adgStatus.style.color = 'var(--warning)';
               }
           }
           // Mortality rate
           const totalPigs = appData.pigs.length;
           const mortalityRate = totalPigs > 0 ? (deadPigs.length / totalPigs) * 100 : 0;
           document.getElementById('mortalityRate').textContent = mortalityRate.toFixed(1);
           
           // Update alerts
           updateAlerts();
           
           // Update feeding stats
           updateFeedingStats();
           
           // Update health stats
           updateHealthStats();
           
           // Update financial summary
           updateFinancialSummary();
       }

       // Update Alerts
       function updateAlerts() {
           const alertsContainer = document.getElementById('alertsContainer');
           alertsContainer.innerHTML = '';
           
           const alerts = [];
           
           // Check pigs ready for sale
           const readyForSale = appData.pigs.filter(pig => 
               pig.status === 'active' && pig.weight >= pig.targetWeight
           );
           if (readyForSale.length > 0) {
               alerts.push({
                   type: 'success',
                   message: `‡∏°‡∏µ‡∏™‡∏∏‡∏Å‡∏£ ${readyForSale.length} ‡∏ï‡∏±‡∏ß ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Ç‡∏≤‡∏¢ (‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏ñ‡∏∂‡∏á‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß)`
               });
           }
           
           // Check FCR performance
           const activePigs = appData.pigs.filter(pig => pig.status === 'active');
           const poorFCRPigs = activePigs.filter(pig => {
               const fcr = calculateFCR(pig);
               return fcr > 0 && fcr > appData.settings.fcrTarget * 1.1;
           });
           if (poorFCRPigs.length > 0) {
               alerts.push({
                   type: 'warning',
                   message: `‡∏°‡∏µ‡∏™‡∏∏‡∏Å‡∏£ ${poorFCRPigs.length} ‡∏ï‡∏±‡∏ß ‡∏°‡∏µ FCR ‡∏™‡∏π‡∏á‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ 10%`
               });
           }
           
           // Check vaccines due
           const today = new Date().toISOString().split('T')[0];
           const vaccinesDue = appData.health.filter(record => 
               record.nextVaccineDate === today && record.type === '‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô'
           );
           if (vaccinesDue.length > 0) {
               alerts.push({
                   type: 'warning',
                   message: `‡∏°‡∏µ‡∏™‡∏∏‡∏Å‡∏£ ${vaccinesDue.length} ‡∏ï‡∏±‡∏ß ‡∏Ñ‡∏£‡∏ö‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ`
               });
           }
           
           // Check feed stock (simulate low stock)
           const totalFeedUsed = appData.feeding.reduce((sum, record) => sum + record.amount, 0);
           const avgDailyFeed = totalFeedUsed / Math.max(1, appData.feeding.length);
           if (avgDailyFeed > 0) {
               const estimatedStock = 1000; // Simulated stock
               const daysRemaining = estimatedStock / avgDailyFeed;
               if (daysRemaining < 7) {
                   alerts.push({
                       type: 'error',
                       message: `‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠ ${Math.round(daysRemaining)} ‡∏ß‡∏±‡∏ô ‡∏Ñ‡∏ß‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°`
                   });
               }
           }
           
           // Display alerts
           if (alerts.length === 0) {
               alertsContainer.innerHTML = '<div class="alert success">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô ‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏õ‡∏Å‡∏ï‡∏¥‡∏î‡∏µ</div>';
           } else {
               alerts.forEach(alert => {
                   const alertDiv = document.createElement('div');
                   alertDiv.className = `alert ${alert.type}`;
                   alertDiv.innerHTML = `
                       <span class="performance-indicator ${alert.type === 'success' ? 'good' : alert.type === 'warning' ? 'warning' : 'poor'}"></span>
                       ${alert.message}
                   `;
                   alertsContainer.appendChild(alertDiv);
               });
           }
       }

       // Update Feeding Stats
       function updateFeedingStats() {
           const today = new Date().toISOString().split('T')[0];
           const todayFeeding = appData.feeding.filter(record => record.date === today);
           
           const todayFeed = todayFeeding.reduce((sum, record) => sum + record.amount, 0);
           const todayFeedCost = todayFeeding.reduce((sum, record) => sum + record.cost, 0);
           
           document.getElementById('todayFeed').textContent = todayFeed.toFixed(1);
           document.getElementById('todayFeedCost').textContent = todayFeedCost.toFixed(2);
           
           // Simulate feed stock
           const totalFeedUsed = appData.feeding.reduce((sum, record) => sum + record.amount, 0);
           const avgDailyFeed = totalFeedUsed / Math.max(1, appData.feeding.length);
           const estimatedStock = Math.max(0, 1000 - totalFeedUsed);
           const daysRemaining = avgDailyFeed > 0 ? estimatedStock / avgDailyFeed : 0;
           
           document.getElementById('feedStock').textContent = estimatedStock.toFixed(0);
           document.getElementById('daysRemaining').textContent = Math.round(daysRemaining);
           
           // Latest FCR
           const activePigs = appData.pigs.filter(pig => pig.status === 'active');
           const fcrs = activePigs.map(pig => calculateFCR(pig)).filter(fcr => fcr > 0);
           const latestFCR = fcrs.length > 0 ? fcrs.reduce((a, b) => a + b, 0) / fcrs.length : 0;
           
           document.getElementById('latestFCR').textContent = latestFCR.toFixed(2);
           
           const fcrStatusEl = document.getElementById('fcrStatus');
           if (latestFCR > 0) {
               if (latestFCR <= appData.settings.fcrTarget) {
                   fcrStatusEl.textContent = '‚úÖ ‡∏î‡∏µ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°';
                   fcrStatusEl.style.color = 'var(--success)';
               } else if (latestFCR <= appData.settings.fcrTarget * 1.1) {
                   fcrStatusEl.textContent = '‚ö†Ô∏è ‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á';
                   fcrStatusEl.style.color = 'var(--warning)';
               } else {
                   fcrStatusEl.textContent = '‚ùå ‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á';
                   fcrStatusEl.style.color = 'var(--error)';
               }
           }
           
           // Total feed cost this month
           const currentMonth = new Date().toISOString().slice(0, 7);
           const monthlyFeeding = appData.feeding.filter(record => record.date.startsWith(currentMonth));
           const monthlyFeedCost = monthlyFeeding.reduce((sum, record) => sum + record.cost, 0);
           
           document.getElementById('totalFeedCost').textContent = monthlyFeedCost.toFixed(2);
       }

       // Update Health Stats
       function updateHealthStats() {
           const today = new Date().toISOString().split('T')[0];
           const nextWeek = new Date();
           nextWeek.setDate(nextWeek.getDate() + 7);
           const nextWeekDate = nextWeek.toISOString().split('T')[0];
           
           // Vaccines due today
           const vaccinesToday = appData.health.filter(record => 
               record.nextVaccineDate === today && record.type === '‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô'
           );
           document.getElementById('vaccineDueToday').textContent = vaccinesToday.length;
           
           // Vaccines due within 7 days
           const vaccinesWeek = appData.health.filter(record => 
               record.nextVaccineDate >= today && 
               record.nextVaccineDate <= nextWeekDate && 
               record.type === '‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô'
           );
           document.getElementById('vaccineDueWeek').textContent = vaccinesWeek.length;
           
           // Monthly mortality rate
           const currentMonth = new Date().toISOString().slice(0, 7);
           const monthlyDeaths = appData.health.filter(record => 
               record.date.startsWith(currentMonth) && record.type === '‡∏Å‡∏≤‡∏£‡∏ï‡∏≤‡∏¢'
           );
           const activePigs = appData.pigs.filter(pig => pig.status === 'active');
           const totalPigs = activePigs.length + monthlyDeaths.length;
           const monthlyMortality = totalPigs > 0 ? (monthlyDeaths.length / totalPigs) * 100 : 0;
           
           document.getElementById('monthlyMortality').textContent = monthlyMortality.toFixed(1);
           
           // Monthly health cost
           const monthlyHealthRecords = appData.health.filter(record => 
               record.date.startsWith(currentMonth)
           );
           const monthlyHealthCost = monthlyHealthRecords.reduce((sum, record) => sum + (record.cost || 0), 0);
           
           document.getElementById('monthlyHealthCost').textContent = monthlyHealthCost.toFixed(2);
       }

       // Update Financial Summary
       function updateFinancialSummary() {
           // Calculate revenue (simulated from sold pigs)
           const soldPigs = appData.pigs.filter(pig => pig.status === 'sold');
           const avgSalePrice = 65; // 65 baht per kg
           const totalRevenue = soldPigs.reduce((sum, pig) => sum + (pig.weight * avgSalePrice), 0);
           
           // Calculate costs
           const feedCosts = appData.feeding.reduce((sum, record) => sum + record.cost, 0);
           const healthCosts = appData.health.reduce((sum, record) => sum + (record.cost || 0), 0);
           const pigCosts = appData.pigs.reduce((sum, pig) => sum + pig.cost, 0);
           const totalCosts = feedCosts + healthCosts + pigCosts;
           
           // Calculate profit and ROI
           const netProfit = totalRevenue - totalCosts;
           const roi = totalCosts > 0 ? (netProfit / totalCosts) * 100 : 0;
           
           document.getElementById('totalRevenue').textContent = totalRevenue.toLocaleString();
           document.getElementById('totalCosts').textContent = totalCosts.toLocaleString();
           document.getElementById('netProfit').textContent = netProfit.toLocaleString();
           document.getElementById('roi').textContent = roi.toFixed(1);
       }

       // Populate dropdowns
       function populateDropdowns() {
           const pigSelects = [
               document.getElementById('feedPigId'),
               document.getElementById('healthPigId')
           ];
           
           pigSelects.forEach(select => {
               if (!select) return;
               
               // Clear existing options except first
               while (select.children.length > 1) {
                   select.removeChild(select.lastChild);
               }
               
               // Add active pigs
               const activePigs = appData.pigs.filter(pig => pig.status === 'active');
               activePigs.forEach(pig => {
                   const option = document.createElement('option');
                   option.value = pig.id;
                   option.textContent = `${pig.id} (${pig.group}, ${pig.weight}kg)`;
                   select.appendChild(option);
               });
               
               // Add groups for feeding
               if (select.id === 'feedPigId') {
                   const groups = [...new Set(activePigs.map(pig => pig.group))];
                   groups.forEach(group => {
                       const option = document.createElement('option');
                       option.value = `group:${group}`;
                       option.textContent = `‡∏Å‡∏•‡∏∏‡πà‡∏°: ${group}`;
                       select.appendChild(option);
                   });
               }
           });
       }

       // Populate tables
       function populateTables() {
           populatePigsTable();
           populateFeedingTable();
           populateHealthTable();
       }

       function populatePigsTable() {
           const tbody = document.getElementById('pigsTableBody');
           tbody.innerHTML = '';
           
           appData.pigs.forEach(pig => {
               const fcr = calculateFCR(pig);
               const adg = calculateADG(pig);
               
               const row = document.createElement('tr');
               row.innerHTML = `
                   <td>${pig.id}</td>
                   <td>${pig.group}</td>
                   <td>${pig.weight}</td>
                   <td>${pig.age}</td>
                   <td>${fcr > 0 ? fcr.toFixed(2) : '-'}</td>
                   <td>${adg > 0 ? Math.round(adg) : '-'}</td>
                   <td>
                       <span class="performance-indicator ${pig.status === 'active' ? 'good' : pig.status === 'dead' ? 'poor' : 'warning'}"></span>
                       ${pig.status === 'active' ? '‡∏õ‡∏Å‡∏ï‡∏¥' : pig.status === 'dead' ? '‡∏ï‡∏≤‡∏¢' : '‡∏Ç‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß'}
                   </td>
                   <td>
                       <button onclick="editPig('${pig.id}')" class="btn btn-secondary" style="padding: 0.25rem 0.5rem; margin-right: 0.25rem;">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                       <button onclick="deletePig('${pig.id}')" class="btn" style="padding: 0.25rem 0.5rem; background: var(--error); color: white;">‡∏•‡∏ö</button>
                   </td>
               `;
               tbody.appendChild(row);
           });
       }

       function populateFeedingTable() {
           const tbody = document.getElementById('feedingTableBody');
           tbody.innerHTML = '';
           
           // Sort by date descending
           const sortedFeeding = [...appData.feeding].sort((a, b) => new Date(b.date) - new Date(a.date));
           
           sortedFeeding.slice(0, 50).forEach(record => { // Show last 50 records
               const row = document.createElement('tr');
               row.innerHTML = `
                   <td>${new Date(record.date).toLocaleDateString('th-TH')}</td>
                   <td>${record.pigId}</td>
                   <td>${record.type}</td>
                   <td>${record.amount}</td>
                   <td>${record.cost.toFixed(2)}</td>
                   <td>${record.notes || '-'}</td>
               `;
               tbody.appendChild(row);
           });
       }

       function populateHealthTable() {
           const tbody = document.getElementById('healthTableBody');
           tbody.innerHTML = '';
           
           // Sort by date descending
           const sortedHealth = [...appData.health].sort((a, b) => new Date(b.date) - new Date(a.date));
           
           sortedHealth.slice(0, 50).forEach(record => { // Show last 50 records
               const nextVaccine = record.nextVaccineDate ? new Date(record.nextVaccineDate).toLocaleDateString('th-TH') : '-';
               const isOverdue = record.nextVaccineDate && new Date(record.nextVaccineDate) < new Date();
               
               const row = document.createElement('tr');
               row.innerHTML = `
                   <td>${new Date(record.date).toLocaleDateString('th-TH')}</td>
                   <td>${record.pigId}</td>
                   <td>${record.type}</td>
                   <td>${record.vaccineType}</td>
                   <td style="color: ${isOverdue ? 'var(--error)' : 'inherit'}">${nextVaccine}</td>
                   <td>${record.cost ? record.cost.toFixed(2) : '-'}</td>
                   <td>
                       <span class="performance-indicator ${record.type === '‡∏Å‡∏≤‡∏£‡∏ï‡∏≤‡∏¢' ? 'poor' : isOverdue ? 'warning' : 'good'}"></span>
                       ${record.type === '‡∏Å‡∏≤‡∏£‡∏ï‡∏≤‡∏¢' ? '‡πÄ‡∏™‡∏µ‡∏¢‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï' : isOverdue ? '‡πÄ‡∏Å‡∏¥‡∏ô‡∏Å‡∏≥‡∏´‡∏ô‡∏î' : '‡∏õ‡∏Å‡∏ï‡∏¥'}
                   </td>
               `;
               tbody.appendChild(row);
           });
       }

       // CRUD Operations
       function editPig(pigId) {
           const pig = appData.pigs.find(p => p.id === pigId);
           if (!pig) return;
           
           // Populate form with pig data
           document.getElementById('pigId').value = pig.id;
           document.getElementById('pigGroup').value = pig.group;
           document.getElementById('pigWeight').value = pig.weight;
           document.getElementById('pigAge').value = pig.age;
           document.getElementById('pigGender').value = pig.gender;
           document.getElementById('pigBreed').value = pig.breed;
           document.getElementById('pigCost').value = pig.cost;
           document.getElementById('pigTargetWeight').value = pig.targetWeight;
           
           // Show pigs section
           showSection('pigs');
           
           // Scroll to form
           document.getElementById('pigForm').scrollIntoView({ behavior: 'smooth' });
       }

       function deletePig(pigId) {
           if (!confirm('‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏∏‡∏Å‡∏£‡∏ô‡∏µ‡πâ?')) return;
           
           appData.pigs = appData.pigs.filter(p => p.id !== pigId);
           appData.feeding = appData.feeding.filter(f => f.pigId !== pigId);
           appData.health = appData.health.filter(h => h.pigId !== pigId);
           
           saveData();
           updateDashboard();
           populateDropdowns();
           populateTables();
           
           alert('‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏∏‡∏Å‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß');
       }

       // Report Generation
       function generateReport() {
           const reportType = document.getElementById('reportType').value;
           const reportPeriod = document.getElementById('reportPeriod').value;
           const startDate = document.getElementById('reportStartDate').value;
           const endDate = document.getElementById('reportEndDate').value;
           
           let dateFilter = () => true;
           
           if (reportPeriod !== 'custom') {
               const today = new Date();
               let filterStartDate;
               
               switch (reportPeriod) {
                   case 'today':
                       filterStartDate = today.toISOString().split('T')[0];
                       dateFilter = (date) => date === filterStartDate;
                       break;
                   case 'week':
                       filterStartDate = new Date(today.setDate(today.getDate() - 7)).toISOString().split('T')[0];
                       dateFilter = (date) => date >= filterStartDate;
                       break;
                   case 'month':
                       filterStartDate = today.toISOString().slice(0, 7);
                       dateFilter = (date) => date.startsWith(filterStartDate);
                       break;
                   case 'quarter':
                       const quarterStart = new Date(today.getFullYear(), Math.floor(today.getMonth() / 3) * 3, 1);
                       filterStartDate = quarterStart.toISOString().split('T')[0];
                       dateFilter = (date) => date >= filterStartDate;
                       break;
                   case 'year':
                       filterStartDate = today.getFullYear().toString();
                       dateFilter = (date) => date.startsWith(filterStartDate);
                       break;
               }
           } else if (startDate && endDate) {
               dateFilter = (date) => date >= startDate && date <= endDate;
           }
           
           let reportContent = '';
           
           switch (reportType) {
               case 'performance':
                   reportContent = generatePerformanceReport(dateFilter);
                   break;
               case 'financial':
                   reportContent = generateFinancialReport(dateFilter);
                   break;
               case 'health':
                   reportContent = generateHealthReport(dateFilter);
                   break;
               case 'feeding':
                   reportContent = generateFeedingReport(dateFilter);
                   break;
               case 'growth':
                   reportContent = generateGrowthReport(dateFilter);
                   break;
           }
           
           document.getElementById('reportContent').innerHTML = reportContent;
           document.getElementById('reportResults').style.display = 'block';
           document.getElementById('reportResults').scrollIntoView({ behavior: 'smooth' });
       }

       function generatePerformanceReport(dateFilter) {
           const activePigs = appData.pigs.filter(pig => pig.status === 'active');
           const fcrs = activePigs.map(pig => calculateFCR(pig)).filter(fcr => fcr > 0);
           const adgs = activePigs.map(pig => calculateADG(pig)).filter(adg => adg > 0);
           
           const avgFCR = fcrs.length > 0 ? fcrs.reduce((a, b) => a + b, 0) / fcrs.length : 0;
           const avgADG = adgs.length > 0 ? adgs.reduce((a, b) => a + b, 0) / adgs.length : 0;
           
           const deadPigs = appData.pigs.filter(pig => pig.status === 'dead');
           const mortalityRate = appData.pigs.length > 0 ? (deadPigs.length / appData.pigs.length) * 100 : 0;
           
           return `
               <h4>‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏Å‡∏≤‡∏£‡∏ú‡∏•‡∏¥‡∏ï</h4>
               <div class="stats-grid">
                   <div class="stat-card">
                       <h3>FCR ‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢</h3>
                       <div class="value">${avgFCR.toFixed(2)}</div>
                       <div class="change">‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: ${appData.settings.fcrTarget}</div>
                   </div>
                   <div class="stat-card">
                       <h3>ADG ‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢ (‡∏Å‡∏£‡∏±‡∏°/‡∏ß‡∏±‡∏ô)</h3>
                       <div class="value">${Math.round(avgADG)}</div>
                       <div class="change">‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: ${appData.settings.adgTarget}</div>
                   </div>
                   <div class="stat-card">
                       <h3>‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏Å‡∏≤‡∏£‡∏ï‡∏≤‡∏¢ (%)</h3>
                       <div class="value">${mortalityRate.toFixed(1)}</div>
                       <div class="change">‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: < ${appData.settings.mortalityTarget}</div>
                   </div>
                   <div class="stat-card">
                       <h3>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏∏‡∏Å‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h3>
                       <div class="value">${appData.pigs.length}</div>
                       <div class="change">‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô: ${activePigs.length}</div>
                   </div>
               </div>
               <h5 style="margin-top: 2rem;">‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå</h5>
               <p><strong>‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û FCR:</strong> ${avgFCR <= appData.settings.fcrTarget ? '‡∏î‡∏µ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°' : '‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á'}</p>
               <p><strong>‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û ADG:</strong> ${avgADG >= appData.settings.adgTarget ? '‡∏î‡∏µ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°' : '‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á'}</p>
               <p><strong>‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û:</strong> ${mortalityRate <= appData.settings.mortalityTarget ? '‡∏î‡∏µ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°' : '‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á'}</p>
           `;
       }

       function generateFinancialReport(dateFilter) {
           const feedCosts = appData.feeding.filter(record => dateFilter(record.date))
               .reduce((sum, record) => sum + record.cost, 0);
           const healthCosts = appData.health.filter(record => dateFilter(record.date))
               .reduce((sum, record) => sum + (record.cost || 0), 0);
           
           // Simulate revenue from sold pigs
           const soldPigs = appData.pigs.filter(pig => pig.status === 'sold');
           const avgSalePrice = 65; // 65 baht per kg
           const revenue = soldPigs.reduce((sum, pig) => sum + (pig.weight * avgSalePrice), 0);
           
           const totalCosts = feedCosts + healthCosts;
           const netProfit = revenue - totalCosts;
           const roi = totalCosts > 0 ? (netProfit / totalCosts) * 100 : 0;
           
           return `
               <h4>‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô</h4>
               <div class="stats-grid">
                   <div class="stat-card">
                       <h3>‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ</h3>
                       <div class="value">${revenue.toLocaleString()}</div>
                       <div class="change">‡∏ö‡∏≤‡∏ó</div>
                   </div>
                   <div class="stat-card">
                       <h3>‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£</h3>
                       <div class="value">${feedCosts.toLocaleString()}</div>
                       <div class="change">‡∏ö‡∏≤‡∏ó</div>
                   </div>
                   <div class="stat-card">
                       <h3>‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û</h3>
                       <div class="value">${healthCosts.toLocaleString()}</div>
                       <div class="change">‡∏ö‡∏≤‡∏ó</div>
                   </div>
                   <div class="stat-card">
                       <h3>‡∏Å‡∏≥‡πÑ‡∏£‡∏™‡∏∏‡∏ó‡∏ò‡∏¥</h3>
                       <div class="value" style="color: ${netProfit >= 0 ? 'var(--success)' : 'var(--error)'}">${netProfit.toLocaleString()}</div>
                       <div class="change">ROI: ${roi.toFixed(1)}%</div>
                   </div>
               </div>
               <h5 style="margin-top: 2rem;">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô</h5>
               <p><strong>‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£:</strong> ${totalCosts > 0 ? ((feedCosts / totalCosts) * 100).toFixed(1) : 0}%</p>
               <p><strong>‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û:</strong> ${totalCosts > 0 ? ((healthCosts / totalCosts) * 100).toFixed(1) : 0}%</p>
               <p><strong>‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏ï‡πà‡∏≠‡∏Å‡∏¥‡πÇ‡∏•‡∏Å‡∏£‡∏±‡∏°:</strong> ${appData.pigs.length > 0 ? (totalCosts / appData.pigs.reduce((sum, pig) => sum + pig.weight, 0)).toFixed(2) : 0} ‡∏ö‡∏≤‡∏ó/‡∏Å‡∏Å.</p>
           `;
       }

       function generateHealthReport(dateFilter) {
           const healthRecords = appData.health.filter(record => dateFilter(record.date));
           const vaccineRecords = healthRecords.filter(record => record.type === '‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô');
           const treatmentRecords = healthRecords.filter(record => record.type === '‡∏£‡∏±‡∏Å‡∏©‡∏≤‡πÇ‡∏£‡∏Ñ');
           const deathRecords = healthRecords.filter(record => record.type === '‡∏Å‡∏≤‡∏£‡∏ï‡∏≤‡∏¢');
           
           const totalHealthCost = healthRecords.reduce((sum, record) => sum + (record.cost || 0), 0);
           
           return `
               <h4>‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û</h4>
               <div class="stats-grid">
                   <div class="stat-card">
                       <h3>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô</h3>
                       <div class="value">${vaccineRecords.length}</div>
                       <div class="change">‡∏Ñ‡∏£‡∏±‡πâ‡∏á</div>
                   </div>
                   <div class="stat-card">
                       <h3>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤</h3>
                       <div class="value">${treatmentRecords.length}</div>
                       <div class="change">‡∏Ñ‡∏£‡∏±‡πâ‡∏á</div>
                   </div>
                   <div class="stat-card">
                       <h3>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏≤‡∏¢</h3>
                       <div class="value">${deathRecords.length}</div>
                       <div class="change">‡∏ï‡∏±‡∏ß</div>
                   </div>
                   <div class="stat-card">
                       <h3>‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏£‡∏ß‡∏°</h3>
                       <div class="value">${totalHealthCost.toLocaleString()}</div>
                       <div class="change">‡∏ö‡∏≤‡∏ó</div>
                   </div>
               </div>
               <h5 style="margin-top: 2rem;">‡∏™‡∏£‡∏∏‡∏õ‡∏Å‡∏≤‡∏£‡∏î‡∏π‡πÅ‡∏•‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û</h5>
               <p><strong>‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô:</strong> ${appData.pigs.length > 0 ? ((vaccineRecords.length / appData.pigs.length) * 100).toFixed(1) : 0}%</p>
               <p><strong>‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏à‡πá‡∏ö‡∏õ‡πà‡∏ß‡∏¢:</strong> ${appData.pigs.length > 0 ? ((treatmentRecords.length / appData.pigs.length) * 100).toFixed(1) : 0}%</p>
               <p><strong>‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏ï‡πà‡∏≠‡∏ï‡∏±‡∏ß:</strong> ${appData.pigs.length > 0 ? (totalHealthCost / appData.pigs.length).toFixed(2) : 0} ‡∏ö‡∏≤‡∏ó</p>
           `;
       }

       function generateFeedingReport(dateFilter) {
           const feedingRecords = appData.feeding.filter(record => dateFilter(record.date));
           const totalFeed = feedingRecords.reduce((sum, record) => sum + record.amount, 0);
           const totalFeedCost = feedingRecords.reduce((sum, record) => sum + record.cost, 0);
           const avgFeedCost = totalFeed > 0 ? totalFeedCost / totalFeed : 0;
           
           // Group by feed type
           const feedByType = {};
           feedingRecords.forEach(record => {
               if (!feedByType[record.type]) {
                   feedByType[record.type] = { amount: 0, cost: 0 };
               }
               feedByType[record.type].amount += record.amount;
               feedByType[record.type].cost += record.cost;
           });
           
           return `
               <h4>‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£</h4>
               <div class="stats-grid">
                   <div class="stat-card">
                       <h3>‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏£‡∏ß‡∏°</h3>
                       <div class="value">${totalFeed.toLocaleString()}</div>
                       <div class="change">‡∏Å‡∏¥‡πÇ‡∏•‡∏Å‡∏£‡∏±‡∏°</div>
                   </div>
                   <div class="stat-card">
                       <h3>‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£</h3>
                       <div class="value">${totalFeedCost.toLocaleString()}</div>
                       <div class="change">‡∏ö‡∏≤‡∏ó</div>
                   </div>
                   <div class="stat-card">
                       <h3>‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢</h3>
                       <div class="value">${avgFeedCost.toFixed(2)}</div>
                       <div class="change">‡∏ö‡∏≤‡∏ó/‡∏Å‡∏Å.</div>
                   </div>
                   <div class="stat-card">
                       <h3>‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô</h3>
                       <div class="value">${feedingRecords.length > 0 ? (totalFeed / feedingRecords.length).toFixed(1) : 0}</div>
                       <div class="change">‡∏Å‡∏Å./‡∏ß‡∏±‡∏ô</div>
                   </div>
               </div>
               <h5 style="margin-top: 2rem;">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏ï‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏≠‡∏≤‡∏´‡∏≤‡∏£</h5>
               ${Object.entries(feedByType).map(([type, data]) => `
                   <p><strong>${type}:</strong> ${data.amount.toFixed(1)} ‡∏Å‡∏Å. (${data.cost.toFixed(2)} ‡∏ö‡∏≤‡∏ó)</p>
               `).join('')}
           `;
       }

       function generateGrowthReport(dateFilter) {
           const activePigs = appData.pigs.filter(pig => pig.status === 'active');
           const readyForSale = activePigs.filter(pig => pig.weight >= pig.targetWeight);
           
           // Calculate average weights by group
           const weightsByGroup = {};
           activePigs.forEach(pig => {
               if (!weightsByGroup[pig.group]) {
                   weightsByGroup[pig.group] = [];
               }
               weightsByGroup[pig.group].push(pig.weight);
           });
           
           const avgWeightsByGroup = {};
           Object.entries(weightsByGroup).forEach(([group, weights]) => {
               avgWeightsByGroup[group] = weights.reduce((a, b) => a + b, 0) / weights.length;
           });
           
           return `
               <h4>‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏à‡∏£‡∏¥‡∏ç‡πÄ‡∏ï‡∏¥‡∏ö‡πÇ‡∏ï</h4>
               <div class="stats-grid">
                   <div class="stat-card">
                       <h3>‡∏™‡∏∏‡∏Å‡∏£‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Ç‡∏≤‡∏¢</h3>
                       <div class="value">${readyForSale.length}</div>
                       <div class="change">‡∏ï‡∏±‡∏ß</div>
                   </div>
                   <div class="stat-card">
                       <h3>‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢</h3>
                       <div class="value">${activePigs.length > 0 ? (activePigs.reduce((sum, pig) => sum + pig.weight, 0) / activePigs.length).toFixed(1) : 0}</div>
                       <div class="change">‡∏Å‡∏¥‡πÇ‡∏•‡∏Å‡∏£‡∏±‡∏°</div>
                   </div>
                   <div class="stat-card">
                       <h3>ADG ‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢</h3>
                       <div class="value">${activePigs.length > 0 ? Math.round(activePigs.map(pig => calculateADG(pig)).filter(adg => adg > 0).reduce((a, b) => a + b, 0) / activePigs.filter(pig => calculateADG(pig) > 0).length || 0) : 0}</div>
                       <div class="change">‡∏Å‡∏£‡∏±‡∏°/‡∏ß‡∏±‡∏ô</div>
                   </div>
                   <div class="stat-card">
                       <h3>‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Ç‡∏≤‡∏¢</h3>
                       <div class="value">${activePigs.length > 0 ? ((readyForSale.length / activePigs.length) * 100).toFixed(1) : 0}</div>
                       <div class="change">%</div>
                   </div>
               </div>
               <h5 style="margin-top: 2rem;">‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏ï‡∏≤‡∏°‡∏Å‡∏•‡∏∏‡πà‡∏°</h5>
               ${Object.entries(avgWeightsByGroup).map(([group, avgWeight]) => `
                   <p><strong>‡∏Å‡∏•‡∏∏‡πà‡∏°${group}:</strong> ${avgWeight.toFixed(1)} ‡∏Å‡∏¥‡πÇ‡∏•‡∏Å‡∏£‡∏±‡∏°</p>
               `).join('')}
           `;
       }

       function exportReport() {
           const reportContent = document.getElementById('reportContent').innerHTML;
           const reportType = document.getElementById('reportType').value;
           
           // Create a new window for printing
           const printWindow = window.open('', '_blank');
           printWindow.document.write(`
               <!DOCTYPE html>
               <html>
               <head>
                   <title>‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ü‡∏≤‡∏£‡πå‡∏°‡∏™‡∏∏‡∏Å‡∏£</title>
                   <meta charset="UTF-8">
                   <style>
                       body { font-family: 'Niramit', sans-serif; margin: 20px; }
                       .stats-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; margin: 1rem 0; }
                       .stat-card { border: 1px solid #e5e7eb; padding: 1rem; border-radius: 8px; }
                       .value { font-size: 1.5rem; font-weight: bold; color: #059669; }
                       h4 { color: #1e293b; border-bottom: 2px solid #059669; padding-bottom: 0.5rem; }
                       @media print { .stats-grid { grid-template-columns: repeat(4, 1fr); } }
                   </style>
               </head>
               <body>
                   <h2>‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ü‡∏≤‡∏£‡πå‡∏°‡∏™‡∏∏‡∏Å‡∏£‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞</h2>
                   <p>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô: ${new Date().toLocaleDateString('th-TH')}</p>
                   ${reportContent}
               </body>
               </html>
           `);
           printWindow.document.close();
           printWindow.print();
       }

       // PWA Functions
       let deferredPrompt;

       window.addEventListener('beforeinstallprompt', (e) => {
           e.preventDefault();
           deferredPrompt = e;
           document.getElementById('installPrompt').classList.add('show');
       });

       function installPWA() {
           if (deferredPrompt) {
               deferredPrompt.prompt();
               deferredPrompt.userChoice.then((choiceResult) => {
                   if (choiceResult.outcome === 'accepted') {
                       console.log('User accepted the install prompt');
                   }
                   deferredPrompt = null;
                   dismissInstall();
               });
           }
       }

       function dismissInstall() {
           document.getElementById('installPrompt').classList.remove('show');
       }

       // Service Worker Registration
       if ('serviceWorker' in navigator) {
           navigator.serviceWorker.register('data:application/javascript;base64,' + btoa(`
               const CACHE_NAME = 'pig-farm-v1';
               const urlsToCache = [
                   '/',
                   '/manifest.json'
               ];

               self.addEventListener('install', function(event) {
                   event.waitUntil(
                       caches.open(CACHE_NAME)
                           .then(function(cache) {
                               return cache.addAll(urlsToCache);
                           })
                   );
               });

               self.addEventListener('fetch', function(event) {
                   event.respondWith(
                       caches.match(event.request)
                           .then(function(response) {
                               if (response) {
                                   return response;
                               }
                               return fetch(event.request);
                           }
                       )
                   );
               });
           `)).then(function(registration) {
               console.log('ServiceWorker registration successful');
           }).catch(function(err) {
               console.log('ServiceWorker registration failed: ', err);
           });
       }

       // Initialize app
       document.addEventListener('DOMContentLoaded', function() {
           // Set default dates
           const today = new Date().toISOString().split('T')[0];
           document.getElementById('feedDate').value = today;
           document.getElementById('healthDate').value = today;
           document.getElementById('reportStartDate').value = today;
           document.getElementById('reportEndDate').value = today;
           
           // Load saved data
           loadData();
           
           // Show dashboard by default
           showSection('dashboard');
           
           // Update data every minute
           setInterval(updateDashboard, 60000);
           
           console.log('‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ü‡∏≤‡∏£‡πå‡∏°‡∏™‡∏∏‡∏Å‡∏£‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß');
       });

       // Demo data for testing
       function loadDemoData() {
           const demoData = {
               pigs: [
                   {
                       id: 'P001',
                       group: '‡∏Ç‡∏∏‡∏ô',
                       weight: 95.5,
                       age: 150,
                       gender: '‡∏ú‡∏π‡πâ',
                       breed: '‡∏•‡∏≤‡∏£‡πå‡∏à‡πÑ‡∏ß‡∏ó‡πå',
                       cost: 2700,
                       targetWeight: 110,
                       startWeight: 25,
                       startDate: '2025-01-01',
                       totalFeed: 180,
                       status: 'active'
                   },
                   {
                       id: 'P002',
                       group: '‡∏Ç‡∏∏‡∏ô',
                       weight: 102.3,
                       age: 160,
                       gender: '‡πÄ‡∏°‡∏µ‡∏¢',
                       breed: '‡πÅ‡∏•‡∏ô‡∏î‡πå‡πÄ‡∏£‡∏ã',
                       cost: 2700,
                       targetWeight: 110,
                       startWeight: 25,
                       startDate: '2024-12-25',
                       totalFeed: 190,
                       status: 'active'
                   },
                   {
                       id: 'P003',
                       group: '‡∏£‡∏∏‡πà‡∏ô',
                       weight: 45.2,
                       age: 90,
                       gender: '‡∏ú‡∏π‡πâ',
                       breed: '‡∏•‡∏≤‡∏£‡πå‡∏à‡πÑ‡∏ß‡∏ó‡πå',
                       cost: 2700,
                       targetWeight: 110,
                       startWeight: 15,
                       startDate: '2025-03-01',
                       totalFeed: 85,
                       status: 'active'
                   }
               ],
               feeding: [
                   {
                       pigId: 'P001',
                       type: '‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏´‡∏°‡∏π‡∏Ç‡∏∏‡∏ô',
                       amount: 3.5,
                       date: '2025-06-06',
                       notes: '‡πÉ‡∏´‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏õ‡∏Å‡∏ï‡∏¥',
                       cost: 56
                   },
                   {
                       pigId: 'P002',
                       type: '‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏´‡∏°‡∏π‡∏Ç‡∏∏‡∏ô',
                       amount: 3.8,
                       date: '2025-06-06',
                       notes: '‡πÉ‡∏´‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏õ‡∏Å‡∏ï‡∏¥',
                       cost: 60.8
                   },
                   {
                       pigId: 'P003',
                       type: '‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏´‡∏°‡∏π‡∏£‡∏∏‡πà‡∏ô',
                       amount: 2.5,
                       date: '2025-06-06',
                       notes: '‡πÉ‡∏´‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏õ‡∏Å‡∏ï‡∏¥',
                       cost: 45
                   }
               ],
               health: [
                   {
                       pigId: 'P001',
                       type: '‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô',
                       vaccineType: '‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÇ‡∏£‡∏Ñ‡∏õ‡∏≤‡∏Å‡πÅ‡∏•‡∏∞‡πÄ‡∏ó‡πâ‡∏≤‡πÄ‡∏õ‡∏∑‡πà‡∏≠‡∏¢',
                       date: '2025-05-15',
                       nextVaccineDate: '2025-08-15',
                       cost: 150,
                       notes: '‡∏â‡∏µ‡∏î‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÇ‡∏£‡∏Ñ‡∏õ‡∏≤‡∏Å‡πÅ‡∏•‡∏∞‡πÄ‡∏ó‡πâ‡∏≤‡πÄ‡∏õ‡∏∑‡πà‡∏≠‡∏¢‡∏ï‡∏≤‡∏°‡∏Å‡∏≥‡∏´‡∏ô‡∏î'
                   },
                   {
                       pigId: 'P002',
                       type: '‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û',
                       vaccineType: '‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ',
                       date: '2025-06-01',
                       nextVaccineDate: '',
                       cost: 50,
                       notes: '‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏£‡∏á‡∏î‡∏µ'
                   }
               ],
               settings: {
                   fcrTarget: 2.35,
                   adgTarget: 700,
                   mortalityTarget: 5.0
               }
           };
           
           appData = demoData;
           saveData();
           loadData();
           alert('‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß');
       }

       // Add demo data button (for testing)
       if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
           const demoButton = document.createElement('button');
           demoButton.textContent = '‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á';
           demoButton.className = 'btn btn-secondary';
           demoButton.style.position = 'fixed';
           demoButton.style.bottom = '20px';
           demoButton.style.right = '20px';
           demoButton.style.zIndex = '1000';
           demoButton.onclick = loadDemoData;
           document.body.appendChild(demoButton);
       }

       // Export functions for debugging
       window.appDebug = {
           appData,
           loadDemoData,
           calculateFCR,
           calculateADG,
           predictSaleDate
       };
   </script>
</body>
</html>
