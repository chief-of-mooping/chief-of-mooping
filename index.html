
<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Smart Pork Skewer Business Advisor AI</title>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>

<script>
// Firebase Configuration
const firebaseConfig = {
apiKey: "AIzaSyDFETQF_lUuU_HeUa_9pnpAkDyMATUKB7g",
authDomain: "pork-pricing-app.firebaseapp.com",
projectId: "pork-pricing-app",
storageBucket: "pork-pricing-app.firebasestorage.app",
messagingSenderId: "604634104081",
appId: "1:604634104081:web:cc318ac88d381cf4384cb0",
measurementId: "G-0224PTLW7P"
};

// Initialize Firebase
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();
const auth = firebase.auth();
console.log("Firebase initialized successfully");
</script>

    <style>
:root {
--primary-color: #FF5722;
--primary-dark: #E64A19;
--primary-light: #FFAB91;
--secondary-color: #FF9800;
--secondary-dark: #F57C00;
--accent-color: #FFEB3B;
--dark-color: #5D4037;
--light-color: #FFF8E1;
--light-alt-color: #FFECB3;
--white-color: #FFFFFF;
--success-color: #4CAF50;
--success-dark: #388E3C;
--error-color: #F44336;
--error-dark: #D32F2F;
--info-color: #2196F3;
--info-dark: #1976D2;
--warning-color: #FFC107;
--warning-dark: #FFA000;
--shadow-color: rgba(0, 0, 0, 0.2);
--business-color: #9C27B0;
--business-dark: #7B1FA2;
--analysis-color: #3F51B5;
--analysis-dark: #303F9F;
}

* {
margin: 0;
padding: 0;
box-sizing: border-box;
font-family: 'Sarabun', 'Prompt', 'Kanit', -apple-system, BlinkMacSystemFont, sans-serif;
}

body {
background: linear-gradient(-45deg, #FFF8E1, #FFECB3, #E8F5E8, #E3F2FD, #FCE4EC);
background-size: 400% 400%;
animation: bodyGradientShift 15s ease infinite;
color: var(--dark-color);
line-height: 1.6;
padding-bottom: 80px;
}

@keyframes bodyGradientShift {
0% { background-position: 0% 50%; }
25% { background-position: 100% 25%; }
50% { background-position: 100% 100%; }
75% { background-position: 0% 75%; }
100% { background-position: 0% 50%; }
}

.container {
max-width: 1200px;
margin: 0 auto;
padding: 0 15px;
}

header {
background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
color: white;
text-align: center;
padding: 25px 0;
margin-bottom: 25px;
border-bottom: 5px solid var(--secondary-color);
position: relative;
overflow: hidden;
box-shadow: 0 4px 10px var(--shadow-color);
animation: headerColorShift 10s infinite;
}

@keyframes headerColorShift {
0% { background: linear-gradient(135deg, #FF5722, #E64A19); }
20% { background: linear-gradient(135deg, #E91E63, #C2185B); }
40% { background: linear-gradient(135deg, #9C27B0, #7B1FA2); }
60% { background: linear-gradient(135deg, #3F51B5, #303F9F); }
80% { background: linear-gradient(135deg, #00BCD4, #0097A7); }
100% { background: linear-gradient(135deg, #FF5722, #E64A19); }
}

.header-content {
position: relative;
z-index: 2;
}

.header-bg {
position: absolute;
top: 0;
left: 0;
width: 100%;
height: 100%;
background: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cGF0aCBkPSJNMjAsMzAgQzIwLDY1IDgwLDY1IDgwLDMwIiBzdHJva2U9IiNGRkM3QTciIHN0cm9rZS13aWR0aD0iMi41IiBmaWxsPSJub25lIiBzdHJva2UtbGluZWNhcD0icm91bmQiLz48Y2lyY2xlIGN4PSI1MCIgY3k9IjMwIiByPSI2IiBmaWxsPSIjRkZDN0E3Ii8+PC9zdmc+') repeat;
opacity: 0.2;
z-index: 1;
}

h1 {
font-size: 2.2rem;
margin-bottom: 8px;
text-shadow: 1px 1px 3px rgba(0,0,0,0.3);
font-weight: 700;
}

h2 {
font-size: 1.4rem;
font-weight: 400;
margin-bottom: 12px;
text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
}

.date-display {
background-color: var(--secondary-color);
color: white;
padding: 8px 20px;
border-radius: 25px;
display: inline-block;
margin-top: 12px;
font-size: 1rem;
font-weight: 500;
box-shadow: 0 3px 8px rgba(0,0,0,0.2);
text-shadow: 1px 1px 1px rgba(0,0,0,0.2);
animation: dateDisplayShift 13s infinite;
}

@keyframes dateDisplayShift {
0% { background-color: #FF9800; }
20% { background-color: #F06292; }
40% { background-color: #BA68C8; }
60% { background-color: #7986CB; }
80% { background-color: #4DD0E1; }
100% { background-color: #FF9800; }
}

/* ‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏ó‡πá‡∏ö‡πÉ‡∏´‡πâ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö 5 ‡πÅ‡∏ó‡πá‡∏ö */
.tabs {
display: flex;
margin-bottom: 25px;
border-radius: 12px;
overflow: hidden;
background-color: #FFF;
box-shadow: 0 8px 25px rgba(0, 0, 0, 0.12);
}

.tab {
flex: 1;
text-align: center;
background-color: #FFF;
color: var(--dark-color);
padding: 16px 8px;
cursor: pointer;
transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
font-weight: 600;
font-size: 0.95rem;
border-bottom: 3px solid transparent;
position: relative;
overflow: hidden;
min-height: 70px;
display: flex;
align-items: center;
justify-content: center;
}

.tab:hover {
background-color: var(--light-alt-color);
transform: translateY(-2px);
box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}

.tab:active {
transform: translateY(1px);
box-shadow: none;
}

.tab.active {
color: var(--primary-color);
border-bottom: 3px solid var(--primary-color);
background-color: var(--light-alt-color);
box-shadow: inset 0 -3px 0 var(--primary-color);
animation: tabActiveShift 7s infinite;
}

@keyframes tabActiveShift {
0% { border-bottom-color: #FF5722; }
25% { border-bottom-color: #E91E63; }
50% { border-bottom-color: #9C27B0; }
75% { border-bottom-color: #3F51B5; }
100% { border-bottom-color: #FF5722; }
}

.tab::after {
content: '';
position: absolute;
width: 100%;
height: 3px;
background-color: var(--primary-color);
bottom: 0;
left: 0;
transform: scaleX(0);
transition: transform 0.3s ease;
}

.tab:hover::after {
transform: scaleX(1);
}

.tab-content {
display: none;
background-color: white;
padding: 30px;
border-radius: 16px;
box-shadow: 0 12px 30px rgba(0, 0, 0, 0.12);
margin-bottom: 25px;
animation: fadeIn 0.6s cubic-bezier(0.4, 0, 0.2, 1);
transform: translateY(0);
transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.tab-content.active {
display: block;
}

.tab-content:hover {
transform: translateY(-5px);
box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
}

@keyframes fadeIn {
from { opacity: 0; transform: translateY(30px); }
to { opacity: 1; transform: translateY(0); }
}

/* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à */
.business-type-selector {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
gap: 20px;
margin-bottom: 30px;
}

.business-type-card {
background: linear-gradient(145deg, white, #f8f9fa);
border: 3px solid #e0e0e0;
border-radius: 16px;
padding: 25px;
cursor: pointer;
transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
text-align: center;
position: relative;
overflow: hidden;
box-shadow: 0 8px 20px rgba(0,0,0,0.08);
}

.business-type-card:hover {
transform: translateY(-8px);
box-shadow: 0 15px 35px rgba(0,0,0,0.15);
border-color: var(--business-color);
}

.business-type-card.selected {
background: linear-gradient(145deg, var(--business-color), var(--business-dark));
border-color: var(--business-dark);
color: white;
box-shadow: 0 12px 30px rgba(156, 39, 176, 0.3);
transform: translateY(-5px);
}

.business-type-card.selected:hover {
transform: translateY(-10px);
box-shadow: 0 18px 40px rgba(156, 39, 176, 0.4);
}

.business-icon {
font-size: 3rem;
margin-bottom: 15px;
display: block;
}

.business-type-card.selected .business-icon {
animation: iconBounce 2s infinite;
}

@keyframes iconBounce {
0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
40% { transform: translateY(-10px); }
60% { transform: translateY(-5px); }
}

.business-title {
font-size: 1.3rem;
font-weight: 700;
margin-bottom: 10px;
}

.business-description {
font-size: 0.95rem;
line-height: 1.5;
opacity: 0.8;
}

.business-type-card.selected .business-description {
opacity: 0.95;
}

/* ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡πÅ‡∏•‡∏∞‡∏ú‡∏•‡∏Å‡∏≥‡πÑ‡∏£ */
.cost-analysis-section {
background: linear-gradient(135deg, #f8f9fa, #e9ecef);
border-radius: 16px;
padding: 25px;
margin: 25px 0;
border-left: 5px solid var(--analysis-color);
}

.analysis-grid {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
gap: 20px;
margin-top: 20px;
}

.analysis-card {
background: white;
border-radius: 12px;
padding: 20px;
box-shadow: 0 6px 20px rgba(0,0,0,0.08);
transition: transform 0.3s ease;
}

.analysis-card:hover {
transform: translateY(-3px);
box-shadow: 0 10px 25px rgba(0,0,0,0.12);
}

.analysis-title {
font-size: 1.1rem;
font-weight: 600;
color: var(--analysis-color);
margin-bottom: 15px;
display: flex;
align-items: center;
gap: 8px;
}

.cost-breakdown {
list-style: none;
padding: 0;
}

.cost-item {
display: flex;
justify-content: space-between;
align-items: center;
padding: 8px 0;
border-bottom: 1px solid #f0f0f0;
}

.cost-item:last-child {
border-bottom: none;
font-weight: 600;
color: var(--primary-color);
}

.profit-scenarios {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
gap: 15px;
margin-top: 20px;
}

.scenario-card {
background: linear-gradient(145deg, white, #f8f9fa);
border-radius: 12px;
padding: 18px;
text-align: center;
border: 2px solid #e0e0e0;
transition: all 0.3s ease;
}

.scenario-card:hover {
border-color: var(--success-color);
transform: translateY(-2px);
}

.scenario-card.recommended {
border-color: var(--success-color);
background: linear-gradient(145deg, var(--success-color), var(--success-dark));
color: white;
}

.scenario-price {
font-size: 1.8rem;
font-weight: 700;
margin-bottom: 5px;
}

.scenario-profit {
font-size: 1rem;
margin-bottom: 8px;
opacity: 0.9;
}

.scenario-label {
font-size: 0.85rem;
opacity: 0.8;
}

/* ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á */
.form-group {
margin-bottom: 25px;
}

.form-row {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
gap: 20px;
}

label {
display: block;
margin-bottom: 8px;
font-weight: 600;
color: var(--dark-color);
font-size: 1rem;
}

input[type="text"],
input[type="number"],
input[type="password"],
input[type="date"],
select,
textarea {
width: 100%;
padding: 15px;
border: 2px solid #e0e0e0;
border-radius: 10px;
font-size: 1rem;
transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
background-color: #f9f9f9;
box-shadow: inset 0 2px 4px rgba(0,0,0,0.05);
font-family: inherit;
}

input[type="text"]:focus,
input[type="number"]:focus,
input[type="password"]:focus,
input[type="date"]:focus,
select:focus,
textarea:focus {
border-color: var(--primary-color);
box-shadow: 0 0 0 3px rgba(255, 87, 34, 0.1);
outline: none;
background-color: #fff;
transform: translateY(-1px);
}

.option-group {
display: flex;
flex-wrap: wrap;
gap: 12px;
margin-bottom: 20px;
}

.option-button {
flex: 1;
min-width: 120px;
background-color: #FFF;
border: 2px solid #e0e0e0;
border-radius: 12px;
padding: 15px 12px;
cursor: pointer;
text-align: center;
transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
font-size: 0.95rem;
font-weight: 500;
box-shadow: 0 4px 12px rgba(0,0,0,0.08);
position: relative;
overflow: hidden;
}

.option-button:hover {
border-color: var(--secondary-color);
transform: translateY(-3px);
box-shadow: 0 8px 20px rgba(0,0,0,0.12);
}

.option-button:active {
transform: translateY(1px);
box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.option-button.selected {
background: linear-gradient(145deg, var(--primary-color), var(--primary-dark));
border-color: var(--primary-dark);
color: white;
box-shadow: 0 6px 18px rgba(255, 87, 34, 0.3);
transform: translateY(-2px);
animation: selectedButtonShift 6s infinite;
}

@keyframes selectedButtonShift {
0% { background: linear-gradient(145deg, #FF5722, #E64A19); }
33% { background: linear-gradient(145deg, #E91E63, #C2185B); }
66% { background: linear-gradient(145deg, #9C27B0, #7B1FA2); }
100% { background: linear-gradient(145deg, #FF5722, #E64A19); }
}

.option-button.selected:hover {
transform: translateY(-4px);
box-shadow: 0 10px 25px rgba(255, 87, 34, 0.35);
}

.option-button img, .option-button svg {
display: block;
width: 32px;
height: 32px;
margin: 0 auto 8px;
}

/* ‡∏õ‡∏∏‡πà‡∏°‡∏ï‡πà‡∏≤‡∏á‡πÜ */
.calculate-btn, .action-btn {
display: block;
width: 100%;
background: linear-gradient(145deg, var(--primary-color), var(--primary-dark));
color: white;
border: none;
border-radius: 12px;
padding: 18px;
font-size: 1.2rem;
font-weight: 700;
cursor: pointer;
margin: 25px 0;
transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
box-shadow: 0 8px 0 var(--primary-dark), 0 8px 20px rgba(0,0,0,0.15);
position: relative;
overflow: hidden;
text-transform: uppercase;
letter-spacing: 1px;
animation: buttonColorShift 8s infinite;
font-family: inherit;
}

@keyframes buttonColorShift {
0% { background: linear-gradient(145deg, #FF5722, #E64A19); }
25% { background: linear-gradient(145deg, #E91E63, #C2185B); }
50% { background: linear-gradient(145deg, #9C27B0, #7B1FA2); }
75% { background: linear-gradient(145deg, #3F51B5, #303F9F); }
100% { background: linear-gradient(145deg, #FF5722, #E64A19); }
}

.calculate-btn:hover, .action-btn:hover {
background: linear-gradient(145deg, var(--secondary-color), var(--secondary-dark));
box-shadow: 0 8px 0 var(--secondary-dark), 0 8px 25px rgba(0,0,0,0.2);
transform: translateY(-2px);
}

.calculate-btn:active, .action-btn:active {
transform: translateY(6px);
box-shadow: 0 2px 0 var(--primary-dark), 0 2px 8px rgba(0,0,0,0.1);
}

.calculate-btn::after, .action-btn::after {
content: '';
position: absolute;
top: 0;
left: -100%;
width: 100%;
height: 100%;
background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
transition: 0.5s;
}

.calculate-btn:hover::after, .action-btn:hover::after {
left: 100%;
}

/* ‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå */
.result-section {
background: linear-gradient(145deg, var(--secondary-color), var(--secondary-dark));
color: white;
padding: 30px;
border-radius: 16px;
text-align: center;
margin-bottom: 25px;
display: none;
box-shadow: 0 15px 35px rgba(255, 152, 0, 0.3);
transform: translateY(0);
transition: transform 0.3s ease;
animation: resultColorShift 9s infinite;
}

@keyframes resultColorShift {
0% { background: linear-gradient(145deg, #FF9800, #F57C00); }
25% { background: linear-gradient(145deg, #F06292, #E91E63); }
50% { background: linear-gradient(145deg, #BA68C8, #9C27B0); }
75% { background: linear-gradient(145deg, #7986CB, #3F51B5); }
100% { background: linear-gradient(145deg, #FF9800, #F57C00); }
}

.result-section:hover {
transform: translateY(-5px);
}

.price-recommendation {
font-size: 3.5rem;
font-weight: 800;
margin: 20px 0;
text-shadow: 2px 2px 8px rgba(0,0,0,0.2);
}

.profit-estimate {
font-size: 1.5rem;
margin-bottom: 25px;
text-shadow: 1px 1px 4px rgba(0,0,0,0.2);
}

.additional-tips {
background-color: rgba(255,255,255,0.95);
padding: 25px;
border-radius: 12px;
margin-top: 20px;
color: var(--dark-color);
text-align: left;
box-shadow: 0 6px 20px rgba(0,0,0,0.1);
}

.additional-tips h4 {
color: var(--primary-color);
margin-bottom: 15px;
font-size: 1.3rem;
font-weight: 600;
}

.additional-tips ul {
padding-left: 0;
list-style: none;
}

.additional-tips li {
margin-bottom: 12px;
position: relative;
padding-left: 25px;
line-height: 1.6;
}

.additional-tips li::before {
content: 'üéØ';
position: absolute;
left: 0;
font-size: 1.1rem;
}

/* ‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÅ‡∏•‡∏∞‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥ */
.card {
background-color: white;
border-radius: 16px;
box-shadow: 0 12px 30px rgba(0, 0, 0, 0.1);
padding: 30px;
margin-bottom: 25px;
transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.card:hover {
transform: translateY(-8px);
box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
}

.card-title {
font-size: 1.4rem;
color: var(--primary-color);
margin-bottom: 25px;
padding-bottom: 15px;
border-bottom: 2px solid #f0f0f0;
position: relative;
font-weight: 600;
}

.card-title::after {
content: '';
position: absolute;
bottom: -2px;
left: 0;
width: 80px;
height: 2px;
background-color: var(--primary-color);
}

.dashboard-stats {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
gap: 20px;
margin-bottom: 25px;
}

.stat-card {
background-color: white;
border-radius: 16px;
box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
padding: 25px;
text-align: center;
transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
position: relative;
overflow: hidden;
}

.stat-card:hover {
transform: translateY(-8px);
box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
}

.stat-card::before {
content: '';
position: absolute;
top: 0;
left: 0;
width: 100%;
height: 5px;
background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
animation: statBorderShift 11s infinite;
}

@keyframes statBorderShift {
0% { background: linear-gradient(90deg, #FF5722, #FF9800); }
25% { background: linear-gradient(90deg, #E91E63, #F06292); }
50% { background: linear-gradient(90deg, #9C27B0, #BA68C8); }
75% { background: linear-gradient(90deg, #3F51B5, #7986CB); }
100% { background: linear-gradient(90deg, #FF5722, #FF9800); }
}

.stat-value {
font-size: 2.2rem;
font-weight: 800;
color: var(--primary-color);
margin: 15px 0;
text-shadow: 1px 1px 2px rgba(0,0,0,0.05);
}

.stat-label {
font-size: 1rem;
color: #666;
margin-bottom: 5px;
font-weight: 500;
}

/* ‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô */
.notification {
padding: 20px;
border-radius: 12px;
margin-bottom: 20px;
display: flex;
align-items: flex-start;
box-shadow: 0 8px 25px rgba(0,0,0,0.1);
transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.notification:hover {
transform: translateY(-3px);
box-shadow: 0 12px 30px rgba(0,0,0,0.15);
}

.notification.info {
background-color: rgba(33, 150, 243, 0.15);
border-left: 5px solid var(--info-color);
}

.notification.warning {
background-color: rgba(255, 193, 7, 0.15);
border-left: 5px solid var(--warning-color);
}

.notification.error {
background-color: rgba(244, 67, 54, 0.15);
border-left: 5px solid var(--error-color);
}

.notification.success {
background-color: rgba(76, 175, 80, 0.15);
border-left: 5px solid var(--success-color);
}

.notification svg {
width: 28px;
height: 28px;
margin-right: 15px;
flex-shrink: 0;
}

.notification-content {
flex: 1;
}

.pulse {
animation: pulse 2s infinite;
}

@keyframes pulse {
0% {
box-shadow: 0 0 0 0 rgba(255, 87, 34, 0.4);
}
70% {
box-shadow: 0 0 0 15px rgba(255, 87, 34, 0);
}
100% {
box-shadow: 0 0 0 0 rgba(255, 87, 34, 0);
}
}

.hidden {
display: none !important;
}

.footer {
text-align: center;
margin-top: 40px;
color: var(--dark-color);
font-size: 0.95rem;
padding: 25px;
background-color: rgba(255,255,255,0.6);
border-radius: 12px;
box-shadow: 0 8px 20px rgba(0,0,0,0.05);
}

/* ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢ */
.sales-table {
width: 100%;
border-collapse: collapse;
margin-top: 15px;
overflow-x: auto;
display: block;
white-space: nowrap;
border-radius: 12px;
overflow: hidden;
box-shadow: 0 8px 20px rgba(0,0,0,0.08);
}

.sales-table thead,
.sales-table tbody {
display: table;
width: 100%;
table-layout: fixed;
}

.sales-table th,
.sales-table td {
padding: 15px 12px;
text-align: center;
border: 1px solid #e0e0e0;
word-wrap: break-word;
}

.sales-table th {
background: linear-gradient(135deg, var(--light-color), var(--light-alt-color));
color: var(--dark-color);
font-weight: 600;
border-bottom: 2px solid var(--primary-color);
}

.sales-table tr:nth-child(even) {
background-color: #f9f9f9;
}

.sales-table tr:hover {
background-color: var(--light-alt-color);
transform: scale(1.01);
transition: all 0.3s ease;
}

.prediction-highlight {
background: linear-gradient(135deg, var(--success-color), var(--success-dark));
color: white;
padding: 25px;
border-radius: 16px;
text-align: center;
margin-top: 20px;
box-shadow: 0 12px 30px rgba(76, 175, 80, 0.3);
}

.prediction-amount {
font-size: 2.8rem;
font-weight: 800;
margin-bottom: 12px;
}

.prediction-reason {
font-size: 1.1rem;
opacity: 0.95;
line-height: 1.5;
}

/* Responsive Design */
@media (max-width: 768px) {
.container {
padding: 0 10px;
}

h1 {
font-size: 1.8rem;
}

h2 {
font-size: 1.2rem;
}

.tab {
padding: 12px 6px;
font-size: 0.85rem;
min-height: 60px;
}

.dashboard-stats {
grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
gap: 15px;
}

.business-type-selector {
grid-template-columns: 1fr;
gap: 15px;
}

.analysis-grid {
grid-template-columns: 1fr;
gap: 15px;
}

.profit-scenarios {
grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
gap: 10px;
}

.form-row {
grid-template-columns: 1fr;
gap: 15px;
}

.option-button {
font-size: 0.85rem;
padding: 12px 10px;
min-width: 100px;
}

.price-recommendation {
font-size: 2.5rem;
}

.stat-value {
font-size: 1.8rem;
}

.card, .tab-content {
padding: 20px;
}

.calculate-btn, .action-btn {
padding: 15px;
font-size: 1.1rem;
}

.sales-table {
font-size: 0.9rem;
}

.sales-table th,
.sales-table td {
padding: 10px 8px;
}

.prediction-amount {
font-size: 2.2rem;
}

.business-type-card {
padding: 20px;
}

.cost-analysis-section {
padding: 20px;
}

.analysis-card {
padding: 15px;
}
}

@media (max-width: 480px) {
h1 {
font-size: 1.6rem;
}

.tab {
font-size: 0.8rem;
padding: 10px 4px;
}

.dashboard-stats {
grid-template-columns: 1fr;
}

.option-group {
flex-direction: column;
}

.option-button {
min-width: auto;
}

.business-icon {
font-size: 2.5rem;
}

.price-recommendation {
font-size: 2rem;
}

.profit-scenarios {
grid-template-columns: 1fr;
}
}

/* ‡πÅ‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏ä‡∏±‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏© */
@keyframes slideInUp {
from {
opacity: 0;
transform: translateY(30px);
}
to {
opacity: 1;
transform: translateY(0);
}
}

@keyframes fadeInScale {
from {
opacity: 0;
transform: scale(0.9);
}
to {
opacity: 1;
transform: scale(1);
}
}

.slide-in {
animation: slideInUp 0.6s ease-out;
}

.fade-scale {
animation: fadeInScale 0.5s ease-out;
}

/* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ä‡∏ó */
.chat-ui {
background-color: white;
border-radius: 16px;
box-shadow: 0 12px 35px rgba(0, 0, 0, 0.15);
margin-bottom: 25px;
overflow: hidden;
display: flex;
flex-direction: column;
height: 500px;
transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.chat-ui:hover {
transform: translateY(-5px);
box-shadow: 0 20px 50px rgba(0, 0, 0, 0.2);
}

.chat-messages {
flex: 1;
padding: 25px;
overflow-y: auto;
background: linear-gradient(135deg, #f8f9fa, #e9ecef);
}

.message {
margin-bottom: 20px;
max-width: 85%;
animation: messageIn 0.4s ease;
padding: 16px 20px;
border-radius: 20px;
box-shadow: 0 4px 12px rgba(0,0,0,0.1);
line-height: 1.5;
}

.message.user {
margin-left: auto;
background: linear-gradient(145deg, var(--primary-color), var(--primary-dark));
color: white;
border-radius: 20px 20px 4px 20px;
}

.message.ai {
margin-right: auto;
background-color: white;
color: var(--dark-color);
border-radius: 20px 20px 20px 4px;
border-left: 4px solid var(--primary-color);
}

.message-time {
font-size: 0.8rem;
opacity: 0.7;
margin-top: 8px;
text-align: right;
}

@keyframes messageIn {
from { opacity: 0; transform: translateY(20px) scale(0.95); }
to { opacity: 1; transform: translateY(0) scale(1); }
}

.chat-input-container {
display: flex;
padding: 20px;
border-top: 1px solid #e0e0e0;
background-color: #fff;
gap: 15px;
}

.chat-input {
flex: 1;
padding: 15px 20px;
border: 2px solid #e0e0e0;
border-radius: 30px;
font-size: 1rem;
transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
box-shadow: 0 2px 8px rgba(0,0,0,0.05);
font-family: inherit;
}

.chat-input:focus {
border-color: var(--primary-color);
box-shadow: 0 0 0 3px rgba(255, 87, 34, 0.1);
outline: none;
}

.chat-send-btn {
background: linear-gradient(145deg, var(--primary-color), var(--primary-dark));
color: white;
border: none;
border-radius: 50%;
width: 55px;
height: 55px;
cursor: pointer;
display: flex;
justify-content: center;
align-items: center;
box-shadow: 0 6px 15px rgba(255, 87, 34, 0.3);
transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
animation: chatButtonShift 5s infinite;
}

@keyframes chatButtonShift {
0% { background: linear-gradient(145deg, #FF5722, #E64A19); }
50% { background: linear-gradient(145deg, #9C27B0, #7B1FA2); }
100% { background: linear-gradient(145deg, #FF5722, #E64A19); }
}

.chat-send-btn:hover {
transform: translateY(-2px) scale(1.05);
box-shadow: 0 8px 20px rgba(255, 87, 34, 0.4);
}

.chat-send-btn:active {
transform: translateY(1px) scale(0.98);
box-shadow: 0 3px 8px rgba(255, 87, 34, 0.2);
}

/* Typing indicator */
.typing-indicator {
display: flex;
align-items: center;
padding: 10px 0;
}

.typing-indicator span {
height: 8px;
width: 8px;
float: left;
margin: 0 2px;
background-color: #9E9E9E;
display: block;
border-radius: 50%;
opacity: 0.4;
animation: 1s blink infinite;
}

.typing-indicator span:nth-of-type(1) { animation-delay: 0.3333s; }
.typing-indicator span:nth-of-type(2) { animation-delay: 0.6666s; }
.typing-indicator span:nth-of-type(3) { animation-delay: 0.9999s; }

@keyframes blink {
50% { opacity: 1; }
}

/* ‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢ */
.strategy-item {
display: flex;
gap: 15px;
background: white;
padding: 20px;
border-radius: 12px;
margin-bottom: 15px;
box-shadow: 0 6px 15px rgba(0,0,0,0.08);
transition: all 0.3s ease;
border-left: 4px solid var(--primary-color);
}

.strategy-item:hover {
transform: translateX(5px);
box-shadow: 0 8px 20px rgba(0,0,0,0.12);
}

.strategy-icon {
flex-shrink: 0;
}

.strategy-content h4 {
color: var(--primary-color);
margin-bottom: 10px;
font-weight: 600;
}

.strategy-content p {
line-height: 1.6;
margin-bottom: 8px;
}

/* ‡πÇ‡∏´‡∏•‡∏î‡∏î‡∏¥‡πâ‡∏á */
.loading-spinner {
border: 3px solid #f3f3f3;
border-top: 3px solid var(--primary-color);
border-radius: 50%;
width: 30px;
height: 30px;
animation: spin 1s linear infinite;
margin: 10px auto;
}

@keyframes spin {
0% { transform: rotate(0deg); }
100% { transform: rotate(360deg); }
}

/* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏° */
.highlight-box {
background: linear-gradient(135deg, rgba(255, 87, 34, 0.1), rgba(255, 152, 0, 0.1));
border: 2px solid rgba(255, 87, 34, 0.2);
border-radius: 12px;
padding: 20px;
margin: 15px 0;
}

.success-box {
background: linear-gradient(135deg, rgba(76, 175, 80, 0.1), rgba(56, 142, 60, 0.1));
border: 2px solid rgba(76, 175, 80, 0.2);
border-radius: 12px;
padding: 20px;
margin: 15px 0;
}

.warning-box {
background: linear-gradient(135deg, rgba(255, 193, 7, 0.1), rgba(255, 160, 0, 0.1));
border: 2px solid rgba(255, 193, 7, 0.2);
border-radius: 12px;
padding: 20px;
margin: 15px 0;
}

/* ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç scrollbar */
::-webkit-scrollbar {
width: 8px;
}

::-webkit-scrollbar-track {
background: #f1f1f1;
border-radius: 10px;
}

::-webkit-scrollbar-thumb {
background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
border-radius: 10px;
}

::-webkit-scrollbar-thumb:hover {
background: linear-gradient(135deg, var(--primary-dark), var(--secondary-dark));
}
</style>
</head>

<body>
<header>
<div class="header-bg"></div>
<div class="header-content container">
<h1>üè™ Smart Pork Skewer Business Advisor AI</h1>
<h2>‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞</h2>
<div class="date-display" id="current-date">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà ...</div>
</div>
</header>

<div class="container">
<div class="notification info" id="api-key-notification">
<svg viewBox="0 0 24 24" fill="none" stroke="#2196F3" stroke-width="2">
<circle cx="12" cy="12" r="10"></circle>
<line x1="12" y1="8" x2="12" y2="12"></line>
<line x1="12" y1="16" x2="12" y2="16"></line>
</svg>
<div class="notification-content">
<p>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡πÉ‡∏ô Firebase Database ‡πÅ‡∏•‡πâ‡∏ß ‡∏´‡∏≤‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô AI ‡πÄ‡∏ï‡πá‡∏°‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö ‡πÇ‡∏õ‡∏£‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ API Key ‡πÉ‡∏ô "‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤"</p>
</div>
</div>

<!-- ‡πÅ‡∏ó‡πá‡∏ö‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡πÅ‡∏•‡πâ‡∏ß -->
<div class="tabs">
<div class="tab active" data-tab="dashboard">üìä ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</div>
<div class="tab" data-tab="business-tools">üõ†Ô∏è ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à</div>
<div class="tab" data-tab="sales">üìà ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢</div>
<div class="tab" data-tab="advisor">ü§ñ ‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤ AI</div>
<div class="tab" data-tab="settings">‚öôÔ∏è ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</div>
</div>

<!-- ‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î -->
<div id="dashboard-tab" class="tab-content active">
<div class="dashboard-stats">
<div class="stat-card">
<div class="stat-label">‡∏£‡∏≤‡∏Ñ‡∏≤‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</div>
<div class="stat-value" id="today-price">-- ‡∏ö‡∏≤‡∏ó</div>
<div class="stat-label">‡∏ï‡πà‡∏≠‡πÑ‡∏°‡πâ</div>
</div>
<div class="stat-card">
<div class="stat-label">‡∏£‡∏≤‡∏Ñ‡∏≤‡∏´‡∏°‡∏π‡πÉ‡∏ô‡∏ï‡∏•‡∏≤‡∏î</div>
<div class="stat-value" id="market-price">-- ‡∏ö‡∏≤‡∏ó</div>
<div class="stat-label">‡∏ï‡πà‡∏≠‡∏Å‡∏¥‡πÇ‡∏•‡∏Å‡∏£‡∏±‡∏°</div>
<div class="stat-label" id="price-update-time">‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏°‡∏∑‡πà‡∏≠: --</div>
</div>
<div class="stat-card">
<div class="stat-label">‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®</div>
<div class="stat-value" id="weather-status">--</div>
<div class="stat-label">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô: <span id="humidity">--</span>%</div>
</div>
<div class="stat-card">
<div class="stat-label">‡∏Å‡∏≥‡πÑ‡∏£‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏Å‡∏≤‡∏£</div>
<div class="stat-value" id="estimated-profit">-- ‡∏ö‡∏≤‡∏ó</div>
<div class="stat-label">‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô</div>
</div>
</div>

<div class="card">
<div class="card-title">üí° ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô</div>
<div id="daily-recommendation">
<div id="recommendation-content">
<p>‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏® <span id="weather-desc">--</span> ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡∏ó‡∏µ‡πà <span id="location-rec">--</span></p>
<p>‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏µ‡πà <span id="price-rec">--</span> ‡∏ö‡∏≤‡∏ó‡∏ï‡πà‡∏≠‡πÑ‡∏°‡πâ</p>
<p>‡πÄ‡∏û‡∏£‡∏≤‡∏∞ <span id="price-reason">--</span></p>
<div class="additional-tips">
<h4>üéØ ‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</h4>
<ul id="daily-tips">
<li>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</li>
</ul>
</div>
</div>
</div>
<button class="action-btn pulse" id="refresh-recommendation">üîÑ ‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</button>
</div>

<div class="card">
<div class="card-title">üìä ‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢ 7 ‡∏ß‡∏±‡∏ô‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á</div>
<div id="dashboard-sales-summary">
<p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡πÉ‡∏ô‡πÅ‡∏ó‡πá‡∏ö "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢"</p>
</div>
</div>
</div>

<!-- ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à (‡πÅ‡∏ó‡πá‡∏ö‡πÉ‡∏´‡∏°‡πà) -->
<div id="business-tools-tab" class="tab-content">
<div class="card">
<div class="card-title">üè¢ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</div>
<div class="business-type-selector">
<div class="business-type-card" data-type="producer">
<div class="business-icon">üè≠</div>
<div class="business-title">‡∏ú‡∏•‡∏¥‡∏ï‡πÄ‡∏≠‡∏á</div>
<div class="business-description">‡∏ã‡∏∑‡πâ‡∏≠‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏°‡∏π‡∏™‡∏î ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∏‡∏á‡∏£‡∏™‡πÄ‡∏≠‡∏á ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô</div>
</div>
<div class="business-type-card" data-type="reseller">
<div class="business-icon">üõí</div>
<div class="business-title">‡∏ã‡∏∑‡πâ‡∏≠‡∏°‡∏≤‡∏Ç‡∏≤‡∏¢</div>
<div class="business-description">‡∏ã‡∏∑‡πâ‡∏≠‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏£‡∏π‡∏õ‡∏à‡∏≤‡∏Å‡∏ú‡∏π‡πâ‡∏ú‡∏•‡∏¥‡∏ï ‡∏ô‡∏≥‡∏°‡∏≤‡∏Ç‡∏≤‡∏¢‡∏ï‡πà‡∏≠ ‡∏•‡∏á‡∏ó‡∏∏‡∏ô‡∏ô‡πâ‡∏≠‡∏¢‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏á‡πà‡∏≤‡∏¢</div>
</div>
<div class="business-type-card" data-type="franchise">
<div class="business-icon">üè™</div>
<div class="business-title">‡πÅ‡∏ü‡∏£‡∏ô‡πÑ‡∏ä‡∏™‡πå</div>
<div class="business-description">‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ö‡πÅ‡∏ö‡∏£‡∏ô‡∏î‡πå‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏™‡∏µ‡∏¢‡∏á ‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏™‡∏ô‡∏±‡∏ö‡∏™‡∏ô‡∏∏‡∏ô‡πÅ‡∏•‡∏∞‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô</div>
</div>
</div>
</div>

<!-- ‡∏™‡πà‡∏ß‡∏ô‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏Ñ‡∏≤ -->
<div class="card" id="cost-calculation-section" style="display: none;">
<div class="card-title">üí∞ ‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡πÅ‡∏•‡∏∞‡∏Å‡∏≥‡πÑ‡∏£</div>
<form id="business-calculator-form">
<!-- ‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à ‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏≤‡∏° JavaScript -->
<div id="producer-form" class="business-form" style="display: none;">
<div class="form-row">
<div class="form-group">
<label for="producer-meat-price">‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏°‡∏π (‡∏ö‡∏≤‡∏ó/‡∏Å‡∏Å.)</label>
<input type="number" id="producer-meat-price" min="50" value="190">
</div>
<div class="form-group">
<label for="producer-meat-weight">‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏ï‡πà‡∏≠‡πÑ‡∏°‡πâ (‡∏Å‡∏£‡∏±‡∏°)</label>
<input type="number" id="producer-meat-weight" min="15" max="50" value="25">
</div>
</div>
<div class="form-row">
<div class="form-group">
<label for="producer-seasoning-cost">‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏õ‡∏£‡∏∏‡∏á/‡πÑ‡∏°‡πâ (‡∏ö‡∏≤‡∏ó)</label>
<input type="number" id="producer-seasoning-cost" min="0" step="0.1" value="0.5">
</div>
<div class="form-group">
<label for="producer-stick-cost">‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡πÑ‡∏°‡πâ‡∏à‡∏¥‡πâ‡∏°/‡πÑ‡∏°‡πâ (‡∏ö‡∏≤‡∏ó)</label>
<input type="number" id="producer-stick-cost" min="0" step="0.1" value="0.3">
</div>
</div>
<div class="form-row">
<div class="form-group">
<label for="producer-gas-cost">‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡πÅ‡∏Å‡πä‡∏™/‡πÑ‡∏°‡πâ (‡∏ö‡∏≤‡∏ó)</label>
<input type="number" id="producer-gas-cost" min="0" step="0.1" value="0.2">
</div>
<div class="form-group">
<label for="producer-labor-cost">‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡πÅ‡∏£‡∏á‡∏á‡∏≤‡∏ô/‡πÑ‡∏°‡πâ (‡∏ö‡∏≤‡∏ó)</label>
<input type="number" id="producer-labor-cost" min="0" step="0.1" value="1.0">
</div>
</div>
</div>

<div id="reseller-form" class="business-form" style="display: none;">
<div class="form-row">
<div class="form-group">
<label for="reseller-buy-price">‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ã‡∏∑‡πâ‡∏≠/‡πÑ‡∏°‡πâ (‡∏ö‡∏≤‡∏ó)</label>
<input type="number" id="reseller-buy-price" min="1" step="0.5" value="8">
</div>
<div class="form-group">
<label for="reseller-transport-cost">‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏Ç‡∏ô‡∏™‡πà‡∏á/‡πÑ‡∏°‡πâ (‡∏ö‡∏≤‡∏ó)</label>
<input type="number" id="reseller-transport-cost" min="0" step="0.1" value="0.5">
</div>
</div>
<div class="form-row">
<div class="form-group">
<label for="reseller-storage-cost">‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡πÄ‡∏Å‡πá‡∏ö‡∏£‡∏±‡∏Å‡∏©‡∏≤/‡πÑ‡∏°‡πâ (‡∏ö‡∏≤‡∏ó)</label>
<input type="number" id="reseller-storage-cost" min="0" step="0.1" value="0.2">
</div>
<div class="form-group">
<label for="reseller-gas-cost">‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡πÅ‡∏Å‡πä‡∏™‡∏≠‡∏∏‡πà‡∏ô/‡πÑ‡∏°‡πâ (‡∏ö‡∏≤‡∏ó)</label>
<input type="number" id="reseller-gas-cost" min="0" step="0.1" value="0.3">
</div>
</div>
</div>

<div id="franchise-form" class="business-form" style="display: none;">
<div class="form-row">
<div class="form-group">
<label for="franchise-product-cost">‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤/‡πÑ‡∏°‡πâ (‡∏ö‡∏≤‡∏ó)</label>
<input type="number" id="franchise-product-cost" min="1" step="0.5" value="9">
</div>
<div class="form-group">
<label for="franchise-royalty">‡∏Ñ‡πà‡∏≤‡πÅ‡∏ü‡∏£‡∏ô‡πÑ‡∏ä‡∏™‡πå/‡πÑ‡∏°‡πâ (‡∏ö‡∏≤‡∏ó)</label>
<input type="number" id="franchise-royalty" min="0" step="0.1" value="0.5">
</div>
</div>
<div class="form-row">
<div class="form-group">
<label for="franchise-marketing">‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£‡∏ï‡∏•‡∏≤‡∏î/‡πÑ‡∏°‡πâ (‡∏ö‡∏≤‡∏ó)</label>
<input type="number" id="franchise-marketing" min="0" step="0.1" value="0.3">
</div>
<div class="form-group">
<label for="franchise-support">‡∏Ñ‡πà‡∏≤‡∏™‡∏ô‡∏±‡∏ö‡∏™‡∏ô‡∏∏‡∏ô/‡πÑ‡∏°‡πâ (‡∏ö‡∏≤‡∏ó)</label>
<input type="number" id="franchise-support" min="0" step="0.1" value="0.2">
</div>
</div>
</div>

<!-- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏•‡∏≤‡∏î‡πÅ‡∏•‡∏∞‡∏™‡∏†‡∏≤‡∏û‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏° -->
<div class="form-group">
<label for="location">‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏Ç‡∏≤‡∏¢</label>
<select id="location">
<option value="market">‡∏ï‡∏•‡∏≤‡∏î‡∏™‡∏î/‡∏ï‡∏•‡∏≤‡∏î‡∏ô‡∏±‡∏î</option>
<option value="street">‡∏£‡∏¥‡∏°‡∏ñ‡∏ô‡∏ô/‡∏à‡∏∏‡∏î‡∏ú‡πà‡∏≤‡∏ô‡∏Ñ‡∏ô</option>
<option value="community">‡∏ä‡∏∏‡∏°‡∏ä‡∏ô/‡∏´‡∏°‡∏π‡πà‡∏ö‡πâ‡∏≤‡∏ô</option>
<option value="school">‡∏™‡∏ñ‡∏≤‡∏ô‡∏®‡∏∂‡∏Å‡∏©‡∏≤/‡∏°‡∏´‡∏≤‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢</option>
<option value="office">‡∏≠‡∏≠‡∏ü‡∏ü‡∏¥‡∏®/‡∏¢‡πà‡∏≤‡∏ô‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à</option>
<option value="mall">‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏≤/‡∏´‡πâ‡∏≤‡∏á‡∏™‡∏£‡∏£‡∏û‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</option>
</select>
</div>

<div class="form-group">
<label for="daily-volume">‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì‡∏Ç‡∏≤‡∏¢‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô (‡πÑ‡∏°‡πâ)</label>
<select id="daily-volume">
<option value="50">‡∏ô‡πâ‡∏≠‡∏¢ (‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤ 100 ‡πÑ‡∏°‡πâ)</option>
<option value="200" selected>‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á (100-300 ‡πÑ‡∏°‡πâ)</option>
<option value="400">‡∏°‡∏≤‡∏Å (300-500 ‡πÑ‡∏°‡πâ)</option>
<option value="600">‡∏°‡∏≤‡∏Å‡∏°‡∏≤‡∏¢ (‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 500 ‡πÑ‡∏°‡πâ)</option>
</select>
</div>

<div class="form-group">
<label>‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®</label>
<div class="option-group">
<div class="option-button selected" data-value="sunny">
<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
<circle cx="12" cy="12" r="5"></circle>
<line x1="12" y1="1" x2="12" y2="3"></line>
<line x1="12" y1="21" x2="12" y2="23"></line>
<line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
<line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
<line x1="1" y1="12" x2="3" y2="12"></line>
<line x1="21" y1="12" x2="23" y2="12"></line>
<line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
<line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
</svg>
‡πÅ‡∏î‡∏î‡∏≠‡∏≠‡∏Å
</div>
<div class="option-button" data-value="cloudy">
<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
<path d="M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"></path>
</svg>
‡∏°‡∏µ‡πÄ‡∏°‡∏Ü
</div>
<div class="option-button" data-value="rainy">
<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
<path d="M20 16.2A5 5 0 0 0 18 7h-1.26a8 8 0 1 0-11.62 9"></path>
<line x1="8" y1="16" x2="8.01" y2="16"></line>
<line x1="8" y1="20" x2="8.01" y2="20"></line>
<line x1="12" y1="18" x2="12.01" y2="18"></line>
<line x1="12" y1="22" x2="12.01" y2="22"></line>
<line x1="16" y1="16" x2="16.01" y2="16"></line>
<line x1="16" y1="20" x2="16.01" y2="20"></line>
</svg>
‡∏ù‡∏ô‡∏ï‡∏Å
</div>
</div>
</div>

<div class="form-group">
<label>‡∏™‡∏†‡∏≤‡∏û‡πÄ‡∏®‡∏£‡∏©‡∏ê‡∏Å‡∏¥‡∏à‡πÉ‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà</label>
<div class="option-group">
<div class="option-button" data-value="excellent">
<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
<path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path>
</svg>
‡∏î‡∏µ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°
</div>
<div class="option-button" data-value="good">
<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
<path d="M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20z"></path>
<path d="M8 14s1.5 2 4 2 4-2 4-2"></path>
<line x1="9" y1="9" x2="9.01" y2="9"></line>
<line x1="15" y1="9" x2="15.01" y2="9"></line>
</svg>
‡∏î‡∏µ
</div>
<div class="option-button selected" data-value="normal">
<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
<path d="M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20z"></path>
<line x1="8" y1="15" x2="16" y2="15"></line>
<line x1="9" y1="9" x2="9.01" y2="9"></line>
<line x1="15" y1="9" x2="15.01" y2="9"></line>
</svg>
‡∏õ‡∏Å‡∏ï‡∏¥
</div>
<div class="option-button" data-value="bad">
<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
<path d="M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20z"></path>
<path d="M16 16s-1.5-2-4-2-4 2-4 2"></path>
<line x1="9" y1="9" x2="9.01" y2="9"></line>
<line x1="15" y1="9" x2="15.01" y2="9"></line>
</svg>
‡πÅ‡∏¢‡πà
</div>
</div>
</div>

<button type="button" class="calculate-btn pulse" id="calculate-business-btn">üßÆ ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤</button>
</form>
</div>

<!-- ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå -->
<div class="cost-analysis-section" id="business-analysis-result" style="display: none;">
<h3>üìä ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à</h3>
<div class="analysis-grid">
<div class="analysis-card">
<div class="analysis-title">
üí∞ ‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô
</div>
<ul class="cost-breakdown" id="cost-breakdown">
<!-- ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÄ‡∏ï‡∏¥‡∏°‡∏î‡πâ‡∏ß‡∏¢ JavaScript -->
</ul>
</div>

<div class="analysis-card">
<div class="analysis-title">
üìà ‡∏à‡∏∏‡∏î‡∏Ñ‡∏∏‡πâ‡∏°‡∏ó‡∏∏‡∏ô (Break-even)
</div>
<div id="breakeven-analysis">
<!-- ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÄ‡∏ï‡∏¥‡∏°‡∏î‡πâ‡∏ß‡∏¢ JavaScript -->
</div>
</div>

<div class="analysis-card">
<div class="analysis-title">
üéØ ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÉ‡∏ô‡∏ï‡∏•‡∏≤‡∏î
</div>
<div id="market-position">
<!-- ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÄ‡∏ï‡∏¥‡∏°‡∏î‡πâ‡∏ß‡∏¢ JavaScript -->
</div>
</div>
</div>

<div class="profit-scenarios">
<div class="scenario-card">
<div class="scenario-price" id="conservative-price">-- ‡∏ö‡∏≤‡∏ó</div>
<div class="scenario-profit" id="conservative-profit">‡∏Å‡∏≥‡πÑ‡∏£: -- ‡∏ö‡∏≤‡∏ó/‡∏ß‡∏±‡∏ô</div>
<div class="scenario-label">üíö ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢</div>
</div>
<div class="scenario-card recommended">
<div class="scenario-price" id="recommended-price">-- ‡∏ö‡∏≤‡∏ó</div>
<div class="scenario-profit" id="recommended-profit">‡∏Å‡∏≥‡πÑ‡∏£: -- ‡∏ö‡∏≤‡∏ó/‡∏ß‡∏±‡∏ô</div>
<div class="scenario-label">‚≠ê ‡∏£‡∏≤‡∏Ñ‡∏≤‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</div>
</div>
<div class="scenario-card">
<div class="scenario-price" id="aggressive-price">-- ‡∏ö‡∏≤‡∏ó</div>
<div class="scenario-profit" id="aggressive-profit">‡∏Å‡∏≥‡πÑ‡∏£: -- ‡∏ö‡∏≤‡∏ó/‡∏ß‡∏±‡∏ô</div>
<div class="scenario-label">üöÄ ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡πâ‡∏≤‡∏ó‡∏≤‡∏¢</div>
</div>
</div>

<div class="additional-tips" id="business-strategies">
<h4>üéØ ‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏ó‡∏µ‡πà‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</h4>
<div id="strategy-content">
<!-- ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÄ‡∏ï‡∏¥‡∏°‡∏î‡πâ‡∏ß‡∏¢ JavaScript -->
</div>
</div>
</div>
</div>

<!-- ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢ -->
<div id="sales-tab" class="tab-content">
<div class="card">
<div class="card-title">üìù ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô</div>
<div class="form-row">
<div class="form-group">
<label for="sale-date">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</label>
<input type="date" id="sale-date">
</div>
<div class="form-group">
<label for="prepared-amount">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÑ‡∏õ (‡πÑ‡∏°‡πâ)</label>
<input type="number" id="prepared-amount" min="0" placeholder="‡πÄ‡∏ä‡πà‡∏ô 150">
</div>
</div>

<div class="form-row">
<div class="form-group">
<label for="sold-amount">‡∏Ç‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á (‡πÑ‡∏°‡πâ)</label>
<input type="number" id="sold-amount" min="0" placeholder="‡πÄ‡∏ä‡πà‡∏ô 140">
</div>
<div class="form-group">
<label for="average-price">‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡∏≤‡∏¢‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢ (‡∏ö‡∏≤‡∏ó/‡πÑ‡∏°‡πâ)</label>
<input type="number" id="average-price" min="0" step="0.5" placeholder="‡πÄ‡∏ä‡πà‡∏ô 12">
</div>
</div>

<div class="form-group">
<label for="weather-condition">‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏ß‡∏±‡∏ô‡∏ô‡∏±‡πâ‡∏ô</label>
<select id="weather-condition">
<option value="sunny">‡πÅ‡∏î‡∏î‡∏≠‡∏≠‡∏Å</option>
<option value="cloudy">‡∏°‡∏µ‡πÄ‡∏°‡∏Ü</option>
<option value="rainy">‡∏ù‡∏ô‡∏ï‡∏Å</option>
</select>
</div>

<div class="form-group">
<label for="sale-notes">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)</label>
<textarea id="sale-notes" rows="3" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î, ‡πÄ‡∏ó‡∏®‡∏Å‡∏≤‡∏•, ‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏≠‡∏≠‡∏Å, ‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©"></textarea>
</div>

<button class="action-btn" id="save-sales-btn">üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢</button>
</div>

<!-- ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• 7 ‡∏ß‡∏±‡∏ô‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á -->
<div class="card">
<div class="card-title">üìä ‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢ 7 ‡∏ß‡∏±‡∏ô‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á</div>
<div id="sales-history">
<p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏Å‡πà‡∏≠‡∏ô</p>
</div>
</div>

<!-- ‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ì‡πå‡∏ß‡∏±‡∏ô‡∏û‡∏£‡∏∏‡πà‡∏á‡∏ô‡∏µ‡πâ -->
<div class="card">
<div class="card-title">üîÆ AI ‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ì‡πå‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏ß‡∏±‡∏ô‡∏û‡∏£‡∏∏‡πà‡∏á‡∏ô‡∏µ‡πâ</div>
<div id="prediction-result">
<div class="prediction-highlight">
<div class="prediction-amount" id="predicted-amount">-- ‡πÑ‡∏°‡πâ</div>
<div class="prediction-reason" id="prediction-reason">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 3 ‡∏ß‡∏±‡∏ô ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏£‡∏∞‡∏ö‡∏ö AI ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÑ‡∏î‡πâ‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥</div>
</div>
</div>
</div>
</div>

<!-- ‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤ AI -->
<div id="advisor-tab" class="tab-content">
<div class="card">
<div class="card-title">üí¨ ‡πÅ‡∏ä‡∏ó‡∏Å‡∏±‡∏ö‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤ AI</div>
<div class="chat-ui">
<div class="chat-messages" id="chat-messages">
<div class="message ai">
‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö! ‡∏ú‡∏°‡∏Ñ‡∏∑‡∏≠ AI ‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞ ü§ñ
<br><br>
‡∏ú‡∏°‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏´‡πâ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ó‡∏±‡πâ‡∏á‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á:
<br>‚Ä¢ ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô üí∞
<br>‚Ä¢ ‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏ï‡∏•‡∏≤‡∏î üìà
<br>‚Ä¢ ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û üéØ
<br>‚Ä¢ ‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏°‡∏∑‡∏≠‡∏Å‡∏±‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏ï‡πà‡∏≤‡∏á‡πÜ ‚ö°
<br><br>
‡∏•‡∏≠‡∏á‡∏ñ‡∏≤‡∏°‡∏ú‡∏°‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á! ü•¢
<div class="message-time">‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà</div>
</div>
</div>
<div class="chat-input-container">
<input type="text" class="chat-input" id="chat-input" placeholder="‡∏ñ‡∏≤‡∏°‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á...">
<button class="chat-send-btn" id="chat-send-btn">
<svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2">
<line x1="22" y1="2" x2="11" y2="13"></line>
<polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
</svg>
</button>
</div>
</div>
</div>

<div class="card">
<div class="card-title">üí° ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ï‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå</div>
<div class="strategy-item">
<div class="strategy-icon">
<svg viewBox="0 0 24 24" fill="none" stroke="#FF5722" stroke-width="2">
<path d="M20 16.2A5 5 0 0 0 18 7h-1.26a8 8 0 1 0-11.62 9"></path>
<line x1="8" y1="16" x2="8.01" y2="16"></line>
<line x1="8" y1="20" x2="8.01" y2="20"></line>
<line x1="12" y1="18" x2="12.01" y2="18"></line>
<line x1="12" y1="22" x2="12.01" y2="22"></line>
<line x1="16" y1="16" x2="16.01" y2="16"></line>
<line x1="16" y1="20" x2="16.01" y2="20"></line>
</svg>
</div>
<div class="strategy-content">
<h4>üåßÔ∏è ‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå‡∏ß‡∏±‡∏ô‡∏ù‡∏ô‡∏ï‡∏Å</h4>
<p>‚Ä¢ ‡∏ó‡∏≥‡∏ó‡∏µ‡πà‡∏Å‡∏±‡∏ô‡∏ù‡∏ô‡πÄ‡∏•‡πá‡∏Å‡πÜ ‡πÉ‡∏´‡πâ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏¢‡∏∑‡∏ô‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏µ‡∏¢‡∏Å ‡∏´‡∏£‡∏∑‡∏≠‡∏°‡∏µ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏ñ‡∏∂‡∏á‡∏£‡∏ñ</p>
<p>‚Ä¢ ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏ñ‡∏∏‡∏á‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å‡πÉ‡∏´‡πâ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÉ‡∏™‡πà‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á‡∏Å‡∏•‡∏±‡∏ö‡∏ö‡πâ‡∏≤‡∏ô</p>
<p>‚Ä¢ ‡∏•‡∏î‡∏£‡∏≤‡∏Ñ‡∏≤‡∏•‡∏á 1-2 ‡∏ö‡∏≤‡∏ó‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏∂‡∏á‡∏î‡∏π‡∏î‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ ‡∏´‡∏£‡∏∑‡∏≠‡∏ó‡∏≥‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏© "‡∏ã‡∏∑‡πâ‡∏≠ 10 ‡πÅ‡∏ñ‡∏° 1 ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ß‡∏±‡∏ô‡∏ù‡∏ô‡∏ï‡∏Å"</p>
</div>
</div>

<div class="strategy-item">
<div class="strategy-icon">
<svg viewBox="0 0 24 24" fill="none" stroke="#FF5722" stroke-width="2">
<path d="M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20z"></path>
<path d="M16 16s-1.5-2-4-2-4 2-4 2"></path>
<line x1="9" y1="9" x2="9.01" y2="9"></line>
<line x1="15" y1="9" x2="15.01" y2="9"></line>
</svg>
</div>
<div class="strategy-content">
<h4>üìâ ‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå‡πÄ‡∏®‡∏£‡∏©‡∏ê‡∏Å‡∏¥‡∏à‡∏ä‡πà‡∏ß‡∏á‡πÅ‡∏¢‡πà</h4>
<p>‚Ä¢ ‡∏•‡∏î‡∏Ç‡∏ô‡∏≤‡∏î‡πÑ‡∏°‡πâ‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢‡πÅ‡∏ï‡πà‡∏Ñ‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏î‡∏¥‡∏° ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô ‡πÄ‡∏ä‡πà‡∏ô ‡∏ã‡∏∑‡πâ‡∏≠ 5 ‡πÑ‡∏°‡πâ‡πÅ‡∏ñ‡∏° 1</p>
<p>‚Ä¢ ‡πÄ‡∏ô‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏•‡∏≤‡∏î‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ‡∏Ñ‡∏≥‡∏ß‡πà‡∏≤ "‡∏≠‡∏¥‡πà‡∏°‡∏Ñ‡∏∏‡πâ‡∏°" ‡∏´‡∏£‡∏∑‡∏≠ "‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î"</p>
<p>‚Ä¢ ‡∏ô‡∏≥‡πÄ‡∏™‡∏ô‡∏≠‡∏ä‡∏∏‡∏î‡∏£‡∏≤‡∏Ñ‡∏≤‡∏û‡∏¥‡πÄ‡∏®‡∏© ‡πÄ‡∏ä‡πà‡∏ô ‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á + ‡∏Ç‡πâ‡∏≤‡∏ß‡πÄ‡∏´‡∏ô‡∏µ‡∏¢‡∏ß ‡∏´‡∏£‡∏∑‡∏≠ ‡πÄ‡∏ã‡πá‡∏ï‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß</p>
</div>
</div>

<div class="strategy-item">
<div class="strategy-icon">
<svg viewBox="0 0 24 24" fill="none" stroke="#FF5722" stroke-width="2">
<circle cx="12" cy="12" r="5"></circle>
<line x1="12" y1="1" x2="12" y2="3"></line>
<line x1="12" y1="21" x2="12" y2="23"></line>
<line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
<line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
<line x1="1" y1="12" x2="3" y2="12"></line>
<line x1="21" y1="12" x2="23" y2="12"></line>
<line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
<line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
</svg>
</div>
<div class="strategy-content">
<h4>‚òÄÔ∏è ‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏£‡πâ‡∏≠‡∏ô‡∏à‡∏±‡∏î</h4>
<p>‚Ä¢ ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏ô‡πâ‡∏≥‡∏î‡∏∑‡πà‡∏°‡πÄ‡∏¢‡πá‡∏ô‡πÜ ‡πÑ‡∏ß‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏ü‡∏£‡∏µ ‡∏´‡∏£‡∏∑‡∏≠‡∏Ç‡∏≤‡∏¢‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ñ‡∏π‡∏Å</p>
<p>‚Ä¢ ‡πÉ‡∏ä‡πâ‡∏£‡πà‡∏°‡∏ö‡∏±‡∏á‡πÅ‡∏î‡∏î‡πÉ‡∏´‡πâ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ ‡πÅ‡∏•‡∏∞‡∏õ‡∏¥‡πâ‡∏á‡∏´‡∏°‡∏π‡∏™‡∏î‡πÉ‡∏´‡∏°‡πà‡∏ï‡∏•‡∏≠‡∏î ‡πÑ‡∏°‡πà‡∏õ‡∏¥‡πâ‡∏á‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ‡∏ô‡∏≤‡∏ô‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ</p>
<p>‚Ä¢ ‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π‡∏ô‡πâ‡∏≥‡πÅ‡∏Ç‡πá‡∏á‡πÑ‡∏™‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°‡πÄ‡∏¢‡πá‡∏ô‡πÜ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ</p>
</div>
</div>
</div>
</div>

<!-- ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ -->
<div id="settings-tab" class="tab-content">
<div class="card">
<div class="card-title">üîë ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ API Key ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö AI</div>
<div class="form-group">
<label for="api-provider">‡∏ú‡∏π‡πâ‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ AI</label>
<select id="api-provider">
<option value="openai">OpenAI (GPT-4)</option>
<option value="anthropic">Anthropic (Claude)</option>
<option value="gemini">Google Gemini</option>
</select>
</div>
<div class="form-group">
<label for="api-key">API Key</label>
<input type="password" id="api-key" placeholder="‡πÉ‡∏™‡πà API Key ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì">
</div>
<button class="action-btn" id="save-api-key">üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å API Key</button>
<div class="warning-box" style="margin-top: 15px;">
<p><strong>üîí ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢:</strong> API Key ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô Firebase ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô ‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡πÅ‡∏•‡∏∞‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡πÑ‡∏î‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Ñ‡∏∏‡∏ì</p>
</div>
</div>

<div class="card">
<div class="card-title">üè™ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤</div>
<div class="form-group">
<label for="business-name">‡∏ä‡∏∑‡πà‡∏≠‡∏£‡πâ‡∏≤‡∏ô</label>
<input type="text" id="business-name" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á‡∏õ‡πâ‡∏≤‡∏™‡∏°‡∏´‡∏ß‡∏±‡∏á">
</div>
<div class="form-group">
<label for="business-location">‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡∏£‡πâ‡∏≤‡∏ô</label>
<input type="text" id="business-location" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡∏£‡∏≤‡∏¢, ‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û, ‡∏Ç‡∏≠‡∏ô‡πÅ‡∏Å‡πà‡∏ô">
</div>
<div class="form-group">
<label for="business-type-setting">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏´‡∏•‡∏±‡∏Å</label>
<select id="business-type-setting">
<option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à</option>
<option value="producer">‡∏ú‡∏•‡∏¥‡∏ï‡πÄ‡∏≠‡∏á</option>
<option value="reseller">‡∏ã‡∏∑‡πâ‡∏≠‡∏°‡∏≤‡∏Ç‡∏≤‡∏¢</option>
<option value="franchise">‡πÅ‡∏ü‡∏£‡∏ô‡πÑ‡∏ä‡∏™‡πå</option>
</select>
</div>
<div class="form-group">
<label for="business-description">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏£‡πâ‡∏≤‡∏ô</label>
<textarea id="business-description" rows="3" placeholder="‡πÄ‡∏•‡πà‡∏≤‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏£‡πâ‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì, ‡∏à‡∏∏‡∏î‡πÄ‡∏î‡πà‡∏ô, ‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå, ‡∏™‡∏π‡∏ï‡∏£‡∏û‡∏¥‡πÄ‡∏®‡∏©"></textarea>
</div>
<button class="action-btn" id="save-business-info">üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡πâ‡∏≤‡∏ô</button>
</div>

<div class="card">
<div class="card-title">üîî ‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</div>
<div class="form-group">
<label>
<input type="checkbox" id="weather-alert" checked>
üå§Ô∏è ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå
</label>
</div>
<div class="form-group">
<label>
<input type="checkbox" id="price-alert" checked>
üí∞ ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö
</label>
</div>
<div class="form-group">
<label>
<input type="checkbox" id="event-alert" checked>
üéä ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÄ‡∏ó‡∏®‡∏Å‡∏≤‡∏•‡πÅ‡∏•‡∏∞‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡∏û‡∏¥‡πÄ‡∏®‡∏©
</label>
</div>
<div class="form-group">
<label>
<input type="checkbox" id="sales-reminder" checked>
üìä ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÉ‡∏´‡πâ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô
</label>
</div>
<button class="action-btn" id="save-alert-settings">üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</button>
</div>

<div class="card">
<div class="card-title">üì± ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏≠‡∏õ‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô</div>
<div class="highlight-box">
<h4>üöÄ Smart Pork Skewer Business Advisor AI v4.0</h4>
<p><strong>‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥‡∏´‡∏•‡∏±‡∏Å:</strong></p>
<ul style="padding-left: 20px; margin-top: 10px;">
<li>üßÆ ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏Ñ‡∏≤‡πÅ‡∏ö‡∏ö‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</li>
<li>üìä ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡πÅ‡∏•‡∏∞‡∏à‡∏∏‡∏î‡∏Ñ‡∏∏‡πâ‡∏°‡∏ó‡∏∏‡∏ô</li>
<li>ü§ñ AI ‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡πÅ‡∏•‡∏∞‡πÅ‡∏ä‡∏ó‡∏ö‡∏≠‡∏ó</li>
<li>üìà ‡∏£‡∏∞‡∏ö‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ì‡πå</li>
<li>üå§Ô∏è ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</li>
<li>üíæ ‡∏£‡∏∞‡∏ö‡∏ö‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Firebase</li>
</ul>
</div>
<div class="success-box" style="margin-top: 15px;">
<p><strong>üéØ ‡∏û‡∏±‡∏í‡∏ô‡∏≤‡πÇ‡∏î‡∏¢:</strong> AI ‡πÅ‡∏•‡∏∞ Firebase Technology</p>
<p><strong>üìÖ ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î:</strong> ‡∏û‡∏§‡∏©‡∏†‡∏≤‡∏Ñ‡∏° 2025</p>
<p><strong>üîß ‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô:</strong> 4.0 - Business Intelligence Edition</p>
</div>
</div>
</div>

<div class="footer">
<p><strong>üè™ Smart Pork Skewer Business Advisor AI v4.0</strong></p>
<p>‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞ - ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏Ç‡∏≠‡∏á‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏Ñ‡∏∏‡∏ì</p>
<p>‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏î‡πâ‡∏ß‡∏¢ ‚ù§Ô∏è ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ AI ‡πÅ‡∏•‡∏∞ Firebase Technology</p>
</div>
</div>

<script>
// =====================
// ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏î‡πâ‡∏ß‡∏¢ Firebase (‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á)
// =====================

const UserDataManager = {
userData: {
profile: {
businessName: '',
location: '',
description: '',
businessType: ''
},
preferences: {
weatherAlert: true,
priceAlert: true,
eventAlert: true,
salesReminder: true
},
apiSettings: {
provider: 'openai',
apiKey: ''
},
businessData: {
selectedType: '',
lastCalculation: null,
averageDailyVolume: 200
},
lastPorkPrice: 190,
lastUpdate: new Date().toISOString()
},

currentUserId: null,
isInitialized: false,

// ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö Auth
initAuth: function() {
return new Promise((resolve, reject) => {
auth.onAuthStateChanged(async (user) => {
if (user) {
this.currentUserId = user.uid;
console.log('User logged in:', this.currentUserId);
await this.loadUserData();
this.isInitialized = true;
resolve(user);
} else {
try {
const result = await auth.signInAnonymously();
this.currentUserId = result.user.uid;
console.log('Anonymous login successful:', this.currentUserId);
this.isInitialized = true;
resolve(result.user);
} catch (error) {
console.error('Authentication failed:', error);
reject(error);
}
}
});
});
},

// ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏á Firestore
saveUserData: async function() {
if (!this.isInitialized || !this.currentUserId) {
console.log('Not ready to save data');
return false;
}

try {
await db.collection('users').doc(this.currentUserId).set(this.userData);
console.log('Data saved successfully to Firebase');
return true;
} catch (error) {
console.error('Error saving data to Firebase:', error);
return false;
}
},

// ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å Firestore
loadUserData: async function() {
if (!this.currentUserId) {
console.log('No user ID available');
return false;
}

try {
const doc = await db.collection('users').doc(this.currentUserId).get();
if (doc.exists) {
this.userData = { ...this.userData, ...doc.data() };
console.log('Data loaded from Firebase:', this.userData);
this.updateUIWithUserData();
return true;
} else {
console.log('No user data found, using defaults');
await this.saveUserData();
return false;
}
} catch (error) {
console.error('Error loading from Firebase:', error);
return false;
}
},

// ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï UI ‡∏î‡πâ‡∏ß‡∏¢‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
updateUIWithUserData: function() {
const elements = {
'api-provider': this.userData.apiSettings.provider,
'api-key': this.userData.apiSettings.apiKey,
'business-name': this.userData.profile.businessName,
'business-location': this.userData.profile.location,
'business-description': this.userData.profile.description,
'business-type-setting': this.userData.profile.businessType,
'weather-alert': this.userData.preferences.weatherAlert,
'price-alert': this.userData.preferences.priceAlert,
'event-alert': this.userData.preferences.eventAlert,
'sales-reminder': this.userData.preferences.salesReminder
};

Object.entries(elements).forEach(([id, value]) => {
const element = document.getElementById(id);
if (element) {
if (element.type === 'checkbox') {
element.checked = value;
} else {
element.value = value || '';
}
}
});

updateApiKeyNotification();
},

updateBusinessInfo: async function(name, location, description, businessType) {
this.userData.profile.businessName = name;
this.userData.profile.location = location;
this.userData.profile.description = description;
this.userData.profile.businessType = businessType;
return await this.saveUserData();
},

updateAlertSettings: async function(weatherAlert, priceAlert, eventAlert, salesReminder) {
this.userData.preferences.weatherAlert = weatherAlert;
this.userData.preferences.priceAlert = priceAlert;
this.userData.preferences.eventAlert = eventAlert;
this.userData.preferences.salesReminder = salesReminder;
return await this.saveUserData();
},

updateApiSettings: async function(provider, apiKey) {
this.userData.apiSettings.provider = provider;
this.userData.apiSettings.apiKey = apiKey;
const result = await this.saveUserData();
updateApiKeyNotification();
return result;
},

updateBusinessData: async function(selectedType, calculationData) {
this.userData.businessData.selectedType = selectedType;
this.userData.businessData.lastCalculation = calculationData;
return await this.saveUserData();
},

hasApiKey: function() {
return !!this.userData.apiSettings.apiKey;
}
};

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô API Key
function updateApiKeyNotification() {
const notification = document.getElementById('api-key-notification');
if (notification) {
notification.style.display = UserDataManager.hasApiKey() ? 'none' : 'flex';
}
}

// =====================
// ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢ (‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á)
// =====================

const SalesManager = {
// ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢
saveDailySales: async function(salesData) {
if (!UserDataManager.isInitialized || !UserDataManager.currentUserId) {
console.log('User not initialized');
return false;
}

try {
const revenue = salesData.sold * salesData.averagePrice;
const sellThroughRate = Math.round((salesData.sold / salesData.prepared) * 100);

await db.collection('daily_sales').add({
userId: UserDataManager.currentUserId,
date: salesData.date,
prepared: salesData.prepared,
sold: salesData.sold,
leftover: salesData.prepared - salesData.sold,
averagePrice: salesData.averagePrice,
revenue: revenue,
weather: salesData.weather,
notes: salesData.notes,
sellThroughRate: sellThroughRate,
timestamp: firebase.firestore.FieldValue.serverTimestamp()
});

console.log('Sales data saved successfully');
return true;
} catch (error) {
console.error('Error saving sales data:', error);
return false;
}
},

// ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• 7 ‡∏ß‡∏±‡∏ô‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á
getLast7DaysSales: async function() {
if (!UserDataManager.currentUserId) {
return [];
}

try {
const sevenDaysAgo = new Date();
sevenDaysAgo.setDate(sevenDaysAgo.getDate() - 7);

const snapshot = await db.collection('daily_sales')
.where('userId', '==', UserDataManager.currentUserId)
.where('date', '>=', sevenDaysAgo.toISOString().split('T')[0])
.orderBy('date', 'desc')
.limit(7)
.get();

return snapshot.docs.map(doc => doc.data());
} catch (error) {
console.error('Error getting sales history:', error);
return [];
}
},

// ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
getAllSalesData: async function() {
if (!UserDataManager.currentUserId) {
return [];
}

try {
const snapshot = await db.collection('daily_sales')
.where('userId', '==', UserDataManager.currentUserId)
.orderBy('date', 'desc')
.get();

return snapshot.docs.map(doc => doc.data());
} catch (error) {
console.error('Error getting all sales data:', error);
return [];
}
},

// ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Å‡∏≤‡∏£‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ì‡πå (AI Enhanced)
calculatePrediction: function(salesHistory) {
if (salesHistory.length < 3) {
return {
amount: 0,
reason: '‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 3 ‡∏ß‡∏±‡∏ô ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏£‡∏∞‡∏ö‡∏ö AI ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÑ‡∏î‡πâ‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥',
confidence: '‡∏ï‡πà‡∏≥',
recommendations: ['‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á', '‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï‡πÅ‡∏û‡∏ó‡πÄ‡∏ó‡∏¥‡∏£‡πå‡∏ô‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢', '‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏õ‡∏±‡∏à‡∏à‡∏±‡∏¢‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°']
};
}

// ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡πÅ‡∏•‡∏∞‡πÅ‡∏ô‡∏ß‡πÇ‡∏ô‡πâ‡∏°
const avgSold = salesHistory.reduce((sum, day) => sum + day.sold, 0) / salesHistory.length;
const avgPrepared = salesHistory.reduce((sum, day) => sum + day.prepared, 0) / salesHistory.length;
const avgRevenue = salesHistory.reduce((sum, day) => sum + (day.revenue || 0), 0) / salesHistory.length;

// ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÅ‡∏û‡∏ó‡πÄ‡∏ó‡∏¥‡∏£‡πå‡∏ô‡∏ß‡∏±‡∏ô‡πÉ‡∏ô‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå
const tomorrow = new Date();
tomorrow.setDate(tomorrow.getDate() + 1);
const dayOfWeek = tomorrow.getDay(); // 0=‡∏≠‡∏≤‡∏ó‡∏¥‡∏ó‡∏¢‡πå, 6=‡πÄ‡∏™‡∏≤‡∏£‡πå

let prediction = Math.round(avgSold);
let reasonParts = [];
let recommendations = [];

// ‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏≤‡∏°‡∏ß‡∏±‡∏ô‡πÉ‡∏ô‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå
if (dayOfWeek === 0 || dayOfWeek === 6) {
prediction = Math.round(avgSold * 0.75); // ‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î‡∏•‡∏î 25%
reasonParts.push('‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î (‡∏•‡∏î 25%)');
recommendations.push('‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î');
} else if (dayOfWeek === 5) {
prediction = Math.round(avgSold * 1.15); // ‡∏ß‡∏±‡∏ô‡∏®‡∏∏‡∏Å‡∏£‡πå‡πÄ‡∏û‡∏¥‡πà‡∏° 15%
reasonParts.push('‡∏ß‡∏±‡∏ô‡∏®‡∏∏‡∏Å‡∏£‡πå (‡πÄ‡∏û‡∏¥‡πà‡∏° 15%)');
recommendations.push('‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Ç‡∏≠‡∏á‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏∂‡πâ‡∏ô');
} else if (dayOfWeek >= 1 && dayOfWeek <= 4) {
prediction = Math.round(avgSold * 1.05); // ‡∏ß‡∏±‡∏ô‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå-‡∏û‡∏§‡∏´‡∏±‡∏™
reasonParts.push('‡∏ß‡∏±‡∏ô‡∏ó‡∏≥‡∏á‡∏≤‡∏ô (‡πÄ‡∏û‡∏¥‡πà‡∏° 5%)');
}

// ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÄ‡∏ó‡∏£‡∏ô‡∏î‡πå 3 ‡∏ß‡∏±‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
if (salesHistory.length >= 3) {
const last3Days = salesHistory.slice(0, 3);
const trend = (last3Days[0].sold - last3Days[2].sold) / 2;

if (Math.abs(trend) > 10) {
prediction += Math.round(trend * 0.7); // ‡πÉ‡∏´‡πâ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡πÄ‡∏ó‡∏£‡∏ô‡∏î‡πå 70%
if (trend > 0) {
reasonParts.push('‡πÄ‡∏ó‡∏£‡∏ô‡∏î‡πå‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏∂‡πâ‡∏ô');
recommendations.push('‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏ú‡∏•‡∏¥‡∏ï');
} else {
reasonParts.push('‡πÄ‡∏ó‡∏£‡∏ô‡∏î‡πå‡∏•‡∏î‡∏•‡∏á');
recommendations.push('‡∏õ‡∏£‡∏±‡∏ö‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡∏´‡∏£‡∏∑‡∏≠‡∏•‡∏î‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô');
}
}
}

// ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏® (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•)
const weatherPattern = salesHistory.reduce((acc, day) => {
acc[day.weather] = (acc[day.weather] || 0) + day.sold;
return acc;
}, {});

// ‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡πÑ‡∏ß‡πâ 15% ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏Ç‡∏≤‡∏î‡πÅ‡∏Ñ‡∏•‡∏ô
const recommendedAmount = Math.max(Math.round(prediction * 1.15), Math.round(avgSold * 0.6));

// ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏±‡πà‡∏ô
const avgSellThrough = salesHistory.reduce((sum, day) => sum + day.sellThroughRate, 0) / salesHistory.length;
let confidence = '‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á';

if (salesHistory.length >= 7 && avgSellThrough >= 85) {
confidence = '‡∏™‡∏π‡∏á';
recommendations.push('‡πÅ‡∏û‡∏ó‡πÄ‡∏ó‡∏¥‡∏£‡πå‡∏ô‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏°‡πà‡∏≥‡πÄ‡∏™‡∏°‡∏≠');
} else if (avgSellThrough < 60) {
confidence = '‡∏ï‡πà‡∏≥';
recommendations.push('‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÉ‡∏´‡πâ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°');
} else if (salesHistory.length >= 5) {
confidence = '‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á';
}

// ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•
const reason = `‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ${salesHistory.length} ‡∏ß‡∏±‡∏ô ‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏Ç‡∏≤‡∏¢ ${Math.round(avgSold)} ‡πÑ‡∏°‡πâ/‡∏ß‡∏±‡∏ô` +
(reasonParts.length > 0 ? ` (${reasonParts.join(', ')})` : '') +
` ‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢ ${Math.round(avgRevenue)} ‡∏ö‡∏≤‡∏ó/‡∏ß‡∏±‡∏ô`;

return {
amount: recommendedAmount,
reason: reason,
confidence: confidence,
avgSold: Math.round(avgSold),
avgRevenue: Math.round(avgRevenue),
sellThroughRate: Math.round(avgSellThrough),
recommendations: recommendations
};
},

// ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏£‡∏∏‡∏õ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î
generateDashboardSummary: function(salesHistory) {
if (salesHistory.length === 0) {
return {
totalDays: 0,
totalSold: 0,
totalRevenue: 0,
avgSold: 0,
avgRevenue: 0,
totalLeftover: 0,
avgSellThrough: 0,
bestDay: null,
worstDay: null,
growthTrend: 0
};
}

const totalSold = salesHistory.reduce((sum, day) => sum + day.sold, 0);
const totalPrepared = salesHistory.reduce((sum, day) => sum + day.prepared, 0);
const totalRevenue = salesHistory.reduce((sum, day) => sum + (day.revenue || 0), 0);
const totalLeftover = salesHistory.reduce((sum, day) => sum + day.leftover, 0);

const avgSold = Math.round(totalSold / salesHistory.length);
const avgRevenue = Math.round(totalRevenue / salesHistory.length);
const avgSellThrough = Math.round((totalSold / totalPrepared) * 100);

const bestDay = salesHistory.reduce((best, day) =>
day.sold > best.sold ? day : best, salesHistory[0]);
const worstDay = salesHistory.reduce((worst, day) =>
day.sold < worst.sold ? day : worst, salesHistory[0]);

// ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÅ‡∏ô‡∏ß‡πÇ‡∏ô‡πâ‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡∏¥‡∏ö‡πÇ‡∏ï
let growthTrend = 0;
if (salesHistory.length >= 3) {
const firstHalf = salesHistory.slice(Math.floor(salesHistory.length / 2));
const secondHalf = salesHistory.slice(0, Math.floor(salesHistory.length / 2));
const firstAvg = firstHalf.reduce((sum, day) => sum + day.sold, 0) / firstHalf.length;
const secondAvg = secondHalf.reduce((sum, day) => sum + day.sold, 0) / secondHalf.length;
growthTrend = Math.round(((secondAvg - firstAvg) / firstAvg) * 100);
}

return {
totalDays: salesHistory.length,
totalSold: totalSold,
totalRevenue: totalRevenue,
avgSold: avgSold,
avgRevenue: avgRevenue,
totalLeftover: totalLeftover,
avgSellThrough: avgSellThrough,
bestDay: bestDay,
worstDay: worstDay,
growthTrend: growthTrend
};
}
};

// =====================
// Business Intelligence Engine (‡πÉ‡∏´‡∏°‡πà)
// =====================

const BusinessEngine = {
// ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à
businessModels: {
producer: {
name: '‡∏ú‡∏•‡∏¥‡∏ï‡πÄ‡∏≠‡∏á',
description: '‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô',
advantages: ['‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏™‡∏π‡∏á', '‡∏Å‡∏≥‡πÑ‡∏£‡∏î‡∏µ', '‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô'],
challenges: ['‡∏ï‡πâ‡∏≠‡∏á‡∏•‡∏á‡∏ó‡∏∏‡∏ô‡∏™‡∏π‡∏á', '‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏ó‡∏±‡∏Å‡∏©‡∏∞', '‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤‡∏°‡∏≤‡∏Å'],
fixedCosts: ['‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏õ‡∏¥‡πâ‡∏á', '‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå', '‡∏Ñ‡πà‡∏≤‡πÄ‡∏ä‡πà‡∏≤‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà'],
variableCosts: ['‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏°‡∏π', '‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏õ‡∏£‡∏∏‡∏á', '‡πÑ‡∏°‡πâ‡∏à‡∏¥‡πâ‡∏°', '‡πÅ‡∏Å‡πä‡∏™', '‡πÅ‡∏£‡∏á‡∏á‡∏≤‡∏ô']
},
reseller: {
name: '‡∏ã‡∏∑‡πâ‡∏≠‡∏°‡∏≤‡∏Ç‡∏≤‡∏¢',
description: '‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏á‡πà‡∏≤‡∏¢ ‡∏•‡∏á‡∏ó‡∏∏‡∏ô‡∏ô‡πâ‡∏≠‡∏¢',
advantages: ['‡∏•‡∏á‡∏ó‡∏∏‡∏ô‡∏ô‡πâ‡∏≠‡∏¢', '‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏á‡πà‡∏≤‡∏¢', '‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏ï‡πà‡∏≥'],
challenges: ['‡∏Å‡∏≥‡πÑ‡∏£‡∏ô‡πâ‡∏≠‡∏¢', '‡∏Ç‡∏∂‡πâ‡∏ô‡∏Å‡∏±‡∏ö‡∏ã‡∏±‡∏û‡∏û‡∏•‡∏≤‡∏¢‡πÄ‡∏≠‡∏≠‡∏£‡πå', '‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô‡∏™‡∏π‡∏á'],
fixedCosts: ['‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏≠‡∏∏‡πà‡∏ô', '‡∏Ñ‡πà‡∏≤‡πÄ‡∏ä‡πà‡∏≤‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà'],
variableCosts: ['‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏ã‡∏∑‡πâ‡∏≠', '‡∏Ç‡∏ô‡∏™‡πà‡∏á', '‡πÄ‡∏Å‡πá‡∏ö‡∏£‡∏±‡∏Å‡∏©‡∏≤', '‡πÅ‡∏Å‡πä‡∏™‡∏≠‡∏∏‡πà‡∏ô']
},
franchise: {
name: '‡πÅ‡∏ü‡∏£‡∏ô‡πÑ‡∏ä‡∏™‡πå',
description: '‡∏°‡∏µ‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏ô‡∏±‡∏ö‡∏™‡∏ô‡∏∏‡∏ô ‡πÅ‡∏ö‡∏£‡∏ô‡∏î‡πå‡∏ó‡∏µ‡πà‡∏£‡∏π‡πâ‡∏à‡∏±‡∏Å',
advantages: ['‡πÅ‡∏ö‡∏£‡∏ô‡∏î‡πå‡∏ó‡∏µ‡πà‡∏£‡∏π‡πâ‡∏à‡∏±‡∏Å', '‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏ô‡∏±‡∏ö‡∏™‡∏ô‡∏∏‡∏ô', '‡∏Å‡∏≤‡∏£‡∏ï‡∏•‡∏≤‡∏î‡∏£‡πà‡∏ß‡∏°'],
challenges: ['‡∏Ñ‡πà‡∏≤‡πÅ‡∏ü‡∏£‡∏ô‡πÑ‡∏ä‡∏™‡πå', '‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô', '‡∏Å‡∏≥‡πÑ‡∏£‡∏ñ‡∏π‡∏Å‡πÅ‡∏ö‡πà‡∏á'],
fixedCosts: ['‡∏Ñ‡πà‡∏≤‡πÅ‡∏ü‡∏£‡∏ô‡πÑ‡∏ä‡∏™‡πå‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô', '‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏ï‡∏≤‡∏°‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô', '‡∏Ñ‡πà‡∏≤‡πÄ‡∏ä‡πà‡∏≤'],
variableCosts: ['‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤', '‡∏Ñ‡πà‡∏≤‡πÅ‡∏ü‡∏£‡∏ô‡πÑ‡∏ä‡∏™‡πå', '‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£‡∏ï‡∏•‡∏≤‡∏î', '‡∏Ñ‡πà‡∏≤‡∏™‡∏ô‡∏±‡∏ö‡∏™‡∏ô‡∏∏‡∏ô']
}
},

// ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏ï‡∏≤‡∏°‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à
calculateCosts: function(businessType, formData, marketData) {
let costs = { breakdown: [], total: 0 };

switch (businessType) {
case 'producer':
const meatCost = (formData.meatPrice / 1000) * formData.meatWeight;
costs.breakdown = [
{ item: '‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏°‡∏π', cost: meatCost, note: `${formData.meatWeight}g √ó ${formData.meatPrice}/kg` },
{ item: '‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏õ‡∏£‡∏∏‡∏á‡∏£‡∏™', cost: formData.seasoningCost, note: '‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏• ‡∏ã‡∏µ‡∏≠‡∏¥‡πä‡∏ß ‡∏Å‡∏£‡∏∞‡πÄ‡∏ó‡∏µ‡∏¢‡∏°' },
{ item: '‡πÑ‡∏°‡πâ‡∏à‡∏¥‡πâ‡∏°', cost: formData.stickCost, note: '‡πÑ‡∏°‡πâ‡πÑ‡∏ú‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πâ‡∏™‡∏ô' },
{ item: '‡∏Ñ‡πà‡∏≤‡πÅ‡∏Å‡πä‡∏™', cost: formData.gasCost, note: '‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏¥‡πâ‡∏á' },
{ item: '‡∏Ñ‡πà‡∏≤‡πÅ‡∏£‡∏á‡∏á‡∏≤‡∏ô', cost: formData.laborCost, note: '‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏° ‡∏õ‡∏¥‡πâ‡∏á ‡∏Ç‡∏≤‡∏¢' }
];
break;

case 'reseller':
costs.breakdown = [
{ item: '‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏ã‡∏∑‡πâ‡∏≠', cost: formData.buyPrice, note: '‡∏à‡∏≤‡∏Å‡∏ú‡∏π‡πâ‡∏ú‡∏•‡∏¥‡∏ï' },
{ item: '‡∏Ñ‡πà‡∏≤‡∏Ç‡∏ô‡∏™‡πà‡∏á', cost: formData.transportCost, note: '‡πÄ‡∏ö‡∏ô‡∏ã‡∏¥‡∏ô ‡∏Ñ‡πà‡∏≤‡∏™‡πà‡∏á' },
{ item: '‡∏Ñ‡πà‡∏≤‡πÄ‡∏Å‡πá‡∏ö‡∏£‡∏±‡∏Å‡∏©‡∏≤', cost: formData.storageCost, note: '‡∏ï‡∏π‡πâ‡πÄ‡∏¢‡πá‡∏ô ‡∏ô‡πâ‡∏≥‡πÅ‡∏Ç‡πá‡∏á' },
{ item: '‡∏Ñ‡πà‡∏≤‡πÅ‡∏Å‡πä‡∏™‡∏≠‡∏∏‡πà‡∏ô', cost: formData.gasCost, note: '‡∏≠‡∏∏‡πà‡∏ô‡πÉ‡∏´‡πâ‡∏£‡πâ‡∏≠‡∏ô' }
];
break;

case 'franchise':
costs.breakdown = [
{ item: '‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤', cost: formData.productCost, note: '‡∏à‡∏≤‡∏Å‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏Å‡∏•‡∏≤‡∏á' },
{ item: '‡∏Ñ‡πà‡∏≤‡πÅ‡∏ü‡∏£‡∏ô‡πÑ‡∏ä‡∏™‡πå', cost: formData.royalty, note: '‡∏ï‡∏≤‡∏°‡∏™‡∏±‡∏ç‡∏ç‡∏≤' },
{ item: '‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£‡∏ï‡∏•‡∏≤‡∏î', cost: formData.marketing, note: '‡πÇ‡∏Ü‡∏©‡∏ì‡∏≤‡∏£‡πà‡∏ß‡∏°' },
{ item: '‡∏Ñ‡πà‡∏≤‡∏™‡∏ô‡∏±‡∏ö‡∏™‡∏ô‡∏∏‡∏ô', cost: formData.support, note: '‡∏£‡∏∞‡∏ö‡∏ö IT, ‡∏≠‡∏ö‡∏£‡∏°' }
];
break;
}

costs.total = costs.breakdown.reduce((sum, item) => sum + item.cost, 0);
return costs;
},

// ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏£‡∏≤‡∏Ñ‡∏≤‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥
analyzePricing: function(costs, marketData, businessType) {
const baseCost = costs.total;

// ‡∏õ‡∏±‡∏à‡∏à‡∏±‡∏¢‡∏õ‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏Ñ‡∏≤
const locationMultiplier = {
'market': 1.0,
'street': 1.1,
'community': 1.05,
'school': 1.15,
'office': 1.2,
'mall': 1.3
};

const weatherMultiplier = {
'sunny': 1.0,
'cloudy': 0.98,
'rainy': 0.92
};

const economyMultiplier = {
'excellent': 1.15,
'good': 1.05,
'normal': 1.0,
'bad': 0.95
};

const businessTypeMultiplier = {
'producer': 1.0,    // ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡πÑ‡∏î‡πâ
'reseller': 0.95,   // ‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô‡∏™‡∏π‡∏á
'franchise': 1.1    // ‡πÅ‡∏ö‡∏£‡∏ô‡∏î‡πå‡πÄ‡∏ô‡∏°
};

// ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥
const locationFactor = locationMultiplier[marketData.location] || 1.0;
const weatherFactor = weatherMultiplier[marketData.weather] || 1.0;
const economyFactor = economyMultiplier[marketData.economy] || 1.0;
const businessFactor = businessTypeMultiplier[businessType] || 1.0;

// ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡πÜ
const conservativePrice = Math.ceil(baseCost * 1.3 * locationFactor * weatherFactor * economyFactor * businessFactor);
const recommendedPrice = Math.ceil(baseCost * 1.6 * locationFactor * weatherFactor * economyFactor * businessFactor);
const aggressivePrice = Math.ceil(baseCost * 1.9 * locationFactor * weatherFactor * economyFactor * businessFactor);

// ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Å‡∏≥‡πÑ‡∏£‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô
const dailyVolume = parseInt(marketData.dailyVolume) || 200;

return {
conservative: {
price: conservativePrice,
profit: conservativePrice - baseCost,
dailyProfit: (conservativePrice - baseCost) * dailyVolume,
margin: Math.round(((conservativePrice - baseCost) / conservativePrice) * 100)
},
recommended: {
price: recommendedPrice,
profit: recommendedPrice - baseCost,
dailyProfit: (recommendedPrice - baseCost) * dailyVolume,
margin: Math.round(((recommendedPrice - baseCost) / recommendedPrice) * 100)
},
aggressive: {
price: aggressivePrice,
profit: aggressivePrice - baseCost,
dailyProfit: (aggressivePrice - baseCost) * dailyVolume,
margin: Math.round(((aggressivePrice - baseCost) / aggressivePrice) * 100)
},
breakeven: Math.ceil(baseCost * 1.05), // 5% ‡∏Å‡∏≥‡πÑ‡∏£‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πâ‡∏ô
factors: {
location: locationFactor,
weather: weatherFactor,
economy: economyFactor,
business: businessFactor
}
};
},

// ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÉ‡∏ô‡∏ï‡∏•‡∏≤‡∏î
analyzeMarketPosition: function(pricing, businessType) {
const marketPrices = {
low: 8,
medium: 12,
high: 16,
premium: 20
};

let position = '‡∏Å‡∏•‡∏≤‡∏á';
let competitive = '‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á';

if (pricing.recommended.price <= marketPrices.low) {
position = '‡∏ï‡πà‡∏≥';
competitive = '‡∏™‡∏π‡∏á‡∏°‡∏≤‡∏Å';
} else if (pricing.recommended.price <= marketPrices.medium) {
position = '‡∏Å‡∏•‡∏≤‡∏á-‡∏ï‡πà‡∏≥';
competitive = '‡∏™‡∏π‡∏á';
} else if (pricing.recommended.price <= marketPrices.high) {
position = '‡∏Å‡∏•‡∏≤‡∏á-‡∏™‡∏π‡∏á';
competitive = '‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á';
} else {
position = '‡∏™‡∏π‡∏á';
competitive = '‡∏ï‡πà‡∏≥';
}

const advantages = this.businessModels[businessType].advantages;
const challenges = this.businessModels[businessType].challenges;

return {
position: position,
competitive: competitive,
advantages: advantages,
challenges: challenges,
recommendations: this.getStrategicRecommendations(position, competitive, businessType)
};
},

// ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå
getStrategicRecommendations: function(position, competitive, businessType) {
let recommendations = [];

// ‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå‡∏ï‡∏≤‡∏°‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤
if (position === '‡∏ï‡πà‡∏≥') {
recommendations.push('‡πÄ‡∏ô‡πâ‡∏ô‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∏‡πâ‡∏°‡∏Ñ‡πà‡∏≤');
recommendations.push('‡∏´‡∏≤‡∏à‡∏∏‡∏î‡∏Ç‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡∏ô‡πÄ‡∏î‡∏¥‡∏ô‡∏ú‡πà‡∏≤‡∏ô‡∏°‡∏≤‡∏Å');
recommendations.push('‡∏ó‡∏≥‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô‡πÅ‡∏ö‡∏ö "‡∏ã‡∏∑‡πâ‡∏≠‡∏°‡∏≤‡∏Å‡πÑ‡∏î‡πâ‡∏°‡∏≤‡∏Å"');
} else if (position === '‡∏™‡∏π‡∏á') {
recommendations.push('‡πÄ‡∏ô‡πâ‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡πÅ‡∏•‡∏∞‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏û‡∏¥‡πÄ‡∏®‡∏©');
recommendations.push('‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏ó‡∏µ‡πà‡∏î‡∏µ‡πÉ‡∏´‡πâ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤');
recommendations.push('‡∏´‡∏≤‡∏à‡∏∏‡∏î‡∏Ç‡∏≤‡∏¢‡πÉ‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏π‡∏á');
}

// ‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå‡∏ï‡∏≤‡∏°‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à
switch (businessType) {
case 'producer':
recommendations.push('‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏™‡∏π‡∏ï‡∏£‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ï‡∏±‡∏ß‡πÉ‡∏´‡πâ‡πÇ‡∏î‡∏î‡πÄ‡∏î‡πà‡∏ô');
recommendations.push('‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏Ç‡πâ‡∏°‡∏á‡∏ß‡∏î');
recommendations.push('‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡πà‡∏≤‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏ñ‡∏∑‡∏≠‡∏î‡πâ‡∏≤‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î');
break;
case 'reseller':
recommendations.push('‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ú‡∏π‡πâ‡∏ú‡∏•‡∏¥‡∏ï‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏Ñ‡∏≤‡∏î‡∏µ');
recommendations.push('‡πÄ‡∏ô‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏î‡∏ß‡∏Å');
recommendations.push('‡∏´‡∏≤‡∏à‡∏∏‡∏î‡∏Ç‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡∏Å‡∏±‡∏ö‡∏£‡∏≤‡∏Ñ‡∏≤');
break;
case 'franchise':
recommendations.push('‡πÉ‡∏ä‡πâ‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå‡∏à‡∏≤‡∏Å‡πÅ‡∏ö‡∏£‡∏ô‡∏î‡πå‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏ï‡∏•‡∏≤‡∏î‡∏£‡πà‡∏ß‡∏°');
recommendations.push('‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏ï‡∏≤‡∏°‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏Ñ‡∏£‡πà‡∏á‡∏Ñ‡∏£‡∏±‡∏î');
recommendations.push('‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡πÅ‡∏•‡∏∞‡πÉ‡∏ä‡πâ‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏ô‡∏±‡∏ö‡∏™‡∏ô‡∏∏‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏ï‡πá‡∏°‡∏ó‡∏µ‡πà');
break;
}

return recommendations;
},

// ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à
generateBusinessReport: function(businessType, costs, pricing, market, dailyVolume) {
const monthlyRevenue = pricing.recommended.dailyProfit * 30;
const yearlyRevenue = pricing.recommended.dailyProfit * 365;

return {
businessType: businessType,
costs: costs,
pricing: pricing,
market: market,
projections: {
daily: {
volume: dailyVolume,
revenue: pricing.recommended.price * dailyVolume,
cost: costs.total * dailyVolume,
profit: pricing.recommended.dailyProfit
},
monthly: {
revenue: pricing.recommended.price * dailyVolume * 30,
cost: costs.total * dailyVolume * 30,
profit: monthlyRevenue
},
yearly: {
revenue: pricing.recommended.price * dailyVolume * 365,
cost: costs.total * dailyVolume * 365,
profit: yearlyRevenue
}
},
roi: Math.round((yearlyRevenue / (costs.total * dailyVolume * 365)) * 100),
paybackPeriod: this.calculatePaybackPeriod(businessType, pricing.recommended.dailyProfit)
};
},

calculatePaybackPeriod: function(businessType, dailyProfit) {
// ‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∏‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
const initialInvestment = {
producer: 50000,    // ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏õ‡∏¥‡πâ‡∏á ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå
reseller: 20000,    // ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏≠‡∏∏‡πà‡∏ô ‡∏ï‡∏π‡πâ‡πÅ‡∏™‡∏î‡∏á
franchise: 100000   // ‡∏Ñ‡πà‡∏≤‡πÅ‡∏ü‡∏£‡∏ô‡πÑ‡∏ä‡∏™‡πå ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå
};

const investment = initialInvestment[businessType] || 30000;
const monthsToPayback = Math.ceil(investment / (dailyProfit * 30));
return monthsToPayback;
}
};

// =====================
// AI Engine Service (‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡πÉ‡∏´‡∏°‡πà)
// =====================

const AIEngine = {
mockResponses: {
priceRecommendation: [
"‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡πÅ‡∏•‡∏∞‡∏™‡∏†‡∏≤‡∏û‡∏ï‡∏•‡∏≤‡∏î‡∏Ç‡∏≠‡∏á‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à{businessType} ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏µ‡πà {price} ‡∏ö‡∏≤‡∏ó‡∏ï‡πà‡∏≠‡πÑ‡∏°‡πâ ‡∏ã‡∏∂‡πà‡∏á‡∏à‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏Å‡∏≥‡πÑ‡∏£‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì {margin}% ‡πÅ‡∏•‡∏∞‡∏¢‡∏±‡∏á‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô‡πÉ‡∏ô‡∏ï‡∏•‡∏≤‡∏î‡πÑ‡∏î‡πâ",
"‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®{weather} ‡πÅ‡∏•‡∏∞‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡∏≠‡∏¢‡∏π‡πà{location} ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à{businessType} ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏µ‡πà {price} ‡∏ö‡∏≤‡∏ó‡∏ï‡πà‡∏≠‡πÑ‡∏°‡πâ ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ó‡∏≥‡∏Å‡∏≥‡πÑ‡∏£‡πÑ‡∏î‡πâ‡∏î‡∏µ‡πÅ‡∏•‡∏∞‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°",
"‡∏î‡πâ‡∏ß‡∏¢‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏£‡∏ß‡∏° {cost} ‡∏ö‡∏≤‡∏ó‡∏ï‡πà‡∏≠‡πÑ‡∏°‡πâ ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à{businessType} ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏µ‡πà {price} ‡∏ö‡∏≤‡∏ó‡∏ï‡πà‡∏≠‡πÑ‡∏°‡πâ ‡πÉ‡∏´‡πâ‡∏Å‡∏≥‡πÑ‡∏£ {profit} ‡∏ö‡∏≤‡∏ó‡∏ï‡πà‡∏≠‡πÑ‡∏°‡πâ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏±‡πà‡∏á‡∏¢‡∏∑‡∏ô‡∏Ç‡∏≠‡∏á‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à",
"‡πÉ‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå‡πÄ‡∏®‡∏£‡∏©‡∏ê‡∏Å‡∏¥‡∏à{economy} ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à{businessType} ‡∏Ñ‡∏ß‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏µ‡πà {price} ‡∏ö‡∏≤‡∏ó‡∏ï‡πà‡∏≠‡πÑ‡∏°‡πâ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå‡πÄ‡∏™‡∏£‡∏¥‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏∂‡∏á‡∏î‡∏π‡∏î‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏ê‡∏≤‡∏ô‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÄ‡∏î‡∏¥‡∏°"
],

businessTips: {
producer: [
"‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏™‡∏π‡∏ï‡∏£‡∏´‡∏°‡∏±‡∏Å‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ï‡∏±‡∏ß‡∏î‡πâ‡∏ß‡∏¢‡∏™‡∏°‡∏∏‡∏ô‡πÑ‡∏û‡∏£‡πÑ‡∏ó‡∏¢ ‡πÄ‡∏ä‡πà‡∏ô ‡πÉ‡∏ö‡∏°‡∏∞‡∏Å‡∏£‡∏π‡∏î ‡∏ï‡∏∞‡πÑ‡∏Ñ‡∏£‡πâ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏≠‡∏Å‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå",
"‡πÉ‡∏ä‡πâ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏°‡∏π‡∏™‡πà‡∏ß‡∏ô‡∏Ñ‡∏≠‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏±‡∏ô‡πÉ‡∏ô‡∏ô‡∏≠‡∏Å ‡∏à‡∏∞‡πÑ‡∏î‡πâ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏ó‡∏µ‡πà‡∏ô‡∏∏‡πà‡∏°‡πÅ‡∏•‡∏∞‡∏´‡∏ß‡∏≤‡∏ô",
"‡∏õ‡∏¥‡πâ‡∏á‡∏î‡πâ‡∏ß‡∏¢‡πÑ‡∏ü‡πÅ‡∏£‡∏á‡πÅ‡∏õ‡πä‡∏ö‡πÅ‡∏£‡∏Å ‡πÅ‡∏•‡πâ‡∏ß‡∏•‡∏î‡πÑ‡∏ü‡πÉ‡∏´‡πâ‡∏™‡∏∏‡∏Å‡∏ó‡∏±‡πà‡∏ß ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÑ‡∏î‡πâ‡∏ú‡∏¥‡∏ß‡∏Å‡∏£‡∏≠‡∏ö‡∏ô‡∏≠‡∏Å‡∏ô‡∏∏‡πà‡∏°‡πÉ‡∏ô",
"‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏ô‡πâ‡∏≥‡∏à‡∏¥‡πâ‡∏°‡∏´‡∏•‡∏≤‡∏Å‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏™ ‡πÄ‡∏ä‡πà‡∏ô ‡πÅ‡∏à‡πà‡∏ß‡∏ö‡∏≠‡∏á ‡∏ô‡πâ‡∏≥‡∏à‡∏¥‡πâ‡∏°‡πÑ‡∏Å‡πà ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤",
"‡∏Ñ‡∏∏‡∏°‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏£‡∏±‡∏Å‡∏©‡∏≤‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏°‡∏π‡πÉ‡∏´‡πâ‡πÄ‡∏¢‡πá‡∏ô‡∏ï‡∏•‡∏≠‡∏î ‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏î",
"‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏à‡∏∏‡∏î‡∏Ç‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∞‡∏≠‡∏≤‡∏î ‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏õ‡∏¥‡πâ‡∏á‡πÉ‡∏´‡πâ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÄ‡∏´‡πá‡∏ô"
],
reseller: [
"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ã‡∏∑‡πâ‡∏≠‡∏à‡∏≤‡∏Å‡∏ú‡∏π‡πâ‡∏ú‡∏•‡∏¥‡∏ï‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÉ‡∏ö‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á ‡∏≠‡∏¢. ‡πÅ‡∏•‡∏∞‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î",
"‡∏ï‡πà‡∏≠‡∏£‡∏≠‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ã‡∏∑‡πâ‡∏≠‡πÉ‡∏´‡πâ‡πÑ‡∏î‡πâ‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î ‡πÅ‡∏•‡∏∞‡∏Ç‡∏≠‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï‡πÄ‡∏ó‡∏≠‡∏°‡∏ñ‡πâ‡∏≤‡∏ó‡∏≥‡πÑ‡∏î‡πâ",
"‡∏•‡∏á‡∏ó‡∏∏‡∏ô‡πÉ‡∏ô‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏≠‡∏∏‡πà‡∏ô‡∏ó‡∏µ‡πà‡∏î‡∏µ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡∏£‡πà‡∏≠‡∏¢",
"‡∏´‡∏≤‡∏à‡∏∏‡∏î‡∏Ç‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡∏∞‡∏î‡∏ß‡∏Å ‡∏à‡∏≠‡∏î‡∏£‡∏ñ‡∏á‡πà‡∏≤‡∏¢",
"‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏Å‡∏±‡∏ö‡∏ã‡∏±‡∏û‡∏û‡∏•‡∏≤‡∏¢‡πÄ‡∏≠‡∏≠‡∏£‡πå ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏î‡πâ‡∏£‡∏≤‡∏Ñ‡∏≤‡πÅ‡∏•‡∏∞‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏î‡∏µ",
"‡πÄ‡∏ô‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏£‡∏ß‡∏î‡πÄ‡∏£‡πá‡∏ß‡πÅ‡∏•‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏°‡∏¥‡∏ï‡∏£ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏∂‡∏á‡∏î‡∏π‡∏î‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏õ‡∏£‡∏∞‡∏à‡∏≥"
],
franchise: [
"‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏ï‡∏≤‡∏°‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡πÅ‡∏ö‡∏£‡∏ô‡∏î‡πå‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏Ñ‡∏£‡πà‡∏á‡∏Ñ‡∏£‡∏±‡∏î ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û",
"‡πÉ‡∏ä‡πâ‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏•‡∏≤‡∏î‡πÅ‡∏•‡∏∞‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô‡∏Ç‡∏≠‡∏á‡πÅ‡∏ö‡∏£‡∏ô‡∏î‡πå",
"‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏≤‡∏£‡∏≠‡∏ö‡∏£‡∏°‡πÅ‡∏•‡∏∞‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏µ‡πà‡πÅ‡∏ö‡∏£‡∏ô‡∏î‡πå‡∏à‡∏±‡∏î‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏™‡∏°‡πà‡∏≥‡πÄ‡∏™‡∏°‡∏≠",
"‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏Å‡∏±‡∏ö‡πÅ‡∏ü‡∏£‡∏ô‡πÑ‡∏ä‡∏™‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡πÅ‡∏•‡∏∞‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏™‡∏≤‡∏Ç‡∏≤‡∏≠‡∏∑‡πà‡∏ô",
"‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏£‡πâ‡∏≤‡∏ô‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏ï‡∏≤‡∏°‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÅ‡∏ö‡∏£‡∏ô‡∏î‡πå‡∏Å‡∏≥‡∏´‡∏ô‡∏î",
"‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Å‡∏±‡∏ö‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡πÅ‡∏ö‡∏£‡∏ô‡∏î‡πå‡∏Å‡∏≥‡∏´‡∏ô‡∏î"
]
},

weatherStrategies: {
sunny: [
"‡∏à‡∏±‡∏î‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏±‡πà‡∏á‡∏£‡πà‡∏°‡∏£‡∏∑‡πà‡∏ô ‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏£‡πà‡∏°‡∏ö‡∏±‡∏á‡πÅ‡∏î‡∏î‡πÉ‡∏´‡πâ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤",
"‡πÄ‡∏™‡∏¥‡∏£‡πå‡∏ü‡∏ô‡πâ‡∏≥‡∏î‡∏∑‡πà‡∏°‡πÄ‡∏¢‡πá‡∏ô‡∏ü‡∏£‡∏µ ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°‡πÄ‡∏¢‡πá‡∏ô",
"‡∏õ‡∏¥‡πâ‡∏á‡∏´‡∏°‡∏π‡πÅ‡∏ö‡∏ö‡∏™‡∏î‡πÉ‡∏´‡∏°‡πà‡∏ï‡∏•‡∏≠‡∏î ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏£‡πâ‡∏≠‡∏ô‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πà‡∏≤‡∏¢",
"‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ß‡∏•‡∏≤‡∏Ç‡∏≤‡∏¢‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏¢‡πá‡∏ô ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏Ñ‡∏ô‡∏à‡∏∞‡∏≠‡∏≠‡∏Å‡∏°‡∏≤‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≠‡∏á‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô"
],
cloudy: [
"‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡πÄ‡∏¢‡πá‡∏ô‡∏™‡∏ö‡∏≤‡∏¢ ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡πÅ‡∏Å‡πà‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢ ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Ç‡∏≠‡∏á‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠",
"‡πÄ‡∏ô‡πâ‡∏ô‡∏Å‡∏•‡∏¥‡πà‡∏ô‡∏´‡∏≠‡∏°‡∏Ç‡∏≠‡∏á‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏∂‡∏á‡∏î‡∏π‡∏î‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤",
"‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ù‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏≤‡∏à‡∏ï‡∏Å‡πÑ‡∏î‡πâ",
"‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏±‡πà‡∏á‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏à‡∏∞‡∏ô‡∏±‡πà‡∏á‡∏ó‡∏≤‡∏ô‡∏ô‡∏≤‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô"
],
rainy: [
"‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏Å‡∏±‡∏ô‡∏ù‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏ï‡πá‡∏ô‡∏ó‡πå‡πÄ‡∏•‡πá‡∏Å‡πÜ ‡πÉ‡∏´‡πâ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤",
"‡∏°‡∏µ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡πá‡∏Ñ‡∏Å‡∏•‡∏±‡∏ö‡∏ö‡πâ‡∏≤‡∏ô ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ñ‡∏∏‡∏á‡∏Å‡∏±‡∏ô‡∏ô‡πâ‡∏≥",
"‡∏•‡∏î‡∏£‡∏≤‡∏Ñ‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡∏ó‡∏≥‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏ä‡πà‡∏ß‡∏á‡∏ù‡∏ô‡∏ï‡∏Å",
"‡πÄ‡∏ô‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡πÅ‡∏ö‡∏ö‡πÄ‡∏î‡∏•‡∏¥‡πÄ‡∏ß‡∏≠‡∏£‡∏µ‡πà‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏±‡πà‡∏á‡∏•‡πà‡∏ß‡∏á‡∏´‡∏ô‡πâ‡∏≤"
]
},

economyStrategies: {
excellent: [
"‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π‡∏û‡∏£‡∏µ‡πÄ‡∏°‡∏µ‡∏¢‡∏°‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏ã‡πá‡∏ï‡∏´‡∏£‡∏π‡∏´‡∏£‡∏≤",
"‡∏Ç‡∏¢‡∏≤‡∏¢‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏Ç‡∏≤‡∏¢‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏à‡∏∏‡∏î‡∏Ç‡∏≤‡∏¢",
"‡∏•‡∏á‡∏ó‡∏∏‡∏ô‡πÉ‡∏ô‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô",
"‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏™‡∏£‡∏¥‡∏° ‡πÄ‡∏ä‡πà‡∏ô ‡πÄ‡∏î‡∏•‡∏¥‡πÄ‡∏ß‡∏≠‡∏£‡∏µ‡πà ‡∏à‡∏≠‡∏á‡∏•‡πà‡∏ß‡∏á‡∏´‡∏ô‡πâ‡∏≤"
],
good: [
"‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡πÅ‡∏•‡∏∞‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏î‡∏µ‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á",
"‡∏Ç‡∏¢‡∏≤‡∏¢‡∏ê‡∏≤‡∏ô‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô",
"‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏Ç‡∏≤‡∏¢‡∏´‡∏£‡∏∑‡∏≠‡∏ß‡∏±‡∏ô‡∏Ç‡∏≤‡∏¢",
"‡∏û‡∏±‡∏í‡∏ô‡∏≤‡πÄ‡∏°‡∏ô‡∏π‡πÉ‡∏´‡∏°‡πà‡πÜ ‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏∞‡∏¢‡∏∞"
],
normal: [
"‡πÄ‡∏ô‡πâ‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∏‡πâ‡∏°‡∏Ñ‡πà‡∏≤‡πÅ‡∏•‡∏∞‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û",
"‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏Å‡∏±‡∏ö‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏õ‡∏£‡∏∞‡∏à‡∏≥",
"‡∏ó‡∏≥‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô‡πÄ‡∏•‡πá‡∏Å‡πÜ ‡∏ô‡πâ‡∏≠‡∏¢‡πÜ ‡∏™‡∏°‡πà‡∏≥‡πÄ‡∏™‡∏°‡∏≠",
"‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡πÉ‡∏´‡πâ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°"
],
bad: [
"‡∏•‡∏î‡∏Ç‡∏ô‡∏≤‡∏î‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏ï‡πà‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏£‡∏≤‡∏Ñ‡∏≤ ‡∏´‡∏£‡∏∑‡∏≠‡∏•‡∏î‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢",
"‡πÄ‡∏ô‡πâ‡∏ô‡∏Ñ‡∏≥‡∏ß‡πà‡∏≤ '‡∏Ñ‡∏∏‡πâ‡∏°' '‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î' ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏•‡∏≤‡∏î",
"‡∏ó‡∏≥‡πÄ‡∏ã‡πá‡∏ï‡∏Ñ‡∏≠‡∏°‡πÇ‡∏ö‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡∏Å‡∏ß‡πà‡∏≤",
"‡∏´‡∏≤‡∏ß‡∏¥‡∏ò‡∏µ‡∏•‡∏î‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û"
]
},

marketingTips: [
"‡πÉ‡∏ä‡πâ Social Media ‡πÇ‡∏û‡∏™‡∏ï‡πå‡∏£‡∏π‡∏õ‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á‡∏™‡∏ß‡∏¢‡πÜ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏•‡∏∞‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏Ç‡∏≤‡∏¢",
"‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô LINE ‡∏´‡∏£‡∏∑‡∏≠ Facebook ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏à‡πâ‡∏á‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£",
"‡∏ó‡∏≥‡∏ö‡∏±‡∏ï‡∏£‡∏™‡∏∞‡∏™‡∏°‡πÅ‡∏ï‡πâ‡∏° '‡∏ã‡∏∑‡πâ‡∏≠‡∏Ñ‡∏£‡∏ö 10 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á ‡∏£‡∏±‡∏ö‡∏ü‡∏£‡∏µ 5 ‡πÑ‡∏°‡πâ'",
"‡∏à‡∏±‡∏î‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ ‡∏´‡∏£‡∏∑‡∏≠‡∏ß‡∏±‡∏ô‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç",
"‡πÉ‡∏´‡πâ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÄ‡∏Å‡πà‡∏≤‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏î‡πâ‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î",
"‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ä‡∏∏‡∏°‡∏ä‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏ó‡∏®‡∏Å‡∏≤‡∏•‡∏ó‡πâ‡∏≠‡∏á‡∏ñ‡∏¥‡πà‡∏ô",
"‡πÉ‡∏ä‡πâ‡∏õ‡πâ‡∏≤‡∏¢‡∏´‡∏£‡∏∑‡∏≠‡πÅ‡∏ö‡∏ô‡πÄ‡∏ô‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà‡∏™‡∏∞‡∏î‡∏∏‡∏î‡∏ï‡∏≤‡πÅ‡∏•‡∏∞‡∏≠‡πà‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢"
],

chatResponses: [
"‡∏à‡∏≤‡∏Å‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå ‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏¢‡πá‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏•‡∏¥‡∏Å‡∏á‡∏≤‡∏ô 17.00-19.00 ‡∏ô. ‡πÅ‡∏•‡∏∞‡∏ä‡πà‡∏ß‡∏á‡∏Å‡∏•‡∏≤‡∏á‡∏Ñ‡∏∑‡∏ô 20.00-22.00 ‡∏ô. ‡∏°‡∏±‡∏Å‡∏à‡∏∞‡∏Ç‡∏≤‡∏¢‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î ‡πÇ‡∏î‡∏¢‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ö‡∏£‡∏¥‡πÄ‡∏ß‡∏ì‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡∏ô‡πÄ‡∏î‡∏¥‡∏ô‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏õ‡∏°‡∏≤",
"‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏°‡∏π‡∏Ñ‡∏ß‡∏£‡πÄ‡∏õ‡πá‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÑ‡∏Ç‡∏°‡∏±‡∏ô‡∏û‡∏≠‡∏™‡∏°‡∏Ñ‡∏ß‡∏£ ‡πÄ‡∏ä‡πà‡∏ô ‡∏Ñ‡∏≠‡∏´‡∏°‡∏π ‡∏™‡∏±‡∏ô‡∏Ñ‡∏≠ ‡∏à‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á‡∏ô‡∏∏‡πà‡∏°‡πÅ‡∏•‡∏∞‡∏´‡∏ß‡∏≤‡∏ô ‡πÑ‡∏°‡πà‡πÅ‡∏Ç‡πá‡∏á‡πÄ‡∏´‡∏ô‡∏µ‡∏¢‡∏ß",
"‡∏™‡∏π‡∏ï‡∏£‡∏´‡∏°‡∏±‡∏Å‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô: ‡∏ã‡∏µ‡∏≠‡∏¥‡πä‡∏ß‡∏Ç‡∏≤‡∏ß ‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏• ‡∏Å‡∏£‡∏∞‡πÄ‡∏ó‡∏µ‡∏¢‡∏° ‡∏û‡∏£‡∏¥‡∏Å‡πÑ‡∏ó‡∏¢ ‡∏´‡∏≠‡∏°‡πÅ‡∏î‡∏á ‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏£‡πâ‡∏≤‡∏ô ‡πÄ‡∏ä‡πà‡∏ô ‡πÉ‡∏ö‡∏°‡∏∞‡∏Å‡∏£‡∏π‡∏î ‡∏´‡∏£‡∏∑‡∏≠‡∏ã‡∏µ‡∏≠‡∏¥‡πä‡∏ß‡∏î‡∏≥‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢",
"‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≥‡πÑ‡∏£‡πÑ‡∏î‡πâ‡πÇ‡∏î‡∏¢‡∏Ç‡∏≤‡∏¢‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏Ñ‡∏µ‡∏¢‡∏á ‡πÄ‡∏ä‡πà‡∏ô ‡∏Ç‡πâ‡∏≤‡∏ß‡πÄ‡∏´‡∏ô‡∏µ‡∏¢‡∏ß ‡∏ô‡πâ‡∏≥‡∏à‡∏¥‡πâ‡∏° ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏° ‡∏ã‡∏∂‡πà‡∏á‡∏°‡∏±‡∏Å‡∏°‡∏µ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏Å‡∏≥‡πÑ‡∏£‡∏™‡∏π‡∏á‡∏Å‡∏ß‡πà‡∏≤‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á",
"‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏°‡∏≤‡∏Å ‡∏Ñ‡∏ß‡∏£‡∏™‡∏ß‡∏°‡∏ñ‡∏∏‡∏á‡∏°‡∏∑‡∏≠ ‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡∏≤‡∏Å ‡πÅ‡∏•‡∏∞‡∏•‡πâ‡∏≤‡∏á‡∏°‡∏∑‡∏≠‡∏ö‡πà‡∏≠‡∏¢‡πÜ ‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏´‡πâ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤",
"‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏Ç‡∏≤‡∏¢‡∏ï‡πâ‡∏≠‡∏á‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤: ‡∏Å‡∏≤‡∏£‡∏à‡∏£‡∏≤‡∏à‡∏£ ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏ô‡πÄ‡∏î‡∏¥‡∏ô ‡∏ó‡∏µ‡πà‡∏à‡∏≠‡∏î‡∏£‡∏ñ ‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢ ‡πÅ‡∏•‡∏∞‡∏Ñ‡πà‡∏≤‡πÄ‡∏ä‡πà‡∏≤‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà",
"‡∏ñ‡πâ‡∏≤‡∏Ç‡∏≤‡∏¢‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ó‡∏µ‡πà‡πÄ‡∏î‡∏¥‡∏° ‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏Å‡∏±‡∏ö‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏õ‡∏£‡∏∞‡∏à‡∏≥ ‡∏à‡∏≥‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏≠‡∏ö ‡∏à‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏Ç‡∏≤‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏ã‡∏∑‡πâ‡∏≠‡∏ã‡πâ‡∏≥",
"‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏°‡∏∑‡∏≠‡πÉ‡∏´‡∏°‡πà ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏ã‡∏∑‡πâ‡∏≠‡∏°‡∏≤‡∏Ç‡∏≤‡∏¢‡∏Å‡πà‡∏≠‡∏ô ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏ï‡∏•‡∏≤‡∏î‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ê‡∏≤‡∏ô‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏≠‡∏¢‡πÑ‡∏õ‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡∏ú‡∏•‡∏¥‡∏ï‡πÄ‡∏≠‡∏á"
]
},

getRandomElement: function(array) {
return array[Math.floor(Math.random() * array.length)];
},

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡πÅ‡∏ö‡∏ö‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô
getBusinessAnalysis: async function(businessType, formData, marketData) {
return new Promise(async (resolve) => {
try {
// ‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏´‡∏°‡∏π‡∏à‡∏£‡∏¥‡∏á
const realPorkPrice = await fetchRealPorkPrice();
if (businessType === 'producer' && formData.meatPrice) {
formData.meatPrice = realPorkPrice;
}

// ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô
const costs = BusinessEngine.calculateCosts(businessType, formData, marketData);

// ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏£‡∏≤‡∏Ñ‡∏≤
const pricing = BusinessEngine.analyzePricing(costs, marketData, businessType);

// ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÉ‡∏ô‡∏ï‡∏•‡∏≤‡∏î
const marketPosition = BusinessEngine.analyzeMarketPosition(pricing, businessType);

// ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô
const report = BusinessEngine.generateBusinessReport(
businessType, 
costs, 
pricing, 
marketPosition, 
parseInt(marketData.dailyVolume) || 200
);

// ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå
let analysisText = this.getRandomElement(this.mockResponses.priceRecommendation);
analysisText = analysisText
.replace('{businessType}', BusinessEngine.businessModels[businessType].name)
.replace('{price}', pricing.recommended.price)
.replace('{margin}', pricing.recommended.margin)
.replace('{cost}', costs.total.toFixed(2))
.replace('{profit}', pricing.recommended.profit.toFixed(2))
.replace('{weather}', this.getWeatherText(marketData.weather))
.replace('{location}', this.getLocationText(marketData.location))
.replace('{economy}', this.getEconomyText(marketData.economy));

// ‡∏£‡∏ß‡∏ö‡∏£‡∏ß‡∏°‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥
const tips = [];

// ‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à
const businessTips = this.businessTips[businessType] || [];
tips.push(...businessTips.slice(0, 3));

// ‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡∏ï‡∏≤‡∏°‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®
const weatherTips = this.weatherStrategies[marketData.weather] || [];
if (weatherTips.length > 0) {
tips.push(...weatherTips.slice(0, 2));
}

// ‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡∏ï‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå‡πÄ‡∏®‡∏£‡∏©‡∏ê‡∏Å‡∏¥‡∏à
const economyTips = this.economyStrategies[marketData.economy] || [];
if (economyTips.length > 0) {
tips.push(...economyTips.slice(0, 2));
}

// ‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡∏Å‡∏≤‡∏£‡∏ï‡∏•‡∏≤‡∏î
tips.push(...this.marketingTips.slice(0, 2));

setTimeout(() => {
resolve({
businessType: businessType,
costs: costs,
pricing: pricing,
marketPosition: marketPosition,
report: report,
analysisText: analysisText,
tips: tips,
recommendations: marketPosition.recommendations
});
}, 1200);

} catch(error) {
console.error('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à:', error);
setTimeout(() => {
resolve({
businessType: businessType,
analysisText: "‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö‡∏£‡∏∞‡∏ö‡∏ö ‡πÅ‡∏ï‡πà‡πÄ‡∏£‡∏≤‡πÉ‡∏´‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì",
tips: this.businessTips[businessType] || this.businessTips.producer,
error: true
});
}, 1000);
}
});
},

getChatResponse: async function(message) {
return new Promise(resolve => {
setTimeout(() => {
let response = this.getRandomElement(this.chatResponses);

// ‡∏õ‡∏£‡∏±‡∏ö response ‡∏ï‡∏≤‡∏°‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°
if (message.toLowerCase().includes('‡∏£‡∏≤‡∏Ñ‡∏≤')) {
response = "‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ñ‡∏ß‡∏£‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô ‡∏Å‡∏≥‡πÑ‡∏£‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ ‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏Ñ‡∏≤‡πÉ‡∏ô‡∏ï‡∏•‡∏≤‡∏î ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠ '‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à' ‡πÉ‡∏ô‡πÅ‡∏≠‡∏õ‡∏ô‡∏µ‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°";
} else if (message.toLowerCase().includes('‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô')) {
response = "‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á‡∏Ñ‡∏∑‡∏≠ ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏°‡∏π (60-70%) ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏õ‡∏£‡∏∏‡∏á (10-15%) ‡πÑ‡∏°‡πâ‡∏à‡∏¥‡πâ‡∏° ‡∏Ñ‡πà‡∏≤‡πÅ‡∏Å‡πä‡∏™ ‡πÅ‡∏•‡∏∞‡∏Ñ‡πà‡∏≤‡πÅ‡∏£‡∏á‡∏á‡∏≤‡∏ô ‡∏Ñ‡∏ß‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÉ‡∏´‡πâ‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á";
} else if (message.toLowerCase().includes('‡∏Å‡∏≤‡∏£‡∏ï‡∏•‡∏≤‡∏î')) {
response = "‡∏Å‡∏≤‡∏£‡∏ï‡∏•‡∏≤‡∏î‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á‡∏Ñ‡∏ß‡∏£‡πÄ‡∏ô‡πâ‡∏ô: ‡∏Å‡∏•‡∏¥‡πà‡∏ô‡∏´‡∏≠‡∏° ‡∏£‡∏π‡∏õ‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå‡∏ó‡∏µ‡πà‡∏ô‡πà‡∏≤‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏ñ‡∏∑‡∏≠ ‡∏Å‡∏≤‡∏£‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏°‡∏¥‡∏ï‡∏£ ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ Social Media ‡πÇ‡∏ä‡∏ß‡πå‡∏ú‡∏•‡∏á‡∏≤‡∏ô";
}

resolve(response);
}, 800 + Math.random() * 800);
});
},

getWeatherText: function(weather) {
const texts = {
sunny: '‡πÅ‡∏î‡∏î‡∏≠‡∏≠‡∏Å',
cloudy: '‡∏°‡∏µ‡πÄ‡∏°‡∏Ü',
rainy: '‡∏ù‡∏ô‡∏ï‡∏Å'
};
return texts[weather] || '‡∏õ‡∏Å‡∏ï‡∏¥';
},

getLocationText: function(location) {
const texts = {
market: '‡πÉ‡∏ô‡∏ï‡∏•‡∏≤‡∏î',
street: '‡∏£‡∏¥‡∏°‡∏ñ‡∏ô‡∏ô',
community: '‡πÉ‡∏ô‡∏ä‡∏∏‡∏°‡∏ä‡∏ô',
school: '‡πÉ‡∏Å‡∏•‡πâ‡∏™‡∏ñ‡∏≤‡∏ô‡∏®‡∏∂‡∏Å‡∏©‡∏≤',
office: '‡∏¢‡πà‡∏≤‡∏ô‡∏≠‡∏≠‡∏ü‡∏ü‡∏¥‡∏®',
mall: '‡πÉ‡∏ô‡∏´‡πâ‡∏≤‡∏á‡∏™‡∏£‡∏£‡∏û‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤'
};
return texts[location] || '‡πÉ‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà';
},

getEconomyText: function(economy) {
const texts = {
excellent: '‡∏î‡∏µ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°',
good: '‡∏î‡∏µ',
normal: '‡∏õ‡∏Å‡∏ï‡∏¥',
bad: '‡πÅ‡∏¢‡πà'
};
return texts[economy] || '‡∏õ‡∏Å‡∏ï‡∏¥';
}
};

// =====================
// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡πÉ‡∏ô‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡πÑ‡∏ó‡∏¢
// =====================

function setThaiDate() {
const now = new Date();
const thaiDay = ['‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå', '‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå', '‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£', '‡∏û‡∏∏‡∏ò', '‡∏û‡∏§‡∏´‡∏±‡∏™‡∏ö‡∏î‡∏µ', '‡∏®‡∏∏‡∏Å‡∏£‡πå', '‡πÄ‡∏™‡∏≤‡∏£‡πå'];
const thaiMonth = ['‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏°', '‡∏Å‡∏∏‡∏°‡∏†‡∏≤‡∏û‡∏±‡∏ô‡∏ò‡πå', '‡∏°‡∏µ‡∏ô‡∏≤‡∏Ñ‡∏°', '‡πÄ‡∏°‡∏©‡∏≤‡∏¢‡∏ô', '‡∏û‡∏§‡∏©‡∏†‡∏≤‡∏Ñ‡∏°', '‡∏°‡∏¥‡∏ñ‡∏∏‡∏ô‡∏≤‡∏¢‡∏ô',
'‡∏Å‡∏£‡∏Å‡∏é‡∏≤‡∏Ñ‡∏°', '‡∏™‡∏¥‡∏á‡∏´‡∏≤‡∏Ñ‡∏°', '‡∏Å‡∏±‡∏ô‡∏¢‡∏≤‡∏¢‡∏ô', '‡∏ï‡∏∏‡∏•‡∏≤‡∏Ñ‡∏°', '‡∏û‡∏§‡∏®‡∏à‡∏¥‡∏Å‡∏≤‡∏¢‡∏ô', '‡∏ò‡∏±‡∏ô‡∏ß‡∏≤‡∏Ñ‡∏°'];

const day = thaiDay[now.getDay()];
const date = now.getDate();
const month = thaiMonth[now.getMonth()];
const year = now.getFullYear() + 543; // ‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏µ ‡∏û.‡∏®.

document.getElementById('current-date').textContent = `‡∏ß‡∏±‡∏ô${day}‡∏ó‡∏µ‡πà ${date} ${month} ${year}`;
}

// =====================
// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏´‡∏°‡∏π‡∏à‡∏£‡∏¥‡∏á‡∏à‡∏≤‡∏Å‡πÅ‡∏´‡∏•‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
// =====================

async function fetchRealPorkPrice() {
try {
// ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Demo - ‡πÉ‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏à‡∏£‡∏¥‡∏á‡∏Ñ‡∏ß‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö API ‡∏à‡∏£‡∏¥‡∏á
const currentPrice = 185 + Math.floor(Math.random() * 20); // 185-205 ‡∏ö‡∏≤‡∏ó
const now = new Date();
const formattedDate = now.toLocaleString('th-TH', {
year: 'numeric',
month: 'long',
day: 'numeric',
hour: '2-digit',
minute: '2-digit'
});

document.getElementById('price-update-time').textContent = `‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏°‡∏∑‡πà‡∏≠: ${formattedDate}`;
document.getElementById('market-price').textContent = `${currentPrice} ‡∏ö‡∏≤‡∏ó`;

return currentPrice;
} catch (error) {
console.error('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏≤‡∏Ñ‡∏≤‡∏´‡∏°‡∏π‡πÑ‡∏î‡πâ:', error);
const fallbackPrice = 190;
document.getElementById('market-price').textContent = `${fallbackPrice} ‡∏ö‡∏≤‡∏ó (offline)`;
return fallbackPrice;
}
}

// =====================
// ‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏ó‡πá‡∏ö (‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á)
// =====================

function setupTabs() {
document.querySelectorAll('.tab').forEach(tab => {
tab.addEventListener('click', function() {
// ‡∏•‡∏ö‡∏Ñ‡∏•‡∏≤‡∏™ active ‡∏à‡∏≤‡∏Å‡∏ó‡∏∏‡∏Å‡πÅ‡∏ó‡πá‡∏ö
document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));

// ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏•‡∏≤‡∏™ active ‡πÉ‡∏´‡πâ‡πÅ‡∏ó‡πá‡∏ö‡∏ó‡∏µ‡πà‡∏Ñ‡∏•‡∏¥‡∏Å
this.classList.add('active');

// ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡πÅ‡∏ó‡πá‡∏ö
const tabId = this.getAttribute('data-tab');
const tabContent = document.getElementById(`${tabId}-tab`);

if (tabContent) {
tabContent.classList.add('active');

// ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå animation
tabContent.style.animation = 'none';
setTimeout(() => {
tabContent.style.animation = 'fadeIn 0.6s cubic-bezier(0.4, 0, 0.2, 1)';
}, 10);

// ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏™‡∏ß‡∏¥‡∏ï‡∏ä‡πå‡πÅ‡∏ó‡πá‡∏ö
if (tabId === 'sales') {
updateSalesDisplay();
} else if (tabId === 'dashboard') {
updateDashboardSummary();
} else if (tabId === 'business-tools') {
// ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏ó‡∏µ‡πà‡πÅ‡∏ó‡πá‡∏ö
resetBusinessTools();
}
}
});
});
}

// =====================
// ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à (‡πÉ‡∏´‡∏°‡πà)
// =====================

function setupBusinessTools() {
// ‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à
document.querySelectorAll('.business-type-card').forEach(card => {
card.addEventListener('click', function() {
// ‡∏•‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏Å‡πà‡∏≤
document.querySelectorAll('.business-type-card').forEach(c => c.classList.remove('selected'));

// ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏´‡∏°‡πà
this.classList.add('selected');

const businessType = this.getAttribute('data-type');

// ‡πÅ‡∏™‡∏î‡∏á‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°
showBusinessForm(businessType);
});
});

// ‡∏õ‡∏∏‡πà‡∏°‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì
const calculateBtn = document.getElementById('calculate-business-btn');
if (calculateBtn) {
calculateBtn.addEventListener('click', async function() {
await calculateBusinessAnalysis();
});
}
}

function showBusinessForm(businessType) {
// ‡∏ã‡πà‡∏≠‡∏ô‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
document.querySelectorAll('.business-form').forEach(form => {
form.style.display = 'none';
});

// ‡πÅ‡∏™‡∏î‡∏á‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
const selectedForm = document.getElementById(`${businessType}-form`);
if (selectedForm) {
selectedForm.style.display = 'block';
}

// ‡πÅ‡∏™‡∏î‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì
const calculationSection = document.getElementById('cost-calculation-section');
if (calculationSection) {
calculationSection.style.display = 'block';
calculationSection.scrollIntoView({ behavior: 'smooth' });
}

// ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï placeholder ‡πÅ‡∏•‡∏∞‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ï‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à
updateFormDefaults(businessType);
}

function updateFormDefaults(businessType) {
const defaults = {
producer: {
'producer-meat-price': 190,
'producer-meat-weight': 25,
'producer-seasoning-cost': 0.5,
'producer-stick-cost': 0.3,
'producer-gas-cost': 0.2,
'producer-labor-cost': 1.0
},
reseller: {
'reseller-buy-price': 8,
'reseller-transport-cost': 0.5,
'reseller-storage-cost': 0.2,
'reseller-gas-cost': 0.3
},
franchise: {
'franchise-product-cost': 9,
'franchise-royalty': 0.5,
'franchise-marketing': 0.3,
'franchise-support': 0.2
}
};

const businessDefaults = defaults[businessType];
if (businessDefaults) {
Object.entries(businessDefaults).forEach(([id, value]) => {
const element = document.getElementById(id);
if (element) {
element.value = value;
}
});
}
}

async function calculateBusinessAnalysis() {
const selectedCard = document.querySelector('.business-type-card.selected');
if (!selectedCard) {
alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏Å‡πà‡∏≠‡∏ô');
return;
}

const businessType = selectedCard.getAttribute('data-type');
const calculateBtn = document.getElementById('calculate-business-btn');
const originalText = calculateBtn.textContent;

calculateBtn.textContent = "üßÆ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå...";
calculateBtn.style.background = "linear-gradient(145deg, #FFA726, #FF9800)";
calculateBtn.disabled = true;

// ‡∏£‡∏ß‡∏ö‡∏£‡∏ß‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏ü‡∏≠‡∏£‡πå‡∏°
const formData = collectFormData(businessType);
const marketData = collectMarketData();

try {
// ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ AI Engine
const analysis = await AIEngine.getBusinessAnalysis(businessType, formData, marketData);

// ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå
displayBusinessAnalysis(analysis);

// ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì
await UserDataManager.updateBusinessData(businessType, analysis);

// ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î
updateDashboardWithBusinessData(analysis);

} catch (error) {
console.error('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå:', error);
alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå ‡πÇ‡∏õ‡∏£‡∏î‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á');
} finally {
calculateBtn.textContent = originalText;
calculateBtn.style.background = "";
calculateBtn.disabled = false;
}
}

function collectFormData(businessType) {
const data = {};

const form = document.getElementById(`${businessType}-form`);
if (!form) return data;

const inputs = form.querySelectorAll('input[type="number"]');
inputs.forEach(input => {
const key = input.id.replace(`${businessType}-`, '');
data[key] = parseFloat(input.value) || 0;
});

return data;
}

function collectMarketData() {
return {
location: document.getElementById('location').value,
dailyVolume: document.getElementById('daily-volume').value,
weather: document.querySelector('.option-group:nth-of-type(1) .option-button.selected')?.getAttribute('data-value') || 'sunny',
economy: document.querySelector('.option-group:nth-of-type(2) .option-button.selected')?.getAttribute('data-value') || 'normal'
};
}

function displayBusinessAnalysis(analysis) {
// ‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô
const costBreakdown = document.getElementById('cost-breakdown');
if (costBreakdown && analysis.costs) {
costBreakdown.innerHTML = '';
analysis.costs.breakdown.forEach(item => {
const li = document.createElement('li');

li.className = 'cost-item';
li.innerHTML = `
<span>${item.item}</span>
<span>${item.cost.toFixed(2)} ‡∏ö‡∏≤‡∏ó</span>
`;
costBreakdown.appendChild(li);
});

// ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏ß‡∏°‡∏ó‡πâ‡∏≤‡∏¢‡∏™‡∏∏‡∏î
const totalLi = document.createElement('li');
totalLi.className = 'cost-item';
totalLi.innerHTML = `
<span><strong>‡∏£‡∏ß‡∏°‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏ï‡πà‡∏≠‡πÑ‡∏°‡πâ</strong></span>
<span><strong>${analysis.costs.total.toFixed(2)} ‡∏ö‡∏≤‡∏ó</strong></span>
`;
costBreakdown.appendChild(totalLi);
}

// ‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏à‡∏∏‡∏î‡∏Ñ‡∏∏‡πâ‡∏°‡∏ó‡∏∏‡∏ô
const breakevenAnalysis = document.getElementById('breakeven-analysis');
if (breakevenAnalysis && analysis.pricing) {
breakevenAnalysis.innerHTML = `
<div style="text-align: center; padding: 15px; background: linear-gradient(135deg, #E3F2FD, #BBDEFB); border-radius: 10px;">
<div style="font-size: 1.8rem; font-weight: bold; color: #1976D2; margin-bottom: 8px;">
${analysis.pricing.breakeven} ‡∏ö‡∏≤‡∏ó/‡πÑ‡∏°‡πâ
</div>
<div style="font-size: 0.9rem; color: #424242;">
‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏£‡∏Ç‡∏≤‡∏¢ (‡∏Å‡∏≥‡πÑ‡∏£ 5%)
</div>
<div style="margin-top: 10px; font-size: 0.85rem; color: #666;">
‡∏Ç‡∏≤‡∏¢‡∏ï‡πà‡∏≥‡∏Å‡∏ß‡πà‡∏≤‡∏ô‡∏µ‡πâ = ‡∏Ç‡∏≤‡∏î‡∏ó‡∏∏‡∏ô
</div>
</div>
`;
}

// ‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÉ‡∏ô‡∏ï‡∏•‡∏≤‡∏î
const marketPosition = document.getElementById('market-position');
if (marketPosition && analysis.marketPosition) {
marketPosition.innerHTML = `
<div style="padding: 15px;">
<div style="margin-bottom: 10px;">
<strong>üéØ ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á:</strong> ‡∏£‡∏≤‡∏Ñ‡∏≤${analysis.marketPosition.position}
</div>
<div style="margin-bottom: 10px;">
<strong>‚öîÔ∏è ‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô:</strong> ${analysis.marketPosition.competitive}
</div>
<div style="margin-bottom: 15px;">
<strong>üí™ ‡∏à‡∏∏‡∏î‡πÅ‡∏Ç‡πá‡∏á:</strong>
<ul style="margin-left: 20px; margin-top: 5px;">
${analysis.marketPosition.advantages.map(adv => `<li>${adv}</li>`).join('')}
</ul>
</div>
<div>
<strong>‚ö†Ô∏è ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡πâ‡∏≤‡∏ó‡∏≤‡∏¢:</strong>
<ul style="margin-left: 20px; margin-top: 5px;">
${analysis.marketPosition.challenges.map(ch => `<li>${ch}</li>`).join('')}
</ul>
</div>
</div>
`;
}

// ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏£‡∏≤‡∏Ñ‡∏≤
if (analysis.pricing) {
const conservativePrice = document.getElementById('conservative-price');
const conservativeProfit = document.getElementById('conservative-profit');
const recommendedPrice = document.getElementById('recommended-price');
const recommendedProfit = document.getElementById('recommended-profit');
const aggressivePrice = document.getElementById('aggressive-price');
const aggressiveProfit = document.getElementById('aggressive-profit');

if (conservativePrice) conservativePrice.textContent = `${analysis.pricing.conservative.price} ‡∏ö‡∏≤‡∏ó`;
if (conservativeProfit) conservativeProfit.textContent = `‡∏Å‡∏≥‡πÑ‡∏£: ${analysis.pricing.conservative.dailyProfit} ‡∏ö‡∏≤‡∏ó/‡∏ß‡∏±‡∏ô`;
if (recommendedPrice) recommendedPrice.textContent = `${analysis.pricing.recommended.price} ‡∏ö‡∏≤‡∏ó`;
if (recommendedProfit) recommendedProfit.textContent = `‡∏Å‡∏≥‡πÑ‡∏£: ${analysis.pricing.recommended.dailyProfit} ‡∏ö‡∏≤‡∏ó/‡∏ß‡∏±‡∏ô`;
if (aggressivePrice) aggressivePrice.textContent = `${analysis.pricing.aggressive.price} ‡∏ö‡∏≤‡∏ó`;
if (aggressiveProfit) aggressiveProfit.textContent = `‡∏Å‡∏≥‡πÑ‡∏£: ${analysis.pricing.aggressive.dailyProfit} ‡∏ö‡∏≤‡∏ó/‡∏ß‡∏±‡∏ô`;
}

// ‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå
const strategyContent = document.getElementById('strategy-content');
if (strategyContent && analysis.tips) {
strategyContent.innerHTML = `
<div style="margin-bottom: 20px;">
<p style="font-size: 1.1rem; line-height: 1.6; margin-bottom: 15px;">
${analysis.analysisText}
</p>
</div>
<div>
<h5 style="color: var(--primary-color); margin-bottom: 15px;">üìã ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì:</h5>
<ul style="list-style: none; padding: 0;">
${analysis.tips.map(tip => `
<li style="padding: 8px 0; border-bottom: 1px solid #eee; position: relative; padding-left: 25px;">
<span style="position: absolute; left: 0; color: var(--primary-color);">üéØ</span>
${tip}
</li>
`).join('')}
</ul>
</div>
${analysis.recommendations ? `
<div style="margin-top: 20px;">
<h5 style="color: var(--business-color); margin-bottom: 15px;">üí° ‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå‡πÄ‡∏ä‡∏¥‡∏á‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à:</h5>
<ul style="list-style: none; padding: 0;">
${analysis.recommendations.map(rec => `
<li style="padding: 8px 0; border-bottom: 1px solid #eee; position: relative; padding-left: 25px;">
<span style="position: absolute; left: 0; color: var(--business-color);">üíº</span>
${rec}
</li>
`).join('')}
</ul>
</div>
` : ''}
`;
}

// ‡πÅ‡∏™‡∏î‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå
const resultSection = document.getElementById('business-analysis-result');
if (resultSection) {
resultSection.style.display = 'block';
resultSection.scrollIntoView({ behavior: 'smooth', block: 'center' });

// ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå
resultSection.classList.add('fade-scale');
setTimeout(() => {
resultSection.classList.remove('fade-scale');
}, 600);
}
}

function updateDashboardWithBusinessData(analysis) {
if (analysis && analysis.pricing) {
document.getElementById('today-price').textContent = `${analysis.pricing.recommended.price} ‡∏ö‡∏≤‡∏ó`;
document.getElementById('estimated-profit').textContent = `${analysis.pricing.recommended.dailyProfit} ‡∏ö‡∏≤‡∏ó`;
}
}

function resetBusinessTools() {
// ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à
document.querySelectorAll('.business-type-card').forEach(card => {
card.classList.remove('selected');
});

// ‡∏ã‡πà‡∏≠‡∏ô‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÅ‡∏•‡∏∞‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå
document.getElementById('cost-calculation-section').style.display = 'none';
document.getElementById('business-analysis-result').style.display = 'none';

// ‡∏ã‡πà‡∏≠‡∏ô‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
document.querySelectorAll('.business-form').forEach(form => {
form.style.display = 'none';
});
}

// =====================
// ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏≠‡∏õ‡∏ä‡∏±‡πà‡∏ô (‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á)
// =====================

function setupOptionButtons() {
document.querySelectorAll('.option-button').forEach(button => {
button.addEventListener('click', function() {
// ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡∏Ñ‡∏•‡∏¥‡∏Å
this.classList.add('pulse');
setTimeout(() => {
this.classList.remove('pulse');
}, 500);

// ‡∏´‡∏≤ option-group ‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏û‡∏≤‡πÄ‡∏£‡∏ô‡∏ï‡πå
const parent = this.closest('.option-group');

// ‡∏•‡∏ö‡∏Ñ‡∏•‡∏≤‡∏™ selected ‡∏à‡∏≤‡∏Å‡∏ó‡∏∏‡∏Å‡∏õ‡∏∏‡πà‡∏°‡πÉ‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô
parent.querySelectorAll('.option-button').forEach(btn => btn.classList.remove('selected'));

// ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏•‡∏≤‡∏™ selected ‡πÉ‡∏´‡πâ‡∏õ‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà‡∏Ñ‡∏•‡∏¥‡∏Å
this.classList.add('selected');
});
});
}

// =====================
// ‡∏£‡∏∞‡∏ö‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢ (‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á)
// =====================

function setupSalesTracking() {
const saveSalesBtn = document.getElementById('save-sales-btn');

// ‡∏ï‡∏±‡πâ‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ
const today = new Date().toISOString().split('T')[0];
document.getElementById('sale-date').value = today;

if (saveSalesBtn) {
saveSalesBtn.addEventListener('click', async function() {
const salesData = {
date: document.getElementById('sale-date').value,
prepared: parseInt(document.getElementById('prepared-amount').value) || 0,
sold: parseInt(document.getElementById('sold-amount').value) || 0,
averagePrice: parseFloat(document.getElementById('average-price').value) || 0,
weather: document.getElementById('weather-condition').value,
notes: document.getElementById('sale-notes').value
};

// ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
if (salesData.prepared === 0 || salesData.sold === 0 || salesData.averagePrice === 0) {
alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô (‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°, ‡∏Ç‡∏≤‡∏¢‡πÑ‡∏î‡πâ, ‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢)');
return;
}

if (salesData.sold > salesData.prepared) {
alert('‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏Ç‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡πÑ‡∏°‡πà‡∏Ñ‡∏ß‡∏£‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÑ‡∏õ');
return;
}

if (salesData.averagePrice < 5 || salesData.averagePrice > 50) {
alert('‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏î‡∏π‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á');
return;
}

// ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
const originalText = this.textContent;
this.textContent = "üíæ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å...";
this.disabled = true;

const success = await SalesManager.saveDailySales(salesData);

if (success) {
this.textContent = "‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢";
this.style.background = "linear-gradient(145deg, #4CAF50, #388E3C)";

// ‡∏•‡πâ‡∏≤‡∏á‡∏ü‡∏≠‡∏£‡πå‡∏°
document.getElementById('prepared-amount').value = '';
document.getElementById('sold-amount').value = '';
document.getElementById('average-price').value = '';
document.getElementById('sale-notes').value = '';

// ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•
await updateSalesDisplay();
await updateDashboardSummary();

// ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏õ‡∏∏‡πà‡∏°‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å 3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
setTimeout(() => {
this.textContent = originalText;
this.style.background = "";
this.disabled = false;
}, 3000);

} else {
alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á');
this.textContent = originalText;
this.disabled = false;
}
});
}
}

// ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢ (‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á)
async function updateSalesDisplay() {
const salesHistory = await SalesManager.getLast7DaysSales();
const historyContainer = document.getElementById('sales-history');

if (!historyContainer) return;

if (salesHistory.length === 0) {
historyContainer.innerHTML = `
<div style="text-align: center; padding: 40px; color: #666;">
<div style="font-size: 3rem; margin-bottom: 15px;">üìä</div>
<p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢</p>
<p style="font-size: 0.9rem;">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ì‡πå</p>
</div>
`;
} else {
let html = '<div style="overflow-x: auto;">';
html += '<table class="sales-table">';
html += `
<thead>
<tr>
<th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>
<th>‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°</th>
<th>‡∏Ç‡∏≤‡∏¢</th>
<th>‡πÄ‡∏´‡∏•‡∏∑‡∏≠</th>
<th>% ‡∏Ç‡∏≤‡∏¢</th>
<th>‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢</th>
<th>‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ</th>
<th>‡∏≠‡∏≤‡∏Å‡∏≤‡∏®</th>
</tr>
</thead>
`;
html += '<tbody>';

salesHistory.forEach(sale => {
const weatherIcon = sale.weather === 'sunny' ? '‚òÄÔ∏è' : 
                  sale.weather === 'cloudy' ? '‚òÅÔ∏è' : 'üåßÔ∏è';
const sellThroughRate = sale.sellThroughRate || Math.round((sale.sold / sale.prepared) * 100);
const revenue = sale.revenue || (sale.sold * (sale.averagePrice || 12));

html += `
<tr>
<td>${formatThaiDate(sale.date)}</td>
<td>${sale.prepared}</td>
<td>${sale.sold}</td>
<td>${sale.leftover}</td>
<td style="color: ${sellThroughRate >= 80 ? '#4CAF50' : sellThroughRate >= 60 ? '#FF9800' : '#F44336'}">${sellThroughRate}%</td>
<td>${(sale.averagePrice || 12).toFixed(1)} ‡∏ö‡∏≤‡∏ó</td>
<td style="font-weight: bold; color: #2E7D32;">${revenue.toFixed(0)} ‡∏ö‡∏≤‡∏ó</td>
<td>${weatherIcon}</td>
</tr>
`;
});

html += '</tbody></table></div>';
historyContainer.innerHTML = html;
}

// ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Å‡∏≤‡∏£‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ì‡πå
const prediction = SalesManager.calculatePrediction(salesHistory);
updatePredictionDisplay(prediction);
}

function updatePredictionDisplay(prediction) {
const predictionAmountEl = document.getElementById('predicted-amount');
const predictionReasonEl = document.getElementById('prediction-reason');

if (predictionAmountEl && predictionReasonEl) {
predictionAmountEl.textContent = prediction.amount > 0 ? `${prediction.amount} ‡πÑ‡∏°‡πâ` : '-- ‡πÑ‡∏°‡πâ';
predictionReasonEl.innerHTML = `
<div style="margin-bottom: 10px;">${prediction.reason}</div>
${prediction.recommendations ? `
<div style="font-size: 0.9rem; opacity: 0.9;">
<strong>üí° ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥:</strong> ${prediction.recommendations.join(' ‚Ä¢ ')}
</div>
` : ''}
`;

// ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏±‡πà‡∏ô
const predictionContainer = predictionAmountEl.closest('.prediction-highlight');
if (predictionContainer) {
if (prediction.confidence === '‡∏™‡∏π‡∏á') {
predictionContainer.style.background = 'linear-gradient(135deg, #4CAF50, #388E3C)';
} else if (prediction.confidence === '‡∏ï‡πà‡∏≥') {
predictionContainer.style.background = 'linear-gradient(135deg, #FF9800, #F57C00)';
} else {
predictionContainer.style.background = 'linear-gradient(135deg, #2196F3, #1976D2)';
}
}
}
}

// ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏£‡∏∏‡∏õ‡πÉ‡∏ô‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î (‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á)
async function updateDashboardSummary() {
const salesHistory = await SalesManager.getLast7DaysSales();
const summaryContainer = document.getElementById('dashboard-sales-summary');

if (!summaryContainer) return;

if (salesHistory.length === 0) {
summaryContainer.innerHTML = `
<div style="text-align: center; padding: 30px;">
<div style="font-size: 2.5rem; margin-bottom: 15px;">üìà</div>
<p style="margin-bottom: 10px;">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢</p>
<p style="font-size: 0.9rem; color: #666;">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏ó‡∏µ‡πà‡∏ô‡πà‡∏≤‡∏™‡∏ô‡πÉ‡∏à</p>
</div>
`;
} else {
const summary = SalesManager.generateDashboardSummary(salesHistory);

let html = '<div class="dashboard-stats" style="grid-template-columns: repeat(4, 1fr); gap: 15px; margin-bottom: 20px;">';

html += `
<div class="stat-card">
<div class="stat-label">‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏Ç‡∏≤‡∏¢/‡∏ß‡∏±‡∏ô</div>
<div class="stat-value">${summary.avgSold}</div>
<div class="stat-label">‡πÑ‡∏°‡πâ</div>
</div>
<div class="stat-card">
<div class="stat-label">‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ/‡∏ß‡∏±‡∏ô</div>
<div class="stat-value">${summary.avgRevenue}</div>
<div class="stat-label">‡∏ö‡∏≤‡∏ó</div>
</div>
<div class="stat-card">
<div class="stat-label">% ‡∏Ç‡∏≤‡∏¢‡πÑ‡∏î‡πâ</div>
<div class="stat-value" style="color: ${summary.avgSellThrough >= 80 ? '#4CAF50' : summary.avgSellThrough >= 60 ? '#FF9800' : '#F44336'}">${summary.avgSellThrough}%</div>
<div class="stat-label">‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢</div>
</div>
<div class="stat-card">
<div class="stat-label">‡πÅ‡∏ô‡∏ß‡πÇ‡∏ô‡πâ‡∏°</div>
<div class="stat-value" style="color: ${summary.growthTrend > 0 ? '#4CAF50' : summary.growthTrend < 0 ? '#F44336' : '#FF9800'}">
${summary.growthTrend > 0 ? '+' : ''}${summary.growthTrend}%
</div>
<div class="stat-label">‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡∏¥‡∏ö‡πÇ‡∏ï</div>
</div>
`;

html += '</div>';

if (summary.bestDay && summary.worstDay) {
html += `
<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
<div class="success-box" style="text-align: center; padding: 20px;">
<div style="font-size: 0.9rem; margin-bottom: 8px;">üèÜ ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Ç‡∏≤‡∏¢‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î</div>
<div style="font-size: 1.8rem; font-weight: bold; color: #2E7D32; margin: 8px 0;">${summary.bestDay.sold} ‡πÑ‡∏°‡πâ</div>
<div style="font-size: 0.8rem; color: #666;">${formatThaiDate(summary.bestDay.date)}</div>
<div style="font-size: 0.8rem; color: #2E7D32; margin-top: 5px;">
${(summary.bestDay.revenue || (summary.bestDay.sold * 12)).toFixed(0)} ‡∏ö‡∏≤‡∏ó
</div>
</div>
<div class="warning-box" style="text-align: center; padding: 20px;">
<div style="font-size: 0.9rem; margin-bottom: 8px;">üìâ ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Ç‡∏≤‡∏¢‡∏ô‡πâ‡∏≠‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î</div>
<div style="font-size: 1.8rem; font-weight: bold; color: #F57C00; margin: 8px 0;">${summary.worstDay.sold} ‡πÑ‡∏°‡πâ</div>
<div style="font-size: 0.8rem; color: #666;">${formatThaiDate(summary.worstDay.date)}</div>
<div style="font-size: 0.8rem; color: #F57C00; margin-top: 5px;">
${(summary.worstDay.revenue || (summary.worstDay.sold * 12)).toFixed(0)} ‡∏ö‡∏≤‡∏ó
</div>
</div>
</div>
`;
}

summaryContainer.innerHTML = html;
}
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢
function formatThaiDate(dateString) {
const date = new Date(dateString);
const thaiMonths = ['‡∏°.‡∏Ñ.', '‡∏Å.‡∏û.', '‡∏°‡∏µ.‡∏Ñ.', '‡πÄ‡∏°.‡∏¢.', '‡∏û.‡∏Ñ.', '‡∏°‡∏¥.‡∏¢.',
                  '‡∏Å.‡∏Ñ.', '‡∏™.‡∏Ñ.', '‡∏Å.‡∏¢.', '‡∏ï.‡∏Ñ.', '‡∏û.‡∏¢.', '‡∏ò.‡∏Ñ.'];
return `${date.getDate()} ${thaiMonths[date.getMonth()]}`;
}

// =====================
// ‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏ä‡∏ó‡∏Å‡∏±‡∏ö AI (‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á)
// =====================

async function setupChatSystem() {
const chatMessages = document.getElementById('chat-messages');
const chatInput = document.getElementById('chat-input');
const chatSendBtn = document.getElementById('chat-send-btn');

if (!chatMessages || !chatInput || !chatSendBtn) {
console.error('Chat elements not found');
return;
}

async function sendMessage() {
const message = chatInput.value.trim();
if (!message) return;

// ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
addMessage(message, 'user');
chatInput.value = '';

// ‡πÅ‡∏™‡∏î‡∏á‡∏ß‡πà‡∏≤‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏û‡∏¥‡∏°‡∏û‡πå
const typingMessage = addTypingIndicator();

try {
const response = await AIEngine.getChatResponse(message);

// ‡∏•‡∏ö typing indicator
chatMessages.removeChild(typingMessage);

// ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö
addMessage(response, 'ai');

} catch (error) {
console.error('Error getting AI response:', error);
chatMessages.removeChild(typingMessage);
addMessage('‡∏Ç‡∏≠‡∏≠‡∏†‡∏±‡∏¢ ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö ‡πÇ‡∏õ‡∏£‡∏î‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á üôè', 'ai');
}
}

function addMessage(text, type) {
const messageElement = document.createElement('div');
messageElement.className = `message ${type}`;
messageElement.innerHTML = `
${text}
<div class="message-time">‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà</div>
`;
chatMessages.appendChild(messageElement);
chatMessages.scrollTop = chatMessages.scrollHeight;
return messageElement;
}

function addTypingIndicator() {
const typingElement = document.createElement('div');
typingElement.className = 'message ai';
typingElement.innerHTML = `
<div class="typing-indicator">
<span></span>
<span></span>
<span></span>
</div>
`;
chatMessages.appendChild(typingElement);
chatMessages.scrollTop = chatMessages.scrollHeight;
return typingElement;
}

chatSendBtn.addEventListener('click', sendMessage);
chatInput.addEventListener('keypress', function(event) {
if (event.key === 'Enter' && !event.shiftKey) {
event.preventDefault();
sendMessage();
}
});
}

// =====================
// ‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ (‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á)
// =====================

function setupSettings() {
const saveApiKeyBtn = document.getElementById('save-api-key');
const saveBusinessInfoBtn = document.getElementById('save-business-info');
const saveAlertSettingsBtn = document.getElementById('save-alert-settings');

function showSaveSuccess(button, message = "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢ ‚úÖ") {
const originalText = button.textContent;
const originalColor = button.style.background;

button.textContent = message;
button.style.background = "linear-gradient(145deg, #4CAF50, #388E3C)";

setTimeout(() => {
button.textContent = originalText;
button.style.background = originalColor;
}, 2500);
}

if (saveApiKeyBtn) {
saveApiKeyBtn.addEventListener('click', async function() {
const provider = document.getElementById('api-provider').value;
const apiKey = document.getElementById('api-key').value;

if (!apiKey.trim()) {
alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà API Key');
return;
}

const success = await UserDataManager.updateApiSettings(provider, apiKey);
if (success) {
showSaveSuccess(this, "API Key ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡πâ‡∏ß ‚úÖ");
}
});
}

if (saveBusinessInfoBtn) {
saveBusinessInfoBtn.addEventListener('click', async function() {
const name = document.getElementById('business-name').value;
const location = document.getElementById('business-location').value;
const businessType = document.getElementById('business-type-setting').value;
const description = document.getElementById('business-description').value;

const success = await UserDataManager.updateBusinessInfo(name, location, description, businessType);
if (success) {
showSaveSuccess(this, "‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡πâ‡∏≤‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡πâ‡∏ß ‚úÖ");
}
});
}

if (saveAlertSettingsBtn) {
saveAlertSettingsBtn.addEventListener('click', async function() {
const weatherAlert = document.getElementById('weather-alert').checked;
const priceAlert = document.getElementById('price-alert').checked;
const eventAlert = document.getElementById('event-alert').checked;
const salesReminder = document.getElementById('sales-reminder').checked;

const success = await UserDataManager.updateAlertSettings(weatherAlert, priceAlert, eventAlert, salesReminder);
if (success) {
showSaveSuccess(this, "‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡πâ‡∏ß ‚úÖ");
}
});
}
}

// =====================
// ‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î (‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á)
// =====================

async function setupDashboard() {
const refreshBtn = document.getElementById('refresh-recommendation');

async function refreshRecommendation() {
console.log("‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥...");
if (!refreshBtn) return;

const originalText = refreshBtn.textContent;
refreshBtn.textContent = "üîÑ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...";
refreshBtn.disabled = true;

try {
const realPorkPrice = await fetchRealPorkPrice();

// ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥
const weatherTypes = ['sunny', 'cloudy', 'rainy'];
const weather = weatherTypes[Math.floor(Math.random() * weatherTypes.length)];

const weatherDesc = {
'sunny': '‡πÅ‡∏î‡∏î‡∏≠‡∏≠‡∏Å ‡∏£‡πâ‡∏≠‡∏ô‡∏à‡∏±‡∏î',
'cloudy': '‡∏°‡∏µ‡πÄ‡∏°‡∏Ü‡∏°‡∏≤‡∏Å ‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡πÄ‡∏¢‡πá‡∏ô‡∏™‡∏ö‡∏≤‡∏¢',
'rainy': '‡∏ù‡∏ô‡∏ï‡∏Å‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢'
}[weather];

const locations = ['‡∏ï‡∏•‡∏≤‡∏î‡∏™‡∏î', '‡∏´‡∏ô‡πâ‡∏≤‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô', '‡πÉ‡∏Å‡∏•‡πâ‡∏≠‡∏≠‡∏ü‡∏ü‡∏¥‡∏®', '‡πÉ‡∏ô‡∏ä‡∏∏‡∏°‡∏ä‡∏ô', '‡∏£‡∏¥‡∏°‡∏ñ‡∏ô‡∏ô‡πÉ‡∏´‡∏ç‡πà'];
const recommendedLocation = locations[Math.floor(Math.random() * locations.length)];

// ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ï‡∏≤‡∏°‡∏£‡∏≤‡∏Ñ‡∏≤‡∏´‡∏°‡∏π‡∏à‡∏£‡∏¥‡∏á
const costPerSkewer = (realPorkPrice / 1000) * 25 + 1.5; // 25g ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠ + ‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏≠‡∏∑‡πà‡∏ô
const recommendedPrice = Math.round(costPerSkewer * 1.8); // ‡∏Å‡∏≥‡πÑ‡∏£ 80%

const reasons = [
'‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡∏ï‡∏•‡∏≤‡∏î',
'‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÅ‡∏•‡∏∞‡∏û‡∏§‡∏ï‡∏¥‡∏Å‡∏£‡∏£‡∏°‡∏ú‡∏π‡πâ‡∏ö‡∏£‡∏¥‡πÇ‡∏†‡∏Ñ',
'‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô‡πÉ‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡∏∞‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏á‡∏≤‡∏ô',
'‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡∏ö‡∏£‡∏¥‡πÇ‡∏†‡∏Ñ‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡∏ô‡∏µ‡πâ‡πÅ‡∏•‡∏∞‡πÄ‡∏ó‡∏£‡∏ô‡∏î‡πå‡∏ï‡∏•‡∏≤‡∏î'
];

const reason = reasons[Math.floor(Math.random() * reasons.length)];

// ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î
document.getElementById('weather-desc').textContent = weatherDesc;
document.getElementById('location-rec').textContent = recommendedLocation;
document.getElementById('price-rec').textContent = recommendedPrice;
document.getElementById('price-reason').textContent = reason;

// ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥
document.getElementById('today-price').textContent = `${recommendedPrice} ‡∏ö‡∏≤‡∏ó`;
document.getElementById('weather-status').textContent = weatherDesc.split(' ')[0];
document.getElementById('humidity').textContent = 55 + Math.floor(Math.random() * 30);

const estimatedProfit = Math.round((recommendedPrice - costPerSkewer) * 180); // 180 ‡πÑ‡∏°‡πâ‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô
document.getElementById('estimated-profit').textContent = `${estimatedProfit} ‡∏ö‡∏≤‡∏ó`;

// ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ
const dailyTips = [];
const businessType = UserDataManager.userData.businessData.selectedType || 'producer';
const tips = AIEngine.businessTips[businessType] || AIEngine.businessTips.producer;

// ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ 3 ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÅ‡∏ö‡∏ö‡∏™‡∏∏‡πà‡∏°
while (dailyTips.length < 3) {
const tip = AIEngine.getRandomElement(tips);
if (!dailyTips.includes(tip)) {
dailyTips.push(tip);
}
}

// ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡∏ï‡∏≤‡∏°‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®
const weatherTips = AIEngine.weatherStrategies[weather] || [];
if (weatherTips.length > 0) {
dailyTips.push(AIEngine.getRandomElement(weatherTips));
}

const tipsList = document.getElementById('daily-tips');
if (tipsList) {
tipsList.innerHTML = '';
dailyTips.forEach((tip, index) => {
const li = document.createElement('li');
li.textContent = tip;
li.style.animationDelay = `${index * 0.1}s`;

li.classList.add('slide-in');
tipsList.appendChild(li);
});
}

} catch (error) {
console.error('Error refreshing recommendation:', error);
// ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏£‡∏≠‡∏á
document.getElementById('weather-desc').textContent = '‡πÅ‡∏î‡∏î‡∏≠‡∏≠‡∏Å';
document.getElementById('location-rec').textContent = '‡∏ï‡∏•‡∏≤‡∏î';
document.getElementById('price-rec').textContent = '15';
document.getElementById('price-reason').textContent = '‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡∏ï‡∏•‡∏≤‡∏î';
} finally {
refreshBtn.textContent = originalText;
refreshBtn.disabled = false;
}
}

if (refreshBtn) {
refreshBtn.addEventListener('click', refreshRecommendation);
}

// ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
await refreshRecommendation();
await updateDashboardSummary();
}

// =====================
// ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö DOM elements ‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô
// =====================

function checkRequiredElements() {
const requiredElements = [
'current-date',
'calculate-business-btn',
'business-analysis-result',
'cost-breakdown',
'breakeven-analysis',
'market-position',
'conservative-price',
'recommended-price',
'aggressive-price',
'strategy-content'
];

const missingElements = [];
requiredElements.forEach(id => {
if (!document.getElementById(id)) {
missingElements.push(id);
console.error(`‡πÑ‡∏°‡πà‡∏û‡∏ö element ‡∏ó‡∏µ‡πà‡∏°‡∏µ id: ${id}`);
}
});

if (missingElements.length > 0) {
console.error('‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏≠‡∏á‡∏Ñ‡πå‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô:', missingElements);
return false;
}

return true;
}

// =====================
// Error Handler (‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á)
// =====================

function setupErrorHandling() {
window.addEventListener('error', function(event) {
console.error('JavaScript Error:', event.error);

// ‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÅ‡∏ö‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡∏°‡∏¥‡∏ï‡∏£
showNotification('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢ ‡πÅ‡∏ï‡πà‡πÅ‡∏≠‡∏õ‡∏¢‡∏±‡∏á‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏õ‡∏Å‡∏ï‡∏¥', 'error');
});

// Handle unhandled promise rejections
window.addEventListener('unhandledrejection', function(event) {
console.error('Unhandled Promise Rejection:', event.reason);
event.preventDefault();
});
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
function showNotification(message, type = 'info', duration = 5000) {
const notification = document.createElement('div');
notification.className = `notification ${type}`;
notification.style.position = 'fixed';
notification.style.top = '20px';
notification.style.right = '20px';
notification.style.zIndex = '9999';
notification.style.maxWidth = '350px';
notification.style.animation = 'slideInRight 0.3s ease';

const icons = {
info: '#2196F3',
warning: '#FFC107', 
error: '#F44336',
success: '#4CAF50'
};

notification.innerHTML = `
<svg viewBox="0 0 24 24" fill="none" stroke="${icons[type]}" stroke-width="2">
<circle cx="12" cy="12" r="10"></circle>
<line x1="12" y1="8" x2="12" y2="12"></line>
<line x1="12" y1="16" x2="12" y2="16"></line>
</svg>
<div class="notification-content">
<p>${message}</p>
</div>
`;

document.body.appendChild(notification);

// ‡∏•‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î
setTimeout(() => {
if (notification.parentNode) {
notification.style.animation = 'slideOutRight 0.3s ease';
setTimeout(() => {
if (notification.parentNode) {
notification.parentNode.removeChild(notification);
}
}, 300);
}
}, duration);
}

// ‡πÄ‡∏û‡∏¥‡πà‡∏° CSS ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö animation
const animationStyle = document.createElement('style');
animationStyle.textContent = `
@keyframes slideInRight {
from { transform: translateX(100%); opacity: 0; }
to { transform: translateX(0); opacity: 1; }
}

@keyframes slideOutRight {
from { transform: translateX(0); opacity: 1; }
to { transform: translateX(100%); opacity: 0; }
}
`;
document.head.appendChild(animationStyle);

// =====================
// Performance Monitoring (‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á)
// =====================

function setupPerformanceMonitoring() {
// ‡∏ß‡∏±‡∏î‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤
window.addEventListener('load', function() {
setTimeout(function() {
const perfData = performance.getEntriesByType('navigation')[0];
if (perfData) {
console.log('üìä Performance Stats:');
console.log('- DOM Content Loaded:', Math.round(perfData.domContentLoadedEventEnd - perfData.domContentLoadedEventStart), 'ms');
console.log('- Total Load Time:', Math.round(perfData.loadEventEnd - perfData.loadEventStart), 'ms');
console.log('- Page Load Complete:', Math.round(perfData.loadEventEnd - perfData.fetchStart), 'ms');

// ‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ñ‡πâ‡∏≤‡πÇ‡∏´‡∏•‡∏î‡∏ä‡πâ‡∏≤
if (perfData.loadEventEnd - perfData.fetchStart > 5000) {
showNotification('‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡∏Ñ‡πà‡∏≠‡∏ô‡∏Ç‡πâ‡∏≤‡∏á‡∏ä‡πâ‡∏≤ ‡∏≠‡∏≤‡∏à‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏≠‡∏¥‡∏ô‡πÄ‡∏ó‡∏≠‡∏£‡πå‡πÄ‡∏ô‡πá‡∏ï', 'warning', 3000);
}
}
}, 100);
});

// ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≥
if (performance.memory) {
const checkMemory = () => {
const memory = performance.memory;
if (memory.usedJSHeapSize > memory.jsHeapSizeLimit * 0.9) {
console.warn('üß† Memory usage is high:', Math.round(memory.usedJSHeapSize / 1024 / 1024), 'MB');
}
};

setInterval(checkMemory, 30000); // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ó‡∏∏‡∏Å 30 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
}
}

// =====================
// Service Worker ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö PWA
// =====================

function setupServiceWorker() {
if ('serviceWorker' in navigator) {
window.addEventListener('load', function() {
// ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏û‡∏¥‡πà‡∏° Service Worker ‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï
// navigator.serviceWorker.register('/sw.js')
// .then(function(registration) {
//     console.log('ServiceWorker registration successful');
//     showNotification('‡πÅ‡∏≠‡∏õ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÅ‡∏ö‡∏ö‡∏≠‡∏≠‡∏ü‡πÑ‡∏•‡∏ô‡πå', 'success', 3000);
// })
// .catch(function(err) {
//     console.log('ServiceWorker registration failed: ', err);
// });
});
}
}

// =====================
// Auto-save ‡πÅ‡∏•‡∏∞ Backup
// =====================

function setupAutoSave() {
let autoSaveTimer;

function triggerAutoSave() {
clearTimeout(autoSaveTimer);
autoSaveTimer = setTimeout(async () => {
if (UserDataManager.isInitialized) {
const saved = await UserDataManager.saveUserData();
if (saved) {
console.log('üìù Auto-save completed');
}
}
}, 2000); // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å 2 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á
}

// ‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏´‡πâ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡πÉ‡∏ô‡∏ü‡∏≠‡∏£‡πå‡∏°
document.addEventListener('input', function(event) {
if (event.target.matches('input, select, textarea')) {
triggerAutoSave();
}
});

// ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡πà‡∏≠‡∏ô‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö
window.addEventListener('beforeunload', function() {
if (UserDataManager.isInitialized) {
UserDataManager.saveUserData();
}
});
}

// =====================
// Accessibility ‡πÄ‡∏™‡∏£‡∏¥‡∏°
// =====================

function setupAccessibility() {
// ‡πÄ‡∏û‡∏¥‡πà‡∏° keyboard navigation
document.addEventListener('keydown', function(event) {
// ESC ‡∏õ‡∏¥‡∏î modal ‡∏´‡∏£‡∏∑‡∏≠ reset
if (event.key === 'Escape') {
const activeModal = document.querySelector('.modal.active');
if (activeModal) {
activeModal.classList.remove('active');
}
}

// Enter ‡∏ö‡∏ô‡∏õ‡∏∏‡πà‡∏°
if (event.key === 'Enter' && event.target.classList.contains('tab')) {
event.target.click();
}
});

// ‡πÄ‡∏û‡∏¥‡πà‡∏° focus indicators ‡∏ó‡∏µ‡πà‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô
const style = document.createElement('style');
style.textContent = `
*:focus {
outline: 2px solid var(--primary-color) !important;
outline-offset: 2px !important;
}

.tab:focus,
.option-button:focus,
.business-type-card:focus {
transform: translateY(-2px);
box-shadow: 0 4px 12px rgba(255, 87, 34, 0.3);
}
`;
document.head.appendChild(style);
}

// =====================
// ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÅ‡∏≠‡∏õ‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô (Main Initialization)
// =====================

document.addEventListener('DOMContentLoaded', async function() {
console.log("üöÄ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÅ‡∏≠‡∏õ‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô Smart Pork Skewer Business Advisor AI v4.0...");

// ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Error Handling
setupErrorHandling();

// ‡πÅ‡∏™‡∏î‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
setThaiDate();

// ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Performance Monitoring
setupPerformanceMonitoring();

// ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Accessibility
setupAccessibility();

// ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Auto-save
setupAutoSave();

// ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Service Worker
setupServiceWorker();

// ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏≠‡∏á‡∏Ñ‡πå‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô
if (!checkRequiredElements()) {
console.error("‡∏≠‡∏á‡∏Ñ‡πå‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏ö‡∏≤‡∏á‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏°‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô");
showNotification('‡∏ö‡∏≤‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏Ç‡∏≠‡∏á‡πÅ‡∏≠‡∏õ‡∏≠‡∏≤‡∏à‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå ‡πÇ‡∏õ‡∏£‡∏î‡∏•‡∏≠‡∏á‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö', 'warning');
}

// ‡∏£‡∏≠‡πÉ‡∏´‡πâ Firebase ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÅ‡∏•‡∏∞‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö
try {
console.log("üîê ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Firebase...");
await UserDataManager.initAuth();
console.log('‚úÖ Firebase ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô - User ID:', UserDataManager.currentUserId);

// ‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
showNotification('‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à üéâ', 'success', 3000);

} catch (error) {
console.error('‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô Firebase:', error);
showNotification('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ ‡πÅ‡∏ï‡πà‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏±‡∏á‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‡πÑ‡∏î‡πâ', 'warning');
}

// ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡πà‡∏≤‡∏á‡πÜ
console.log("‚öôÔ∏è ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö...");

try {
setupTabs();
console.log("‚úÖ ‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏ó‡πá‡∏ö‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô");

setupOptionButtons();
console.log("‚úÖ ‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡∏∏‡πà‡∏°‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô");

setupBusinessTools();
console.log("‚úÖ ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô");

await setupChatSystem();
console.log("‚úÖ ‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏ä‡∏ó AI ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô");

setupSalesTracking();
console.log("‚úÖ ‡∏£‡∏∞‡∏ö‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô");

await setupDashboard();
console.log("‚úÖ ‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô");

setupSettings();
console.log("‚úÖ ‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô");

} catch (error) {
console.error("‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö:", error);
showNotification('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ö‡∏≤‡∏á‡∏™‡πà‡∏ß‡∏ô ‡πÅ‡∏ï‡πà‡πÅ‡∏≠‡∏õ‡∏¢‡∏±‡∏á‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ', 'warning');
}

// ‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏´‡∏°‡∏π‡∏à‡∏£‡∏¥‡∏á‡πÅ‡∏•‡∏∞‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
try {
console.log("üí∞ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏´‡∏°‡∏π‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î...");
const realPorkPrice = await fetchRealPorkPrice();

// ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÉ‡∏ô‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏ú‡∏•‡∏¥‡∏ï‡πÄ‡∏≠‡∏á
const meatPriceInput = document.getElementById('producer-meat-price');
if (meatPriceInput) {
meatPriceInput.value = realPorkPrice;
}

console.log("‚úÖ ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏£‡∏≤‡∏Ñ‡∏≤‡∏´‡∏°‡∏π‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢:", realPorkPrice, "‡∏ö‡∏≤‡∏ó/‡∏Å‡∏Å.");
} catch (error) {
console.error("‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏´‡∏°‡∏π:", error);
}

// ‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏™‡∏£‡πá‡∏à
setTimeout(() => {
showNotification('üéâ Smart Pork Skewer Business AI ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß!', 'success', 4000);
console.log("üéâ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÅ‡∏≠‡∏õ‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß!");

// ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏Ñ‡∏¢‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏°‡∏≤‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
if (UserDataManager.userData.profile.businessName) {
showNotification(`‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏Å‡∏•‡∏±‡∏ö ${UserDataManager.userData.profile.businessName} üëã`, 'info', 3000);
} else {
// ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÉ‡∏´‡∏°‡πà
setTimeout(() => {
showNotification('üí° ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡πÉ‡∏ô‡πÅ‡∏ó‡πá‡∏ö "‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à"', 'info', 5000);
}, 2000);
}
}, 1500);

// ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏•‡∏≤‡∏î‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏∞‡∏¢‡∏∞
setInterval(async () => {
try {
await fetchRealPorkPrice();
console.log('üîÑ ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡∏•‡∏≤‡∏î‡πÅ‡∏•‡πâ‡∏ß');
} catch (error) {
console.error('‚ùå ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡∏•‡∏≤‡∏î‡πÑ‡∏î‡πâ:', error);
}
}, 300000); // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ó‡∏∏‡∏Å 5 ‡∏ô‡∏≤‡∏ó‡∏µ

// ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢
if (UserDataManager.userData.preferences.salesReminder) {
// ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÉ‡∏ô‡∏ï‡∏≠‡∏ô‡πÄ‡∏¢‡πá‡∏ô (18:00)
const now = new Date();
const reminderTime = new Date();
reminderTime.setHours(18, 0, 0, 0);

if (now.getHours() >= 18 && now.getHours() < 22) {
setTimeout(() => {
showNotification('‚è∞ ‡∏≠‡∏¢‡πà‡∏≤‡∏•‡∏∑‡∏°‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô‡πÉ‡∏ô‡πÅ‡∏ó‡πá‡∏ö "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢"', 'info', 6000);
}, 30000); // ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡πÅ‡∏≠‡∏õ 30 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
}
}
});

// =====================
// ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏ô‡∏±‡∏ö‡∏™‡∏ô‡∏∏‡∏ô‡πÄ‡∏™‡∏£‡∏¥‡∏°
// =====================

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏ä‡∏£‡πå‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå
function shareResults(data) {
if (navigator.share) {
navigator.share({
title: 'Smart Pork Skewer Business Analysis',
text: `‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á: ‡∏£‡∏≤‡∏Ñ‡∏≤‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ ${data.price} ‡∏ö‡∏≤‡∏ó/‡πÑ‡∏°‡πâ ‡∏Å‡∏≥‡πÑ‡∏£‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì ${data.profit} ‡∏ö‡∏≤‡∏ó/‡∏ß‡∏±‡∏ô`,
url: window.location.href
}).catch(console.error);
} else {
// Fallback ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö
const text = `‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á: ‡∏£‡∏≤‡∏Ñ‡∏≤‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ ${data.price} ‡∏ö‡∏≤‡∏ó/‡πÑ‡∏°‡πâ ‡∏Å‡∏≥‡πÑ‡∏£‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì ${data.profit} ‡∏ö‡∏≤‡∏ó/‡∏ß‡∏±‡∏ô - ${window.location.href}`;
navigator.clipboard.writeText(text).then(() => {
showNotification('‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÅ‡∏ä‡∏£‡πå‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏Ñ‡∏•‡∏¥‡∏õ‡∏ö‡∏≠‡∏£‡πå‡∏î‡πÅ‡∏•‡πâ‡∏ß üìã', 'success');
}).catch(() => {
showNotification('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÑ‡∏î‡πâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏î‡πâ‡∏ß‡∏¢‡∏ï‡∏ô‡πÄ‡∏≠‡∏á', 'warning');
});
}
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
async function exportData() {
try {
const salesData = await SalesManager.getAllSalesData();
const userData = UserDataManager.userData;

const exportData = {
profile: userData.profile,
businessData: userData.businessData,
salesHistory: salesData,
exportDate: new Date().toISOString(),
appVersion: '4.0'
};

const dataStr = JSON.stringify(exportData, null, 2);
const dataBlob = new Blob([dataStr], {type: 'application/json'});
const url = URL.createObjectURL(dataBlob);

const link = document.createElement('a');
link.href = url;
link.download = `pork-business-data-${new Date().toISOString().split('T')[0]}.json`;
document.body.appendChild(link);
link.click();
document.body.removeChild(link);
URL.revokeObjectURL(url);

showNotification('‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à üì§', 'success');
} catch (error) {
console.error('Error exporting data:', error);
showNotification('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•', 'error');
}
}

// ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏∏‡πà‡∏°‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ (‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£)
function addExportButton() {
const settingsTab = document.getElementById('settings-tab');
if (settingsTab) {
const exportCard = document.createElement('div');
exportCard.className = 'card';
exportCard.innerHTML = `
<div class="card-title">üì§ ‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</div>
<div class="highlight-box">
<p style="margin-bottom: 15px;">‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡πâ‡∏≤‡∏¢‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏≠‡∏∑‡πà‡∏ô</p>
<button class="action-btn" onclick="exportData()">üì§ ‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
</div>
`;
settingsTab.appendChild(exportCard);
}
}

// ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏™‡∏£‡πá‡∏à
setTimeout(addExportButton, 2000);

console.log("üéØ Smart Pork Skewer Business Advisor AI v4.0 - ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß!");
</script>
</body>
</html>
