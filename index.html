<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> ‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞ </title>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Sarabun', sans-serif;
            background: linear-gradient(135deg, #1a1a1a 0%, #2c1810 25%, #3d2914 50%, #4a3018 75%, #1a1a1a 100%);
            min-height: 100vh;
            color: #2c1810; /* ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡πÄ‡∏Ç‡πâ‡∏° */
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 20% 50%, rgba(255, 215, 0, 0.1) 0%, transparent 50%),
                        radial-gradient(circle at 80% 20%, rgba(255, 223, 0, 0.08) 0%, transparent 50%),
                        radial-gradient(circle at 40% 80%, rgba(255, 193, 7, 0.06) 0%, transparent 50%);
            pointer-events: none;
            z-index: -1;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
        }

        .header {
            text-align: center;
            padding: 30px 0;
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.95) 0%, rgba(255, 193, 7, 0.98) 50%, rgba(255, 171, 0, 0.95) 100%);
            border-radius: 20px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(255, 215, 0, 0.3), 
                        0 12px 40px rgba(0, 0, 0, 0.4),
                        inset 0 1px 0 rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 215, 0, 0.4);
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            animation: shimmer 3s infinite;
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            color: #1a1a1a;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            position: relative;
            z-index: 1;
        }

        .header .subtitle {
            font-size: 1.2rem;
            color: #2c1810;
            font-weight: 500;
            position: relative;
            z-index: 1;
        }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-bottom: 25px;
        }

        .card {
            background: linear-gradient(135deg, rgba(240, 240, 240, 0.95) 0%, rgba(235, 235, 235, 0.98) 100%); /* ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏™‡∏µ‡∏≠‡πà‡∏≠‡∏ô */
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4), 
                        0 4px 16px rgba(255, 215, 0, 0.1),
                        inset 0 1px 0 rgba(255, 215, 0, 0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 215, 0, 0.3);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #FFD700, #FFC107, #FFAB00);
        }

        .card::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent, rgba(255, 215, 0, 0.05), transparent);
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 16px 48px rgba(0, 0, 0, 0.5), 
                        0 8px 24px rgba(255, 215, 0, 0.2),
                        inset 0 1px 0 rgba(255, 215, 0, 0.3);
            border-color: rgba(255, 215, 0, 0.5);
        }

        .card:hover::after {
            opacity: 1;
        }

        .card h2 {
            font-size: 1.5rem;
            font-weight: 600;
            color: #8B4513; /* ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å‡∏™‡∏µ‡∏ó‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•‡πÄ‡∏Ç‡πâ‡∏° */
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            text-shadow: none; /* ‡∏•‡∏ö text shadow */
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #654321; /* ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å‡∏™‡∏µ‡∏ó‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•‡πÄ‡∏Ç‡πâ‡∏° */
            text-shadow: none; /* ‡∏•‡∏ö text shadow */
        }

        .input-group input,
        .input-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid rgba(139, 69, 19, 0.5); /* ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ border ‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏• */
            border-radius: 8px;
            font-size: 1rem;
            font-family: inherit;
            transition: all 0.3s ease;
            background: rgba(245, 245, 245, 0.9); /* ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡∏≠‡πà‡∏≠‡∏ô */
            color: #2c1810; /* ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡πÄ‡∏Ç‡πâ‡∏° */
            backdrop-filter: blur(10px);
        }

        .input-group input:focus,
        .input-group select:focus {
            outline: none;
            border-color: #8B4513; /* ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ focus ‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏• */
            box-shadow: 0 0 0 3px rgba(139, 69, 19, 0.2),
                        inset 0 2px 4px rgba(0, 0, 0, 0.1);
            background: rgba(250, 250, 250, 0.95);
        }

        .input-group input::placeholder {
            color: rgba(139, 69, 19, 0.6); /* ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô placeholder ‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•‡∏≠‡πà‡∏≠‡∏ô */
        }

        .button {
            background: linear-gradient(135deg, #FFD700 0%, #FFC107 50%, #FFAB00 100%);
            color: #1a1a1a;
            border: none;
            padding: 15px 25px;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            width: 100%;
            margin: 10px 0;
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3),
                        inset 0 1px 0 rgba(255, 255, 255, 0.3);
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        }

        .button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.5s;
        }

        .button:hover::before {
            left: 100%;
        }

        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 215, 0, 0.4),
                        0 4px 8px rgba(0, 0, 0, 0.3),
                        inset 0 1px 0 rgba(255, 255, 255, 0.4);
            background: linear-gradient(135deg, #FFDC00 0%, #FFD700 50%, #FFC107 100%);
        }

        .button.secondary {
            background: linear-gradient(135deg, #B8860B 0%, #DAA520 50%, #FFD700 100%);
            color: #1a1a1a;
        }

        .button.secondary:hover {
            background: linear-gradient(135deg, #DAA520 0%, #FFD700 50%, #FFDC00 100%);
        }

        .button.danger {
            background: linear-gradient(135deg, #8B0000 0%, #DC143C 50%, #FF6347 100%);
            color: #1a1a1a; /* ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å‡∏Ç‡∏≤‡∏ß‡πÄ‡∏õ‡πá‡∏ô‡∏î‡∏≥ */
        }

        .button.danger:hover {
            background: linear-gradient(135deg, #A0000A 0%, #FF1744 50%, #FF6B6B 100%);
        }

        .result-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            margin-top: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            position: relative;
        }

        .result-section h2 {
            color: #654321; /* ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•‡πÄ‡∏Ç‡πâ‡∏° */
        }

        .result-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #FFD700, #FFA500);
        }

        .result-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .result-card {
            background: linear-gradient(135deg, #F5F5DC, #FFF8DC);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            border: 2px solid #DEB887;
            transition: all 0.3s ease;
        }

        .result-card:hover {
            transform: scale(1.02);
            box-shadow: 0 5px 20px rgba(222, 184, 135, 0.3);
        }

        .result-value {
            font-size: 2rem;
            font-weight: 700;
            color: #8B4513;
            margin-bottom: 5px;
        }

        .result-label {
            font-size: 1rem;
            color: #A0522D;
            font-weight: 500;
        }

        .ai-analysis {
            background: linear-gradient(135deg, #E6F3E6, #F0FFF0);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            border-left: 5px solid #228B22;
            color: #2F4F2F; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏µ‡πÄ‡∏Ç‡πâ‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ô‡∏µ‡πâ */
        }

        .ai-analysis h3 {
            color: #228B22;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .factor-analysis {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .factor-item {
            background: rgba(255, 255, 255, 0.8);
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #CD853F;
            color: #2c1810; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏µ‡πÄ‡∏Ç‡πâ‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏±‡∏¢ */
        }

        .factor-item strong {
            color: #8B4513;
        }

        .risk-meter {
            margin: 20px 0;
            position: relative;
        }

        .risk-bar {
            width: 100%;
            height: 20px;
            background: linear-gradient(90deg, #228B22, #FFD700, #FF6347);
            border-radius: 10px;
            position: relative;
            overflow: hidden;
        }

        .risk-indicator {
            position: absolute;
            top: -5px;
            width: 10px;
            height: 30px;
            background: #333;
            border-radius: 5px;
            transition: left 0.5s ease;
        }

        .marketing-strategies {
            margin-top: 25px;
        }

        .strategy-item {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            border-left: 4px solid #FFA500;
            transition: all 0.3s ease;
            color: #2c1810; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏µ‡πÄ‡∏Ç‡πâ‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° */
        }

        .strategy-item:hover {
            transform: translateX(5px);
            box-shadow: 0 3px 15px rgba(255, 165, 0, 0.2);
        }

        .settings-panel {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
        }

        .settings-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            border-radius: 15px;
            padding: 30px;
            width: 90%;
            max-width: 500px;
            max-height: 80vh;
            overflow-y: auto;
            color: #2c1810; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏µ‡πÄ‡∏Ç‡πâ‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° */
        }

        .settings-content h2 {
            color: #654321; /* ‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•‡πÄ‡∏Ç‡πâ‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ */
        }

        .history-panel {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            margin-top: 25px;
            max-height: 400px;
            overflow-y: auto;
            color: #2c1810; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏µ‡πÄ‡∏Ç‡πâ‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° */
        }

        .history-panel h2 {
            color: #654321; /* ‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•‡πÄ‡∏Ç‡πâ‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ */
        }

        .history-item {
            background: #F8F8FF;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            border-left: 4px solid #9370DB;
            color: #2c1810; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏µ‡πÄ‡∏Ç‡πâ‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° */
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(44, 24, 16, 0.3); /* ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ‡∏Ç‡∏≠‡∏á loading ‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏Ç‡πâ‡∏° */
            border-radius: 50%;
            border-top-color: #654321; /* ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏• */
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animate-slide-up {
            animation: slideInUp 0.5s ease-out;
        }

        @media (max-width: 768px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .container {
                padding: 15px;
            }
            
            .card {
                padding: 20px;
            }
        }

        .tooltip {
            position: relative;
            display: inline-block;
            cursor: help;
        }

        .tooltip:hover::after {
            content: attr(data-tooltip);
            position: absolute;
            background: linear-gradient(135deg, #f5f5f5, #e8e8e8); /* ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á tooltip ‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡∏≠‡πà‡∏≠‡∏ô */
            color: #2c1810; /* ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡πÄ‡∏Ç‡πâ‡∏° */
            padding: 8px 12px;
            border-radius: 8px;
            white-space: nowrap;
            z-index: 100;
            top: -40px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.9rem;
            border: 1px solid rgba(139, 69, 19, 0.3);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        /* Add shimmer animation for gold effect */
        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        /* Custom scrollbar for gold theme */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(139, 69, 19, 0.2); /* ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•‡∏≠‡πà‡∏≠‡∏ô */
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #B8860B, #8B7355); /* ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡πÇ‡∏ó‡∏ô‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏• */
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #DAA520, #A0522D);
        }

        /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡πÑ‡∏ï‡∏•‡πå‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏ß‡πà‡∏≤‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡πÄ‡∏Ç‡πâ‡∏° */
        p, span, div:not(.loading) {
            color: inherit;
        }

        #riskLevel {
            color: #2c1810;
        }

        #aiReasoning {
            color: #2c1810;
        }

        .factor-item span {
            color: inherit;
        }

        .strategy-item span {
            color: inherit;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header animate-slide-up">
            <h1><i class="fas fa-robot"></i>‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞</h1>
            <p class="subtitle">‡∏õ‡∏±‡∏à‡∏à‡∏±‡∏¢‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≥‡πÑ‡∏£‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î</p>
        </div>

        <div class="main-grid">
            <!-- Input Factors Section -->
            <div class="card animate-slide-up">
                <h2><i class="fas fa-chart-line"></i> ‡∏õ‡∏±‡∏à‡∏à‡∏±‡∏¢‡∏ï‡∏•‡∏≤‡∏î</h2>

</div>
<div class="main-grid">
    <!-- AI Profile & Memory Section -->
    <div class="card animate-slide-up">
        <h2><i class="fas fa-user-robot"></i> ‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ AI</h2>
        
        <div class="input-group">
            <label for="userName">‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏µ‡∏¢‡∏Å (‡πÉ‡∏´‡πâ AI ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å)</label>
            <input type="text" id="userName" placeholder="‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏¢‡∏≤‡∏Å‡πÉ‡∏´‡πâ AI ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏¢‡∏±‡∏á‡πÑ‡∏á?">
        </div>

        <div class="input-group">
            <label for="businessGoal">‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à</label>
            <select id="businessGoal">
                <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢...</option>
                <option value="survival">‡∏£‡∏≠‡∏î‡∏û‡∏≠‡∏°‡∏µ‡∏Å‡∏¥‡∏ô</option>
                <option value="stable">‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏°‡∏±‡πà‡∏ô‡∏Ñ‡∏á</option>
                <option value="growth">‡∏Ç‡∏¢‡∏≤‡∏¢‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à</option>
                <option value="franchise">‡πÄ‡∏õ‡∏¥‡∏î‡∏™‡∏≤‡∏Ç‡∏≤</option>
            </select>
        </div>

        <div class="input-group">
            <label for="experienceLevel">‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏≤</label>
            <select id="experienceLevel">
                <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö...</option>
                <option value="newbie">‡∏°‡∏∑‡∏≠‡πÉ‡∏´‡∏°‡πà (< 6 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô)</option>
                <option value="learning">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ (6‡πÄ‡∏î‡∏∑‡∏≠‡∏ô-2‡∏õ‡∏µ)</option>
                <option value="experienced">‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå (2-5‡∏õ‡∏µ)</option>
                <option value="expert">‡πÄ‡∏ã‡∏µ‡∏¢‡∏ô (5+ ‡∏õ‡∏µ)</option>
            </select>
        </div>

        <div class="input-group">
            <label for="riskTolerance">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡πÑ‡∏î‡πâ</label>
            <select id="riskTolerance">
                <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö...</option>
                <option value="conservative">‡∏≠‡∏ô‡∏∏‡∏£‡∏±‡∏Å‡∏©‡πå‡∏ô‡∏¥‡∏¢‡∏° (‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏ô‡πâ‡∏≠‡∏¢)</option>
                <option value="moderate">‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á</option>
                <option value="aggressive">‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡πÑ‡∏î‡πâ (‡∏Å‡∏≥‡πÑ‡∏£‡∏™‡∏π‡∏á)</option>
            </select>
        </div>

        <button class="button" onclick="saveProfile()">
            <i class="fas fa-save"></i> ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• AI ‡∏à‡∏∞‡∏à‡∏≥
        </button>

        <!-- AI Status -->
        <div id="aiStatus" style="margin-top: 15px; padding: 10px; border-radius: 8px; background: rgba(74, 144, 226, 0.1); border-left: 4px solid #4a90e2;">
            <div id="aiGreeting" style="font-weight: 500; color: #4a90e2;">
                <i class="fas fa-robot"></i> AI ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏à‡∏±‡∏Å‡∏Å‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì...
            </div>
            <div id="aiInsight" style="margin-top: 8px; font-size: 0.9rem; color: #666;">
                ‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ AI ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡πÅ‡∏•‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô
            </div>
        </div>
    </div>

    <!-- AI Statistics & Learning -->
    <div class="card animate-slide-up">
        <h2><i class="fas fa-chart-area"></i> AI ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏Ñ‡∏∏‡∏ì</h2>
        
        <!-- ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô -->
        <div class="stat-item">
            <div class="stat-label">‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>
            <div class="stat-value" id="usageCount">-</div>
        </div>

        <div class="stat-item">
            <div class="stat-label">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô AI Accuracy</div>
            <div class="stat-value" id="aiAccuracy">-</div>
        </div>

        <div class="stat-item">
            <div class="stat-label">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà AI ‡∏à‡∏≥‡πÑ‡∏î‡πâ</div>
            <div class="stat-value" id="dataPoints">-</div>
        </div>

        <!-- AI Learning Progress -->
        <div class="learning-progress" style="margin-top: 15px;">
            <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                <span style="font-size: 0.9rem; color: #666;">AI Learning Progress</span>
                <span id="learningPercent" style="font-size: 0.9rem; color: #4a90e2;">0%</span>
            </div>
            <div style="width: 100%; height: 8px; background: #e0e0e0; border-radius: 4px; overflow: hidden;">
                <div id="learningBar" style="height: 100%; background: linear-gradient(90deg, #4a90e2, #6ab7ff); width: 0%; transition: width 0.5s ease;"></div>
            </div>
        </div>

        <!-- Personality Insights -->
        <div id="personalityInsights" style="margin-top: 15px; padding: 10px; border-radius: 8px; background: rgba(0, 200, 83, 0.1); border-left: 4px solid #00c853;">
            <div style="font-weight: 500; color: #00c853; margin-bottom: 5px;">
                <i class="fas fa-lightbulb"></i> AI Personality Match
            </div>
            <div id="personalityText" style="font-size: 0.9rem; color: #666;">
                ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ AI ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ö‡∏∏‡∏Ñ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
            </div>
        </div>

        <button class="button secondary" onclick="resetAIMemory()">
            <i class="fas fa-brain"></i> ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï AI Memory
        </button>
    </div>
</div>

<style>
/* ‡πÄ‡∏û‡∏¥‡πà‡∏° CSS ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Profile Section */
.stat-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 0;
    border-bottom: 1px solid rgba(139, 69, 19, 0.2);
}

.stat-item:last-child {
    border-bottom: none;
}

.stat-label {
    font-size: 0.9rem;
    color: #666;
    font-weight: 500;
}

.stat-value {
    font-size: 1.2rem;
    font-weight: 600;
    color: #8B4513;
}

#aiStatus, #personalityInsights {
    animation: fadeIn 0.5s ease;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

/* Robot icon animation */
.fa-user-robot, .fa-robot {
    animation: pulse 2s infinite;
}

@keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.1); }
}
</style>
            
                <div class="input-group">
                    <label for="porkPrice">‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏°‡∏π‡∏†‡∏≤‡∏Ñ‡πÄ‡∏´‡∏ô‡∏∑‡∏≠ (‡∏ö‡∏≤‡∏ó/‡∏Å‡∏Å.) 
                        <span class="tooltip" data-tooltip="‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏°‡∏π‡∏™‡∏î‡πÉ‡∏ô‡∏ï‡∏•‡∏≤‡∏î‡∏ó‡πâ‡∏≠‡∏á‡∏ñ‡∏¥‡πà‡∏ô">
                            <i class="fas fa-info-circle"></i>
                        </span>
                    </label>
                    <input type="number" id="porkPrice" value="180" min="100" max="500">
                </div>

                <div class="input-group">
                    <label for="fuelCost">‡∏Ñ‡πà‡∏≤‡πÅ‡∏Å‡πä‡∏™/‡∏ñ‡πà‡∏≤‡∏ô (‡∏ö‡∏≤‡∏ó/‡∏ß‡∏±‡∏ô)</label>
                    <input type="number" id="fuelCost" value="150" min="50" max="500">
                </div>

                <div class="input-group">
                    <label for="weather">‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®</label>
                    <select id="weather">
                        <option value="sunny">‡πÅ‡∏î‡∏î‡∏à‡∏±‡∏î</option>
                        <option value="rainy">‡∏ù‡∏ô‡∏ï‡∏Å</option>
                        <option value="cloudy">‡∏Ñ‡∏£‡∏∂‡πâ‡∏°</option>
                        <option value="cold">‡∏´‡∏ô‡∏≤‡∏ß</option>
                    </select>
                </div>

                <div class="input-group">
                    <label for="economic">‡∏™‡∏†‡∏≤‡∏û‡πÄ‡∏®‡∏£‡∏©‡∏ê‡∏Å‡∏¥‡∏à</label>
                    <select id="economic">
                        <option value="good">‡∏î‡∏µ</option>
                        <option value="normal">‡∏õ‡∏Å‡∏ï‡∏¥</option>
                        <option value="poor">‡πÑ‡∏°‡πà‡∏î‡∏µ</option>
                    </select>
                </div>

                <div class="input-group">
                    <label for="season">‡∏§‡∏î‡∏π‡∏Å‡∏≤‡∏•</label>
                    <select id="season">
                        <option value="hot">‡∏£‡πâ‡∏≠‡∏ô</option>
                        <option value="rainy">‡∏ù‡∏ô</option>
                        <option value="cool">‡∏´‡∏ô‡∏≤‡∏ß</option>
                    </select>
                </div>

                <div class="input-group">
                    <label for="political">‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏∑‡∏≠‡∏á</label>
                    <select id="political">
                        <option value="stable">‡∏°‡∏±‡πà‡∏ô‡∏Ñ‡∏á</option>
                        <option value="uncertain">‡πÑ‡∏°‡πà‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô</option>
                        <option value="crisis">‡∏ß‡∏¥‡∏Å‡∏§‡∏ï‡∏¥</option>
                    </select>
                </div>
            </div>

            <!-- Cost Calculation Section -->
            <div class="card animate-slide-up">
                <h2><i class="fas fa-calculator"></i> ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô</h2>
                
                <div class="input-group">
                    <label for="meatWeight">‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏°‡∏π (‡∏Å‡∏£‡∏±‡∏°/‡πÑ‡∏°‡πâ)</label>
                    <input type="number" id="meatWeight" value="80" min="50" max="150">
                </div>

                <div class="input-group">
                    <label for="stickCost">‡∏Ñ‡πà‡∏≤‡πÑ‡∏°‡πâ‡πÑ‡∏ú‡πà (‡∏ö‡∏≤‡∏ó/100 ‡πÑ‡∏°‡πâ)</label>
                    <input type="number" id="stickCost" value="50" min="20" max="100">
                </div>

                <div class="input-group">
                    <label for="seasoningCost">‡∏Ñ‡πà‡∏≤‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏õ‡∏£‡∏∏‡∏á (‡∏ö‡∏≤‡∏ó/‡πÑ‡∏°‡πâ)</label>
                    <input type="number" id="seasoningCost" value="5" min="2" max="15">
                </div>

                <div class="input-group">
                    <label for="laborCost">‡∏Ñ‡πà‡∏≤‡πÅ‡∏£‡∏á‡∏á‡∏≤‡∏ô (‡∏ö‡∏≤‡∏ó/‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á)</label>
                    <input type="number" id="laborCost" value="80" min="50" max="200">
                </div>

                <div class="input-group">
                    <label for="overheadCost">‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏Ñ‡∏á‡∏ó‡∏µ‡πà (‡∏ö‡∏≤‡∏ó/‡∏ß‡∏±‡∏ô)</label>
                    <input type="number" id="overheadCost" value="500" min="200" max="2000">
                </div>

                <div class="input-group">
                    <label for="dailySticks">‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô (‡πÑ‡∏°‡πâ)</label>
                    <input type="number" id="dailySticks" value="200" min="50" max="1000">
                </div>

                <button class="button" onclick="calculatePricing()">
                    <i class="fas fa-brain"></i> ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏î‡πâ‡∏ß‡∏¢ AI
                </button>
            </div>
        </div>

        <!-- Control Buttons -->
        <div class="main-grid">
            <button class="button secondary" onclick="openSettings()">
                <i class="fas fa-cog"></i> ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à
            </button>
            <button class="button secondary" onclick="toggleHistory()">
                <i class="fas fa-history"></i> ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à AI
            </button>
        </div>

        <!-- Results Section -->
        <div class="result-section" id="results" style="display: none;">
            <h2><i class="fas fa-chart-pie"></i> ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå AI</h2>
            
            <div class="result-grid">
                <div class="result-card">
                    <div class="result-value" id="costPerStick">-</div>
                    <div class="result-label">‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏ï‡πà‡∏≠‡πÑ‡∏°‡πâ (‡∏ö‡∏≤‡∏ó)</div>
                </div>
                <div class="result-card">
                    <div class="result-value" id="suggestedPrice">-</div>
                    <div class="result-label">‡∏£‡∏≤‡∏Ñ‡∏≤‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ (‡∏ö‡∏≤‡∏ó)</div>
                </div>
                <div class="result-card">
                    <div class="result-value" id="profitMargin">-</div>
                    <div class="result-label">‡∏Å‡∏≥‡πÑ‡∏£‡∏ï‡πà‡∏≠‡πÑ‡∏°‡πâ (‡∏ö‡∏≤‡∏ó)</div>
                </div>
                <div class="result-card">
                    <div class="result-value" id="dailyProfit">-</div>
                    <div class="result-label">‡∏Å‡∏≥‡πÑ‡∏£‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô (‡∏ö‡∏≤‡∏ó)</div>
                </div>
            </div>

            <!-- Risk Assessment -->
            <div class="ai-analysis">
                <h3><i class="fas fa-shield-alt"></i> ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á</h3>
                <div class="risk-meter">
                    <div class="risk-bar">
                        <div class="risk-indicator" id="riskIndicator"></div>
                    </div>
                    <p id="riskLevel">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô...</p>
                </div>
            </div>

            <!-- AI Analysis -->
            <div class="ai-analysis">
                <h3><i class="fas fa-robot"></i> ‡∏õ‡∏±‡∏à‡∏à‡∏±‡∏¢‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå</h3>
                <div class="factor-analysis" id="factorAnalysis">
                    <!-- ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÉ‡∏™‡πà‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏î‡∏¢ JavaScript -->
                </div>
                <div id="aiReasoning" style="margin-top: 15px;">
                    <!-- ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏à‡∏≤‡∏Å AI -->
                </div>
            </div>

            <!-- Marketing Strategies -->
            <div class="ai-analysis">
                <h3><i class="fas fa-bullhorn"></i> ‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå‡∏Å‡∏≤‡∏£‡∏ï‡∏•‡∏≤‡∏î‡∏î‡∏¥‡∏à‡∏¥‡∏ó‡∏±‡∏• </h3>
                <div class="marketing-strategies" id="marketingStrategies">
                    <!-- ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÉ‡∏™‡πà‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏î‡∏¢ JavaScript -->
                </div>
            </div>
        </div>

        <!-- History Panel -->
        <div class="history-panel" id="historyPanel" style="display: none;">
            <h2><i class="fas fa-history"></i> ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏Å‡∏±‡∏ö AI</h2>
            <div id="historyContent">
                <p style="text-align: center; color: #666;">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì</p>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div class="settings-panel" id="settingsPanel">
        <div class="settings-content">
            <h2><i class="fas fa-cog"></i> ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à</h2>
            
            <div class="input-group">
                <label for="businessName">‡∏ä‡∏∑‡πà‡∏≠‡∏£‡πâ‡∏≤‡∏ô</label>
                <input type="text" id="businessName" value="‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á‡∏î‡∏µ‡∏•‡∏±‡∏Å‡∏©‡πå">
            </div>

            <div class="input-group">
                <label for="targetProfit">‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏Å‡∏≥‡πÑ‡∏£ (%)</label>
                <input type="number" id="targetProfit" value="40" min="10" max="100">
            </div>

            <div class="input-group">
                <label for="businessLocation">‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡∏£‡πâ‡∏≤‡∏ô</label>
                <select id="businessLocation">
                    <option value="market">‡∏ï‡∏•‡∏≤‡∏î</option>
                    <option value="street">‡∏£‡∏¥‡∏°‡∏ñ‡∏ô‡∏ô</option>
                    <option value="mall">‡∏´‡πâ‡∏≤‡∏á‡∏™‡∏£‡∏£‡∏û‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</option>
                    <option value="university">‡∏°‡∏´‡∏≤‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢</option>
                </select>
            </div>

            <div class="input-group">
                <label for="workingHours">‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏ó‡∏≥‡∏á‡∏≤‡∏ô/‡∏ß‡∏±‡∏ô</label>
                <input type="number" id="workingHours" value="10" min="6" max="16">
            </div>

            <button class="button" onclick="saveSettings()">
                <i class="fas fa-save"></i> ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤
            </button>
            <button class="button danger" onclick="closeSettings()">
                <i class="fas fa-times"></i> ‡∏õ‡∏¥‡∏î
            </button>
        </div>
    </div>

    <script>
        // Global variables
        let calculationHistory = [];
        let businessSettings = {
            name: '‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á‡∏î‡∏µ‡∏•‡∏±‡∏Å‡∏©‡πå',
            targetProfit: 40,
            location: 'market',
            workingHours: 10
        };

        // Load settings (default values only)
        function loadSettings() {
            // Just set default values to form fields
            document.getElementById('businessName').value = businessSettings.name;
            document.getElementById('targetProfit').value = businessSettings.targetProfit;
            document.getElementById('businessLocation').value = businessSettings.location;
            document.getElementById('workingHours').value = businessSettings.workingHours;
        }

        // Save settings (in memory only)
        function saveSettings() {
            businessSettings = {
                name: document.getElementById('businessName').value,
                targetProfit: parseFloat(document.getElementById('targetProfit').value),
                location: document.getElementById('businessLocation').value,
                workingHours: parseFloat(document.getElementById('workingHours').value)
            };
            alert('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß! (‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ‡πÉ‡∏ô‡πÄ‡∏ã‡∏™‡∏ä‡∏±‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô)');
            closeSettings();
        }

        // Modal functions
        function openSettings() {
            document.getElementById('settingsPanel').style.display = 'block';
        }

        function closeSettings() {
            document.getElementById('settingsPanel').style.display = 'none';
        }

        // History functions
        function toggleHistory() {
            const panel = document.getElementById('historyPanel');
            panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
            if (panel.style.display === 'block') {
                displayHistory();
            }
        }

        function displayHistory() {
            const content = document.getElementById('historyContent');
            if (calculationHistory.length === 0) {
                content.innerHTML = '<p style="text-align: center; color: #666;">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì</p>';
                return;
            }

            content.innerHTML = calculationHistory.map((item, index) => `
                <div class="history-item">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                        <strong>‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà ${calculationHistory.length - index}</strong>
                        <span style="color: #666; font-size: 0.9rem;">${item.timestamp}</span>
                    </div>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 10px;">
                        <div><strong>‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô:</strong> ${item.cost} ‡∏ö‡∏≤‡∏ó</div>
                        <div><strong>‡∏£‡∏≤‡∏Ñ‡∏≤‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥:</strong> ${item.price} ‡∏ö‡∏≤‡∏ó</div>
                        <div><strong>‡∏Å‡∏≥‡πÑ‡∏£:</strong> ${item.profit} ‡∏ö‡∏≤‡∏ó</div>
                        <div><strong>‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á:</strong> ${item.risk}</div>
                    </div>
                </div>
            `).reverse().join('');
// ========== AI MEMORY & PROFILE SYSTEM ========== //

// Memory storage keys
const MEMORY_KEYS = {
    profile: 'aiMooPing_profile',
    usage: 'aiMooPing_usage',
    history: 'aiMooPing_memory_history',
    patterns: 'aiMooPing_patterns',
    learning: 'aiMooPing_learning'
};

// AI Memory Class
class AIMemory {
    constructor() {
        this.profile = this.loadProfile();
        this.usage = this.loadUsage();
        this.patterns = this.loadPatterns();
        this.learning = this.loadLearning();
    }

    // Profile Management
    loadProfile() {
        try {
            const saved = localStorage.getItem(MEMORY_KEYS.profile);
            return saved ? JSON.parse(saved) : {
                userName: '',
                businessGoal: '',
                experienceLevel: '',
                riskTolerance: '',
                createdAt: null,
                lastActive: null
            };
        } catch (e) {
            console.warn('Profile loading failed:', e);
            return {};
        }
    }

    saveProfile(profileData) {
        try {
            const profile = {
                ...this.profile,
                ...profileData,
                lastActive: new Date().toISOString()
            };
            
            if (!profile.createdAt) {
                profile.createdAt = new Date().toISOString();
            }

            localStorage.setItem(MEMORY_KEYS.profile, JSON.stringify(profile));
            this.profile = profile;
            return true;
        } catch (e) {
            console.error('Profile saving failed:', e);
            return false;
        }
    }

    // Usage Tracking
    loadUsage() {
        try {
            const saved = localStorage.getItem(MEMORY_KEYS.usage);
            return saved ? JSON.parse(saved) : {
                totalCalculations: 0,
                totalSessions: 0,
                accuratePredictions: 0,
                lastCalculation: null,
                favoriteSettings: {}
            };
        } catch (e) {
            return {};
        }
    }

    recordUsage(calculationData) {
        this.usage.totalCalculations++;
        this.usage.lastCalculation = new Date().toISOString();
        
        // Track favorite settings
        const settings = {
            porkPrice: calculationData.porkPrice,
            weather: calculationData.weather,
            economic: calculationData.economic
        };

        Object.keys(settings).forEach(key => {
            if (!this.usage.favoriteSettings[key]) {
                this.usage.favoriteSettings[key] = {};
            }
            const value = settings[key];
            this.usage.favoriteSettings[key][value] = 
                (this.usage.favoriteSettings[key][value] || 0) + 1;
        });

        localStorage.setItem(MEMORY_KEYS.usage, JSON.stringify(this.usage));
    }

    // Pattern Recognition
    loadPatterns() {
        try {
            const saved = localStorage.getItem(MEMORY_KEYS.patterns);
            return saved ? JSON.parse(saved) : {
                pricePatterns: [],
                behaviorPatterns: {},
                successfulStrategies: []
            };
        } catch (e) {
            return {};
        }
    }

    recordPattern(calculationData, result) {
        // Record price pattern
        this.patterns.pricePatterns.push({
            timestamp: new Date().toISOString(),
            inputs: calculationData,
            outputs: result,
            success: result.profitMargin > (result.costPerStick * 0.3) // 30% profit threshold
        });

        // Keep only last 50 patterns
        if (this.patterns.pricePatterns.length > 50) {
            this.patterns.pricePatterns.shift();
        }

        localStorage.setItem(MEMORY_KEYS.patterns, JSON.stringify(this.patterns));
    }

    // Learning Simulation
    loadLearning() {
        try {
            const saved = localStorage.getItem(MEMORY_KEYS.learning);
            return saved ? JSON.parse(saved) : {
                learningProgress: 0,
                personalityType: '',
                insights: [],
                recommendations: []
            };
        } catch (e) {
            return {};
        }
    }

    updateLearning() {
        // Simulate learning based on usage
        const dataPoints = [
            this.profile.userName ? 10 : 0,
            this.profile.businessGoal ? 15 : 0,
            this.profile.experienceLevel ? 15 : 0,
            this.profile.riskTolerance ? 10 : 0,
            Math.min(this.usage.totalCalculations * 2, 30),
            Math.min(this.patterns.pricePatterns.length, 20)
        ];

        this.learning.learningProgress = Math.min(100, dataPoints.reduce((a, b) => a + b, 0));

        // Personality analysis
        if (this.usage.totalCalculations >= 3) {
            this.learning.personalityType = this.analyzePersonality();
        }

        localStorage.setItem(MEMORY_KEYS.learning, JSON.stringify(this.learning));
    }

    analyzePersonality() {
        const favorites = this.usage.favoriteSettings;
        let personality = '';

        // Risk analysis
        if (favorites.economic && favorites.economic.poor > (favorites.economic.good || 0)) {
            personality += '‡∏£‡∏∞‡∏°‡∏±‡∏î‡∏£‡∏∞‡∏ß‡∏±‡∏á ';
        } else if (favorites.economic && favorites.economic.good > (favorites.economic.poor || 0)) {
            personality += '‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏à ';
        }

        // Weather preference analysis  
        if (favorites.weather && favorites.weather.sunny > (favorites.weather.rainy || 0)) {
            personality += '‡πÄ‡∏ä‡∏¥‡∏á‡∏£‡∏∏‡∏Å ';
        }

        // Experience level impact
        if (this.profile.experienceLevel === 'newbie') {
            personality += '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ';
        } else if (this.profile.experienceLevel === 'expert') {
            personality += '‡πÄ‡∏ã‡∏µ‡∏¢‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏≤';
        }

        return personality || '‡∏¢‡∏±‡∏á‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ';
    }

    // Get personalized greeting
    getPersonalizedGreeting() {
        const name = this.profile.userName || '‡∏Ñ‡∏∏‡∏ì‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤';
        const hour = new Date().getHours();
        let timeGreeting = '';

        if (hour < 12) timeGreeting = '‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏ï‡∏≠‡∏ô‡πÄ‡∏ä‡πâ‡∏≤';
        else if (hour < 18) timeGreeting = '‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏ï‡∏≠‡∏ô‡∏ö‡πà‡∏≤‡∏¢';
        else timeGreeting = '‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏ï‡∏≠‡∏ô‡πÄ‡∏¢‡πá‡∏ô';

        if (this.usage.totalCalculations === 0) {
            return `${timeGreeting} ${name}! ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö AI ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å üéâ`;
        } else if (this.usage.totalCalculations < 5) {
            return `${timeGreeting} ${name}! AI ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏Ñ‡∏∏‡∏ì... (${this.usage.totalCalculations}/5)`;
        } else {
            return `${timeGreeting} ${name}! AI ‡∏à‡∏≥‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡πÅ‡∏•‡πâ‡∏ß ‚ú® (‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô ${this.usage.totalCalculations} ‡∏Ñ‡∏£‡∏±‡πâ‡∏á)`;
        }
    }

    // Get personalized insights
    getPersonalizedInsight() {
        if (this.usage.totalCalculations === 0) {
            return '‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ AI ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏Ñ‡∏∏‡∏ì';
        }

        const insights = [];

        // Pattern-based insights
        if (this.patterns.pricePatterns.length >= 3) {
            const recentPatterns = this.patterns.pricePatterns.slice(-3);
            const avgProfit = recentPatterns.reduce((sum, p) => sum + p.outputs.profitMargin, 0) / 3;
            insights.push(`‡∏Å‡∏≥‡πÑ‡∏£‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢ 3 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î: ${avgProfit.toFixed(2)} ‡∏ö‡∏≤‡∏ó`);
        }

        // Personality insights
        if (this.learning.personalityType) {
            insights.push(`‡∏ö‡∏∏‡∏Ñ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏≤: ${this.learning.personalityType}`);
        }

        // Goal-based insights
        if (this.profile.businessGoal) {
            const goalTexts = {
                'survival': '‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: ‡πÄ‡∏ô‡πâ‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏±‡πà‡∏ô‡∏Ñ‡∏á‡πÅ‡∏•‡∏∞‡∏•‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á',
                'stable': '‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏™‡∏°‡πà‡∏≥‡πÄ‡∏™‡∏°‡∏≠',
                'growth': '‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: ‡∏Ç‡∏¢‡∏≤‡∏¢‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≥‡πÑ‡∏£',
                'franchise': '‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏õ‡∏¥‡∏î‡∏™‡∏≤‡∏Ç‡∏≤'
            };
            insights.push(goalTexts[this.profile.businessGoal]);
        }

        return insights.length > 0 ? insights.join(' ‚Ä¢ ') : 'AI ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì...';
    }

    // Reset all memory
    resetMemory() {
        Object.values(MEMORY_KEYS).forEach(key => {
            localStorage.removeItem(key);
        });
        
        // Reinitialize
        this.profile = this.loadProfile();
        this.usage = this.loadUsage();
        this.patterns = this.loadPatterns();
        this.learning = this.loadLearning();
        
        return true;
    }
}

// Global AI Memory instance
let aiMemory = new AIMemory();

// ========== PROFILE FUNCTIONS ========== //

function saveProfile() {
    const profileData = {
        userName: document.getElementById('userName').value.trim(),
        businessGoal: document.getElementById('businessGoal').value,
        experienceLevel: document.getElementById('experienceLevel').value,
        riskTolerance: document.getElementById('riskTolerance').value
    };

    // Validation
    if (!profileData.userName) {
        alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ AI ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å');
        return;
    }

    if (aiMemory.saveProfile(profileData)) {
        updateAIDisplay();
        showFeedback('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡πâ‡∏ß! AI ‡∏à‡∏∞‡∏à‡∏≥‡∏Ñ‡∏∏‡∏ì‡∏ï‡πà‡∏≠‡∏à‡∏≤‡∏Å‡∏ô‡∏µ‡πâ ‚ú®', 'success');
    } else {
        showFeedback('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà', 'error');
    }
}

function resetAIMemory() {
    if (confirm('‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏£‡∏á‡∏à‡∏≥‡∏Ç‡∏≠‡∏á AI ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?\n(‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏î‡πâ)')) {
        aiMemory.resetMemory();
        updateAIDisplay();
        clearProfileForm();
        showFeedback('‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï AI Memory ‡πÅ‡∏•‡πâ‡∏ß ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÉ‡∏´‡∏°‡πà!', 'info');
    }
}

function clearProfileForm() {
    document.getElementById('userName').value = '';
    document.getElementById('businessGoal').value = '';
    document.getElementById('experienceLevel').value = '';
    document.getElementById('riskTolerance').value = '';
}

function loadProfileForm() {
    const profile = aiMemory.profile;
    document.getElementById('userName').value = profile.userName || '';
    document.getElementById('businessGoal').value = profile.businessGoal || '';
    document.getElementById('experienceLevel').value = profile.experienceLevel || '';
    document.getElementById('riskTolerance').value = profile.riskTolerance || '';
}

function updateAIDisplay() {
    // Update greeting
    document.getElementById('aiGreeting').innerHTML = 
        `<i class="fas fa-robot"></i> ${aiMemory.getPersonalizedGreeting()}`;
    
    // Update insight
    document.getElementById('aiInsight').textContent = aiMemory.getPersonalizedInsight();
    
    // Update statistics
    document.getElementById('usageCount').textContent = aiMemory.usage.totalCalculations || 0;
    document.getElementById('dataPoints').textContent = 
        (aiMemory.patterns.pricePatterns.length + Object.keys(aiMemory.profile).filter(k => aiMemory.profile[k]).length);
    
    // Update learning progress
    aiMemory.updateLearning();
    const progress = aiMemory.learning.learningProgress;
    document.getElementById('learningPercent').textContent = `${progress}%`;
    document.getElementById('learningBar').style.width = `${progress}%`;
    
    // Update accuracy (simulated based on usage)
    const accuracy = Math.min(95, 60 + (aiMemory.usage.totalCalculations * 2));
    document.getElementById('aiAccuracy').textContent = `${accuracy}%`;
    
    // Update personality
    if (aiMemory.learning.personalityType) {
        document.getElementById('personalityText').textContent = 
            `‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó: ${aiMemory.learning.personalityType}`;
    }
}

function showFeedback(message, type = 'info') {
    // Create feedback element
    const feedback = document.createElement('div');
    feedback.style.cssText = `
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 2000;
        padding: 20px 30px;
        border-radius: 10px;
        box-shadow: 0 8px 32px rgba(0,0,0,0.3);
        animation: feedbackShow 0.3s ease;
        font-weight: 500;
        text-align: center;
        max-width: 400px;
    `;

    // Set colors based on type
    const colors = {
        success: 'background: #e8f5e9; color: #2e7d32; border: 2px solid #4caf50;',
        error: 'background: #ffebee; color: #c62828; border: 2px solid #f44336;',
        info: 'background: #e3f2fd; color: #1565c0; border: 2px solid #2196f3;'
    };

    feedback.style.cssText += colors[type] || colors.info;
    feedback.textContent = message;

    document.body.appendChild(feedback);

    // Auto remove after 3 seconds
    setTimeout(() => {
        feedback.style.animation = 'feedbackHide 0.3s ease';
        setTimeout(() => feedback.remove(), 300);
    }, 3000);
}

// Add CSS for feedback animation
const style = document.createElement('style');
style.textContent = `
    @keyframes feedbackShow {
        from { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
        to { opacity: 1; transform: translate(-50%, -50%) scale(1); }
    }
    @keyframes feedbackHide {
        from { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        to { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
    }
`;
document.head.appendChild(style);

// Initialize on page load
document.addEventListener('DOMContentLoaded', function() {
    loadProfileForm();
    updateAIDisplay();
});
        
        }

        // Main calculation function
        function calculatePricing() {
// ========== AI MEMORY & PROFILE SYSTEM ========== //

// Memory storage keys
const MEMORY_KEYS = {
    profile: 'aiMooPing_profile',
    usage: 'aiMooPing_usage',
    history: 'aiMooPing_memory_history',
    patterns: 'aiMooPing_patterns',
    learning: 'aiMooPing_learning'
};

// AI Memory Class
class AIMemory {
    constructor() {
        this.profile = this.loadProfile();
        this.usage = this.loadUsage();
        this.patterns = this.loadPatterns();
        this.learning = this.loadLearning();
    }

    // Profile Management
    loadProfile() {
        try {
            const saved = localStorage.getItem(MEMORY_KEYS.profile);
            return saved ? JSON.parse(saved) : {
                userName: '',
                businessGoal: '',
                experienceLevel: '',
                riskTolerance: '',
                createdAt: null,
                lastActive: null
            };
        } catch (e) {
            console.warn('Profile loading failed:', e);
            return {};
        }
    }

    saveProfile(profileData) {
        try {
            const profile = {
                ...this.profile,
                ...profileData,
                lastActive: new Date().toISOString()
            };
            
            if (!profile.createdAt) {
                profile.createdAt = new Date().toISOString();
            }

            localStorage.setItem(MEMORY_KEYS.profile, JSON.stringify(profile));
            this.profile = profile;
            return true;
        } catch (e) {
            console.error('Profile saving failed:', e);
            return false;
        }
    }

    // Usage Tracking
    loadUsage() {
        try {
            const saved = localStorage.getItem(MEMORY_KEYS.usage);
            return saved ? JSON.parse(saved) : {
                totalCalculations: 0,
                totalSessions: 0,
                accuratePredictions: 0,
                lastCalculation: null,
                favoriteSettings: {}
            };
        } catch (e) {
            return {};
        }
    }

    recordUsage(calculationData) {
        this.usage.totalCalculations++;
        this.usage.lastCalculation = new Date().toISOString();
        
        // Track favorite settings
        const settings = {
            porkPrice: calculationData.porkPrice,
            weather: calculationData.weather,
            economic: calculationData.economic
        };

        Object.keys(settings).forEach(key => {
            if (!this.usage.favoriteSettings[key]) {
                this.usage.favoriteSettings[key] = {};
            }
            const value = settings[key];
            this.usage.favoriteSettings[key][value] = 
                (this.usage.favoriteSettings[key][value] || 0) + 1;
        });

        localStorage.setItem(MEMORY_KEYS.usage, JSON.stringify(this.usage));
    }

    // Pattern Recognition
    loadPatterns() {
        try {
            const saved = localStorage.getItem(MEMORY_KEYS.patterns);
            return saved ? JSON.parse(saved) : {
                pricePatterns: [],
                behaviorPatterns: {},
                successfulStrategies: []
            };
        } catch (e) {
            return {};
        }
    }

    recordPattern(calculationData, result) {
        // Record price pattern
        this.patterns.pricePatterns.push({
            timestamp: new Date().toISOString(),
            inputs: calculationData,
            outputs: result,
            success: result.profitMargin > (result.costPerStick * 0.3) // 30% profit threshold
        });

        // Keep only last 50 patterns
        if (this.patterns.pricePatterns.length > 50) {
            this.patterns.pricePatterns.shift();
        }

        localStorage.setItem(MEMORY_KEYS.patterns, JSON.stringify(this.patterns));
    }

    // Learning Simulation
    loadLearning() {
        try {
            const saved = localStorage.getItem(MEMORY_KEYS.learning);
            return saved ? JSON.parse(saved) : {
                learningProgress: 0,
                personalityType: '',
                insights: [],
                recommendations: []
            };
        } catch (e) {
            return {};
        }
    }

    updateLearning() {
        // Simulate learning based on usage
        const dataPoints = [
            this.profile.userName ? 10 : 0,
            this.profile.businessGoal ? 15 : 0,
            this.profile.experienceLevel ? 15 : 0,
            this.profile.riskTolerance ? 10 : 0,
            Math.min(this.usage.totalCalculations * 2, 30),
            Math.min(this.patterns.pricePatterns.length, 20)
        ];

        this.learning.learningProgress = Math.min(100, dataPoints.reduce((a, b) => a + b, 0));

        // Personality analysis
        if (this.usage.totalCalculations >= 3) {
            this.learning.personalityType = this.analyzePersonality();
        }

        localStorage.setItem(MEMORY_KEYS.learning, JSON.stringify(this.learning));
    }

    analyzePersonality() {
        const favorites = this.usage.favoriteSettings;
        let personality = '';

        // Risk analysis
        if (favorites.economic && favorites.economic.poor > (favorites.economic.good || 0)) {
            personality += '‡∏£‡∏∞‡∏°‡∏±‡∏î‡∏£‡∏∞‡∏ß‡∏±‡∏á ';
        } else if (favorites.economic && favorites.economic.good > (favorites.economic.poor || 0)) {
            personality += '‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏à ';
        }

        // Weather preference analysis  
        if (favorites.weather && favorites.weather.sunny > (favorites.weather.rainy || 0)) {
            personality += '‡πÄ‡∏ä‡∏¥‡∏á‡∏£‡∏∏‡∏Å ';
        }

        // Experience level impact
        if (this.profile.experienceLevel === 'newbie') {
            personality += '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ';
        } else if (this.profile.experienceLevel === 'expert') {
            personality += '‡πÄ‡∏ã‡∏µ‡∏¢‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏≤';
        }

        return personality || '‡∏¢‡∏±‡∏á‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ';
    }

    // Get personalized greeting
    getPersonalizedGreeting() {
        const name = this.profile.userName || '‡∏Ñ‡∏∏‡∏ì‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤';
        const hour = new Date().getHours();
        let timeGreeting = '';

        if (hour < 12) timeGreeting = '‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏ï‡∏≠‡∏ô‡πÄ‡∏ä‡πâ‡∏≤';
        else if (hour < 18) timeGreeting = '‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏ï‡∏≠‡∏ô‡∏ö‡πà‡∏≤‡∏¢';
        else timeGreeting = '‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏ï‡∏≠‡∏ô‡πÄ‡∏¢‡πá‡∏ô';

        if (this.usage.totalCalculations === 0) {
            return `${timeGreeting} ${name}! ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö AI ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å üéâ`;
        } else if (this.usage.totalCalculations < 5) {
            return `${timeGreeting} ${name}! AI ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏Ñ‡∏∏‡∏ì... (${this.usage.totalCalculations}/5)`;
        } else {
            return `${timeGreeting} ${name}! AI ‡∏à‡∏≥‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡πÅ‡∏•‡πâ‡∏ß ‚ú® (‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô ${this.usage.totalCalculations} ‡∏Ñ‡∏£‡∏±‡πâ‡∏á)`;
        }
    }

    // Get personalized insights
    getPersonalizedInsight() {
        if (this.usage.totalCalculations === 0) {
            return '‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ AI ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏Ñ‡∏∏‡∏ì';
        }

        const insights = [];

        // Pattern-based insights
        if (this.patterns.pricePatterns.length >= 3) {
            const recentPatterns = this.patterns.pricePatterns.slice(-3);
            const avgProfit = recentPatterns.reduce((sum, p) => sum + p.outputs.profitMargin, 0) / 3;
            insights.push(`‡∏Å‡∏≥‡πÑ‡∏£‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢ 3 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î: ${avgProfit.toFixed(2)} ‡∏ö‡∏≤‡∏ó`);
        }

        // Personality insights
        if (this.learning.personalityType) {
            insights.push(`‡∏ö‡∏∏‡∏Ñ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏≤: ${this.learning.personalityType}`);
        }

        // Goal-based insights
        if (this.profile.businessGoal) {
            const goalTexts = {
                'survival': '‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: ‡πÄ‡∏ô‡πâ‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏±‡πà‡∏ô‡∏Ñ‡∏á‡πÅ‡∏•‡∏∞‡∏•‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á',
                'stable': '‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏™‡∏°‡πà‡∏≥‡πÄ‡∏™‡∏°‡∏≠',
                'growth': '‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: ‡∏Ç‡∏¢‡∏≤‡∏¢‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≥‡πÑ‡∏£',
                'franchise': '‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏õ‡∏¥‡∏î‡∏™‡∏≤‡∏Ç‡∏≤'
            };
            insights.push(goalTexts[this.profile.businessGoal]);
        }

        return insights.length > 0 ? insights.join(' ‚Ä¢ ') : 'AI ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì...';
    }

    // Reset all memory
    resetMemory() {
        Object.values(MEMORY_KEYS).forEach(key => {
            localStorage.removeItem(key);
        });
        
        // Reinitialize
        this.profile = this.loadProfile();
        this.usage = this.loadUsage();
        this.patterns = this.loadPatterns();
        this.learning = this.loadLearning();
        
        return true;
    }
}

// Global AI Memory instance
let aiMemory = new AIMemory();

// ========== PROFILE FUNCTIONS ========== //

function saveProfile() {
    const profileData = {
        userName: document.getElementById('userName').value.trim(),
        businessGoal: document.getElementById('businessGoal').value,
        experienceLevel: document.getElementById('experienceLevel').value,
        riskTolerance: document.getElementById('riskTolerance').value
    };

    // Validation
    if (!profileData.userName) {
        alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ AI ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å');
        return;
    }

    if (aiMemory.saveProfile(profileData)) {
        updateAIDisplay();
        showFeedback('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡πâ‡∏ß! AI ‡∏à‡∏∞‡∏à‡∏≥‡∏Ñ‡∏∏‡∏ì‡∏ï‡πà‡∏≠‡∏à‡∏≤‡∏Å‡∏ô‡∏µ‡πâ ‚ú®', 'success');
    } else {
        showFeedback('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà', 'error');
    }
}

function resetAIMemory() {
    if (confirm('‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏£‡∏á‡∏à‡∏≥‡∏Ç‡∏≠‡∏á AI ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?\n(‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏î‡πâ)')) {
        aiMemory.resetMemory();
        updateAIDisplay();
        clearProfileForm();
        showFeedback('‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï AI Memory ‡πÅ‡∏•‡πâ‡∏ß ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÉ‡∏´‡∏°‡πà!', 'info');
    }
}

function clearProfileForm() {
    document.getElementById('userName').value = '';
    document.getElementById('businessGoal').value = '';
    document.getElementById('experienceLevel').value = '';
    document.getElementById('riskTolerance').value = '';
}

function loadProfileForm() {
    const profile = aiMemory.profile;
    document.getElementById('userName').value = profile.userName || '';
    document.getElementById('businessGoal').value = profile.businessGoal || '';
    document.getElementById('experienceLevel').value = profile.experienceLevel || '';
    document.getElementById('riskTolerance').value = profile.riskTolerance || '';
}

function updateAIDisplay() {
    // Update greeting
    document.getElementById('aiGreeting').innerHTML = 
        `<i class="fas fa-robot"></i> ${aiMemory.getPersonalizedGreeting()}`;
    
    // Update insight
    document.getElementById('aiInsight').textContent = aiMemory.getPersonalizedInsight();
    
    // Update statistics
    document.getElementById('usageCount').textContent = aiMemory.usage.totalCalculations || 0;
    document.getElementById('dataPoints').textContent = 
        (aiMemory.patterns.pricePatterns.length + Object.keys(aiMemory.profile).filter(k => aiMemory.profile[k]).length);
    
    // Update learning progress
    aiMemory.updateLearning();
    const progress = aiMemory.learning.learningProgress;
    document.getElementById('learningPercent').textContent = `${progress}%`;
    document.getElementById('learningBar').style.width = `${progress}%`;
    
    // Update accuracy (simulated based on usage)
    const accuracy = Math.min(95, 60 + (aiMemory.usage.totalCalculations * 2));
    document.getElementById('aiAccuracy').textContent = `${accuracy}%`;
    
    // Update personality
    if (aiMemory.learning.personalityType) {
        document.getElementById('personalityText').textContent = 
            `‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó: ${aiMemory.learning.personalityType}`;
    }
}

function showFeedback(message, type = 'info') {
    // Create feedback element
    const feedback = document.createElement('div');
    feedback.style.cssText = `
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 2000;
        padding: 20px 30px;
        border-radius: 10px;
        box-shadow: 0 8px 32px rgba(0,0,0,0.3);
        animation: feedbackShow 0.3s ease;
        font-weight: 500;
        text-align: center;
        max-width: 400px;
    `;

    // Set colors based on type
    const colors = {
        success: 'background: #e8f5e9; color: #2e7d32; border: 2px solid #4caf50;',
        error: 'background: #ffebee; color: #c62828; border: 2px solid #f44336;',
        info: 'background: #e3f2fd; color: #1565c0; border: 2px solid #2196f3;'
    };

    feedback.style.cssText += colors[type] || colors.info;
    feedback.textContent = message;

    document.body.appendChild(feedback);

    // Auto remove after 3 seconds
    setTimeout(() => {
        feedback.style.animation = 'feedbackHide 0.3s ease';
        setTimeout(() => feedback.remove(), 300);
    }, 3000);
}

// Add CSS for feedback animation
const style = document.createElement('style');
style.textContent = `
    @keyframes feedbackShow {
        from { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
        to { opacity: 1; transform: translate(-50%, -50%) scale(1); }
    }
    @keyframes feedbackHide {
        from { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        to { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
    }
`;
document.head.appendChild(style);

// Initialize on page load
document.addEventListener('DOMContentLoaded', function() {
    loadProfileForm();
    updateAIDisplay();
});
            }, 1500);
        }

        // AI Analysis Engine
        function performAIAnalysis(inputs) {
            // Calculate basic costs
            const meatCostPerStick = (inputs.porkPrice * inputs.meatWeight) / 1000;
            const stickCostPerStick = inputs.stickCost / 100;
            const overheadCostPerStick = inputs.overheadCost / inputs.dailySticks;
            const laborCostPerStick = (inputs.laborCost * businessSettings.workingHours) / inputs.dailySticks;
            
            const baseCostPerStick = meatCostPerStick + stickCostPerStick + 
                                   inputs.seasoningCost + overheadCostPerStick + 
                                   laborCostPerStick + (inputs.fuelCost / inputs.dailySticks);

            // AI Factor Analysis
            const factors = analyzeFactors(inputs);
            const riskAssessment = calculateRisk(inputs, factors);
            const demandMultiplier = calculateDemandMultiplier(inputs, factors);
            const priceAdjustment = calculatePriceAdjustment(inputs, factors);

            // Calculate suggested price with AI adjustments
            const targetProfitMultiplier = 1 + (businessSettings.targetProfit / 100);
            const adjustedCost = baseCostPerStick * priceAdjustment.costMultiplier;
            const suggestedPrice = adjustedCost * targetProfitMultiplier * demandMultiplier;

            // Round to appropriate price point
            const finalPrice = roundToAppropriatePrice(suggestedPrice);
            const actualProfit = finalPrice - adjustedCost;
            const dailyProfit = actualProfit * inputs.dailySticks * priceAdjustment.volumeMultiplier;

            return {
                costPerStick: adjustedCost,
                suggestedPrice: finalPrice,
                profitMargin: actualProfit,
                dailyProfit: dailyProfit,
                factors: factors,
                riskLevel: riskAssessment.level,
                riskScore: riskAssessment.score,
                marketingStrategies: generateMarketingStrategies(inputs, factors),
                aiReasoning: generateAIReasoning(inputs, factors, riskAssessment)
            };
        }

        // Analyze 6 key factors
        function analyzeFactors(inputs) {
            const factors = {};

            // 1. Pork Price Analysis (‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏°‡∏π)
            if (inputs.porkPrice < 150) {
                factors.porkPrice = { score: 0.8, impact: 'positive', description: '‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏°‡∏π‡∏ï‡πà‡∏≥ ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≥‡πÑ‡∏£' };
            } else if (inputs.porkPrice > 200) {
                factors.porkPrice = { score: 0.3, impact: 'negative', description: '‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏°‡∏π‡∏™‡∏π‡∏á ‡∏Ñ‡∏ß‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡∏≤‡∏¢‡∏´‡∏£‡∏∑‡∏≠‡∏´‡∏≤‡∏ã‡∏±‡∏û‡∏û‡∏•‡∏≤‡∏¢‡πÄ‡∏≠‡∏≠‡∏£‡πå‡πÉ‡∏´‡∏°‡πà' };
            } else {
                factors.porkPrice = { score: 0.6, impact: 'neutral', description: '‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏°‡∏π‡πÉ‡∏ô‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏õ‡∏Å‡∏ï‡∏¥' };
            }

            // 2. Fuel Cost Analysis (‡∏Ñ‡πà‡∏≤‡πÅ‡∏Å‡πä‡∏™/‡∏ñ‡πà‡∏≤‡∏ô)
            if (inputs.fuelCost < 100) {
                factors.fuelCost = { score: 0.7, impact: 'positive', description: '‡∏Ñ‡πà‡∏≤‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡πÄ‡∏û‡∏•‡∏¥‡∏á‡∏ï‡πà‡∏≥ ‡∏ä‡πà‡∏ß‡∏¢‡∏•‡∏î‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô' };
            } else if (inputs.fuelCost > 200) {
                factors.fuelCost = { score: 0.4, impact: 'negative', description: '‡∏Ñ‡πà‡∏≤‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡πÄ‡∏û‡∏•‡∏¥‡∏á‡∏™‡∏π‡∏á ‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡πÄ‡∏û‡∏•‡∏¥‡∏á' };
            } else {
                factors.fuelCost = { score: 0.6, impact: 'neutral', description: '‡∏Ñ‡πà‡∏≤‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡πÄ‡∏û‡∏•‡∏¥‡∏á‡πÉ‡∏ô‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏õ‡∏Å‡∏ï‡∏¥' };
            }

            // 3. Weather Analysis (‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®)
            switch (inputs.weather) {
                case 'sunny':
                    factors.weather = { score: 0.8, impact: 'positive', description: '‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡πÅ‡∏î‡∏î‡∏à‡∏±‡∏î ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á' };
                    break;
                case 'rainy':
                    factors.weather = { score: 0.3, impact: 'negative', description: '‡∏ù‡∏ô‡∏ï‡∏Å ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏•‡∏î‡∏•‡∏á ‡∏Ñ‡∏ß‡∏£‡∏°‡∏µ‡πÅ‡∏ú‡∏ô‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô' };
                    break;
                case 'cold':
                    factors.weather = { score: 0.7, impact: 'positive', description: '‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏´‡∏ô‡∏≤‡∏ß ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏£‡πâ‡∏≠‡∏ô' };
                    break;
                default:
                    factors.weather = { score: 0.5, impact: 'neutral', description: '‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏õ‡∏Å‡∏ï‡∏¥' };
            }

            // 4. Economic Analysis (‡∏™‡∏†‡∏≤‡∏û‡πÄ‡∏®‡∏£‡∏©‡∏ê‡∏Å‡∏¥‡∏à)
            switch (inputs.economic) {
                case 'good':
                    factors.economic = { score: 0.8, impact: 'positive', description: '‡πÄ‡∏®‡∏£‡∏©‡∏ê‡∏Å‡∏¥‡∏à‡∏î‡∏µ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏π‡∏á ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ç‡∏≤‡∏¢‡∏£‡∏≤‡∏Ñ‡∏≤‡∏î‡∏µ' };
                    break;
                case 'poor':
                    factors.economic = { score: 0.3, impact: 'negative', description: '‡πÄ‡∏®‡∏£‡∏©‡∏ê‡∏Å‡∏¥‡∏à‡πÑ‡∏°‡πà‡∏î‡∏µ ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ã‡∏∑‡πâ‡∏≠‡∏ô‡πâ‡∏≠‡∏¢‡∏•‡∏á ‡∏Ñ‡∏ß‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏Ñ‡∏≤‡πÉ‡∏´‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡πÑ‡∏î‡πâ' };
                    break;
                default:
                    factors.economic = { score: 0.6, impact: 'neutral', description: '‡∏™‡∏†‡∏≤‡∏û‡πÄ‡∏®‡∏£‡∏©‡∏ê‡∏Å‡∏¥‡∏à‡∏õ‡∏Å‡∏ï‡∏¥' };
            }

            // 5. Season Analysis (‡∏§‡∏î‡∏π‡∏Å‡∏≤‡∏•)
            switch (inputs.season) {
                case 'hot':
                    factors.season = { score: 0.4, impact: 'negative', description: '‡∏´‡∏ô‡πâ‡∏≤‡∏£‡πâ‡∏≠‡∏ô ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏î‡∏•‡∏á ‡∏Ñ‡∏ß‡∏£‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ó' };
                    break;
                case 'cool':
                    factors.season = { score: 0.8, impact: 'positive', description: '‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏ô‡∏≤‡∏ß ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏™‡∏π‡∏á ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏Ñ‡∏≤‡πÑ‡∏î‡πâ' };
                    break;
                default:
                    factors.season = { score: 0.6, impact: 'neutral', description: '‡∏§‡∏î‡∏π‡∏Å‡∏≤‡∏•‡∏õ‡∏Å‡∏ï‡∏¥' };
            }

            // 6. Political Analysis (‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏∑‡∏≠‡∏á)
            switch (inputs.political) {
                case 'stable':
                    factors.political = { score: 0.7, impact: 'positive', description: '‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏°‡∏±‡πà‡∏ô‡∏Ñ‡∏á ‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡πÄ‡∏ï‡∏¥‡∏ö‡πÇ‡∏ï‡πÑ‡∏î‡πâ' };
                    break;
                case 'crisis':
                    factors.political = { score: 0.3, impact: 'negative', description: '‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏°‡∏±‡πà‡∏ô‡∏Ñ‡∏á ‡∏Ñ‡∏ß‡∏£‡∏£‡∏∞‡∏ß‡∏±‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∏‡∏ô' };
                    break;
                default:
                    factors.political = { score: 0.5, impact: 'neutral', description: '‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡πÑ‡∏°‡πà‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô' };
            }

            return factors;
        }

        // Calculate risk assessment
        function calculateRisk(inputs, factors) {
            const scores = Object.values(factors).map(f => f.score);
            const averageScore = scores.reduce((a, b) => a + b, 0) / scores.length;
            
            // Additional risk factors
            let riskScore = averageScore;
            
            // High cost risks
            if (inputs.porkPrice > 220) riskScore -= 0.1;
            if (inputs.fuelCost > 250) riskScore -= 0.1;
            
            // Market risks
            if (inputs.dailySticks < 100) riskScore -= 0.1; // Low volume risk
            if (businessSettings.location === 'street') riskScore -= 0.05; // Street vendor risk
            
            // Determine risk level
            let level, color;
            if (riskScore >= 0.7) {
                level = '‡∏ï‡πà‡∏≥';
                color = '#228B22';
            } else if (riskScore >= 0.5) {
                level = '‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á';
                color = '#FFD700';
            } else {
                level = '‡∏™‡∏π‡∏á';
                color = '#FF6347';
            }

            return { score: riskScore, level: level, color: color };
        }

        // Calculate demand multiplier based on factors
        function calculateDemandMultiplier(inputs, factors) {
            let multiplier = 1.0;

            // Weather impact
            if (inputs.weather === 'sunny' || inputs.weather === 'cold') multiplier += 0.1;
            if (inputs.weather === 'rainy') multiplier -= 0.2;

            // Economic impact
            if (inputs.economic === 'good') multiplier += 0.15;
            if (inputs.economic === 'poor') multiplier -= 0.15;

            // Season impact
            if (inputs.season === 'cool') multiplier += 0.1;
            if (inputs.season === 'hot') multiplier -= 0.1;

            // Location impact
            switch (businessSettings.location) {
                case 'university':
                    multiplier += 0.05;
                    break;
                case 'mall':
                    multiplier += 0.1;
                    break;
                case 'street':
                    multiplier -= 0.05;
                    break;
            }

            return Math.max(0.7, Math.min(1.3, multiplier));
        }

        // Calculate price adjustment factors
        function calculatePriceAdjustment(inputs, factors) {
            let costMultiplier = 1.0;
            let volumeMultiplier = 1.0;

            // High input costs require adjustment
            if (inputs.porkPrice > 200) costMultiplier += 0.05;
            if (inputs.fuelCost > 200) costMultiplier += 0.03;

            // Political instability increases costs
            if (inputs.political === 'crisis') costMultiplier += 0.02;

            // Weather affects volume
            if (inputs.weather === 'rainy') volumeMultiplier -= 0.15;
            if (inputs.weather === 'sunny') volumeMultiplier += 0.05;

            return { costMultiplier, volumeMultiplier };
        }

        // Round price to appropriate point
        function roundToAppropriatePrice(price) {
            if (price <= 10) return Math.round(price * 2) / 2; // Round to 0.5
            if (price <= 50) return Math.round(price); // Round to 1
            return Math.round(price / 5) * 5; // Round to 5
        }

        // Generate marketing strategies based on customer journey
        function generateMarketingStrategies(inputs, factors) {
            const strategies = [];

            // Awareness Stage
            strategies.push({
                stage: 'Awareness (‡∏£‡∏±‡∏ö‡∏£‡∏π‡πâ)',
                strategy: 'Social Media Marketing',
                description: '‡πÇ‡∏û‡∏™‡∏ï‡πå‡∏£‡∏π‡∏õ‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á‡∏™‡∏ß‡∏¢‡πÜ ‡∏ö‡∏ô Facebook/Instagram ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÅ‡∏Æ‡∏ä‡πÅ‡∏ó‡πá‡∏Å‡∏ó‡πâ‡∏≠‡∏á‡∏ñ‡∏¥‡πà‡∏ô',
                recommendation: inputs.weather === 'sunny' ? '‡πÄ‡∏ô‡πâ‡∏ô‡πÇ‡∏û‡∏™‡∏ï‡πå‡πÄ‡∏ß‡∏•‡∏≤ 16:00-19:00' : '‡πÇ‡∏û‡∏™‡∏ï‡πå‡∏Ñ‡∏•‡∏¥‡∏õ Live ‡∏Å‡∏≤‡∏£‡∏õ‡∏¥‡πâ‡∏á'
            });

            // Interest Stage
            if (factors.economic.score >= 0.6) {
                strategies.push({
                    stage: 'Interest (‡∏™‡∏ô‡πÉ‡∏à)',
                    strategy: 'Content Marketing',
                    description: '‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏ó‡∏ô‡∏ï‡πå‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡∏£‡πà‡∏≠‡∏¢ ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û',
                    recommendation: '‡∏ó‡∏≥‡∏Ñ‡∏•‡∏¥‡∏õ Behind the scenes ‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏°‡∏π ‡πÅ‡∏•‡∏∞‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏õ‡∏¥‡πâ‡∏á'
                });
            }

            // Consideration Stage
            strategies.push({
                stage: 'Consideration (‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤)',
                strategy: 'Promotional Offers',
                description: inputs.season === 'hot' ? '‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô‡∏ã‡∏∑‡πâ‡∏≠ 10 ‡πÅ‡∏ñ‡∏° 1' : '‡πÄ‡∏ã‡πá‡∏ï‡∏Ñ‡∏π‡πà‡∏Å‡∏±‡∏ö‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°‡∏£‡πâ‡∏≠‡∏ô',
                recommendation: inputs.economic.score < 0.5 ? '‡πÄ‡∏ô‡πâ‡∏ô‡∏£‡∏≤‡∏Ñ‡∏≤‡∏™‡∏∏‡∏î‡∏Ñ‡∏∏‡πâ‡∏°' : '‡πÄ‡∏ô‡πâ‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏û‡∏£‡∏µ‡πÄ‡∏°‡∏µ‡∏¢‡∏°'
            });

            // Purchase Stage
            strategies.push({
                stage: 'Purchase (‡∏ã‡∏∑‡πâ‡∏≠)',
                strategy: 'Point of Sale',
                description: '‡∏ï‡∏Å‡πÅ‡∏ï‡πà‡∏á‡∏£‡πâ‡∏≤‡∏ô‡πÉ‡∏´‡πâ‡∏ô‡πà‡∏≤‡∏™‡∏ô‡πÉ‡∏à ‡∏°‡∏µ‡∏õ‡πâ‡∏≤‡∏¢‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô',
                recommendation: inputs.weather === 'rainy' ? '‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ó‡∏µ‡πà‡∏ô‡∏±‡πà‡∏á‡∏°‡∏µ‡∏´‡∏•‡∏±‡∏á‡∏Ñ‡∏≤' : '‡∏à‡∏±‡∏î‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô Take away'
            });

            // Retention Stage
            strategies.push({
                stage: 'Retention (‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤)',
                strategy: 'Loyalty Program',
                description: '‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏∞‡∏™‡∏°‡πÅ‡∏™‡∏ï‡∏°‡∏õ‡πå ‡∏´‡∏£‡∏∑‡∏≠ Line Official Account',
                recommendation: '‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏à‡πâ‡∏á‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©‡πÅ‡∏Å‡πà‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏õ‡∏£‡∏∞‡∏à‡∏≥'
            });

            // Advocacy Stage
            if (factors.economic.score >= 0.7) {
                strategies.push({
                    stage: 'Advocacy (‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÄ‡∏ã‡∏•‡∏™‡πå)',
                    strategy: 'Referral Program',
                    description: '‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏°‡∏≤‡∏ã‡∏∑‡πâ‡∏≠ ‡πÑ‡∏î‡πâ‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î',
                    recommendation: '‡πÉ‡∏´‡πâ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ Review ‡∏ö‡∏ô Social Media ‡∏£‡∏±‡∏ö‡∏ü‡∏£‡∏µ 1 ‡πÑ‡∏°‡πâ'
                });
            }

            return strategies;
        }

        // Generate AI reasoning
        function generateAIReasoning(inputs, factors, riskAssessment) {
            let reasoning = `<strong>AI ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÅ‡∏•‡πâ‡∏ß‡∏û‡∏ö‡∏ß‡πà‡∏≤:</strong><br><br>`;

            // Risk assessment summary
            reasoning += `üìä <strong>‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡πÇ‡∏î‡∏¢‡∏£‡∏ß‡∏°: ${riskAssessment.level}</strong><br>`;

            // Key insights
            const positiveFactors = Object.entries(factors).filter(([key, factor]) => factor.impact === 'positive');
            const negativeFactors = Object.entries(factors).filter(([key, factor]) => factor.impact === 'negative');

            if (positiveFactors.length > 0) {
                reasoning += `<br>‚úÖ <strong>‡∏õ‡∏±‡∏à‡∏à‡∏±‡∏¢‡∏ö‡∏ß‡∏Å:</strong><br>`;
                positiveFactors.forEach(([key, factor]) => {
                    reasoning += `‚Ä¢ ${factor.description}<br>`;
                });
            }

            if (negativeFactors.length > 0) {
                reasoning += `<br>‚ö†Ô∏è <strong>‡∏õ‡∏±‡∏à‡∏à‡∏±‡∏¢‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏∞‡∏ß‡∏±‡∏á:</strong><br>`;
                negativeFactors.forEach(([key, factor]) => {
                    reasoning += `‚Ä¢ ${factor.description}<br>`;
                });
            }

            // Strategic recommendations
            reasoning += `<br>üí° <strong>‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÄ‡∏ä‡∏¥‡∏á‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå:</strong><br>`;
            
            if (inputs.porkPrice > 200) {
                reasoning += `‚Ä¢ ‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡∏´‡∏≤‡∏ã‡∏±‡∏û‡∏û‡∏•‡∏≤‡∏¢‡πÄ‡∏≠‡∏≠‡∏£‡πå‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏°‡∏π‡∏£‡∏≤‡∏Ñ‡∏≤‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤<br>`;
            }
            
            if (inputs.weather === 'rainy') {
                reasoning += `‚Ä¢ ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ô‡∏£‡πà‡∏°‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏ï‡πá‡∏ô‡∏ó‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤<br>`;
            }
            
            if (factors.economic.score < 0.5) {
                reasoning += `‚Ä¢ ‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏°‡∏ô‡∏π‡πÉ‡∏´‡πâ‡∏°‡∏µ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏Ñ‡∏≤‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î<br>`;
            }
            
            if (inputs.dailySticks < 150) {
                reasoning += `‚Ä¢ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏•‡∏≤‡∏î‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢<br>`;
            }

            reasoning += `<br>üéØ <strong>‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏£‡∏∞‡∏¢‡∏∞‡∏™‡∏±‡πâ‡∏ô:</strong> ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡πÉ‡∏´‡πâ‡πÑ‡∏î‡πâ ${Math.ceil(inputs.dailySticks * 1.2)} ‡πÑ‡∏°‡πâ/‡∏ß‡∏±‡∏ô<br>`;
            reasoning += `üöÄ <strong>‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏£‡∏∞‡∏¢‡∏∞‡∏¢‡∏≤‡∏ß:</strong> ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ê‡∏≤‡∏ô‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÑ‡∏î‡πâ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô`;

            return reasoning;
        }

        // Display results
        function displayResults(result) {
            document.getElementById('costPerStick').textContent = result.costPerStick.toFixed(2);
            document.getElementById('suggestedPrice').textContent = result.suggestedPrice.toFixed(2);
            document.getElementById('profitMargin').textContent = result.profitMargin.toFixed(2);
            document.getElementById('dailyProfit').textContent = result.dailyProfit.toFixed(0);

            // Update risk indicator
            const riskIndicator = document.getElementById('riskIndicator');
            const riskLevel = document.getElementById('riskLevel');
            const riskPosition = result.riskScore * 100;
            
            riskIndicator.style.left = `${riskPosition}%`;
            riskIndicator.style.backgroundColor = result.riskLevel === '‡∏ï‡πà‡∏≥' ? '#228B22' : 
                                                 result.riskLevel === '‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á' ? '#FFD700' : '#FF6347';
            riskLevel.textContent = `‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á: ${result.riskLevel} (${(result.riskScore * 100).toFixed(0)}%)`;

            // Display factor analysis
            const factorAnalysis = document.getElementById('factorAnalysis');
            factorAnalysis.innerHTML = Object.entries(result.factors).map(([key, factor]) => `
                <div class="factor-item">
                    <strong>${getFactorName(key)}:</strong><br>
                    <span style="color: ${factor.impact === 'positive' ? '#228B22' : factor.impact === 'negative' ? '#DC143C' : '#666'}">
                        ${factor.description}
                    </span>
                </div>
            `).join('');

            // Display AI reasoning
            document.getElementById('aiReasoning').innerHTML = result.aiReasoning;

            // Display marketing strategies
            const marketingStrategies = document.getElementById('marketingStrategies');
            marketingStrategies.innerHTML = result.marketingStrategies.map(strategy => `
                <div class="strategy-item">
                    <strong>${strategy.stage}: ${strategy.strategy}</strong><br>
                    <span style="color: #666; font-size: 0.9rem;">${strategy.description}</span><br>
                    <span style="color: #8B4513; font-weight: 500;">üí° ${strategy.recommendation}</span>
                </div>
            `).join('');
        }

        // Helper function to get factor display names
        function getFactorName(key) {
            const names = {
                porkPrice: '‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏°‡∏π',
                fuelCost: '‡∏Ñ‡πà‡∏≤‡πÅ‡∏Å‡πä‡∏™/‡∏ñ‡πà‡∏≤‡∏ô',
                weather: '‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®',
                economic: '‡∏™‡∏†‡∏≤‡∏û‡πÄ‡∏®‡∏£‡∏©‡∏ê‡∏Å‡∏¥‡∏à',
                season: '‡∏§‡∏î‡∏π‡∏Å‡∏≤‡∏•',
                political: '‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏∑‡∏≠‡∏á'
            };
            return names[key] || key;
        }

        // Initialize application (simplified)
        document.addEventListener('DOMContentLoaded', function() {
            // Load default settings
            loadSettings();

            // Add smooth scrolling to results
            window.addEventListener('scroll', function() {
                const cards = document.querySelectorAll('.card, .result-section');
                cards.forEach(card => {
                    const cardTop = card.getBoundingClientRect().top;
                    const cardBottom = card.getBoundingClientRect().bottom;
                    const isVisible = cardTop < window.innerHeight && cardBottom > 0;
                    
                    if (isVisible && !card.classList.contains('animate-slide-up')) {
                        card.classList.add('animate-slide-up');
                    }
                });
            });

            // Close modal when clicking outside
            const settingsPanel = document.getElementById('settingsPanel');
            if (settingsPanel) {
                settingsPanel.addEventListener('click', function(e) {
                    if (e.target === this) {
                        closeSettings();
                    }
                });
            }

            // Real-time input validation and formatting
            const numberInputs = document.querySelectorAll('input[type="number"]');
            numberInputs.forEach(input => {
                input.addEventListener('input', function() {
                    if (this.value < 0) this.value = 0;
                    if (this.hasAttribute('max') && parseFloat(this.value) > parseFloat(this.getAttribute('max'))) {
                        this.value = this.getAttribute('max');
                    }
                });
            });

            console.log('üçñ AI ‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÅ‡∏•‡πâ‡∏ß!');
        });

        // Export/Import functionality (simplified - in memory only)
        function exportData() {
            try {
                const data = {
                    settings: businessSettings,
                    history: calculationHistory,
                    exportDate: new Date().toISOString()
                };
                
                const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `moo-ping-data-${new Date().toISOString().split('T')[0]}.json`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            } catch (error) {
                console.error('Export failed:', error);
                alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£ Export ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•');
            }
        }

        function importData(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    if (data.settings) businessSettings = data.settings;
                    if (data.history) calculationHistory = data.history;
                    
                    loadSettings();
                    alert('‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!');
                } catch (error) {
                    console.error('Import failed:', error);
                    alert('‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà');
                }
            };
            reader.readAsText(file);
        }

        // Performance optimization (removed console.log)
        let resizeTimeout;
        window.addEventListener('resize', function() {
            clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(function() {
                // Layout recalculation happens silently
            }, 250);
        });

        // ========== REALTIME FEATURES ========== //
        
        // ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö realtime
        let realtimeInterval;
        let isRealtimeActive = false;
        
        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏à‡∏£‡∏¥‡∏á
        function generateRealisticPrice(currentPrice, type) {
            const variation = (Math.random() - 0.5) * 10; // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á ¬±5
            let newPrice;
            
            if (type === 'pork') {
                newPrice = Math.max(120, Math.min(280, currentPrice + variation));
            } else if (type === 'fuel') {
                newPrice = Math.max(80, Math.min(350, currentPrice + variation));
            }
            
            return Math.round(newPrice * 100) / 100; // ‡∏õ‡∏±‡∏î‡πÄ‡∏®‡∏© 2 ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á
        }
        
        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏£‡∏≤‡∏Ñ‡∏≤‡πÅ‡∏ö‡∏ö realtime
        function updateRealtimePrices() {
            const porkInput = document.getElementById('porkPrice');
            const fuelInput = document.getElementById('fuelCost');
            
            // ‡πÄ‡∏Å‡πá‡∏ö‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏Å‡πà‡∏≤
            const oldPorkPrice = parseFloat(porkInput.value);
            const oldFuelPrice = parseFloat(fuelInput.value);
            
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡πÉ‡∏´‡∏°‡πà
            const newPorkPrice = generateRealisticPrice(oldPorkPrice, 'pork');
            const newFuelPrice = generateRealisticPrice(oldFuelPrice, 'fuel');
            
            // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 0.5 ‡∏ö‡∏≤‡∏ó
            if (Math.abs(newPorkPrice - oldPorkPrice) > 0.5) {
                animatePriceChange(porkInput, oldPorkPrice, newPorkPrice, '‡∏´‡∏°‡∏π');
            }
            
            if (Math.abs(newFuelPrice - oldFuelPrice) > 0.5) {
                animatePriceChange(fuelInput, oldFuelPrice, newFuelPrice, '‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡πÄ‡∏û‡∏•‡∏¥‡∏á');
            }
        }
        
        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ó‡∏≥‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Ñ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô
        function animatePriceChange(input, oldPrice, newPrice, itemName) {
            // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ‡∏ï‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡∏Ç‡∏∂‡πâ‡∏ô/‡∏•‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤
            if (newPrice > oldPrice) {
                input.style.borderColor = '#ff6b6b';
                input.style.backgroundColor = '#ffebee';
                showPriceAlert(itemName, '‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏∂‡πâ‡∏ô', newPrice - oldPrice, 'up');
            } else {
                input.style.borderColor = '#4caf50';
                input.style.backgroundColor = '#e8f5e9';
                showPriceAlert(itemName, '‡∏•‡∏î‡∏•‡∏á', oldPrice - newPrice, 'down');
            }
            
            // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏£‡∏≤‡∏Ñ‡∏≤
            input.value = newPrice;
            
            // ‡∏•‡πâ‡∏≤‡∏á‡∏™‡∏µ‡∏´‡∏•‡∏±‡∏á 3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
            setTimeout(() => {
                input.style.borderColor = '';
                input.style.backgroundColor = '';
            }, 3000);
            
            // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
            calculatePricing();
        }
        
        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
        function showPriceAlert(itemName, direction, amount, type) {
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á div ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
            const alertDiv = document.createElement('div');
            alertDiv.className = 'price-alert';
            alertDiv.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                z-index: 1000;
                padding: 15px 20px;
                border-radius: 8px;
                box-shadow: 0 4px 15px rgba(0,0,0,0.2);
                animation: slideIn 0.3s ease;
                max-width: 300px;
                ${type === 'up' ? 
                    'background: #ffebee; border-left: 4px solid #ff6b6b; color: #c62828;' : 
                    'background: #e8f5e9; border-left: 4px solid #4caf50; color: #2e7d32;'}
            `;
            
            alertDiv.innerHTML = `
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <strong>‡∏£‡∏≤‡∏Ñ‡∏≤${itemName}${direction}</strong><br>
                        <small>${amount.toFixed(1)} ‡∏ö‡∏≤‡∏ó</small>
                    </div>
                    <button onclick="this.parentElement.parentElement.remove()" 
                            style="background: none; border: none; font-size: 18px; cursor: pointer;">√ó</button>
                </div>
            `;
            
            document.body.appendChild(alertDiv);
            
            // ‡∏•‡∏ö‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏´‡∏•‡∏±‡∏á 5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
            setTimeout(() => {
                if (alertDiv.parentNode) {
                    alertDiv.remove();
                }
            }, 5000);
        }
        
        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏° realtime
        function startRealtime() {
            if (!isRealtimeActive) {
                isRealtimeActive = true;
                realtimeInterval = setInterval(updateRealtimePrices, 15000); // ‡∏ó‡∏∏‡∏Å 15 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
                
                // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏õ‡∏∏‡πà‡∏°
                const button = document.getElementById('realtimeToggle');
                if (button) {
                    button.innerHTML = '‚è∏Ô∏è ‡∏´‡∏¢‡∏∏‡∏î Realtime';
                    button.style.background = '#f44336';
                }
                
                console.log('üîÑ Realtime started!');
            }
        }
        
        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î realtime
        function stopRealtime() {
            if (isRealtimeActive) {
                isRealtimeActive = false;
                clearInterval(realtimeInterval);
                
                // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏õ‡∏∏‡πà‡∏°
                const button = document.getElementById('realtimeToggle');
                if (button) {
                    button.innerHTML = 'üîÑ ‡πÄ‡∏£‡∏¥‡πà‡∏° Realtime';
                    button.style.background = '#4CAF50';
                }
                
                console.log('‚è∏Ô∏è Realtime stopped!');
            }
        }
        
        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏•‡∏±‡∏ö realtime
        function toggleRealtime() {
            if (isRealtimeActive) {
                stopRealtime();
            } else {
                startRealtime();
            }
        }
        
        // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏õ‡∏∏‡πà‡∏° realtime
        function createRealtimeButton() {
            const button = document.createElement('button');
            button.id = 'realtimeToggle';
            button.innerHTML = 'üîÑ ‡πÄ‡∏£‡∏¥‡πà‡∏° Realtime';
            button.onclick = toggleRealtime;
            button.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                z-index: 1000;
                padding: 12px 18px;
                background: #4CAF50;
                color: white;
                border: none;
                border-radius: 8px;
                cursor: pointer;
                font-weight: 500;
                box-shadow: 0 2px 8px rgba(0,0,0,0.2);
                transition: all 0.3s ease;
            `;
            
            // ‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Ñ hover
            button.addEventListener('mouseenter', () => {
                button.style.transform = 'scale(1.05)';
            });
            
            button.addEventListener('mouseleave', () => {
                button.style.transform = 'scale(1)';
            });
            
            document.body.appendChild(button);
        }
        
        // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡πÑ‡∏ï‡∏•‡πå CSS ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö animation
        function addRealtimeStyles() {
            const style = document.createElement('style');
            style.textContent = `
                @keyframes slideIn {
                    from { 
                        transform: translateX(100%); 
                        opacity: 0; 
                    }
                    to { 
                        transform: translateX(0); 
                        opacity: 1; 
                    }
                }
                
                .price-alert {
                    animation: slideIn 0.3s ease;
                }
                
                input[type="number"] {
                    transition: all 0.3s ease;
                }
            `;
            document.head.appendChild(style);
        }
        
        // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö realtime ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏™‡∏£‡πá‡∏à
        document.addEventListener('DOMContentLoaded', function() {
            // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡πÑ‡∏ï‡∏•‡πå
            addRealtimeStyles();
            
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏õ‡∏∏‡πà‡∏° realtime
            createRealtimeButton();
            
            // ‡πÄ‡∏£‡∏¥‡πà‡∏° realtime ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ (‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£)
            // startRealtime();
        });
        
        // ‡∏õ‡∏¥‡∏î realtime ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡πâ‡∏≤
        window.addEventListener('beforeunload', () => {
            stopRealtime();
        });
    </script>
</body>
</html>
                
