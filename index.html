
<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Pork Skewer Pricing Advisor AI</title>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    
    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDFETQF_lUuU_HeUa_9pnpAkDyMATUKB7g",
            authDomain: "pork-pricing-app.firebaseapp.com",
            projectId: "pork-pricing-app",
            storageBucket: "pork-pricing-app.firebasestorage.app",
            messagingSenderId: "604634104081",
            appId: "1:604634104081:web:cc318ac88d381cf4384cb0",
            measurementId: "G-0224PTLW7P"
        };
        
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const auth = firebase.auth();
        console.log("Firebase initialized successfully");
    </script>

    <style>
        :root {
            --primary-color: #FF5722;
            --primary-dark: #E64A19;
            --primary-light: #FFAB91;
            --secondary-color: #FF9800;
            --secondary-dark: #F57C00;
            --accent-color: #FFEB3B;
            --dark-color: #5D4037;
            --light-color: #FFF8E1;
            --light-alt-color: #FFECB3;
            --white-color: #FFFFFF;
            --success-color: #4CAF50;
            --success-dark: #388E3C;
            --error-color: #F44336;
            --error-dark: #D32F2F;
            --info-color: #2196F3;
            --info-dark: #1976D2;
            --warning-color: #FFC107;
            --warning-dark: #FFA000;
            --shadow-color: rgba(0, 0, 0, 0.2);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Sarabun', 'Prompt', 'Kanit', -apple-system, BlinkMacSystemFont, sans-serif;
        }

        body {
            background: linear-gradient(-45deg, #FFF8E1, #FFECB3, #E8F5E8, #E3F2FD, #FCE4EC);
            background-size: 400% 400%;
            animation: bodyGradientShift 15s ease infinite;
            color: var(--dark-color);
            line-height: 1.6;
            padding-bottom: 80px;
        }

        @keyframes bodyGradientShift {
            0% { background-position: 0% 50%; }
            25% { background-position: 100% 25%; }
            50% { background-position: 100% 100%; }
            75% { background-position: 0% 75%; }
            100% { background-position: 0% 50%; }
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 0 15px;
        }

        header {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            color: white;
            text-align: center;
            padding: 25px 0;
            margin-bottom: 25px;
            border-bottom: 5px solid var(--secondary-color);
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 10px var(--shadow-color);
            animation: headerColorShift 10s infinite;
        }

        @keyframes headerColorShift {
            0% { background: linear-gradient(135deg, #FF5722, #E64A19); }
            20% { background: linear-gradient(135deg, #E91E63, #C2185B); }
            40% { background: linear-gradient(135deg, #9C27B0, #7B1FA2); }
            60% { background: linear-gradient(135deg, #3F51B5, #303F9F); }
            80% { background: linear-gradient(135deg, #00BCD4, #0097A7); }
            100% { background: linear-gradient(135deg, #FF5722, #E64A19); }
        }

        .header-content {
            position: relative;
            z-index: 2;
        }

        .header-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cGF0aCBkPSJNMjAsMzAgQzIwLDY1IDgwLDY1IDgwLDMwIiBzdHJva2U9IiNGRkM3QTciIHN0cm9rZS13aWR0aD0iMi41IiBmaWxsPSJub25lIiBzdHJva2UtbGluZWNhcD0icm91bmQiLz48Y2lyY2xlIGN4PSI1MCIgY3k9IjMwIiByPSI2IiBmaWxsPSIjRkZDN0E3Ii8+PC9zdmc+') repeat;
            opacity: 0.2;
            z-index: 1;
        }

        h1 {
            font-size: 2rem;
            margin-bottom: 8px;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.3);
        }

        h2 {
            font-size: 1.3rem;
            font-weight: normal;
            margin-bottom: 12px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
        }

        .date-display {
            background-color: var(--secondary-color);
            color: white;
            padding: 7px 15px;
            border-radius: 20px;
            display: inline-block;
            margin-top: 10px;
            font-size: 1rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            text-shadow: 1px 1px 1px rgba(0,0,0,0.2);
            animation: dateDisplayShift 13s infinite;
        }

        @keyframes dateDisplayShift {
            0% { background-color: #FF9800; }
            20% { background-color: #F06292; }
            40% { background-color: #BA68C8; }
            60% { background-color: #7986CB; }
            80% { background-color: #4DD0E1; }
            100% { background-color: #FF9800; }
        }

        .tabs {
            display: flex;
            margin-bottom: 25px;
            border-radius: 10px;
            overflow: hidden;
            background-color: #FFF;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .tab {
            flex: 1;
            text-align: center;
            background-color: #FFF;
            color: var(--dark-color);
            padding: 15px 0;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            border-bottom: 3px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .tab:hover {
            background-color: var(--light-alt-color);
            transform: translateY(-2px);
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .tab:active {
            transform: translateY(1px);
            box-shadow: none;
        }

        .tab.active {
            color: var(--primary-color);
            border-bottom: 3px solid var(--primary-color);
            background-color: var(--light-alt-color);
            box-shadow: inset 0 -3px 0 var(--primary-color);
            animation: tabActiveShift 7s infinite;
        }

        @keyframes tabActiveShift {
            0% { border-bottom-color: #FF5722; }
            25% { border-bottom-color: #E91E63; }
            50% { border-bottom-color: #9C27B0; }
            75% { border-bottom-color: #3F51B5; }
            100% { border-bottom-color: #FF5722; }
        }

        .tab::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 3px;
            background-color: var(--primary-color);
            bottom: 0;
            left: 0;
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }

        .tab:hover::after {
            transform: scaleX(1);
        }

        .tab-content {
            display: none;
            background-color: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
            margin-bottom: 25px;
            animation: fadeIn 0.5s;
            transform: translateY(0);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .tab-content.active {
            display: block;
        }

        .tab-content:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 25px rgba(0, 0, 0, 0.15);
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .form-group {
            margin-bottom: 25px;
        }

        label {
            display: block;
            margin-bottom: 10px;
            font-weight: bold;
            color: var(--dark-color);
            font-size: 1.05rem;
        }

        input[type="text"],
        input[type="number"],
        input[type="password"],
        input[type="date"],
        select,
        textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1.1rem;
            transition: all 0.3s;
            background-color: #f9f9f9;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
        }

        input[type="text"]:focus,
        input[type="number"]:focus,
        input[type="password"]:focus,
        input[type="date"]:focus,
        select:focus,
        textarea:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px var(--primary-light);
            outline: none;
            background-color: #fff;
        }

        .option-group {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-bottom: 20px;
        }

        .option-button {
            flex: 1;
            min-width: 85px;
            background-color: #FFF;
            border: 2px solid #DDD;
            border-radius: 10px;
            padding: 15px 10px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s;
            font-size: 0.95rem;
            box-shadow: 0 3px 6px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }

        .option-button:hover {
            border-color: var(--secondary-color);
            transform: translateY(-3px);
            box-shadow: 0 5px 10px rgba(0,0,0,0.15);
        }

        .option-button:active {
            transform: translateY(1px);
            box-shadow: 0 2px 3px rgba(0,0,0,0.1);
        }

        .option-button.selected {
            background: linear-gradient(145deg, var(--primary-color), var(--primary-dark));
            border-color: var(--primary-dark);
            color: white;
            box-shadow: 0 4px 8px rgba(255, 87, 34, 0.3);
            transform: translateY(-2px);
            animation: selectedButtonShift 6s infinite;
        }

        @keyframes selectedButtonShift {
            0% { background: linear-gradient(145deg, #FF5722, #E64A19); }
            33% { background: linear-gradient(145deg, #E91E63, #C2185B); }
            66% { background: linear-gradient(145deg, #9C27B0, #7B1FA2); }
            100% { background: linear-gradient(145deg, #FF5722, #E64A19); }
        }

        .option-button.selected:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(255, 87, 34, 0.35);
        }

        .option-button.selected:active {
            transform: translateY(0);
            box-shadow: 0 3px 6px rgba(255, 87, 34, 0.3);
        }

        .option-button img, .option-button svg {
            display: block;
            width: 35px;
            height: 35px;
            margin: 0 auto 8px;
        }

        .calculate-btn, .action-btn {
            display: block;
            width: 100%;
            background: linear-gradient(145deg, var(--primary-color), var(--primary-dark));
            color: white;
            border: none;
            border-radius: 10px;
            padding: 18px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            margin: 25px 0;
            transition: all 0.3s;
            box-shadow: 0 6px 0 var(--primary-dark), 0 6px 15px rgba(0,0,0,0.15);
            position: relative;
            overflow: hidden;
            text-transform: uppercase;
            letter-spacing: 1px;
            animation: buttonColorShift 8s infinite;
        }

        @keyframes buttonColorShift {
            0% { background: linear-gradient(145deg, #FF5722, #E64A19); }
            25% { background: linear-gradient(145deg, #E91E63, #C2185B); }
            50% { background: linear-gradient(145deg, #9C27B0, #7B1FA2); }
            75% { background: linear-gradient(145deg, #3F51B5, #303F9F); }
            100% { background: linear-gradient(145deg, #FF5722, #E64A19); }
        }

        .calculate-btn:hover, .action-btn:hover {
            background: linear-gradient(145deg, var(--secondary-color), var(--secondary-dark));
            box-shadow: 0 6px 0 var(--secondary-dark), 0 6px 20px rgba(0,0,0,0.2);
            transform: translateY(-2px);
        }

        .calculate-btn:active, .action-btn:active {
            transform: translateY(4px);
            box-shadow: 0 2px 0 var(--primary-dark), 0 2px 5px rgba(0,0,0,0.1);
        }

        .calculate-btn::after, .action-btn::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: 0.5s;
        }

        .calculate-btn:hover::after, .action-btn:hover::after {
            left: 100%;
        }

        .result-section {
            background: linear-gradient(145deg, var(--secondary-color), var(--secondary-dark));
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 25px;
            display: none;
            box-shadow: 0 10px 25px rgba(255, 152, 0, 0.3);
            transform: translateY(0);
            transition: transform 0.3s ease;
            animation: resultColorShift 9s infinite;
        }

        @keyframes resultColorShift {
            0% { background: linear-gradient(145deg, #FF9800, #F57C00); }
            25% { background: linear-gradient(145deg, #F06292, #E91E63); }
            50% { background: linear-gradient(145deg, #BA68C8, #9C27B0); }
            75% { background: linear-gradient(145deg, #7986CB, #3F51B5); }
            100% { background: linear-gradient(145deg, #FF9800, #F57C00); }
        }

        .result-section:hover {
            transform: translateY(-5px);
        }

        .price-recommendation {
            font-size: 3rem;
            font-weight: bold;
            margin: 15px 0;
            text-shadow: 2px 2px 5px rgba(0,0,0,0.2);
        }

        .profit-estimate {
            font-size: 1.4rem;
            margin-bottom: 20px;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.2);
        }

        .additional-tips {
            background-color: var(--light-color);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            color: var(--dark-color);
            text-align: left;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .additional-tips h4 {
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .additional-tips ul {
            padding-left: 25px;
        }

        .additional-tips li {
            margin-bottom: 10px;
            position: relative;
        }

        .additional-tips li::before {
            content: '‚Ä¢';
            position: absolute;
            left: -15px;
            color: var(--primary-color);
            font-weight: bold;
        }

        .card {
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
            padding: 25px;
            margin-bottom: 25px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 25px rgba(0, 0, 0, 0.15);
        }

        .card-title {
            font-size: 1.3rem;
            color: var(--primary-color);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #eee;
            position: relative;
        }

        .card-title::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 60px;
            height: 2px;
            background-color: var(--primary-color);
        }

        .dashboard-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 25px;
        }

        .stat-card {
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
            padding: 20px;
            text-align: center;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 25px rgba(0, 0, 0, 0.15);
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            animation: statBorderShift 11s infinite;
        }

        @keyframes statBorderShift {
            0% { background: linear-gradient(90deg, #FF5722, #FF9800); }
            25% { background: linear-gradient(90deg, #E91E63, #F06292); }
            50% { background: linear-gradient(90deg, #9C27B0, #BA68C8); }
            75% { background: linear-gradient(90deg, #3F51B5, #7986CB); }
            100% { background: linear-gradient(90deg, #FF5722, #FF9800); }
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-color);
            margin: 10px 0;
            text-shadow: 1px 1px 1px rgba(0,0,0,0.05);
        }

        .stat-label {
            font-size: 1rem;
            color: #666;
            margin-bottom: 5px;
        }

        .notification {
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: flex;
            align-items: flex-start;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .notification:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }

        .notification.info {
            background-color: rgba(33, 150, 243, 0.15);
            border-left: 4px solid var(--info-color);
        }

        .notification.warning {
            background-color: rgba(255, 193, 7, 0.15);
            border-left: 4px solid var(--warning-color);
        }

        .notification.error {
            background-color: rgba(244, 67, 54, 0.15);
            border-left: 4px solid var(--error-color);
        }

        .notification.success {
            background-color: rgba(76, 175, 80, 0.15);
            border-left: 4px solid var(--success-color);
        }

        .notification svg {
            width: 28px;
            height: 28px;
            margin-right: 15px;
            flex-shrink: 0;
        }

        .notification-content {
            flex: 1;
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(255, 87, 34, 0.4);
            }
            70% {
                box-shadow: 0 0 0 10px rgba(255, 87, 34, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(255, 87, 34, 0);
            }
        }

        .hidden {
            display: none !important;
        }

        .footer {
            text-align: center;
            margin-top: 35px;
            color: var(--dark-color);
            font-size: 0.95rem;
            padding: 20px;
            background-color: rgba(255,255,255,0.5);
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }

        /* Sales Tracking Specific Styles */
        .sales-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            overflow-x: auto;
            display: block;
            white-space: nowrap;
        }

        .sales-table thead,
        .sales-table tbody {
            display: table;
            width: 100%;
            table-layout: fixed;
        }

        .sales-table th,
        .sales-table td {
            padding: 12px;
            text-align: center;
            border: 1px solid #ddd;
            word-wrap: break-word;
        }

        .sales-table th {
            background-color: var(--light-color);
            color: var(--dark-color);
            font-weight: bold;
            border-bottom: 2px solid var(--primary-color);
        }

        .sales-table tr:nth-child(even) {
            background-color: #f9f9f9;
        }

        .sales-table tr:hover {
            background-color: var(--light-alt-color);
            transform: scale(1.02);
            transition: all 0.3s ease;
        }

        .prediction-highlight {
            background: linear-gradient(135deg, var(--success-color), var(--success-dark));
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            margin-top: 20px;
            box-shadow: 0 8px 20px rgba(76, 175, 80, 0.3);
        }

        .prediction-amount {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .prediction-reason {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        /* Mobile Responsive */
        @media (max-width: 600px) {
            h1 {
                font-size: 1.6rem;
            }

            h2 {
                font-size: 1.1rem;
            }

            .dashboard-stats {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .option-button {
                font-size: 0.85rem;
                padding: 10px 8px;
            }

            .price-recommendation {
                font-size: 2.2rem;
            }

            .tab {
                padding: 12px 5px;
                font-size: 0.9rem;
            }

            .stat-value {
                font-size: 1.6rem;
            }

            .card, .tab-content {
                padding: 15px;
            }

            .calculate-btn, .action-btn {
                padding: 15px;
                font-size: 1.1rem;
            }

            .sales-table {
                font-size: 0.9rem;
            }

            .sales-table th,
            .sales-table td {
                padding: 8px;
            }
        }
    </style>
</head>

    <body>
    <header>
        <div class="header-bg"></div>
        <div class="header-content container">
            <h1>Smart Pork Skewer Pricing Advisor AI</h1>
            <h2>‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞</h2>
            <div class="date-display" id="current-date">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà ...</div>
        </div>
    </header>

    <div class="container">
        <div class="notification info" id="api-key-notification">
            <svg viewBox="0 0 24 24" fill="none" stroke="#2196F3" stroke-width="2">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="12" y1="8" x2="12" y2="12"></line>
                <line x1="12" y1="16" x2="12" y2="16"></line>
            </svg>
            <div class="notification-content">
                <p>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡πÉ‡∏ô Firebase Database ‡πÅ‡∏•‡πâ‡∏ß ‡∏´‡∏≤‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô AI ‡πÄ‡∏ï‡πá‡∏°‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö ‡πÇ‡∏õ‡∏£‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ API Key ‡πÉ‡∏ô "‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤"</p>
            </div>
        </div>

        <div class="tabs">
            <div class="tab active" data-tab="dashboard">‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</div>
            <div class="tab" data-tab="calculator">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤</div>
            <div class="tab" data-tab="sales">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢</div>
            <div class="tab" data-tab="advisor">‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤ AI</div>
            <div class="tab" data-tab="settings">‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</div>
        </div>

        <!-- ‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î -->
        <div id="dashboard-tab" class="tab-content active">
            <div class="dashboard-stats">
                <div class="stat-card">
                    <div class="stat-label">‡∏£‡∏≤‡∏Ñ‡∏≤‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</div>
                    <div class="stat-value" id="today-price">-- ‡∏ö‡∏≤‡∏ó</div>
                    <div class="stat-label">‡∏ï‡πà‡∏≠‡πÑ‡∏°‡πâ</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">‡∏£‡∏≤‡∏Ñ‡∏≤‡∏´‡∏°‡∏π‡πÉ‡∏ô‡∏ï‡∏•‡∏≤‡∏î</div>
                    <div class="stat-value" id="market-price">-- ‡∏ö‡∏≤‡∏ó</div>
                    <div class="stat-label">‡∏ï‡πà‡∏≠‡∏Å‡∏¥‡πÇ‡∏•‡∏Å‡∏£‡∏±‡∏°</div>
                    <div class="stat-label" id="price-update-time">‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏°‡∏∑‡πà‡∏≠: --</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®</div>
                    <div class="stat-value" id="weather-status">--</div>
                    <div class="stat-label">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô: <span id="humidity">--</span>%</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">‡∏Å‡∏≥‡πÑ‡∏£‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏Å‡∏≤‡∏£</div>
                    <div class="stat-value" id="estimated-profit">-- ‡∏ö‡∏≤‡∏ó</div>
                    <div class="stat-label">‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô</div>
                </div>
            </div>

            <div class="card">
                <div class="card-title">‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô</div>
                <div id="daily-recommendation">
                    <div id="recommendation-content">
                        <p>‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏® <span id="weather-desc">--</span> ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡∏ó‡∏µ‡πà <span id="location-rec">--</span></p>
                        <p>‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏µ‡πà <span id="price-rec">--</span> ‡∏ö‡∏≤‡∏ó‡∏ï‡πà‡∏≠‡πÑ‡∏°‡πâ</p>
                        <p>‡πÄ‡∏û‡∏£‡∏≤‡∏∞ <span id="price-reason">--</span></p>
                        <div class="additional-tips">
                            <h4>‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</h4>
                            <ul id="daily-tips">
                                <li>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <button class="action-btn pulse" id="refresh-recommendation">‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</button>
            </div>

            <div class="card">
                <div class="card-title">‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢ 7 ‡∏ß‡∏±‡∏ô‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á</div>
                <div id="dashboard-sales-summary">
                    <p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡πÉ‡∏ô‡πÅ‡∏ó‡πá‡∏ö "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢"</p>
                </div>
            </div>
        </div>

        <!-- ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤ -->
        <div id="calculator-tab" class="tab-content">
            <div class="card">
                <div class="card-title">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô</div>
                <form id="calculator-form">
                    <div class="form-group">
                        <label for="meat-price">‡∏£‡∏≤‡∏Ñ‡∏≤‡∏´‡∏°‡∏π (‡∏ö‡∏≤‡∏ó‡∏ï‡πà‡∏≠ 1 ‡∏Å‡∏¥‡πÇ‡∏•‡∏Å‡∏£‡∏±‡∏°)</label>
                        <input type="number" id="meat-price" min="50" value="150">
                    </div>
                    <div class="form-group">
                        <label for="meat-per-skewer">‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏´‡∏°‡∏π‡∏ï‡πà‡∏≠ 1 ‡πÑ‡∏°‡πâ (‡∏Å‡∏£‡∏±‡∏°)</label>
                        <input type="number" id="meat-per-skewer" min="10" max="50" value="25">
                    </div>
                    <div class="form-group">
                        <label>‡∏Ç‡∏ô‡∏≤‡∏î‡πÑ‡∏°‡πâ‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á</label>
                        <div class="option-group">
                            <div class="option-button" data-value="small">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="8" y1="2" x2="8" y2="22" stroke-linecap="round"></line>
                                    <circle cx="8" cy="12" r="3"></circle>
                                </svg>
                                ‡πÄ‡∏•‡πá‡∏Å
                            </div>
                            <div class="option-button selected" data-value="medium">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="12" y1="2" x2="12" y2="22" stroke-linecap="round"></line>
                                    <circle cx="12" cy="12" r="4"></circle>
                                </svg>
                                ‡∏Å‡∏•‡∏≤‡∏á
                            </div>
                            <div class="option-button" data-value="large">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="16" y1="2" x2="16" y2="22" stroke-linecap="round"></line>
                                    <circle cx="16" cy="12" r="5"></circle>
                                </svg>
                                ‡πÉ‡∏´‡∏ç‡πà
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="additional-cost">‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‡∏ï‡πà‡∏≠ 1 ‡πÑ‡∏°‡πâ (‡∏Å‡∏∞‡πÄ‡∏≠‡∏≤‡πÄ‡∏•‡∏¢ AI ‡∏Ñ‡∏¥‡∏î‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÅ‡∏•‡πâ‡∏ß)</label>
                        <input type="number" id="additional-cost" min="0" step="0.1" value="1">
                    </div>
                </form>
            </div>

            <div class="card">
                <div class="card-title">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏•‡∏≤‡∏î</div>
                <form>
                    <div class="form-group">
                        <label for="location">‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏Ç‡∏≤‡∏¢</label>
                        <select id="location">
                            <option value="market">‡∏ï‡∏•‡∏≤‡∏î</option>
                            <option value="street">‡∏£‡∏¥‡∏°‡∏ñ‡∏ô‡∏ô</option>
                            <option value="community">‡∏ä‡∏∏‡∏°‡∏ä‡∏ô</option>
                            <option value="school">‡∏™‡∏ñ‡∏≤‡∏ô‡∏®‡∏∂‡∏Å‡∏©‡∏≤</option>
                            <option value="office">‡∏≠‡∏≠‡∏ü‡∏ü‡∏¥‡∏®</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="sales-volume">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ç‡∏≤‡∏¢‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô (‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì)</label>
                        <select id="sales-volume">
                            <option value="low">‡∏ô‡πâ‡∏≠‡∏¢ (‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤ 100 ‡πÑ‡∏°‡πâ)</option>
                            <option value="medium" selected>‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á (100-300 ‡πÑ‡∏°‡πâ)</option>
                            <option value="high">‡∏°‡∏≤‡∏Å (‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 300 ‡πÑ‡∏°‡πâ)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®</label>
                        <div class="option-group">
                            <div class="option-button selected" data-value="sunny">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="5"></circle>
                                    <line x1="12" y1="1" x2="12" y2="3"></line>
                                    <line x1="12" y1="21" x2="12" y2="23"></line>
                                    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                                    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                                    <line x1="1" y1="12" x2="3" y2="12"></line>
                                    <line x1="21" y1="12" x2="23" y2="12"></line>
                                    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                                    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                                </svg>
                                ‡πÅ‡∏î‡∏î‡∏≠‡∏≠‡∏Å
                            </div>
                            <div class="option-button" data-value="cloudy">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"></path>
                                </svg>
                                ‡∏°‡∏µ‡πÄ‡∏°‡∏Ü
                            </div>
                            <div class="option-button" data-value="rainy">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M20 16.2A5 5 0 0 0 18 7h-1.26a8 8 0 1 0-11.62 9"></path>
                                    <line x1="8" y1="16" x2="8.01" y2="16"></line>
                                    <line x1="8" y1="20" x2="8.01" y2="20"></line>
                                    <line x1="12" y1="18" x2="12.01" y2="18"></line>
                                    <line x1="12" y1="22" x2="12.01" y2="22"></line>
                                    <line x1="16" y1="16" x2="16.01" y2="16"></line>
                                    <line x1="16" y1="20" x2="16.01" y2="20"></line>
                                </svg>
                                ‡∏ù‡∏ô‡∏ï‡∏Å
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>‡∏™‡∏†‡∏≤‡∏û‡πÄ‡∏®‡∏£‡∏©‡∏ê‡∏Å‡∏¥‡∏à</label>
                        <div class="option-group">
                            <div class="option-button" data-value="good">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20z"></path>
                                    <path d="M8 14s1.5 2 4 2 4-2 4-2"></path>
                                    <line x1="9" y1="9" x2="9.01" y2="9"></line>
                                    <line x1="15" y1="9" x2="15.01" y2="9"></line>
                                </svg>
                                ‡∏î‡∏µ
                            </div>
                            <div class="option-button selected" data-value="normal">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20z"></path>
                                    <line x1="8" y1="15" x2="16" y2="15"></line>
                                    <line x1="9" y1="9" x2="9.01" y2="9"></line>
                                    <line x1="15" y1="9" x2="15.01" y2="9"></line>
                                </svg>
                                ‡∏õ‡∏Å‡∏ï‡∏¥
                            </div>
                            <div class="option-button" data-value="bad">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20z"></path>
                                    <path d="M16 16s-1.5-2-4-2-4 2-4 2"></path>
                                    <line x1="9" y1="9" x2="9.01" y2="9"></line>
                                    <line x1="15" y1="9" x2="15.01" y2="9"></line>
                                </svg>
                                ‡πÅ‡∏¢‡πà
                            </div>
                        </div>
                    </div>
                </form>
                <button type="button" class="calculate-btn pulse" id="calculate-btn">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤ AI</button>
            </div>

            <div class="result-section" id="result-section">
                <h3>‡∏£‡∏≤‡∏Ñ‡∏≤‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏à‡∏≤‡∏Å AI</h3>
                <div class="price-recommendation" id="price-recommendation">-- ‡∏ö‡∏≤‡∏ó/‡πÑ‡∏°‡πâ</div>
                <div class="profit-estimate" id="profit-estimate">‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏Å‡∏≤‡∏£‡∏Å‡∏≥‡πÑ‡∏£: -- ‡∏ö‡∏≤‡∏ó/‡∏ß‡∏±‡∏ô</div>
                <div class="additional-tips" id="additional-tips">
                    <h4>‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÅ‡∏•‡∏∞‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≥‡πÑ‡∏£</h4>
                    <p id="analysis-text">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå...</p>
                    <ul id="tips-list">
                        <li>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡∏Å‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì...</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢ -->
        <div id="sales-tab" class="tab-content">
            <div class="card">
                <div class="card-title">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô</div>
                
                <div class="form-group">
                    <label for="sale-date">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</label>
                    <input type="date" id="sale-date">
                </div>
                
                <div class="form-group">
                    <label for="prepared-amount">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÑ‡∏õ (‡πÑ‡∏°‡πâ)</label>
                    <input type="number" id="prepared-amount" min="0" placeholder="‡πÄ‡∏ä‡πà‡∏ô 150">
                </div>
                
                <div class="form-group">
                    <label for="sold-amount">‡∏Ç‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á (‡πÑ‡∏°‡πâ)</label>
                    <input type="number" id="sold-amount" min="0" placeholder="‡πÄ‡∏ä‡πà‡∏ô 140">
                </div>
                
                <div class="form-group">
                    <label for="weather-condition">‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏ß‡∏±‡∏ô‡∏ô‡∏±‡πâ‡∏ô</label>
                    <select id="weather-condition">
                        <option value="sunny">‡πÅ‡∏î‡∏î‡∏≠‡∏≠‡∏Å</option>
                        <option value="cloudy">‡∏°‡∏µ‡πÄ‡∏°‡∏Ü</option>
                        <option value="rainy">‡∏ù‡∏ô‡∏ï‡∏Å</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="sale-notes">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)</label>
                    <textarea id="sale-notes" rows="3" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î, ‡πÄ‡∏ó‡∏®‡∏Å‡∏≤‡∏•, ‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏≠‡∏≠‡∏Å"></textarea>
                </div>
                
                <button class="action-btn" id="save-sales-btn">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢</button>
            </div>

            <!-- ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• 7 ‡∏ß‡∏±‡∏ô‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á -->
            <div class="card">
                <div class="card-title">‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢ 7 ‡∏ß‡∏±‡∏ô‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á</div>
                <div id="sales-history">
                    <p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏Å‡πà‡∏≠‡∏ô</p>
                </div>
            </div>

            <!-- ‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ì‡πå‡∏ß‡∏±‡∏ô‡∏û‡∏£‡∏∏‡πà‡∏á‡∏ô‡∏µ‡πâ -->
            <div class="card">
                <div class="card-title">üîÆ ‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ì‡πå‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏ß‡∏±‡∏ô‡∏û‡∏£‡∏∏‡πà‡∏á‡∏ô‡∏µ‡πâ</div>
                <div id="prediction-result">
                    <div class="prediction-highlight">
                        <div class="prediction-amount" id="predicted-amount">-- ‡πÑ‡∏°‡πâ</div>
                        <div class="prediction-reason" id="prediction-reason">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 3 ‡∏ß‡∏±‡∏ô ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÑ‡∏î‡πâ</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤ AI -->
        <div id="advisor-tab" class="tab-content">
            <div class="card">
                <div class="card-title">üí¨ ‡πÅ‡∏ä‡∏ó‡∏Å‡∏±‡∏ö‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤ AI</div>
                <div class="chat-ui">
                    <div class="chat-messages" id="chat-messages">
                        <div class="message ai">
                            ‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö ‡∏ú‡∏°‡∏Ñ‡∏∑‡∏≠‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏´‡πâ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ó‡∏±‡πâ‡∏á‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤ ‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢ ‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏°‡∏∑‡∏≠‡∏Å‡∏±‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡∏•‡∏≠‡∏á‡∏ñ‡∏≤‡∏°‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö
                            <div class="message-time">‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà</div>
                        </div>
                    </div>
                    <div class="chat-input-container">
                        <input type="text" class="chat-input" id="chat-input" placeholder="‡∏ñ‡∏≤‡∏°‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á...">
                        <button class="chat-send-btn" id="chat-send-btn">
                            <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="22" y1="2" x2="11" y2="13"></line>
                                <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-title">üí° ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ï‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå</div>
                
                <div class="strategy-item">
                    <div class="strategy-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="#FF5722" stroke-width="2">
                            <path d="M20 16.2A5 5 0 0 0 18 7h-1.26a8 8 0 1 0-11.62 9"></path>
                            <line x1="8" y1="16" x2="8.01" y2="16"></line>
                            <line x1="8" y1="20" x2="8.01" y2="20"></line>
                            <line x1="12" y1="18" x2="12.01" y2="18"></line>
                            <line x1="12" y1="22" x2="12.01" y2="22"></line>
                            <line x1="16" y1="16" x2="16.01" y2="16"></line>
                            <line x1="16" y1="20" x2="16.01" y2="20"></line>
                        </svg>
                    </div>
                    <div class="strategy-content">
                        <h4>üåßÔ∏è ‡∏ß‡∏±‡∏ô‡∏ù‡∏ô‡∏ï‡∏Å</h4>
                        <p>‡∏ó‡∏≥‡∏ó‡∏µ‡πà‡∏Å‡∏±‡∏ô‡∏ù‡∏ô‡πÄ‡∏•‡πá‡∏Å‡πÜ ‡πÉ‡∏´‡πâ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏¢‡∏∑‡∏ô‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏µ‡∏¢‡∏Å ‡∏´‡∏£‡∏∑‡∏≠‡∏°‡∏µ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏ñ‡∏∂‡∏á‡∏£‡∏ñ ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏ñ‡∏∏‡∏á‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å‡πÉ‡∏´‡πâ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÉ‡∏™‡πà‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á‡∏Å‡∏•‡∏±‡∏ö‡∏ö‡πâ‡∏≤‡∏ô</p>
                        <p>‡∏•‡∏î‡∏£‡∏≤‡∏Ñ‡∏≤‡∏•‡∏á 1-2 ‡∏ö‡∏≤‡∏ó‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏∂‡∏á‡∏î‡∏π‡∏î‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ ‡∏´‡∏£‡∏∑‡∏≠‡∏ó‡∏≥‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©‡πÄ‡∏ä‡πà‡∏ô "‡∏ã‡∏∑‡πâ‡∏≠ 10 ‡πÅ‡∏ñ‡∏° 1 ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ß‡∏±‡∏ô‡∏ù‡∏ô‡∏ï‡∏Å"</p>
                    </div>
                </div>

                <div class="strategy-item">
                    <div class="strategy-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="#FF5722" stroke-width="2">
                            <path d="M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20z"></path>
                            <path d="M16 16s-1.5-2-4-2-4 2-4 2"></path>
                            <line x1="9" y1="9" x2="9.01" y2="9"></line>
                            <line x1="15" y1="9" x2="15.01" y2="9"></line>
                        </svg>
                    </div>
                    <div class="strategy-content">
                        <h4>üìâ ‡πÄ‡∏®‡∏£‡∏©‡∏ê‡∏Å‡∏¥‡∏à‡πÅ‡∏¢‡πà</h4>
                        <p>‡∏•‡∏î‡∏Ç‡∏ô‡∏≤‡∏î‡πÑ‡∏°‡πâ‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢‡πÅ‡∏ï‡πà‡∏Ñ‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏î‡∏¥‡∏° ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô ‡πÄ‡∏ä‡πà‡∏ô ‡∏ã‡∏∑‡πâ‡∏≠ 5 ‡πÑ‡∏°‡πâ‡πÅ‡∏ñ‡∏° 1</p>
                        <p>‡πÄ‡∏ô‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏•‡∏≤‡∏î‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ‡∏Ñ‡∏≥‡∏ß‡πà‡∏≤ "‡∏≠‡∏¥‡πà‡∏°‡∏Ñ‡∏∏‡πâ‡∏°" ‡∏´‡∏£‡∏∑‡∏≠ "‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î" ‡πÅ‡∏•‡∏∞‡∏ô‡∏≥‡πÄ‡∏™‡∏ô‡∏≠‡∏ä‡∏∏‡∏î‡∏£‡∏≤‡∏Ñ‡∏≤‡∏û‡∏¥‡πÄ‡∏®‡∏© ‡πÄ‡∏ä‡πà‡∏ô ‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á + ‡∏Ç‡πâ‡∏≤‡∏ß‡πÄ‡∏´‡∏ô‡∏µ‡∏¢‡∏ß</p>
                    </div>
                </div>

                <div class="strategy-item">
                    <div class="strategy-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="#FF5722" stroke-width="2">
                            <circle cx="12" cy="12" r="5"></circle>
                            <line x1="12" y1="1" x2="12" y2="3"></line>
                            <line x1="12" y1="21" x2="12" y2="23"></line>
                            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                            <line x1="1" y1="12" x2="3" y2="12"></line>
                            <line x1="21" y1="12" x2="23" y2="12"></line>
                            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                        </svg>
                    </div>
                    <div class="strategy-content">
                        <h4>‚òÄÔ∏è ‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏£‡πâ‡∏≠‡∏ô‡∏à‡∏±‡∏î</h4>
                        <p>‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏ô‡πâ‡∏≥‡∏î‡∏∑‡πà‡∏°‡πÄ‡∏¢‡πá‡∏ô‡πÜ ‡πÑ‡∏ß‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏ü‡∏£‡∏µ ‡∏´‡∏£‡∏∑‡∏≠‡∏Ç‡∏≤‡∏¢‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ñ‡∏π‡∏Å ‡πÉ‡∏ä‡πâ‡∏£‡πà‡∏°‡∏ö‡∏±‡∏á‡πÅ‡∏î‡∏î‡πÉ‡∏´‡πâ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</p>
                        <p>‡∏õ‡∏¥‡πâ‡∏á‡∏´‡∏°‡∏π‡∏™‡∏î‡πÉ‡∏´‡∏°‡πà‡∏ï‡∏•‡∏≠‡∏î ‡πÑ‡∏°‡πà‡∏õ‡∏¥‡πâ‡∏á‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ‡∏ô‡∏≤‡∏ô‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ ‡πÅ‡∏•‡∏∞‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π‡∏ô‡πâ‡∏≥‡πÅ‡∏Ç‡πá‡∏á‡πÑ‡∏™‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°‡πÄ‡∏¢‡πá‡∏ô‡πÜ</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ -->
        <div id="settings-tab" class="tab-content">
            <div class="card">
                <div class="card-title">üîë ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ API Key ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö AI</div>
                <div class="form-group">
                    <label for="api-provider">‡∏ú‡∏π‡πâ‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ AI</label>
                    <select id="api-provider">
                        <option value="openai">OpenAI (GPT-4)</option>
                        <option value="anthropic">Anthropic (Claude)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="api-key">API Key</label>
                    <input type="password" id="api-key" placeholder="‡πÉ‡∏™‡πà API Key ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì">
                </div>
                <button class="action-btn" id="save-api-key">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å API Key</button>
                <p style="margin-top:10px; font-size:0.9rem; color:#666;">
                    ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: API Key ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô Firebase ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô ‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡πÅ‡∏•‡∏∞‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡πÑ‡∏î‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Ñ‡∏∏‡∏ì
                </p>
            </div>

            <div class="card">
                <div class="card-title">üè™ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤</div>
                <div class="form-group">
                    <label for="business-name">‡∏ä‡∏∑‡πà‡∏≠‡∏£‡πâ‡∏≤‡∏ô</label>
                    <input type="text" id="business-name" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏£‡πâ‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì">
                </div>
                <div class="form-group">
                    <label for="business-location">‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡∏£‡πâ‡∏≤‡∏ô</label>
                    <input type="text" id="business-location" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡∏£‡∏≤‡∏¢, ‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û">
                </div>
                <div class="form-group">
                    <label for="business-description">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏£‡πâ‡∏≤‡∏ô</label>
                    <textarea id="business-description" rows="3" placeholder="‡πÄ‡∏•‡πà‡∏≤‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏£‡πâ‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì, ‡∏à‡∏∏‡∏î‡πÄ‡∏î‡πà‡∏ô, ‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå"></textarea>
                </div>
                <button class="action-btn" id="save-business-info">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡πâ‡∏≤‡∏ô</button>
            </div>

            <div class="card">
                <div class="card-title">üîî ‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="weather-alert" checked>
                        ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®
                    </label>
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="price-alert" checked>
                        ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö
                    </label>
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="event-alert" checked>
                        ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡πÅ‡∏•‡∏∞‡πÄ‡∏ó‡∏®‡∏Å‡∏≤‡∏•
                    </label>
                </div>
                <button class="action-btn" id="save-alert-settings">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</button>
            </div>
        </div>

        <div class="footer">
            <p>Smart Pork Skewer Pricing Advisor AI v3.0</p>
            <p>‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡∏£‡∏≤‡∏Ñ‡∏≤‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞ - ‡∏û‡∏±‡∏í‡∏ô‡∏≤‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ AI ‡πÅ‡∏•‡∏∞ Firebase</p>
        </div>
    </div>

        <script>
        // =====================
        // ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏î‡πâ‡∏ß‡∏¢ Firebase
        // =====================
        const UserDataManager = {
            userData: {
                profile: {
                    businessName: '',
                    location: '',
                    description: ''
                },
                preferences: {
                    weatherAlert: true,
                    priceAlert: true,
                    eventAlert: true
                },
                apiSettings: {
                    provider: 'openai',
                    apiKey: ''
                },
                lastPorkPrice: 150,
                lastUpdate: new Date().toISOString()
            },
            currentUserId: null,
            isInitialized: false,

            // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö Auth
            initAuth: function() {
                return new Promise((resolve, reject) => {
                    auth.onAuthStateChanged(async (user) => {
                        if (user) {
                            this.currentUserId = user.uid;
                            console.log('User logged in:', this.currentUserId);
                            await this.loadUserData();
                            this.isInitialized = true;
                            resolve(user);
                        } else {
                            try {
                                const result = await auth.signInAnonymously();
                                this.currentUserId = result.user.uid;
                                console.log('Anonymous login successful:', this.currentUserId);
                                this.isInitialized = true;
                                resolve(result.user);
                            } catch (error) {
                                console.error('Authentication failed:', error);
                                reject(error);
                            }
                        }
                    });
                });
            },

            // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏á Firestore
            saveUserData: async function() {
                if (!this.isInitialized || !this.currentUserId) {
                    console.log('Not ready to save data');
                    return false;
                }

                try {
                    await db.collection('users').doc(this.currentUserId).set(this.userData);
                    console.log('Data saved successfully to Firebase');
                    return true;
                } catch (error) {
                    console.error('Error saving data to Firebase:', error);
                    return false;
                }
            },

            // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å Firestore
            loadUserData: async function() {
                if (!this.currentUserId) {
                    console.log('No user ID available');
                    return false;
                }

                try {
                    const doc = await db.collection('users').doc(this.currentUserId).get();
                    if (doc.exists) {
                        this.userData = { ...this.userData, ...doc.data() };
                        console.log('Data loaded from Firebase:', this.userData);
                        this.updateUIWithUserData();
                        return true;
                    } else {
                        console.log('No user data found, using defaults');
                        await this.saveUserData();
                        return false;
                    }
                } catch (error) {
                    console.error('Error loading from Firebase:', error);
                    return false;
                }
            },

            // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï UI ‡∏î‡πâ‡∏ß‡∏¢‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
            updateUIWithUserData: function() {
                const elements = {
                    'api-provider': this.userData.apiSettings.provider,
                    'api-key': this.userData.apiSettings.apiKey,
                    'business-name': this.userData.profile.businessName,
                    'business-location': this.userData.profile.location,
                    'business-description': this.userData.profile.description,
                    'weather-alert': this.userData.preferences.weatherAlert,
                    'price-alert': this.userData.preferences.priceAlert,
                    'event-alert': this.userData.preferences.eventAlert
                };

                Object.entries(elements).forEach(([id, value]) => {
                    const element = document.getElementById(id);
                    if (element) {
                        if (element.type === 'checkbox') {
                            element.checked = value;
                        } else {
                            element.value = value;
                        }
                    }
                });

                updateApiKeyNotification();
            },

            updateBusinessInfo: async function(name, location, description) {
                this.userData.profile.businessName = name;
                this.userData.profile.location = location;
                this.userData.profile.description = description;
                return await this.saveUserData();
            },

            updateAlertSettings: async function(weatherAlert, priceAlert, eventAlert) {
                this.userData.preferences.weatherAlert = weatherAlert;
                this.userData.preferences.priceAlert = priceAlert;
                this.userData.preferences.eventAlert = eventAlert;
                return await this.saveUserData();
            },

            updateApiSettings: async function(provider, apiKey) {
                this.userData.apiSettings.provider = provider;
                this.userData.apiSettings.apiKey = apiKey;
                const result = await this.saveUserData();
                updateApiKeyNotification();
                return result;
            },

            hasApiKey: function() {
                return !!this.userData.apiSettings.apiKey;
            }
        };

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô API Key
        function updateApiKeyNotification() {
            const notification = document.getElementById('api-key-notification');
            if (notification) {
                notification.style.display = UserDataManager.hasApiKey() ? 'none' : 'flex';
            }
        }

            // =====================
        // ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢
        // =====================
        const SalesManager = {
            
            // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢
            saveDailySales: async function(salesData) {
                if (!UserDataManager.isInitialized || !UserDataManager.currentUserId) {
                    console.log('User not initialized');
                    return false;
                }

                try {
                    await db.collection('daily_sales').add({
                        userId: UserDataManager.currentUserId,
                        date: salesData.date,
                        prepared: salesData.prepared,
                        sold: salesData.sold,
                        leftover: salesData.prepared - salesData.sold,
                        weather: salesData.weather,
                        notes: salesData.notes,
                        sellThroughRate: Math.round((salesData.sold / salesData.prepared) * 100),
                        timestamp: firebase.firestore.FieldValue.serverTimestamp()
                    });
                    console.log('Sales data saved successfully');
                    return true;
                } catch (error) {
                    console.error('Error saving sales data:', error);
                    return false;
                }
            },

            // ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• 7 ‡∏ß‡∏±‡∏ô‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á
            getLast7DaysSales: async function() {
                if (!UserDataManager.currentUserId) {
                    return [];
                }

                try {
                    const sevenDaysAgo = new Date();
                    sevenDaysAgo.setDate(sevenDaysAgo.getDate() - 7);
                    
                    const snapshot = await db.collection('daily_sales')
                        .where('userId', '==', UserDataManager.currentUserId)
                        .where('date', '>=', sevenDaysAgo.toISOString().split('T')[0])
                        .orderBy('date', 'desc')
                        .limit(7)
                        .get();
                    
                    return snapshot.docs.map(doc => doc.data());
                } catch (error) {
                    console.error('Error getting sales history:', error);
                    return [];
                }
            },

            // ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
            getAllSalesData: async function() {
                if (!UserDataManager.currentUserId) {
                    return [];
                }

                try {
                    const snapshot = await db.collection('daily_sales')
                        .where('userId', '==', UserDataManager.currentUserId)
                        .orderBy('date', 'desc')
                        .get();
                    
                    return snapshot.docs.map(doc => doc.data());
                } catch (error) {
                    console.error('Error getting all sales data:', error);
                    return [];
                }
            },

            // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Å‡∏≤‡∏£‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ì‡πå
            calculatePrediction: function(salesHistory) {
                if (salesHistory.length < 3) {
                    return { 
                        amount: 0, 
                        reason: '‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 3 ‡∏ß‡∏±‡∏ô ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÑ‡∏î‡πâ‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥',
                        confidence: '‡∏ï‡πà‡∏≥'
                    };
                }

                // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢
                const avgSold = salesHistory.reduce((sum, day) => sum + day.sold, 0) / salesHistory.length;
                const avgPrepared = salesHistory.reduce((sum, day) => sum + day.prepared, 0) / salesHistory.length;
                
                // ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÅ‡∏û‡∏ó‡πÄ‡∏ó‡∏¥‡∏£‡πå‡∏ô‡∏ß‡∏±‡∏ô‡πÉ‡∏ô‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå
                const tomorrow = new Date();
                tomorrow.setDate(tomorrow.getDate() + 1);
                const dayOfWeek = tomorrow.getDay(); // 0=‡∏≠‡∏≤‡∏ó‡∏¥‡∏ó‡∏¢‡πå, 6=‡πÄ‡∏™‡∏≤‡∏£‡πå
                
                let prediction = Math.round(avgSold);
                let reasonParts = [];
                
                // ‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏≤‡∏°‡∏ß‡∏±‡∏ô‡πÉ‡∏ô‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå
                if (dayOfWeek === 0 || dayOfWeek === 6) {
                    prediction = Math.round(avgSold * 0.8); // ‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î‡∏•‡∏î 20%
                    reasonParts.push('‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î (‡∏•‡∏î 20%)');
                } else if (dayOfWeek === 5) {
                    prediction = Math.round(avgSold * 1.1); // ‡∏ß‡∏±‡∏ô‡∏®‡∏∏‡∏Å‡∏£‡πå‡πÄ‡∏û‡∏¥‡πà‡∏° 10%
                    reasonParts.push('‡∏ß‡∏±‡∏ô‡∏®‡∏∏‡∏Å‡∏£‡πå (‡πÄ‡∏û‡∏¥‡πà‡∏° 10%)');
                }
                
                // ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÄ‡∏ó‡∏£‡∏ô‡∏î‡πå 3 ‡∏ß‡∏±‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
                if (salesHistory.length >= 3) {
                    const last3Days = salesHistory.slice(0, 3);
                    const trend = (last3Days[0].sold - last3Days[2].sold) / 2;
                    
                    if (Math.abs(trend) > 5) {
                        prediction += Math.round(trend);
                        if (trend > 0) {
                            reasonParts.push('‡πÄ‡∏ó‡∏£‡∏ô‡∏î‡πå‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏∂‡πâ‡∏ô');
                        } else {
                            reasonParts.push('‡πÄ‡∏ó‡∏£‡∏ô‡∏î‡πå‡∏•‡∏î‡∏•‡∏á');
                        }
                    }
                }

                // ‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡πÑ‡∏ß‡πâ 10% ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏Ç‡∏≤‡∏î‡πÅ‡∏Ñ‡∏•‡∏ô
                const recommendedAmount = Math.max(Math.round(prediction * 1.1), Math.round(avgSold * 0.8));
                
                // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏±‡πà‡∏ô
                const avgSellThrough = salesHistory.reduce((sum, day) => sum + day.sellThroughRate, 0) / salesHistory.length;
                let confidence = '‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á';
                
                if (salesHistory.length >= 7 && avgSellThrough >= 80) {
                    confidence = '‡∏™‡∏π‡∏á';
                } else if (avgSellThrough < 60) {
                    confidence = '‡∏ï‡πà‡∏≥';
                }

                const reason = `‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ${salesHistory.length} ‡∏ß‡∏±‡∏ô ‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏Ç‡∏≤‡∏¢ ${Math.round(avgSold)} ‡πÑ‡∏°‡πâ/‡∏ß‡∏±‡∏ô` + 
                             (reasonParts.length > 0 ? ` (${reasonParts.join(', ')})` : '');

                return {
                    amount: recommendedAmount,
                    reason: reason,
                    confidence: confidence,
                    avgSold: Math.round(avgSold),
                    sellThroughRate: Math.round(avgSellThrough)
                };
            },

            // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏£‡∏∏‡∏õ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î
            generateDashboardSummary: function(salesHistory) {
                if (salesHistory.length === 0) {
                    return {
                        totalDays: 0,
                        totalSold: 0,
                        avgSold: 0,
                        totalLeftover: 0,
                        avgSellThrough: 0,
                        bestDay: null,
                        worstDay: null
                    };
                }

                const totalSold = salesHistory.reduce((sum, day) => sum + day.sold, 0);
                const totalPrepared = salesHistory.reduce((sum, day) => sum + day.prepared, 0);
                const totalLeftover = salesHistory.reduce((sum, day) => sum + day.leftover, 0);
                
                const avgSold = Math.round(totalSold / salesHistory.length);
                const avgSellThrough = Math.round((totalSold / totalPrepared) * 100);
                
                const bestDay = salesHistory.reduce((best, day) => 
                    day.sold > best.sold ? day : best, salesHistory[0]);
                const worstDay = salesHistory.reduce((worst, day) => 
                    day.sold < worst.sold ? day : worst, salesHistory[0]);

                return {
                    totalDays: salesHistory.length,
                    totalSold: totalSold,
                    avgSold: avgSold,
                    totalLeftover: totalLeftover,
                    avgSellThrough: avgSellThrough,
                    bestDay: bestDay,
                    worstDay: worstDay
                };
            }
        };

            // =====================
        // AI Engine Service
        // =====================
        const AIEngine = {
            mockResponses: {
                priceRecommendation: [
                    "‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡πÅ‡∏•‡∏∞‡∏™‡∏†‡∏≤‡∏û‡∏ï‡∏•‡∏≤‡∏î ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏µ‡πà {price} ‡∏ö‡∏≤‡∏ó‡∏ï‡πà‡∏≠‡πÑ‡∏°‡πâ ‡∏ã‡∏∂‡πà‡∏á‡∏à‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏Å‡∏≥‡πÑ‡∏£‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 30% ‡πÅ‡∏•‡∏∞‡∏¢‡∏±‡∏á‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô‡πÉ‡∏ô‡∏ï‡∏•‡∏≤‡∏î‡πÑ‡∏î‡πâ",
                    "‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏î‡∏µ ‡πÅ‡∏•‡∏∞‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏Å‡∏•‡πâ‡∏™‡∏ñ‡∏≤‡∏ô‡∏®‡∏∂‡∏Å‡∏©‡∏≤ ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏µ‡πà {price} ‡∏ö‡∏≤‡∏ó‡∏ï‡πà‡∏≠‡πÑ‡∏°‡πâ ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ó‡∏≥‡∏Å‡∏≥‡πÑ‡∏£‡πÑ‡∏î‡πâ‡∏î‡∏µ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÅ‡∏•‡∏∞‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà‡∏ä‡∏∑‡πà‡∏ô‡∏ä‡∏≠‡∏ö‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á",
                    "‡∏î‡πâ‡∏ß‡∏¢‡∏£‡∏≤‡∏Ñ‡∏≤‡∏´‡∏°‡∏π‡∏ó‡∏µ‡πà‡∏Ñ‡πà‡∏≠‡∏ô‡∏Ç‡πâ‡∏≤‡∏á‡∏™‡∏π‡∏á‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡∏ô‡∏µ‡πâ ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏µ‡πà {price} ‡∏ö‡∏≤‡∏ó‡∏ï‡πà‡∏≠‡πÑ‡∏°‡πâ ‡πÅ‡∏ï‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏ô‡∏≤‡∏î‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∏‡πâ‡∏°‡∏Ñ‡πà‡∏≤",
                    "‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏®‡∏£‡∏©‡∏ê‡∏Å‡∏¥‡∏à‡πÑ‡∏°‡πà‡∏î‡∏µ ‡πÅ‡∏ï‡πà‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏ó‡∏≥‡πÄ‡∏•‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏π‡∏á ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏µ‡πà {price} ‡∏ö‡∏≤‡∏ó‡∏ï‡πà‡∏≠‡πÑ‡∏°‡πâ ‡πÅ‡∏•‡∏∞‡∏ó‡∏≥‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô '‡∏ã‡∏∑‡πâ‡∏≠ 10 ‡πÅ‡∏ñ‡∏° 1' ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏£‡∏∞‡∏ï‡∏∏‡πâ‡∏ô‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢"
                ],

                businessTips: [
                    "‡∏•‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡∏™‡∏π‡∏ï‡∏£‡∏´‡∏°‡∏±‡∏Å‡πÉ‡∏´‡πâ‡∏°‡∏µ‡πÄ‡∏≠‡∏Å‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ï‡∏±‡∏ß ‡∏à‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏ï‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏à‡∏≤‡∏Å‡∏Ñ‡∏π‡πà‡πÅ‡∏Ç‡πà‡∏á",
                    "‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏û‡πá‡∏Ñ‡πÄ‡∏Å‡∏à‡∏û‡∏¥‡πÄ‡∏®‡∏© ‡πÄ‡∏ä‡πà‡∏ô '‡πÄ‡∏ã‡πá‡∏ï‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß' ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á‡∏´‡∏•‡∏≤‡∏¢‡πÑ‡∏°‡πâ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Ç‡πâ‡∏≤‡∏ß‡πÄ‡∏´‡∏ô‡∏µ‡∏¢‡∏ß‡πÅ‡∏•‡∏∞‡∏ô‡πâ‡∏≥‡∏à‡∏¥‡πâ‡∏°",
                    "‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏ï‡∏•‡∏≤‡∏î‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå‡∏ú‡πà‡∏≤‡∏ô Facebook ‡∏´‡∏£‡∏∑‡∏≠ Line ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏à‡πâ‡∏á‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏Ç‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô",
                    "‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π‡∏û‡∏¥‡πÄ‡∏®‡∏©‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏Ñ‡∏£‡∏≤‡∏ß ‡πÄ‡∏ä‡πà‡∏ô '‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á‡∏ã‡∏≠‡∏™‡∏û‡∏£‡∏¥‡∏Å‡πÑ‡∏ó‡∏¢‡∏î‡∏≥' ‡∏´‡∏£‡∏∑‡∏≠ '‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á‡∏™‡∏°‡∏∏‡∏ô‡πÑ‡∏û‡∏£' ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏õ‡∏•‡∏Å‡πÉ‡∏´‡∏°‡πà",
                    "‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏±‡∏ï‡∏£‡∏™‡∏∞‡∏™‡∏°‡πÅ‡∏ï‡πâ‡∏° '‡∏ã‡∏∑‡πâ‡∏≠‡∏Ñ‡∏£‡∏ö 10 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á ‡∏£‡∏±‡∏ö‡∏ü‡∏£‡∏µ 5 ‡πÑ‡∏°‡πâ' ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏†‡∏±‡∏Å‡∏î‡∏µ‡∏Ç‡∏≠‡∏á‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤",
                    "‡∏à‡∏±‡∏î‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô‡∏ï‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤ ‡πÄ‡∏ä‡πà‡∏ô 'Happy Hour 16.00-18.00 ‡∏ô. ‡∏•‡∏î 20%'",
                    "‡πÉ‡∏ä‡πâ‡∏Å‡∏•‡∏¥‡πà‡∏ô‡∏´‡∏≠‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏•‡∏≤‡∏î ‡∏õ‡∏¥‡πâ‡∏á‡πÉ‡∏´‡πâ‡∏°‡∏µ‡∏Å‡∏•‡∏¥‡πà‡∏ô‡∏´‡∏≠‡∏°‡∏•‡∏≠‡∏¢‡∏°‡∏≤‡∏î‡∏∂‡∏á‡∏î‡∏π‡∏î‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤"
                ],

                weatherStrategies: {
                    sunny: [
                        "‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏£‡πà‡∏°‡∏´‡∏£‡∏∑‡∏≠‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏ö‡∏±‡∏á‡πÅ‡∏î‡∏î‡πÉ‡∏´‡πâ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤",
                        "‡∏°‡∏µ‡∏ô‡πâ‡∏≥‡∏î‡∏∑‡πà‡∏°‡πÄ‡∏¢‡πá‡∏ô‡πÜ ‡πÑ‡∏ß‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏ü‡∏£‡∏µ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ñ‡∏π‡∏Å",
                        "‡∏õ‡∏¥‡πâ‡∏á‡∏´‡∏°‡∏π‡∏™‡∏î‡πÉ‡∏´‡∏°‡πà‡∏ï‡∏•‡∏≠‡∏î ‡πÑ‡∏°‡πà‡∏õ‡∏¥‡πâ‡∏á‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ‡∏ô‡∏≤‡∏ô‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ",
                        "‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°‡πÄ‡∏¢‡πá‡∏ô ‡πÄ‡∏ä‡πà‡∏ô ‡∏ô‡πâ‡∏≥‡πÅ‡∏Ç‡πá‡∏á‡πÑ‡∏™"
                    ],
                    cloudy: [
                        "‡πÄ‡∏ô‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡∏õ‡∏¥‡πâ‡∏á‡πÉ‡∏´‡πâ‡∏°‡∏µ‡∏Å‡∏•‡∏¥‡πà‡∏ô‡∏´‡∏≠‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏∂‡∏á‡∏î‡∏π‡∏î‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤",
                        "‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡πÑ‡∏°‡πà‡∏£‡πâ‡∏≠‡∏ô‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡πÅ‡∏Å‡πà‡∏Å‡∏≤‡∏£‡∏õ‡∏¥‡πâ‡∏á‡∏´‡∏°‡∏π‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏°‡∏≤‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤",
                        "‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ô‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà‡∏≠‡∏≤‡∏à‡∏°‡∏µ‡∏ù‡∏ô‡∏ï‡∏Å",
                        "‡πÄ‡∏õ‡πá‡∏ô‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢"
                    ],
                    rainy: [
                        "‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏ó‡∏µ‡πà‡∏Å‡∏±‡∏ô‡∏ù‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤",
                        "‡∏°‡∏µ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏ñ‡∏∂‡∏á‡∏£‡∏ñ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏´‡πâ‡∏ñ‡∏∏‡∏á‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å‡∏Å‡∏±‡∏ô‡∏ô‡πâ‡∏≥",
                        "‡∏ó‡∏≥‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏ä‡πà‡∏ß‡∏á‡∏ù‡∏ô‡∏ï‡∏Å ‡πÄ‡∏ä‡πà‡∏ô ‡∏ã‡∏∑‡πâ‡∏≠ 10 ‡πÅ‡∏ñ‡∏° 1",
                        "‡∏•‡∏î‡∏£‡∏≤‡∏Ñ‡∏≤‡∏•‡∏á 1-2 ‡∏ö‡∏≤‡∏ó‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏∂‡∏á‡∏î‡∏π‡∏î‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤",
                        "‡∏à‡∏±‡∏î‡πÇ‡∏ã‡∏ô‡∏ô‡∏±‡πà‡∏á‡∏Å‡∏±‡∏ô‡∏ù‡∏ô‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏õ‡πÑ‡∏î‡πâ"
                    ]
                },

                chatResponses: [
                    "‡∏à‡∏≤‡∏Å‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå ‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏¢‡πá‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏•‡∏¥‡∏Å‡∏á‡∏≤‡∏ô‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 17.00-19.00 ‡∏ô. ‡∏°‡∏±‡∏Å‡∏à‡∏∞‡∏Ç‡∏≤‡∏¢‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î ‡πÇ‡∏î‡∏¢‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ö‡∏£‡∏¥‡πÄ‡∏ß‡∏ì‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡∏ô‡πÄ‡∏î‡∏¥‡∏ô‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏õ‡∏°‡∏≤‡∏°‡∏≤‡∏Å ‡πÄ‡∏ä‡πà‡∏ô ‡πÉ‡∏Å‡∏•‡πâ‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ‡∏£‡∏ñ‡πÑ‡∏ü‡∏ü‡πâ‡∏≤ ‡∏´‡∏£‡∏∑‡∏≠‡∏à‡∏∏‡∏î‡∏£‡∏≠‡∏£‡∏ñ‡πÄ‡∏°‡∏•‡πå",
                    "‡∏™‡∏π‡∏ï‡∏£‡∏´‡∏°‡∏±‡∏Å‡∏ó‡∏µ‡πà‡∏ô‡∏¥‡∏¢‡∏°‡∏Ñ‡∏∑‡∏≠ ‡∏ã‡∏µ‡∏≠‡∏¥‡πä‡∏ß‡∏Ç‡∏≤‡∏ß ‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏• ‡∏Å‡∏£‡∏∞‡πÄ‡∏ó‡∏µ‡∏¢‡∏° ‡∏û‡∏£‡∏¥‡∏Å‡πÑ‡∏ó‡∏¢ ‡πÅ‡∏•‡∏∞‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏õ‡∏£‡∏∏‡∏á‡∏•‡∏±‡∏ö‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏£‡πâ‡∏≤‡∏ô ‡∏ö‡∏≤‡∏á‡∏£‡πâ‡∏≤‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ô‡πâ‡∏≥‡∏ú‡∏∂‡πâ‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏´‡∏ß‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡∏°‡∏±‡∏ô‡∏ß‡∏≤‡∏ß",
                    "‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≥‡πÑ‡∏£‡πÑ‡∏î‡πâ‡πÇ‡∏î‡∏¢‡∏Ç‡∏≤‡∏¢‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏Ñ‡∏µ‡∏¢‡∏á ‡πÄ‡∏ä‡πà‡∏ô ‡∏Ç‡πâ‡∏≤‡∏ß‡πÄ‡∏´‡∏ô‡∏µ‡∏¢‡∏ß ‡∏ô‡πâ‡∏≥‡∏à‡∏¥‡πâ‡∏° ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏° ‡∏ã‡∏∂‡πà‡∏á‡∏°‡∏±‡∏Å‡∏°‡∏µ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏Å‡∏≥‡πÑ‡∏£‡∏™‡∏π‡∏á‡∏Å‡∏ß‡πà‡∏≤‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á‡πÄ‡∏≠‡∏á",
                    "‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡∏ù‡∏ô‡∏ï‡∏Å ‡∏•‡∏≠‡∏á‡∏ó‡∏≥‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏© ‡πÄ‡∏ä‡πà‡∏ô ‡∏ã‡∏∑‡πâ‡∏≠ 10 ‡πÅ‡∏ñ‡∏° 1 ‡∏´‡∏£‡∏∑‡∏≠‡∏•‡∏î‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢ ‡πÅ‡∏•‡∏∞‡∏°‡∏µ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏ñ‡∏∂‡∏á‡∏£‡∏ñ ‡∏à‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢",
                    "‡∏£‡∏∞‡∏ß‡∏±‡∏á‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏™‡∏∏‡∏Ç‡∏≠‡∏ô‡∏≤‡∏°‡∏±‡∏¢ ‡∏Ñ‡∏ß‡∏£‡∏™‡∏ß‡∏°‡∏ñ‡∏∏‡∏á‡∏°‡∏∑‡∏≠ ‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡∏≤‡∏Å ‡πÅ‡∏•‡∏∞‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î‡∏Ç‡∏≠‡∏á‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå ‡∏ô‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏à‡∏∞‡∏î‡∏µ‡∏ï‡πà‡∏≠‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡πâ‡∏ß ‡∏¢‡∏±‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏±‡πà‡∏ô‡∏î‡πâ‡∏ß‡∏¢",
                    "‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏Ç‡∏≤‡∏¢‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏°‡∏≤‡∏Å ‡∏Ñ‡∏ß‡∏£‡∏´‡∏≤‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡∏ô‡πÄ‡∏î‡∏¥‡∏ô‡∏ú‡πà‡∏≤‡∏ô ‡∏à‡∏≠‡∏î‡∏£‡∏ñ‡∏™‡∏∞‡∏î‡∏ß‡∏Å ‡πÅ‡∏•‡∏∞‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢‡∏´‡πâ‡∏≤‡∏°",
                    "‡∏ñ‡πâ‡∏≤‡∏Ç‡∏≤‡∏¢‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ó‡∏µ‡πà‡πÄ‡∏î‡∏¥‡∏° ‡∏•‡∏≠‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏Å‡∏±‡∏ö‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏õ‡∏£‡∏∞‡∏à‡∏≥ ‡∏à‡∏≥‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á‡πÄ‡∏Ç‡∏≤ ‡∏à‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏Ç‡∏≤‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏ã‡∏∑‡πâ‡∏≠‡∏ã‡πâ‡∏≥"
                ]
            },

            getRandomElement: function(array) {
                return array[Math.floor(Math.random() * array.length)];
            },

            // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤
            getPriceRecommendation: async function(userData, marketData) {
                return new Promise(async (resolve) => {
                    try {
                        // ‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏´‡∏°‡∏π‡∏à‡∏£‡∏¥‡∏á
                        const realPorkPrice = await fetchRealPorkPrice();
                        
                        // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥
                        const meatPricePerGram = realPorkPrice / 1000;
                        const meatCostPerSkewer = meatPricePerGram * userData.meatPerSkewer;
                        const totalCost = meatCostPerSkewer + userData.additionalCost;

                        // ‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏≤‡∏°‡∏õ‡∏±‡∏à‡∏à‡∏±‡∏¢‡∏ï‡πà‡∏≤‡∏á‡πÜ
                        const locationFactor = {
                            'market': 0,
                            'street': 1,
                            'community': 1,
                            'school': 2,
                            'office': 2
                        };

                        const weatherFactor = {
                            'sunny': 0,
                            'cloudy': -0.5,
                            'rainy': -1
                        };

                        const economyFactor = {
                            'good': 1,
                            'normal': 0,
                            'bad': -1
                        };

                        let basePrice = totalCost * 2; // ‡∏Å‡∏≥‡πÑ‡∏£ 100%
                        basePrice += locationFactor[marketData.location] || 0;
                        basePrice += weatherFactor[marketData.weather] || 0;
                        basePrice += economyFactor[marketData.economy] || 0;

                        const recommendedPrice = Math.max(Math.round(basePrice), 5);

                        // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏Å‡∏≤‡∏£‡∏Å‡∏≥‡πÑ‡∏£
                        const salesVolume = {
                            'low': 80,
                            'medium': 200,
                            'high': 350
                        };

                        const dailySales = salesVolume[marketData.salesVolume] || 200;
                        const profitPerSkewer = recommendedPrice - totalCost;
                        const estimatedProfit = Math.round(profitPerSkewer * dailySales);

                        // ‡∏î‡∏∂‡∏á‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÅ‡∏•‡∏∞‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ
                        let analysisText = this.getRandomElement(this.mockResponses.priceRecommendation);
                        analysisText = analysisText.replace('{price}', recommendedPrice);

                        const tips = [];
                        // ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡πÅ‡∏ö‡∏ö‡∏™‡∏∏‡πà‡∏° 3 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
                        while (tips.length < 3) {
                            const tip = this.getRandomElement(this.mockResponses.businessTips);
                            if (!tips.includes(tip)) {
                                tips.push(tip);
                            }
                        }

                        // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡∏ï‡∏≤‡∏°‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®
                        const weatherTips = this.mockResponses.weatherStrategies[marketData.weather] || [];
                        if (weatherTips.length > 0) {
                            tips.push(this.getRandomElement(weatherTips));
                        }

                        setTimeout(() => {
                            resolve({
                                recommendedPrice,
                                estimatedProfit,
                                analysisText,
                                tips,
                                costBreakdown: {
                                    meatCost: meatCostPerSkewer.toFixed(2),
                                    additionalCost: userData.additionalCost,
                                    totalCost: totalCost.toFixed(2),
                                    profit: profitPerSkewer.toFixed(2),
                                    profitMargin: Math.round((profitPerSkewer / recommendedPrice) * 100)
                                }
                            });
                        }, 800);

                    } catch(error) {
                        console.error('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤:', error);
                        setTimeout(() => {
                            resolve({
                                recommendedPrice: 13,
                                estimatedProfit: 2000,
                                analysisText: "‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡πÅ‡∏•‡∏∞‡∏™‡∏†‡∏≤‡∏û‡∏ï‡∏•‡∏≤‡∏î ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏µ‡πà 13 ‡∏ö‡∏≤‡∏ó‡∏ï‡πà‡∏≠‡πÑ‡∏°‡πâ ‡∏ã‡∏∂‡πà‡∏á‡∏à‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏Å‡∏≥‡πÑ‡∏£‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 30% ‡πÅ‡∏•‡∏∞‡∏¢‡∏±‡∏á‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô‡πÉ‡∏ô‡∏ï‡∏•‡∏≤‡∏î‡πÑ‡∏î‡πâ",
                                tips: [
                                    "‡∏•‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡∏™‡∏π‡∏ï‡∏£‡∏´‡∏°‡∏±‡∏Å‡πÉ‡∏´‡πâ‡∏°‡∏µ‡πÄ‡∏≠‡∏Å‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ï‡∏±‡∏ß ‡∏à‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏ï‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏à‡∏≤‡∏Å‡∏Ñ‡∏π‡πà‡πÅ‡∏Ç‡πà‡∏á",
                                    "‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏û‡πá‡∏Ñ‡πÄ‡∏Å‡∏à‡∏û‡∏¥‡πÄ‡∏®‡∏© ‡πÄ‡∏ä‡πà‡∏ô '‡πÄ‡∏ã‡πá‡∏ï‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß' ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á‡∏´‡∏•‡∏≤‡∏¢‡πÑ‡∏°‡πâ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Ç‡πâ‡∏≤‡∏ß‡πÄ‡∏´‡∏ô‡∏µ‡∏¢‡∏ß‡πÅ‡∏•‡∏∞‡∏ô‡πâ‡∏≥‡∏à‡∏¥‡πâ‡∏°",
                                    "‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏ï‡∏•‡∏≤‡∏î‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå‡∏ú‡πà‡∏≤‡∏ô Facebook ‡∏´‡∏£‡∏∑‡∏≠ Line ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏à‡πâ‡∏á‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏Ç‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô"
                                ]
                            });
                        }, 1000);
                    }
                });
            },

            getChatResponse: async function(message) {
                return new Promise(resolve => {
                    setTimeout(() => {
                        const response = this.getRandomElement(this.mockResponses.chatResponses);
                        resolve(response);
                    }, 1200);
                });
            }
        };

        // =====================
        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡πÉ‡∏ô‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡πÑ‡∏ó‡∏¢
        // =====================
        function setThaiDate() {
            const now = new Date();
            const thaiDay = ['‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå', '‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå', '‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£', '‡∏û‡∏∏‡∏ò', '‡∏û‡∏§‡∏´‡∏±‡∏™‡∏ö‡∏î‡∏µ', '‡∏®‡∏∏‡∏Å‡∏£‡πå', '‡πÄ‡∏™‡∏≤‡∏£‡πå'];
            const thaiMonth = ['‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏°', '‡∏Å‡∏∏‡∏°‡∏†‡∏≤‡∏û‡∏±‡∏ô‡∏ò‡πå', '‡∏°‡∏µ‡∏ô‡∏≤‡∏Ñ‡∏°', '‡πÄ‡∏°‡∏©‡∏≤‡∏¢‡∏ô', '‡∏û‡∏§‡∏©‡∏†‡∏≤‡∏Ñ‡∏°', '‡∏°‡∏¥‡∏ñ‡∏∏‡∏ô‡∏≤‡∏¢‡∏ô',
                             '‡∏Å‡∏£‡∏Å‡∏é‡∏≤‡∏Ñ‡∏°', '‡∏™‡∏¥‡∏á‡∏´‡∏≤‡∏Ñ‡∏°', '‡∏Å‡∏±‡∏ô‡∏¢‡∏≤‡∏¢‡∏ô', '‡∏ï‡∏∏‡∏•‡∏≤‡∏Ñ‡∏°', '‡∏û‡∏§‡∏®‡∏à‡∏¥‡∏Å‡∏≤‡∏¢‡∏ô', '‡∏ò‡∏±‡∏ô‡∏ß‡∏≤‡∏Ñ‡∏°'];

            const day = thaiDay[now.getDay()];
            const date = now.getDate();
            const month = thaiMonth[now.getMonth()];
            const year = now.getFullYear() + 543; // ‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏µ ‡∏û.‡∏®.

            document.getElementById('current-date').textContent = `‡∏ß‡∏±‡∏ô${day}‡∏ó‡∏µ‡πà ${date} ${month} ${year}`;
        }

        // =====================
        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏´‡∏°‡∏π‡∏à‡∏£‡∏¥‡∏á‡∏à‡∏≤‡∏Å‡πÅ‡∏´‡∏•‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
        // =====================
        async function fetchRealPorkPrice() {
            try {
                // ‡πÉ‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏à‡∏£‡∏¥‡∏á ‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏ß‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö API ‡∏à‡∏£‡∏¥‡∏á
                const currentPrice = 190; // ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏à‡∏£‡∏¥‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î

                const now = new Date();
                const formattedDate = now.toLocaleString('th-TH', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });

                document.getElementById('price-update-time').textContent = `‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏°‡∏∑‡πà‡∏≠: ${formattedDate}`;
                document.getElementById('market-price').textContent = `${currentPrice} ‡∏ö‡∏≤‡∏ó`;

                return currentPrice;
            } catch (error) {
                console.error('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏≤‡∏Ñ‡∏≤‡∏´‡∏°‡∏π‡πÑ‡∏î‡πâ:', error);
                const fallbackPrice = 150;
                document.getElementById('market-price').textContent = `${fallbackPrice} ‡∏ö‡∏≤‡∏ó (offline)`;
                return fallbackPrice;
            }
        }

            // =====================
        // ‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏ó‡πá‡∏ö
        // =====================
        function setupTabs() {
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    // ‡∏•‡∏ö‡∏Ñ‡∏•‡∏≤‡∏™ active ‡∏à‡∏≤‡∏Å‡∏ó‡∏∏‡∏Å‡πÅ‡∏ó‡πá‡∏ö
                    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));

                    // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏•‡∏≤‡∏™ active ‡πÉ‡∏´‡πâ‡πÅ‡∏ó‡πá‡∏ö‡∏ó‡∏µ‡πà‡∏Ñ‡∏•‡∏¥‡∏Å
                    this.classList.add('active');

                    // ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡πÅ‡∏ó‡πá‡∏ö
                    const tabId = this.getAttribute('data-tab');
                    const tabContent = document.getElementById(`${tabId}-tab`);
                    
                    if (tabContent) {
                        tabContent.classList.add('active');

                        // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå animation
                        tabContent.style.animation = 'none';
                        setTimeout(() => {
                            tabContent.style.animation = 'fadeIn 0.5s';
                        }, 10);

                        // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏™‡∏ß‡∏¥‡∏ï‡∏ä‡πå‡πÅ‡∏ó‡πá‡∏ö
                        if (tabId === 'sales') {
                            updateSalesDisplay();
                        } else if (tabId === 'dashboard') {
                            updateDashboardSummary();
                        }
                    }
                });
            });
        }

        // =====================
        // ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏≠‡∏õ‡∏ä‡∏±‡πà‡∏ô
        // =====================
        function setupOptionButtons() {
            document.querySelectorAll('.option-button').forEach(button => {
                button.addEventListener('click', function() {
                    // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡∏Ñ‡∏•‡∏¥‡∏Å
                    this.classList.add('pulse');
                    setTimeout(() => {
                        this.classList.remove('pulse');
                    }, 500);

                    // ‡∏´‡∏≤ option-group ‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏û‡∏≤‡πÄ‡∏£‡∏ô‡∏ï‡πå
                    const parent = this.closest('.option-group');
                    
                    // ‡∏•‡∏ö‡∏Ñ‡∏•‡∏≤‡∏™ selected ‡∏à‡∏≤‡∏Å‡∏ó‡∏∏‡∏Å‡∏õ‡∏∏‡πà‡∏°‡πÉ‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô
                    parent.querySelectorAll('.option-button').forEach(btn => btn.classList.remove('selected'));
                    
                    // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏•‡∏≤‡∏™ selected ‡πÉ‡∏´‡πâ‡∏õ‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà‡∏Ñ‡∏•‡∏¥‡∏Å
                    this.classList.add('selected');
                });
            });
        }

        // =====================
        // ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤
        // =====================
        async function calculatePrice() {
            console.log("‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤...");
            
            const calculateBtn = document.getElementById('calculate-btn');
            const originalText = calculateBtn.textContent;
            
            calculateBtn.textContent = "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì...";
            calculateBtn.style.backgroundColor = "#FFA726";
            calculateBtn.disabled = true;

            document.getElementById('result-section').style.display = 'block';
            document.getElementById('price-recommendation').textContent = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì...';
            document.getElementById('profit-estimate').textContent = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå...';
            document.getElementById('analysis-text').textContent = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå...';
            document.getElementById('tips-list').innerHTML = '<li>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡∏Å‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì...</li>';

            try {
                const userData = {
                    meatPrice: parseFloat(document.getElementById('meat-price').value) || 150,
                    meatPerSkewer: parseFloat(document.getElementById('meat-per-skewer').value) || 25,
                    additionalCost: parseFloat(document.getElementById('additional-cost').value) || 1
                };

                const marketData = {
                    location: document.getElementById('location').value,
                    salesVolume: document.getElementById('sales-volume').value,
                    weather: document.querySelector('.option-group:nth-of-type(3) .option-button.selected')?.getAttribute('data-value') || 'sunny',
                    economy: document.querySelector('.option-group:nth-of-type(4) .option-button.selected')?.getAttribute('data-value') || 'normal'
                };

                console.log("‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì:", { userData, marketData });

                const result = await AIEngine.getPriceRecommendation(userData, marketData);
                console.log("‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì:", result);

                // ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå
                document.getElementById('price-recommendation').textContent = `${result.recommendedPrice} ‡∏ö‡∏≤‡∏ó/‡πÑ‡∏°‡πâ`;
                document.getElementById('profit-estimate').textContent = `‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏Å‡∏≤‡∏£‡∏Å‡∏≥‡πÑ‡∏£: ${result.estimatedProfit} ‡∏ö‡∏≤‡∏ó/‡∏ß‡∏±‡∏ô`;
                document.getElementById('analysis-text').textContent = result.analysisText;

                const tipsList = document.getElementById('tips-list');
                tipsList.innerHTML = '';
                result.tips.forEach(tip => {
                    const li = document.createElement('li');
                    li.textContent = tip;
                    tipsList.appendChild(li);
                });

                // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î
                document.getElementById('today-price').textContent = `${result.recommendedPrice} ‡∏ö‡∏≤‡∏ó`;
                document.getElementById('estimated-profit').textContent = `${result.estimatedProfit} ‡∏ö‡∏≤‡∏ó`;

                // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå
                const resultSection = document.getElementById('result-section');
                resultSection.style.animation = 'none';
                setTimeout(() => {
                    resultSection.style.animation = 'fadeIn 0.5s';
                }, 10);

            } catch (error) {
                console.error('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤:', error);
                
                // ‡∏ß‡∏¥‡∏ò‡∏µ‡∏™‡∏≥‡∏£‡∏≠‡∏á
                document.getElementById('price-recommendation').textContent = '13 ‡∏ö‡∏≤‡∏ó/‡πÑ‡∏°‡πâ';
                document.getElementById('profit-estimate').textContent = '‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏Å‡∏≤‡∏£‡∏Å‡∏≥‡πÑ‡∏£: 2000 ‡∏ö‡∏≤‡∏ó/‡∏ß‡∏±‡∏ô';
                document.getElementById('analysis-text').textContent = '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö‡∏£‡∏∞‡∏ö‡∏ö ‡πÅ‡∏ï‡πà‡πÄ‡∏£‡∏≤‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏Å‡∏≤‡∏£‡∏Å‡∏≥‡πÑ‡∏£‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏•‡πâ‡∏ß';
                document.getElementById('tips-list').innerHTML = '<li>‡∏•‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡∏™‡∏π‡∏ï‡∏£‡∏´‡∏°‡∏±‡∏Å‡πÉ‡∏´‡πâ‡∏°‡∏µ‡πÄ‡∏≠‡∏Å‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ï‡∏±‡∏ß ‡∏à‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏ï‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏à‡∏≤‡∏Å‡∏Ñ‡∏π‡πà‡πÅ‡∏Ç‡πà‡∏á</li><li>‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏ï‡∏•‡∏≤‡∏î‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå‡∏ú‡πà‡∏≤‡∏ô Facebook ‡∏´‡∏£‡∏∑‡∏≠ Line ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏à‡πâ‡∏á‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏Ç‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô</li>';
                
            } finally {
                calculateBtn.textContent = originalText;
                calculateBtn.style.backgroundColor = "";
                calculateBtn.disabled = false;
            }
        }

        // =====================
        // ‡∏£‡∏∞‡∏ö‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢
        // =====================
        function setupSalesTracking() {
            const saveSalesBtn = document.getElementById('save-sales-btn');
            
            // ‡∏ï‡∏±‡πâ‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('sale-date').value = today;
            
            if (saveSalesBtn) {
                saveSalesBtn.addEventListener('click', async function() {
                    const salesData = {
                        date: document.getElementById('sale-date').value,
                        prepared: parseInt(document.getElementById('prepared-amount').value) || 0,
                        sold: parseInt(document.getElementById('sold-amount').value) || 0,
                        weather: document.getElementById('weather-condition').value,
                        notes: document.getElementById('sale-notes').value
                    };
                    
                    if (salesData.prepared === 0 || salesData.sold === 0) {
                        alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÑ‡∏õ‡πÅ‡∏•‡∏∞‡∏Ç‡∏≤‡∏¢‡πÑ‡∏î‡πâ');
                        return;
                    }

                    if (salesData.sold > salesData.prepared) {
                        alert('‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏Ç‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡πÑ‡∏°‡πà‡∏Ñ‡∏ß‡∏£‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÑ‡∏õ');
                        return;
                    }
                    
                    // ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
                    const originalText = this.textContent;
                    this.textContent = "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å...";
                    this.disabled = true;
                    
                    const success = await SalesManager.saveDailySales(salesData);
                    
                    if (success) {
                        this.textContent = "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢ ‚úì";
                        this.style.backgroundColor = "#4CAF50";
                        
                        // ‡∏•‡πâ‡∏≤‡∏á‡∏ü‡∏≠‡∏£‡πå‡∏°
                        document.getElementById('prepared-amount').value = '';
                        document.getElementById('sold-amount').value = '';
                        document.getElementById('sale-notes').value = '';
                        
                        // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•
                        await updateSalesDisplay();
                        await updateDashboardSummary();
                        
                        // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏õ‡∏∏‡πà‡∏°‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å 2 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
                        setTimeout(() => {
                            this.textContent = originalText;
                            this.style.backgroundColor = "";
                            this.disabled = false;
                        }, 2000);
                        
                    } else {
                        alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å');
                        this.textContent = originalText;
                        this.disabled = false;
                    }
                });
            }
        }

        // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢
        async function updateSalesDisplay() {
            const salesHistory = await SalesManager.getLast7DaysSales();
            const historyContainer = document.getElementById('sales-history');
            
            if (!historyContainer) return;
            
            if (salesHistory.length === 0) {
                historyContainer.innerHTML = '<p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏Å‡πà‡∏≠‡∏ô</p>';
            } else {
                let html = '<div style="overflow-x: auto;">';
                html += '<table class="sales-table">';
                html += '<thead><tr><th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th><th>‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°</th><th>‡∏Ç‡∏≤‡∏¢</th><th>‡πÄ‡∏´‡∏•‡∏∑‡∏≠</th><th>% ‡∏Ç‡∏≤‡∏¢</th><th>‡∏≠‡∏≤‡∏Å‡∏≤‡∏®</th></tr></thead>';
                html += '<tbody>';
                
                salesHistory.forEach(sale => {
                    const weatherIcon = sale.weather === 'sunny' ? '‚òÄÔ∏è' : 
                                       sale.weather === 'cloudy' ? '‚òÅÔ∏è' : 'üåßÔ∏è';
                    const sellThroughRate = sale.sellThroughRate || Math.round((sale.sold / sale.prepared) * 100);
                    
                    html += `<tr>
                        <td>${sale.date}</td>
                        <td>${sale.prepared}</td>
                        <td>${sale.sold}</td>
                        <td>${sale.leftover}</td>
                        <td>${sellThroughRate}%</td>
                        <td>${weatherIcon}</td>
                    </tr>`;
                });
                
                html += '</tbody></table></div>';
                historyContainer.innerHTML = html;
            }
            
            // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Å‡∏≤‡∏£‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ì‡πå
            const prediction = SalesManager.calculatePrediction(salesHistory);
            const predictionAmountEl = document.getElementById('predicted-amount');
            const predictionReasonEl = document.getElementById('prediction-reason');
            
            if (predictionAmountEl && predictionReasonEl) {
                predictionAmountEl.textContent = prediction.amount > 0 ? `${prediction.amount} ‡πÑ‡∏°‡πâ` : '-- ‡πÑ‡∏°‡πâ';
                predictionReasonEl.textContent = prediction.reason;
                
                // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏±‡πà‡∏ô
                const predictionContainer = predictionAmountEl.closest('.prediction-highlight');
                if (predictionContainer) {
                    if (prediction.confidence === '‡∏™‡∏π‡∏á') {
                        predictionContainer.style.background = 'linear-gradient(135deg, #4CAF50, #388E3C)';
                    } else if (prediction.confidence === '‡∏ï‡πà‡∏≥') {
                        predictionContainer.style.background = 'linear-gradient(135deg, #FF9800, #F57C00)';
                    } else {
                        predictionContainer.style.background = 'linear-gradient(135deg, #2196F3, #1976D2)';
                    }
                }
            }
        }

        // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏£‡∏∏‡∏õ‡πÉ‡∏ô‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î
        async function updateDashboardSummary() {
            const salesHistory = await SalesManager.getLast7DaysSales();
            const summaryContainer = document.getElementById('dashboard-sales-summary');
            
            if (!summaryContainer) return;
            
            if (salesHistory.length === 0) {
                summaryContainer.innerHTML = '<p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡πÉ‡∏ô‡πÅ‡∏ó‡πá‡∏ö "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢"</p>';
            } else {
                const summary = SalesManager.generateDashboardSummary(salesHistory);
                
                let html = '<div class="dashboard-stats" style="grid-template-columns: repeat(3, 1fr); gap: 15px; margin-bottom: 20px;">';
                
                html += `
                    <div class="stat-card">
                        <div class="stat-label">‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏Ç‡∏≤‡∏¢/‡∏ß‡∏±‡∏ô</div>
                        <div class="stat-value">${summary.avgSold}</div>
                        <div class="stat-label">‡πÑ‡∏°‡πâ</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">% ‡∏Ç‡∏≤‡∏¢‡πÑ‡∏î‡πâ</div>
                        <div class="stat-value">${summary.avgSellThrough}%</div>
                        <div class="stat-label">‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">‡∏Ç‡∏≠‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏£‡∏ß‡∏°</div>
                        <div class="stat-value">${summary.totalLeftover}</div>
                        <div class="stat-label">‡πÑ‡∏°‡πâ</div>
                    </div>
                `;
                
                html += '</div>';
                
                if (summary.bestDay && summary.worstDay) {
                    html += `
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div style="background: linear-gradient(135deg, #4CAF50, #388E3C); color: white; padding: 15px; border-radius: 10px; text-align: center;">
                                <div style="font-size: 0.9rem; opacity: 0.9;">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Ç‡∏≤‡∏¢‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î</div>
                                <div style="font-size: 1.5rem; font-weight: bold; margin: 5px 0;">${summary.bestDay.sold} ‡πÑ‡∏°‡πâ</div>
                                <div style="font-size: 0.8rem; opacity: 0.8;">${summary.bestDay.date}</div>
                            </div>
                            <div style="background: linear-gradient(135deg, #FF9800, #F57C00); color: white; padding: 15px; border-radius: 10px; text-align: center;">
                                <div style="font-size: 0.9rem; opacity: 0.9;">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Ç‡∏≤‡∏¢‡∏ô‡πâ‡∏≠‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î</div>
                                <div style="font-size: 1.5rem; font-weight: bold; margin: 5px 0;">${summary.worstDay.sold} ‡πÑ‡∏°‡πâ</div>
                                <div style="font-size: 0.8rem; opacity: 0.8;">${summary.worstDay.date}</div>
                            </div>
                        </div>
                    `;
                }
                
                summaryContainer.innerHTML = html;
            }
        }

            // =====================
        // ‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏ä‡∏ó‡∏Å‡∏±‡∏ö AI
        // =====================
        async function setupChatSystem() {
            const chatMessages = document.getElementById('chat-messages');
            const chatInput = document.getElementById('chat-input');
            const chatSendBtn = document.getElementById('chat-send-btn');

            if (!chatMessages || !chatInput || !chatSendBtn) {
                console.error('Chat elements not found');
                return;
            }

            async function sendMessage() {
                const message = chatInput.value.trim();
                if (!message) return;

                // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
                const userMessageElement = document.createElement('div');
                userMessageElement.className = 'message user';
                userMessageElement.innerHTML = `
                    ${message}
                    <div class="message-time">‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà</div>
                `;
                chatMessages.appendChild(userMessageElement);

                chatInput.value = '';
                chatMessages.scrollTop = chatMessages.scrollHeight;

                // ‡πÅ‡∏™‡∏î‡∏á‡∏ß‡πà‡∏≤‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏û‡∏¥‡∏°‡∏û‡πå
                const typingElement = document.createElement('div');
                typingElement.className = 'message ai';
                typingElement.innerHTML = `
                    <div class="typing-indicator">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                `;
                typingElement.style.padding = '10px 15px';
                chatMessages.appendChild(typingElement);
                chatMessages.scrollTop = chatMessages.scrollHeight;

                try {
                    const response = await AIEngine.getChatResponse(message);
                    chatMessages.removeChild(typingElement);

                    const aiMessageElement = document.createElement('div');
                    aiMessageElement.className = 'message ai';
                    aiMessageElement.innerHTML = `
                        ${response}
                        <div class="message-time">‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà</div>
                    `;
                    chatMessages.appendChild(aiMessageElement);
                    chatMessages.scrollTop = chatMessages.scrollHeight;

                } catch (error) {
                    console.error('Error getting AI response:', error);
                    chatMessages.removeChild(typingElement);

                    const errorElement = document.createElement('div');
                    errorElement.className = 'message ai';
                    errorElement.innerHTML = `
                        ‡∏Ç‡∏≠‡∏≠‡∏†‡∏±‡∏¢ ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö ‡πÇ‡∏õ‡∏£‡∏î‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á
                        <div class="message-time">‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà</div>
                    `;
                    chatMessages.appendChild(errorElement);
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                }
            }

            chatSendBtn.addEventListener('click', sendMessage);
            chatInput.addEventListener('keypress', function(event) {
                if (event.key === 'Enter' && !event.shiftKey) {
                    event.preventDefault();
                    sendMessage();
                }
            });

            // ‡πÄ‡∏û‡∏¥‡πà‡∏° CSS ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö typing indicator
            const style = document.createElement('style');
            style.textContent = `
                .typing-indicator {
                    display: flex;
                    align-items: center;
                    padding: 10px 0;
                }
                .typing-indicator span {
                    height: 8px;
                    width: 8px;
                    float: left;
                    margin: 0 2px;
                    background-color: #9E9E9E;
                    display: block;
                    border-radius: 50%;
                    opacity: 0.4;
                    animation: 1s blink infinite;
                }
                .typing-indicator span:nth-of-type(1) { animation-delay: 0.3333s; }
                .typing-indicator span:nth-of-type(2) { animation-delay: 0.6666s; }
                .typing-indicator span:nth-of-type(3) { animation-delay: 0.9999s; }
                @keyframes blink {
                    50% { opacity: 1; }
                }
                .message {
                    margin-bottom: 20px;
                    max-width: 80%;
                    animation: messageIn 0.3s ease;
                    padding: 15px 20px;
                    border-radius: 18px;
                    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
                }
                .message.user {
                    margin-left: auto;
                    background: linear-gradient(145deg, var(--primary-color), var(--primary-dark));
                    color: white;
                    border-radius: 18px 18px 0 18px;
                }
                .message.ai {
                    margin-right: auto;
                    background-color: white;
                    color: var(--dark-color);
                    border-radius: 18px 18px 18px 0;
                }
                .message-time {
                    font-size: 0.8rem;
                    opacity: 0.8;
                    margin-top: 8px;
                    text-align: right;
                }
                @keyframes messageIn {
                    from { opacity: 0; transform: translateY(20px); }
                    to { opacity: 1; transform: translateY(0); }
                }
                .chat-ui {
                    background-color: white;
                    border-radius: 15px;
                    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
                    margin-bottom: 25px;
                    overflow: hidden;
                    display: flex;
                    flex-direction: column;
                    height: 450px;
                    transition: transform 0.3s ease, box-shadow 0.3s ease;
                }
                .chat-ui:hover {
                    transform: translateY(-5px);
                    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
                }
                .chat-messages {
                    flex: 1;
                    padding: 20px;
                    overflow-y: auto;
                    background-color: #f9f9f9;
                }
                .chat-input-container {
                    display: flex;
                    padding: 15px;
                    border-top: 1px solid #eee;
                    background-color: #fff;
                }
                .chat-input {
                    flex: 1;
                    padding: 15px;
                    border: 2px solid #ddd;
                    border-radius: 25px;
                    font-size: 1.05rem;
                    transition: all 0.3s;
                    box-shadow: 0 2px 5px rgba(0,0,0,0.05);
                }
                .chat-input:focus {
                    border-color: var(--primary-color);
                    box-shadow: 0 0 0 3px var(--primary-light);
                    outline: none;
                }
                .chat-send-btn {
                    background: linear-gradient(145deg, var(--primary-color), var(--primary-dark));
                    color: white;
                    border: none;
                    border-radius: 50%;
                    width: 50px;
                    height: 50px;
                    margin-left: 15px;
                    cursor: pointer;
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    box-shadow: 0 4px 10px rgba(255, 87, 34, 0.3);
                    transition: all 0.3s;
                    animation: chatButtonShift 5s infinite;
                }
                @keyframes chatButtonShift {
                    0% { background: linear-gradient(145deg, #FF5722, #E64A19); }
                    50% { background: linear-gradient(145deg, #9C27B0, #7B1FA2); }
                    100% { background: linear-gradient(145deg, #FF5722, #E64A19); }
                }
                .chat-send-btn:hover {
                    transform: translateY(-2px) scale(1.05);
                    box-shadow: 0 6px 15px rgba(255, 87, 34, 0.4);
                }
                .chat-send-btn:active {
                    transform: translateY(1px) scale(0.98);
                    box-shadow: 0 2px 5px rgba(255, 87, 34, 0.2);
                }
            `;
            document.head.appendChild(style);
        }

        // =====================
        // ‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤
        // =====================
        function setupSettings() {
            const saveApiKeyBtn = document.getElementById('save-api-key');
            const saveBusinessInfoBtn = document.getElementById('save-business-info');
            const saveAlertSettingsBtn = document.getElementById('save-alert-settings');

            function showSaveSuccess(button) {
                const originalText = button.textContent;
                const originalColor = button.style.backgroundColor;
                
                button.textContent = "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢ ‚úì";
                button.style.backgroundColor = "#4CAF50";
                
                setTimeout(() => {
                    button.textContent = originalText;
                    button.style.backgroundColor = originalColor;
                }, 2000);
            }

            if (saveApiKeyBtn) {
                saveApiKeyBtn.addEventListener('click', async function() {
                    const provider = document.getElementById('api-provider').value;
                    const apiKey = document.getElementById('api-key').value;
                    
                    const success = await UserDataManager.updateApiSettings(provider, apiKey);
                    if (success) {
                        showSaveSuccess(this);
                    }
                });
            }

            if (saveBusinessInfoBtn) {
                saveBusinessInfoBtn.addEventListener('click', async function() {
                    const name = document.getElementById('business-name').value;
                    const location = document.getElementById('business-location').value;
                    const description = document.getElementById('business-description').value;
                    
                    const success = await UserDataManager.updateBusinessInfo(name, location, description);
                    if (success) {
                        showSaveSuccess(this);
                    }
                });
            }

            if (saveAlertSettingsBtn) {
                saveAlertSettingsBtn.addEventListener('click', async function() {
                    const weatherAlert = document.getElementById('weather-alert').checked;
                    const priceAlert = document.getElementById('price-alert').checked;
                    const eventAlert = document.getElementById('event-alert').checked;
                    
                    const success = await UserDataManager.updateAlertSettings(weatherAlert, priceAlert, eventAlert);
                    if (success) {
                        showSaveSuccess(this);
                    }
                });
            }
        }

        // =====================
        // ‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î
        // =====================
        async function setupDashboard() {
            const refreshBtn = document.getElementById('refresh-recommendation');

            async function refreshRecommendation() {
                console.log("‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥...");
                
                if (!refreshBtn) return;
                
                const originalText = refreshBtn.textContent;
                refreshBtn.textContent = "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...";
                refreshBtn.disabled = true;

                try {
                    const realPorkPrice = await fetchRealPorkPrice();
                    
                    // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥
                    const weatherTypes = ['sunny', 'cloudy', 'rainy'];
                    const weather = weatherTypes[Math.floor(Math.random() * weatherTypes.length)];
                    
                    const weatherDesc = {
                        'sunny': '‡πÅ‡∏î‡∏î‡∏≠‡∏≠‡∏Å',
                        'cloudy': '‡∏°‡∏µ‡πÄ‡∏°‡∏Ü‡∏°‡∏≤‡∏Å', 
                        'rainy': '‡∏ù‡∏ô‡∏ï‡∏Å'
                    }[weather];

                    const locations = ['‡∏ï‡∏•‡∏≤‡∏î', '‡∏´‡∏ô‡πâ‡∏≤‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô', '‡πÉ‡∏Å‡∏•‡πâ‡∏≠‡∏≠‡∏ü‡∏ü‡∏¥‡∏®', '‡πÉ‡∏ô‡∏ä‡∏∏‡∏°‡∏ä‡∏ô', '‡∏£‡∏¥‡∏°‡∏ñ‡∏ô‡∏ô‡πÉ‡∏´‡∏ç‡πà'];
                    const recommendedLocation = locations[Math.floor(Math.random() * locations.length)];
                    
                    const costPerSkewer = (realPorkPrice / 1000) * 25 + 1;
                    const recommendedPrice = Math.round(costPerSkewer * 2);
                    
                    const reasons = [
                        '‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡∏ï‡∏•‡∏≤‡∏î',
                        '‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÅ‡∏•‡∏∞‡∏û‡∏§‡∏ï‡∏¥‡∏Å‡∏£‡∏£‡∏°‡∏ú‡∏π‡πâ‡∏ö‡∏£‡∏¥‡πÇ‡∏†‡∏Ñ',
                        '‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô‡πÉ‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡∏∞‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏á‡∏≤‡∏ô',
                        '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡∏ö‡∏£‡∏¥‡πÇ‡∏†‡∏Ñ‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡∏ô‡∏µ‡πâ'
                    ];
                    const reason = reasons[Math.floor(Math.random() * reasons.length)];

                    // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î
                    document.getElementById('weather-desc').textContent = weatherDesc;
                    document.getElementById('location-rec').textContent = recommendedLocation;
                    document.getElementById('price-rec').textContent = recommendedPrice;
                    document.getElementById('price-reason').textContent = reason;

                    // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥
                    document.getElementById('today-price').textContent = `${recommendedPrice} ‡∏ö‡∏≤‡∏ó`;
                    document.getElementById('weather-status').textContent = weatherDesc;
                    document.getElementById('humidity').textContent = 60 + Math.floor(Math.random() * 20);

                   const estimatedProfit = Math.round((recommendedPrice - costPerSkewer) * 200);
                   document.getElementById('estimated-profit').textContent = `${estimatedProfit} ‡∏ö‡∏≤‡∏ó`;

                   // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ
                   const dailyTips = [];
                   while (dailyTips.length < 3) {
                       const tip = AIEngine.getRandomElement(AIEngine.mockResponses.businessTips);
                       if (!dailyTips.includes(tip)) {
                           dailyTips.push(tip);
                       }
                   }

                   const weatherTips = AIEngine.mockResponses.weatherStrategies[weather] || [];
                   if (weatherTips.length > 0) {
                       dailyTips.push(AIEngine.getRandomElement(weatherTips));
                   }

                   const tipsList = document.getElementById('daily-tips');
                   if (tipsList) {
                       tipsList.innerHTML = '';
                       dailyTips.forEach(tip => {
                           const li = document.createElement('li');
                           li.textContent = tip;
                           tipsList.appendChild(li);
                       });
                   }

               } catch (error) {
                   console.error('Error refreshing recommendation:', error);
                   
                   // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏£‡∏≠‡∏á
                   document.getElementById('weather-desc').textContent = '‡πÅ‡∏î‡∏î‡∏≠‡∏≠‡∏Å';
                   document.getElementById('location-rec').textContent = '‡∏ï‡∏•‡∏≤‡∏î';
                   document.getElementById('price-rec').textContent = '13';
                   document.getElementById('price-reason').textContent = '‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡∏ï‡∏•‡∏≤‡∏î';
                   
               } finally {
                   refreshBtn.textContent = originalText;
                   refreshBtn.disabled = false;
               }
           }

           if (refreshBtn) {
               refreshBtn.addEventListener('click', refreshRecommendation);
           }

           // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
           await refreshRecommendation();
           
           // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢
           await updateDashboardSummary();
       }

            // =====================
        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö DOM elements ‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô
        // =====================
        function checkRequiredElements() {
            const requiredElements = [
                'current-date',
                'calculate-btn',
                'result-section',
                'price-recommendation',
                'profit-estimate',
                'analysis-text',
                'tips-list',
                'meat-price',
                'meat-per-skewer',
                'additional-cost',
                'location',
                'sales-volume'
            ];

            const missingElements = [];
            requiredElements.forEach(id => {
                if (!document.getElementById(id)) {
                    missingElements.push(id);
                    console.error(`‡πÑ‡∏°‡πà‡∏û‡∏ö element ‡∏ó‡∏µ‡πà‡∏°‡∏µ id: ${id}`);
                }
            });

            if (missingElements.length > 0) {
                console.error('‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏≠‡∏á‡∏Ñ‡πå‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô:', missingElements);
                return false;
            }

            return true;
        }

        // =====================
        // Error Handler
        // =====================
        function setupErrorHandling() {
            window.addEventListener('error', function(event) {
                console.error('JavaScript Error:', event.error);
                
                // ‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÅ‡∏ö‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡∏°‡∏¥‡∏ï‡∏£
                const notification = document.createElement('div');
                notification.className = 'notification error';
                notification.style.position = 'fixed';
                notification.style.top = '20px';
                notification.style.right = '20px';
                notification.style.zIndex = '9999';
                notification.style.maxWidth = '300px';
                notification.innerHTML = `
                    <svg viewBox="0 0 24 24" fill="none" stroke="#F44336" stroke-width="2">
                        <circle cx="12" cy="12" r="10"></circle>
                        <line x1="12" y1="8" x2="12" y2="12"></line>
                        <line x1="12" y1="16" x2="12" y2="16"></line>
                    </svg>
                    <div class="notification-content">
                        <p>‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢ ‡πÅ‡∏ï‡πà‡πÅ‡∏≠‡∏õ‡∏¢‡∏±‡∏á‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏õ‡∏Å‡∏ï‡∏¥</p>
                    </div>
                `;
                
                document.body.appendChild(notification);
                
                // ‡∏•‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å 5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 5000);
            });

            // Handle unhandled promise rejections
            window.addEventListener('unhandledrejection', function(event) {
                console.error('Unhandled Promise Rejection:', event.reason);
                event.preventDefault();
            });
        }

        // =====================
        // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÅ‡∏≠‡∏õ‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô
        // =====================
        document.addEventListener('DOMContentLoaded', async function() {
            console.log("üöÄ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÅ‡∏≠‡∏õ‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô Smart Pork Skewer AI...");

            // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Error Handling
            setupErrorHandling();

            // ‡πÅ‡∏™‡∏î‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
            setThaiDate();

            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏≠‡∏á‡∏Ñ‡πå‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô
            if (!checkRequiredElements()) {
                console.error("‡∏≠‡∏á‡∏Ñ‡πå‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏ö‡∏≤‡∏á‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏°‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô");
                
                const notification = document.createElement('div');
                notification.className = 'notification warning';
                notification.innerHTML = `
                    <svg viewBox="0 0 24 24" fill="none" stroke="#FFC107" stroke-width="2">
                        <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
                        <line x1="12" y1="9" x2="12" y2="13"></line>
                        <line x1="12" y1="17" x2="12.01" y2="17"></line>
                    </svg>
                    <div class="notification-content">
                        <p>‡∏ö‡∏≤‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏Ç‡∏≠‡∏á‡πÅ‡∏≠‡∏õ‡∏≠‡∏≤‡∏à‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå ‡πÇ‡∏õ‡∏£‡∏î‡∏•‡∏≠‡∏á‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö</p>
                    </div>
                `;
                
                const container = document.querySelector('.container');
                if (container) {
                    container.insertBefore(notification, container.firstChild);
                }
            }

            // ‡∏£‡∏≠‡πÉ‡∏´‡πâ Firebase ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÅ‡∏•‡∏∞‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö
            try {
                console.log("üîê ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Firebase...");
                await UserDataManager.initAuth();
                console.log('‚úÖ Firebase ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô - User ID:', UserDataManager.currentUserId);
                
            } catch (error) {
                console.error('‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô Firebase:', error);
                
                // ‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÅ‡∏ï‡πà‡∏¢‡∏±‡∏á‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ï‡πà‡∏≠‡πÑ‡∏î‡πâ
                const notification = document.createElement('div');
                notification.className = 'notification info';
                notification.innerHTML = `
                    <svg viewBox="0 0 24 24" fill="none" stroke="#2196F3" stroke-width="2">
                        <circle cx="12" cy="12" r="10"></circle>
                        <line x1="12" y1="8" x2="12" y2="12"></line>
                        <line x1="12" y1="16" x2="12" y2="16"></line>
                    </svg>
                    <div class="notification-content">
                        <p>‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ ‡πÅ‡∏ï‡πà‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏±‡∏á‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‡πÑ‡∏î‡πâ</p>
                    </div>
                `;
                
                const container = document.querySelector('.container');
                if (container) {
                    container.insertBefore(notification, container.firstChild);
                }
            }

            // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡πà‡∏≤‡∏á‡πÜ
            console.log("‚öôÔ∏è ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö...");
            
            try {
                setupTabs();
                console.log("‚úÖ ‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏ó‡πá‡∏ö‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô");
                
                setupOptionButtons();
                console.log("‚úÖ ‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡∏∏‡πà‡∏°‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô");
                
                await setupChatSystem();
                console.log("‚úÖ ‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏ä‡∏ó‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô");
                
                setupSalesTracking();
                console.log("‚úÖ ‡∏£‡∏∞‡∏ö‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô");
                
                await setupDashboard();
                console.log("‚úÖ ‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô");
                
                setupSettings();
                console.log("‚úÖ ‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô");
                
            } catch (error) {
                console.error("‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö:", error);
            }

            // ‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏´‡∏°‡∏π‡∏à‡∏£‡∏¥‡∏á‡πÅ‡∏•‡∏∞‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
            try {
                console.log("üí∞ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏´‡∏°‡∏π‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î...");
                const realPorkPrice = await fetchRealPorkPrice();
                
                const meatPriceInput = document.getElementById('meat-price');
                if (meatPriceInput) {
                    meatPriceInput.value = realPorkPrice;
                }
                console.log("‚úÖ ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏£‡∏≤‡∏Ñ‡∏≤‡∏´‡∏°‡∏π‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢:", realPorkPrice, "‡∏ö‡∏≤‡∏ó/‡∏Å‡∏Å.");
                
            } catch (error) {
                console.error("‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏´‡∏°‡∏π:", error);
            }

            // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏õ‡∏∏‡πà‡∏°‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤
            const calculateBtn = document.getElementById('calculate-btn');
            if (calculateBtn) {
                // ‡∏•‡∏ö event listener ‡πÄ‡∏Å‡πà‡∏≤ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
                const newCalculateBtn = calculateBtn.cloneNode(true);
                calculateBtn.parentNode.replaceChild(newCalculateBtn, calculateBtn);
                
                newCalculateBtn.addEventListener('click', function() {
                    console.log("üßÆ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤...");
                    calculatePrice();
                });
                
                console.log("‚úÖ ‡∏õ‡∏∏‡πà‡∏°‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô");
            } else {
                console.error("‚ùå ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏õ‡∏∏‡πà‡∏°‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤");
            }

            // ‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏™‡∏£‡πá‡∏à
            setTimeout(() => {
                const successNotification = document.createElement('div');
                successNotification.className = 'notification success';
                successNotification.style.position = 'fixed';
                successNotification.style.bottom = '20px';
                successNotification.style.right = '20px';
                successNotification.style.zIndex = '9999';
                successNotification.style.maxWidth = '300px';
                successNotification.innerHTML = `
                    <svg viewBox="0 0 24 24" fill="none" stroke="#4CAF50" stroke-width="2">
                        <path d="M9 12l2 2 4-4"></path>
                        <circle cx="12" cy="12" r="10"></circle>
                    </svg>
                    <div class="notification-content">
                        <p><strong>üéâ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô!</strong><br>Smart Pork Skewer AI ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß</p>
                    </div>
                `;
                
                document.body.appendChild(successNotification);
                
                // ‡∏•‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å 3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
                setTimeout(() => {
                    if (successNotification.parentNode) {
                        successNotification.parentNode.removeChild(successNotification);
                    }
                }, 3000);
            }, 1000);

            console.log("üéâ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÅ‡∏≠‡∏õ‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß!");
        });

        // =====================
        // Service Worker ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö PWA (‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï)
        // =====================
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                // navigator.serviceWorker.register('/sw.js')
                // .then(function(registration) {
                //     console.log('ServiceWorker registration successful');
                // })
                // .catch(function(err) {
                //     console.log('ServiceWorker registration failed: ', err);
                // });
            });
        }

        // =====================
        // Performance Monitoring
        // =====================
        window.addEventListener('load', function() {
            setTimeout(function() {
                const perfData = performance.getEntriesByType('navigation')[0];
                if (perfData) {
                    console.log('üìä Performance Stats:');
                    console.log('- DOM Content Loaded:', Math.round(perfData.domContentLoadedEventEnd - perfData.domContentLoadedEventStart), 'ms');
                    console.log('- Total Load Time:', Math.round(perfData.loadEventEnd - perfData.loadEventStart), 'ms');
                    console.log('- Page Load Complete:', Math.round(perfData.loadEventEnd - perfData.fetchStart), 'ms');
                }
            }, 0);
        });

    </script>
</body>
</html>

