<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞</title>
  <style>
    body {
      font-family: sans-serif;
      background: #fff;
      color: #333;
      margin: 0;
    }
    header {
      background-color: #0078D7;
      color: white;
      padding: 1rem;
      text-align: center;
    }
    main {
      max-width: 960px;
      margin: auto;
      padding: 2rem;
    }
    h2 {
      color: #0078D7;
    }
    .section {
      margin-bottom: 2rem;
      padding: 1rem;
      border: 1px solid #ccc;
      border-radius: 10px;
    }
    label {
      display: block;
      margin-bottom: 0.5rem;
    }
    input, select {
      padding: 0.5rem;
      width: 100%;
      margin-bottom: 1rem;
      border: 1px solid #ccc;
      border-radius: 5px;
    }
    button {
      background-color: #FF5722;
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 5px;
      cursor: pointer;
    }
    #output {
      font-weight: bold;
      font-size: 1.2rem;
      margin-top: 1rem;
    }
    .factor {
      margin-top: 1rem;
      padding: 0.5rem;
      background: #f9f9f9;
      border-left: 4px solid #0078D7;
    }
  </style>
</head>
<body>
  <header>
    <h1>‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞</h1>
  </header>
  <main>
    <section class="section" id="cost-section">
      <h2>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô</h2>
      <label>‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏°‡∏π (‡∏ö‡∏≤‡∏ó/‡∏Å‡∏Å.): <input type="number" id="porkPrice" value="180"></label>
      <label>‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏ï‡πà‡∏≠‡πÑ‡∏°‡πâ (‡∏Å‡∏£‡∏±‡∏°): <input type="number" id="porkWeight" value="80"></label>
      <label>‡∏Ñ‡πà‡∏≤‡πÑ‡∏°‡πâ (‡∏ö‡∏≤‡∏ó/100 ‡πÑ‡∏°‡πâ): <input type="number" id="stickCost" value="50"></label>
      <label>‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏õ‡∏£‡∏∏‡∏á (‡∏ö‡∏≤‡∏ó/‡πÑ‡∏°‡πâ): <input type="number" id="spiceCost" value="5"></label>
      <label>‡∏Ñ‡πà‡∏≤‡πÅ‡∏£‡∏á (‡∏ö‡∏≤‡∏ó/‡∏ä‡∏°.): <input type="number" id="laborCost" value="80"></label>
      <label>‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏Ñ‡∏á‡∏ó‡∏µ‡πà/‡∏ß‡∏±‡∏ô: <input type="number" id="fixedCost" value="300"></label>
      <label>‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô (‡πÑ‡∏°‡πâ): <input type="number" id="dailySticks" value="200"></label>
      <label>‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏Å‡∏≥‡πÑ‡∏£ (%): <input type="number" id="targetProfit" value="40"></label>
      <label>‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®:
        <select id="weather">
          <option value="sunny">‡πÅ‡∏î‡∏î‡∏à‡∏±‡∏î</option>
          <option value="rainy">‡∏ù‡∏ô‡∏ï‡∏Å</option>
          <option value="cool">‡∏´‡∏ô‡∏≤‡∏ß</option>
        </select>
      </label>
      <label>‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå‡πÄ‡∏®‡∏£‡∏©‡∏ê‡∏Å‡∏¥‡∏à:
        <select id="economy">
          <option value="good">‡∏î‡∏µ</option>
          <option value="normal">‡∏õ‡∏Å‡∏ï‡∏¥</option>
          <option value="poor">‡πÑ‡∏°‡πà‡∏î‡∏µ</option>
        </select>
      </label>
      <label>‡∏§‡∏î‡∏π‡∏Å‡∏≤‡∏•:
        <select id="season">
          <option value="hot">‡∏£‡πâ‡∏≠‡∏ô</option>
          <option value="rain">‡∏ù‡∏ô</option>
          <option value="cool">‡∏´‡∏ô‡∏≤‡∏ß</option>
        </select>
      </label>
      <label>‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏∑‡∏≠‡∏á:
        <select id="politic">
          <option value="stable">‡∏°‡∏±‡πà‡∏ô‡∏Ñ‡∏á</option>
          <option value="unstable">‡πÑ‡∏°‡πà‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô</option>
          <option value="crisis">‡∏ß‡∏¥‡∏Å‡∏§‡∏ï‡∏¥</option>
        </select>
      </label>
      <button onclick="calculatePrice()">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡∏≤‡∏¢</button>
      <div id="output"></div>
      <div id="factors"></div>
    </section>

    <section class="section" id="chat-section">
      <h2>‡πÅ‡∏ä‡∏ï‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤</h2>
      <div id="chatLog" style="height: 150px; overflow-y: auto; border: 1px solid #ccc; padding: 1rem; margin-bottom: 1rem;"></div>
      <input type="text" id="chatInput" placeholder="‡∏ñ‡∏≤‡∏°‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° ‡πÄ‡∏ä‡πà‡∏ô '‡∏Ñ‡∏ß‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà?'">
      <button onclick="sendChat()">‡∏™‡πà‡∏á</button>
      <div id="typing" style="font-style: italic; color: gray; display:none;">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏û‡∏¥‡∏°‡∏û‡πå...</div>
    </section>
  </main>

  <script>
    class CostCalculator {
      constructor(data) {
        this.data = data;
      }

      analyzeMarketFactors() {
        const results = [];
        if (this.data.weather === 'rainy') results.push('‡∏ù‡∏ô‡∏ï‡∏Å: ‡∏Ñ‡∏ß‡∏£‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡πÄ‡∏î‡∏•‡∏¥‡πÄ‡∏ß‡∏≠‡∏£‡∏µ‡πà‡∏´‡∏£‡∏∑‡∏≠‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏´‡∏•‡∏±‡∏á‡∏Ñ‡∏≤');
        if (this.data.weather === 'cool') results.push('‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏´‡∏ô‡∏≤‡∏ß: ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á‡∏™‡∏π‡∏á‡∏Ç‡∏∂‡πâ‡∏ô');
        if (this.data.economy === 'poor') results.push('‡πÄ‡∏®‡∏£‡∏©‡∏ê‡∏Å‡∏¥‡∏à‡πÑ‡∏°‡πà‡∏î‡∏µ: ‡∏Ñ‡∏ß‡∏£‡πÄ‡∏ô‡πâ‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∏‡πâ‡∏°‡∏Ñ‡πà‡∏≤');
        if (this.data.economy === 'good') results.push('‡πÄ‡∏®‡∏£‡∏©‡∏ê‡∏Å‡∏¥‡∏à‡∏î‡∏µ: ‡∏≠‡∏≤‡∏à‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏™‡∏π‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏î‡πâ');
        if (this.data.season === 'cool') results.push('‡∏§‡∏î‡∏π‡∏´‡∏ô‡∏≤‡∏ß: ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏≠‡∏¢‡∏≤‡∏Å‡∏Å‡∏¥‡∏ô‡∏Ç‡∏≠‡∏á‡∏£‡πâ‡∏≠‡∏ô');
        if (this.data.season === 'hot') results.push('‡∏§‡∏î‡∏π‡∏£‡πâ‡∏≠‡∏ô: ‡∏Ñ‡∏ß‡∏£‡∏ó‡∏≥‡πÄ‡∏°‡∏ô‡∏π‡∏™‡∏î‡∏ä‡∏∑‡πà‡∏ô‡∏Ñ‡∏π‡πà‡πÄ‡∏™‡∏£‡∏¥‡∏°');
        if (this.data.politic === 'crisis') results.push('‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏ß‡∏¥‡∏Å‡∏§‡∏ï‡∏¥: ‡∏≠‡∏≤‡∏à‡∏™‡πà‡∏á‡∏ú‡∏•‡∏ï‡πà‡∏≠‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ã‡∏∑‡πâ‡∏≠');
        return results;
      }

      calculate() {
        const pork = (this.data.porkPrice * this.data.porkWeight) / 1000;
        const stick = this.data.stickCost / 100;
        const spice = this.data.spiceCost;
        const labor = (this.data.laborCost * 8) / this.data.dailySticks;
        const fixed = this.data.fixedCost / this.data.dailySticks;
        const base = pork + stick + spice + labor + fixed;

        let demand = 1.0;
        if (this.data.weather === 'cool') demand += 0.1;
        if (this.data.weather === 'rainy') demand -= 0.1;
        if (this.data.economy === 'good') demand += 0.1;
        if (this.data.economy === 'poor') demand -= 0.1;
        if (this.data.politic === 'crisis') demand -= 0.05;

        const price = base * (1 + this.data.targetProfit / 100) * demand;
        return { totalCost: base, price, factors: this.analyzeMarketFactors() };
      }
    }

    function calculatePrice() {
      const data = {
        porkPrice: parseFloat(document.getElementById('porkPrice').value),
        porkWeight: parseFloat(document.getElementById('porkWeight').value),
        stickCost: parseFloat(document.getElementById('stickCost').value),
        spiceCost: parseFloat(document.getElementById('spiceCost').value),
        laborCost: parseFloat(document.getElementById('laborCost').value),
        fixedCost: parseFloat(document.getElementById('fixedCost').value),
        dailySticks: parseFloat(document.getElementById('dailySticks').value),
        targetProfit: parseFloat(document.getElementById('targetProfit').value),
        weather: document.getElementById('weather').value,
        economy: document.getElementById('economy').value,
        season: document.getElementById('season').value,
        politic: document.getElementById('politic').value
      };

      const calculator = new CostCalculator(data);
      const result = calculator.calculate();
      document.getElementById('output').innerText = `‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏ï‡πà‡∏≠‡πÑ‡∏°‡πâ: ${result.totalCost.toFixed(2)} ‡∏ö‡∏≤‡∏ó | ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡∏≤‡∏¢‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥: ${result.price.toFixed(2)} ‡∏ö‡∏≤‡∏ó`;
      document.getElementById('factors').innerHTML = result.factors.map(f => `<div class='factor'>üí° ${f}</div>`).join('');
    }

    const chatPlugins = [
      function basicAdvice(msg) {
        if (msg.includes('‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤') || msg.includes('‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà')) {
          return '‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏•‡∏¥‡∏Å "‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡∏≤‡∏¢" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡∏Ñ‡∏£‡∏±‡∏ö';
        }
        if (msg.includes('‡∏õ‡∏±‡∏à‡∏à‡∏±‡∏¢') || msg.includes('‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå')) {
          return '‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏à‡∏≤‡∏Å‡∏≠‡∏≤‡∏Å‡∏≤‡∏® ‡∏§‡∏î‡∏π‡∏Å‡∏≤‡∏• ‡πÄ‡∏®‡∏£‡∏©‡∏ê‡∏Å‡∏¥‡∏à ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏∑‡∏≠‡∏á ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡πà‡∏ß‡∏¢‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏Ñ‡∏£‡∏±‡∏ö';
        }
        return null;
      }
    ];

    function sendChat() {
      const input = document.getElementById('chatInput');
      const log = document.getElementById('chatLog');
      const typing = document.getElementById('typing');
      const msg = input.value.trim();
      if (!msg) return;
      log.innerHTML += `<div>üßë: ${msg}</div>`;
      input.value = '';
      typing.style.display = 'block';
      setTimeout(() => {
        typing.style.display = 'none';
        let response = '‡∏Ç‡∏≠‡∏≠‡∏†‡∏±‡∏¢ ‡∏â‡∏±‡∏ô‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ô‡∏µ‡πâ‡∏Ñ‡∏£‡∏±‡∏ö';
        for (const plugin of chatPlugins) {
          const result = plugin(msg);
          if (result) {
            response = result;
            break;
          }
        }
        log.innerHTML += `<div>ü§ñ: ${response}</div>`;
        log.scrollTop = log.scrollHeight;
      }, 1000);
    }
  </script>
</body>
</html>
